function isType(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function isFunction(e){return"[object Function]"=={}.toString.call(e)}function request(e,t,r){var a=IS_CSS_RE.test(e),n=doc.createElement(a?"link":"script");if(r){var i=isFunction(r)?r(e):r;i&&(n.charset=i)}addOnload(n,t,a,e),a?(n.rel="stylesheet",n.href=e):(n.async=!0,n.src=e),currentlyAddingScript=n,baseElement?head.insertBefore(n,baseElement):head.appendChild(n),currentlyAddingScript=null}function addOnload(e,t,r,a){function n(){e.onload=e.onerror=e.onreadystatechange=null,r||seajs.data.debug||head.removeChild(e),e=null,t()}var i="onload"in e;return!r||!isOldWebKit&&i?void(i?(e.onload=n,e.onerror=function(){seajs.emit("error",{uri:a,node:e}),n()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&n()}):void setTimeout(function(){pollCss(e,t)},1)}function pollCss(e,t){var r,a=e.sheet;if(isOldWebKit)a&&(r=!0);else if(a)try{a.cssRules&&(r=!0)}catch(e){"NS_ERROR_DOM_SECURITY_ERR"===e.name&&(r=!0)}setTimeout(function(){r?t():pollCss(e,t)},20)}function dirname(e){return e.match(DIRNAME_RE)[0]}function realpath(e){for(e=(e=e.replace(DOT_RE,"/")).replace(MULTI_SLASH_RE,"$1/");e.match(DOUBLE_DOT_RE);)e=e.replace(DOUBLE_DOT_RE,"/");return e}function normalize(e){var t=e.length-1,r=e.charAt(t);return"#"===r?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===r?e:e+".js"}function parseAlias(e){var t=data.alias;return t&&isString(t[e])?t[e]:e}function parsePaths(e){var t,r=data.paths;return r&&(t=e.match(PATHS_RE))&&isString(r[t[1]])&&(e=r[t[1]]+t[2]),e}function parseVars(e){var t=data.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(VARS_RE,function(e,r){return isString(t[r])?t[r]:e})),e}function parseMap(e){var t=data.map,r=e;if(t)for(var a=0,n=t.length;n>a;a++){var i=t[a];if((r=isFunction(i)?i(e)||e:e.replace(i[0],i[1]))!==e)break}return r}function addBase(e,t){var r,a=e.charAt(0);if(ABSOLUTE_RE.test(e))r=e;else if("."===a)r=realpath((t?dirname(t):data.cwd)+e);else if("/"===a){var n=data.cwd.match(ROOT_DIR_RE);r=n?n[0]+e.substring(1):e}else r=data.base+e;return 0===r.indexOf("//")&&(r=location.protocol+r),r}function id2Uri(e,t){if(!e)return"";var r=addBase(e=normalize(e=parseVars(e=parsePaths(e=parseAlias(e)))),t);return r=parseMap(r)}function getScriptAbsoluteSrc(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}var isString=isType("String"),head=(doc=document).head||doc.getElementsByTagName("head")[0]||doc.documentElement,baseElement=head.getElementsByTagName("base")[0],IS_CSS_RE=/\.css(?:\?|$)/i,currentlyAddingScript,interactiveScript,isOldWebKit=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1")<536;seajs.request=request;var data=seajs.data,DIRNAME_RE=/[^?#]*\//,DOT_RE=/\/\.\//g,DOUBLE_DOT_RE=/\/[^/]+\/\.\.\//,MULTI_SLASH_RE=/([^:/])\/+\//g,PATHS_RE=/^([^/:]+)(\/.+)$/,VARS_RE=/{([^{]+)}/g,ABSOLUTE_RE=/^\/\/.|:\//,ROOT_DIR_RE=/^.*?\/\/.*?\//,doc=document,cwd=location.href&&0!==location.href.indexOf("about:")?dirname(location.href):"",scripts=doc.scripts,loaderScript=doc.getElementById("seajsnode")||scripts[scripts.length-1],loaderDir=dirname(getScriptAbsoluteSrc(loaderScript)||cwd);seajs.resolve=id2Uri;
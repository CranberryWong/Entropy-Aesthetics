if(!SWELLNET||SWELLNET===undefined){var SWELLNET={};}
var supportsTouch='ontouchstart'in window||navigator.msMaxTouchPoints;(function($){"use strict";var baseUrl=Drupal.settings.basePath;var defaults={"mainMenuId":"#site-main-menu","surfReportId":"#site-main-menu .nav-surf-reports-and-forecasts","surfcamId":"#site-main-menu .nav-surfcams","newsId":"#site-main-menu .nav-news","datasrc":baseUrl+'menu/json'};var methods={init:function(options){options=$.extend(defaults,options);var o=options;methods.loadTemplates(options);},loadTemplates:function(options){options=$.extend(defaults,options);var o=options;var protocol;if(window.location.protocol!=="https:"){protocol="http://";}else{protocol="https://";}
var surfReportsTpl='<ul class="dropdown-menu yamm-multilevel yamm-surf-reports" id="yamm-surf-reports">';surfReportsTpl+='{{#reports.leaf-nodes}}';surfReportsTpl+='<li class="node1 dropdown-submenu"><a class="heading" href="{{url}}">{{name}}</a>';surfReportsTpl+='<ul class="dropdown-menu">{{#leaf-nodes}}<li class="dropdown-submenu highlight-link node2{{#observed}} premium{{/observed}}"><a class="dropdown-toggle sub-heading"  data-toggle="dropdown" href="{{url}}">{{name}}{{#observed}}<span></span>{{/observed}}<span class="toggle glyphicon glyphicon-plus" aria-hidden="true"></span></a>';surfReportsTpl+='<ul class="dropdown-menu">{{#leaf-nodes}}<li class="dropdown-submenu highlight-link node3{{#observed}} premium{{/observed}}"><a class="dropdown-toggle sub-heading"  data-toggle="dropdown" href="{{url}}">{{name}}{{#observed}}<span></span>{{/observed}}<span class="toggle glyphicon glyphicon-plus" aria-hidden="true"></span></a>';surfReportsTpl+='<ul class="dropdown-menu">{{#leaf-nodes}}<li class="highlight-link node4{{#observed}} premium{{/observed}}"><a href="{{url}}">{{name}}{{#observed}}<span></span>{{/observed}}</a>';surfReportsTpl+='</li>{{/leaf-nodes}}{{^leaf-nodes}}{{/leaf-nodes}}</ul>';surfReportsTpl+='</li>{{/leaf-nodes}}{{^leaf-nodes}}{{/leaf-nodes}}</ul>';surfReportsTpl+='</li>{{/leaf-nodes}}{{^leaf-nodes}}{{/leaf-nodes}}</ul>';surfReportsTpl+='</li>';surfReportsTpl+='{{/reports.leaf-nodes}}';surfReportsTpl+='</ul>';var surfcamsTpl='<ul class="dropdown-menu yamm-surfcams" id="yamm-surfcams"><li class="inner">';surfcamsTpl+='{{#surfcams.leaf-nodes}}';surfcamsTpl+='<div class="node1"><a class="heading" href="{{url}}">{{name}}</a>';surfcamsTpl+='<ul>{{#leaf-nodes}}<li class="highlight-link node2 {{#premium}} premium{{/premium}}"><a href="{{url}}" {{#premium}}title="Premium surfcam for Swellnet PRO subscribers"{{/premium}}>{{name}}{{#premium}}<span></span>{{/premium}}</a>';surfcamsTpl+='</li>{{/leaf-nodes}}{{^leaf-nodes}}{{/leaf-nodes}}</ul>';surfcamsTpl+='</div>';surfcamsTpl+='{{/surfcams.leaf-nodes}}';surfcamsTpl+='</li></ul>';var newsTpl='<ul class="dropdown-menu yamm-news yamm-multilevel" id="yamm-news"><li class="inner">';newsTpl+='{{#news.leaf-nodes}}';newsTpl+='<div class="node1 dropdown-submenu highlight-link"><a data-toggle="dropdown" class="dropdown-toggle heading" href="{{url}}">{{name}}</a>';newsTpl+='<ul class="dropdown-menu">{{#leaf-nodes}}<li class="node2"><a href="{{url}}"><img src="'+protocol+'{{image}}"></a><h4><a href="{{url}}">{{name}}</a></h4><p>{{summary}}</p></li>{{/leaf-nodes}}</ul>';newsTpl+='</div>';newsTpl+='{{/news.leaf-nodes}}';newsTpl+='</li></ul>';$.ajaxSetup({dataType:"jsonp"});$.getJSON(o.datasrc,function(data){var surfReportsHTML=Mustache.to_html(surfReportsTpl,data);$(o.surfReportId).append(surfReportsHTML);var surfcamsHTML=Mustache.to_html(surfcamsTpl,data);$(o.surfcamId).append(surfcamsHTML);var newsHTML=Mustache.to_html(newsTpl,data);$(o.newsId).append(newsHTML);methods.bindUIEvents();});},bindUIEvents:function(options){options=$.extend(defaults,options);var o=options;var timer;var timer2;var is_desktop=false;var dropdown_event='tap singletap click';if(isDesktop()||$(window).width()>=1024){is_desktop=true;dropdown_event='mouseenter';$('.yamm .dropdown-toggle').dropdownHover();}
$(o.surfReportId+", "+o.surfcamId+", "+o.newsId).addClass('dropdown yamm-fw yamm-dropdown');$(o.surfReportId+" > a, "+o.surfcamId+" > a, "+o.newsId+" > a").addClass('dropdown-toggle').attr('data-toggle','dropdown').attr('aria-expanded','false').append('<span class="toggle glyphicon glyphicon-plus" aria-hidden="true"></span>');$(window).resize(function(){if(isDesktop()||$(window).width()>=1024){is_desktop=true;dropdown_event='mouseenter';}
else{is_desktop=false;dropdown_event='tap singletap click';}});$('.yamm .dropdown-submenu ul.dropdown-menu').each(function(){var $this=$(this);if(!$.trim($this.html())){$this.remove();}else{$this.parent().addClass('has-dropdown');}});$('.yamm ul.dropdown-menu').on('click',function(event){event.stopPropagation();});$(".yamm ul.menu > li.dropdown > a.dropdown-toggle").on('doubletap click',function(e){var windowsize=$(window).width();if(windowsize>1024){var location=$(this).attr('href');window.location.href=location;return false;}});console.log("Initialising dropdown menu.");$(o.newsId+' .node1 > ul ').mouseenter(function(e){$(this).parent().siblings().removeClass('on open');$(this).parent().addClass('on open');});$(o.newsId+' .node1 > a').mouseenter(function(e){e.preventDefault();$(this).parent().siblings().removeClass('on open');$(this).parent().addClass('on open');});$(o.surfReportId+' .node1 > a').on('mouseenter',function(e){e.preventDefault();$(this).parent().siblings().removeClass('on open');$(this).parent().addClass('on open');});$(o.surfReportId+' .node1 a.dropdown-toggle').on('tap singletap click',function(e){if(!isDesktop()){if($(this).parent().hasClass('has-dropdown')){e.preventDefault()
e.stopPropagation();}
if($(this).parent().hasClass('on open')){$(this).parent().removeClass('on open');}
else{$(this).parent().siblings().removeClass('on open');$(this).parent().addClass('on open');}}});$(o.surfReportId+' .node1 .dropdown-submenu.has-dropdown li a').on('mouseenter',function(e){if(isDesktop()){$(this).parent().siblings().removeClass('on open');$(this).parent().addClass('on open');}
else{e.preventDefault();e.stopPropagation();}});$(o.surfReportId).on("shown.bs.dropdown mouseenter doubletap",function(event){if(isDesktop()&&!$(o.surfReportId).find('.node1').hasClass('open')){$(o.surfReportId+" .dropdown-submenu:first-child").addClass('init on open');}else{}});$(o.newsId).on("shown.bs.dropdown mouseenter",function(event){if(!$(o.newsId).find('.node1').hasClass('open')){$(o.newsId+" .dropdown-submenu:first-child").addClass('init on open');}});console.log("Dropdown menu completed.");}};function isDesktop(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){return false;}
if($('#desktopTest').is(':hidden')){return false;}
return true;}
$.fn.swellnetDropdownMenu=function(method){var args=arguments;var $this=this;return this.each(function(){if(methods[method]){return methods[method].apply($this,Array.prototype.slice.call(args,1));}else if(typeof method==='object'||!method){return methods.init.apply($this,Array.prototype.slice.call(args,0));}else{$.error('Method '+method+' does not exist on jQuery.plugin');}});};})(jQuery);(function($){"use strict";$('body').swellnetDropdownMenu();})(jQuery);
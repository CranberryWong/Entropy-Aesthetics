var CS_CONF={"projectId":597,"status":1,"hostnames":["showroomprive.com","showroomprive.net"],"crossDomainTracking":0,"consentRequired":1,"collectHtml":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":20,"recordingRate":1,"replayRecordingRate":0,"validationRate":10,"jquery":false,"lastTrackingDraw":1507048150,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","ed":"l.contentsquare.net/log/web"};!function(){"use strict";function get(){return VERSION}function getRequestParameters(){return{v:VERSION}}function getUpToDateExlusion(a,b){return a.filter(function(a){return a.exclusion===b})[0]}function getUpToDateVisitor(a,b){return a.filter(function(a){return isVisitorWithDraw(a,b)}).sort(visitsCountAndPageNumberDescending)[0]}function isVisitorWithDraw(a,b){return a.visitor&&a.visitor.appliedTrackingDraw===b}function visitsCountAndPageNumberDescending(a,b){return b.visitor.visitsCount!==a.visitor.visitsCount?b.visitor.visitsCount-a.visitor.visitsCount:a.session?b.session?b.session.pageNumber-a.session.pageNumber:-1:1}function nowInSeconds(){return Math.floor(Date.now()/1e3)}function doNothing(){}function endsWith(a,b){return-1!==a.indexOf(b,a.length-b.length)}function isLocalStorageAvailable(){var a="CSLocalStorageTest";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(a){return!1}}function isNumber(a){return"number"==typeof a&&!isNaN(a)}function isInt(a){return a===parseInt(a,10)}function isString(a){return"string"==typeof a||a instanceof String}function isDefined(a){return void 0!==a}function identity(a){return a}function isPositiveInt(a){return isInt(a)&&a>=0}function isStrictlyPositiveInt(a){return isInt(a)&&a>=1}function isNotEmptyString(a){return String(a).length>0&&isString(a)}function isValidInt(a,b,c){return isInt(a)&&a>=b&&a<=c}function isValidUrl(a){return"string"==typeof a}function isArray(a){return a instanceof Array}function isObject(a){return"object"==typeof a}function isDefinedAndNotNull(a){return isDefined(a)&&null!==a}function isEmptyObject(a){var b;for(b in a)return!1;return!0}function isValidCustomVar(a){if(!a)return!0;for(var b in a)if(a.hasOwnProperty(b)){var c=parseInt(b,10),d=a[b],e=d[0],f=d[1];if(!isValidInt(c,1,20)||e.length>CUSTOM_VAR_KEY_MAX_LENGTH||f.length>CUSTOM_VAR_VALUE_MAX_LENGTH)return!1}return!0}function getValidCustomVars(a){for(var b in a)if(a.hasOwnProperty(b)){var c=parseInt(b,10),d=a[b],e=d[0],f=d[1];(!isValidInt(c,1,20)||e.length>CUSTOM_VAR_KEY_MAX_LENGTH||f.length>CUSTOM_VAR_VALUE_MAX_LENGTH)&&delete a[b]}var g=isEmptyObject(a)?[]:a;return encodeURIComponent(window.JSON.stringify(g))}function isValidEvent(a){for(var b=0;b<a.length;b++){var c=a[b],d=c[0],e=c[1],f=c[2],g=c[3];if(!isPositiveInt(e)||isInt(f)&&!isPositiveInt(f)||isInt(g)&&!isPositiveInt(g)||!isValidInt(d,0,13))return!1}return!0}function getFormattedEvent(a){return encodeURIComponent(window.UXAnalytics.LZString.compressToBase64(window.JSON.stringify(a)))}function getErrorMessage(a,b,c){return"Invalid parameter for "+a+": "+b+"="+c}function initNbRenewSessionTries(){nbRenewSessionTries=0}function renewSessionIfNeeded(){if(nbRenewSessionTries>=MAX_NB_RENEW_SESSION_TRIES)throw Error("Impossible to renew session, [VISITOR] "+window.JSON.stringify(VisitorStorage.get()));var a=CookieCache.getCookie(SESSION_KEY);null!==a&&SessionStorage.isValidSessionString(a)||(nbRenewSessionTries+=1,window._uxa.push(["trackPageview"]))}function associateKeys(a,b){toStorage[a]=b,toRequestParameter[b]=a}function withStorageKeys(a){var b={};return Object.keys(a).map(function(c){toStorage[c]?b[toStorage[c]]=a[c]:b[c]=a[c]}),b}function withRequestParameterKeys(a){var b={};return Object.keys(a).map(function(c){toRequestParameter[c]?b[toRequestParameter[c]]=a[c]:b[c]=a[c]}),b}function encodeValues(a){return Object.keys(a).forEach(function(b){return a[b]=window.encodeURIComponent(a[b])}),a}function serializeTests(a){return window.JSON.stringify(a.map(function(a){return[a.id,a.version]}))}function arrayFrom(a){return Array.prototype.slice.call(a)}function bindHandler(a){a.boundElement.addEventListener(a.type,a.listener,a.useCapture)}function unbindHandler(a){a.boundElement.removeEventListener(a.type,a.listener,a.useCapture)}function uxa(configuration,cookieDomain,logger){var commands=new ExternalCommands(logger),lifeCycleEvents=new LifeCycleEvents,storage=storageFactory(logger),consentStorage=new ConsentStorage(cookieDomain),consentService=new ConsentService(configuration,consentStorage,lifeCycleEvents,cookieDomain),consentModule=new ConsentModule(commands,consentService),sessionStorage=new SessionStorage(cookieDomain),sessionManager=new SessionManager(configuration,sessionStorage,logger,cookieDomain),visitorManager=new VisitorManager(configuration,sessionManager,cookieDomain);logger.setContext(visitorManager,sessionManager);var selector=new EventTargetSelector(PathComputation),recording=new Recording(visitorManager,sessionManager,configuration,lifeCycleEvents,logger,selector,consentService),testContext=new TestContext,pageView=new PageView,allowSubdomainsChange=new AllowSubdomainsChange(configuration,visitorManager,sessionManager),outdatedState=new OutdatedState(configuration,visitorManager,cookieDomain),currentDomainState=new CurrentDomainState(visitorManager,sessionManager,configuration,cookieDomain),xdframeOpener=new XdframeOpener(logger),otherDomainStates=new OtherDomainStates(xdframeOpener,logger),crossDomainManager=new CrossDomainManager(configuration,currentDomainState,otherDomainStates),trackingState=new TrackingState(configuration,visitorManager,outdatedState,allowSubdomainsChange,crossDomainManager,cookieDomain),io=ioFactory(visitorManager,sessionManager,configuration,logger),analysisEventsTracker=new AnalysisEventsTracker(logger,sessionManager,PathComputation,selector),htmlPage=new HtmlPage(io,pageView,sessionManager,configuration,logger,consentService),maxScrollRateTracker=new MaxScrollRateTracker(logger),events=new Events(storage,io,sessionManager,pageView,analysisEventsTracker,maxScrollRateTracker),referrer=new Referrer(cookieDomain),customVariables=new CustomVariables(cookieDomain),optout=new Optout(cookieDomain);trackingState.compute(function(a){if(a){trackingFactory(io,events,testContext,visitorManager,sessionManager,referrer,pageView,htmlPage,lifeCycleEvents,logger,maxScrollRateTracker,customVariables,recording,commands,configuration,optout,sessionStorage,consentModule,consentService,cookieDomain).start()}else{new Exclusion(lifeCycleEvents,commands,optout,consentModule,cookieDomain).start()}});var exports={};return eval("var module = null;"+stringifiedLZString+"exports.LZString = LZString;"),exports}function overrideOptions(a){window._uxa&&window._uxa.forEach&&window._uxa.forEach(function(b){var c=b[0],d=b.slice(1);if("setOption"===c){var e=d[0],f=d[1];a.setOverridableField(e,f)}})}function isBrowserSupported(){return"pageXOffset"in window&&"pageYOffset"in window&&window.JSON&&window.JSON.parse&&window.JSON.stringify&&window.addEventListener&&window.removeEventListener&&window.Node&&Array.prototype.filter&&Array.prototype.forEach&&document.querySelectorAll&&Date.now&&Object.keys}function initJQuery(){window.jQuery_cs=UXUtils.getJQueryInstance(),window.jQuery_cs&&window.CS_CONF.jquery&&window.jQuery_cs.noConflict(!0)}var PathComputation;!function(a){function b(a){return!!a&&"localName"in a&&"getAttribute"in a&&"hasAttribute"in a&&"parentNode"in a}function c(a,c){if(void 0===c&&(c=document),a&&"jquery"in a&&1===a.length&&(a=a[0]),a===c)return"";if(!b(a))throw a+" is not a valid element";return d(a,c)}function d(a,b){if(!a||!a.localName)return"";var c=a.localName.toLowerCase(),d=a.getAttribute("id");return e(a,b)?g(a,c,b):i(a,d)?m(a,c,b):k(d,b)?l(c,d):m(a,c,b)}function e(a,b){var c=h(a);return null!==c&&f(c,b)}function f(a,b){return""===a||a.match(/^[\w-]+$/)&&p(q,a,b)}function g(a,b,c){var d=h(a);return""===d?m(a,b,c):b+"["+q+'="'+d+'"]'}function h(a){return a.getAttribute(q)}function i(a,b){return a.hasAttribute(r)||j(b)}function j(a){return a&&a.match(/\d{4}/)}function k(a,b){return a&&p("id",a,b)}function l(a,b){return a+"#"+b}function m(a,b,c){var e=n(a),f=o(e,a),g=d(e,c);return(g=g?g+">":"")+b+":eq("+f+")"}function n(a){var b=a.parentNode;return b&&b.nodeType!==u?b:null}function o(a,b){if(!a)return-1;if(a.nodeType===t)return 0;var c=[].slice.call(a.childNodes);return c=c.filter(function(a){return a.nodeType===s&&a.localName.toLowerCase()===b.localName.toLowerCase()}),c.indexOf(b)}function p(a,b,c){return 1===c.querySelectorAll("["+a+'="'+b+'"]').length}var q="data-cs-override-id",r="data-cs-dynamic-id",s=1,t=9,u=11;a.isValidElement=b,a.getElementPath=c}(PathComputation||(PathComputation={})),window.CSPathComputation=window.CSPathComputation||PathComputation;var UXUtils=function(){function a(){return Math.floor(1e4*Math.random())/100}function b(b){return a()>b}function c(b){return a()<b}function d(){return window.location}function e(){return navigator.userAgent}function f(a){var b=a.match(/(chrome|opera|firefox|msie|trident|AppleWebKit)\/?\s*(\d+)/i)||[];return{browser:b[1],version:b[2]}}function g(a,b,c,d,e,f){return document.cookie=h(a,b,c,d,e,f),!0}function h(a,b,c,d,e,f){if(d&&!(d instanceof Date)){if(isNaN(d))throw"Bad type given for expires";d=new Date(Date.now()+parseInt(d))}var g=a+"="+encodeURIComponent(b)+(d?";expires="+d.toUTCString():"")+";path="+(e||"/");return void 0!==c&&null!==c&&i(c)&&(g+=";domain="+c),g+=f?";secure":""}function i(a){return a.indexOf(".")>-1}function j(a,b){k(a)&&g(a,"",b,-1,"/")}function k(a){var b=new RegExp("(^|;)[ ]*"+a+"=([^;]*)"),c=b.exec(document.cookie);return c?decodeURIComponent(c[2]):null}function l(a){a=a||[];for(var b=[],c=0;c<a.length;c++)b.push(k(a[c]));return b}function m(a){return a?n():void 0}function n(){for(var a=d().hostname.split("."),b=a.pop(),c="_cs_"+(new Date).getTime();a.length&&null===k(c);)b=[a.pop(),b].join("."),g(c,c,b);return j(c,b),b}function o(a){var b=this.getWindowLocation().hash.match(new RegExp(a+"=([^&]*)"));return b?b[1]:null}function p(a){return this.getWindowLocation().hash.indexOf(a)>-1}function q(a){var b=document.createElement("script");b.type="text/javascript",b.src=a,document.head.appendChild(b)}function r(){var a="";try{a=window.top.document.referrer}catch(b){if(window.parent)try{a=window.parent.document.referrer}catch(b){a=""}}return""===a&&(a=document.referrer),a}function s(a,b,d,e){function f(){return i&&k<j}function g(c,e){var f=new Image(1,1),g=Date.now(),h=(Math.random()+"").slice(2,8);f.src="https://"+d+"?d="+g+"&r="+h+"&a="+a+"&v="+b+"&l="+(e||"MESSAGE")+"&s="+encodeURIComponent(c)+"&u="+encodeURIComponent(UXUtils.getUserAgent())+"&p="+encodeURIComponent(UXUtils.getWindowLocation()),f.onload=function(){}}var h=0===e||e?e:10,i=c(h),j=5,k=0;this.logMessage=function(a,b){f()&&(g(a,b),k++)},this.logError=function(a,b,c){b=t(a)+(b?"\n"+b:""),this.logMessage(b,c||"ERROR")}}function t(a){return(a.message?a.message:a.toString())+" "+(a.stack?a.stack:a.toString())}function u(){return void 0!==window.jQuery?window.jQuery:void 0!==window.$&&void 0!==window.$.fn&&void 0!==window.$.fn.jquery?window.$:null}function v(){return Date.now}return{getRandomPercentage:a,randGtPercent:b,randLtPercent:c,getWindowLocation:d,getCookieDomain:m,getUserAgent:e,getBrowserInfo:f,setCookie:g,buildNewCookieString:h,deleteCookie:j,getCookie:k,getCookies:l,getRootDomain:n,getParameterValue:o,urlHasParameter:p,addScriptToDocument:q,getReferrer:r,Logger:s,getErrorMessageAndStack:t,getJQueryInstance:u,isBrowserSupported:v,isValidDomain:i}}(),VERSION="5.11.0",Version=Object.freeze({get:get,getRequestParameters:getRequestParameters}),Logger=function(){function a(a){this.APP_NAME="uxa",this.WARNING_LEVEL="WARNING",this.logger=new UXUtils.Logger(this.APP_NAME,get(),a.errorDomain,a.validationRate)}return a.prototype.logMessage=function(a){this.logger.logMessage(a+"\n"+this.getContext(),this.WARNING_LEVEL)},a.prototype.logError=function(a){this.tryToExecute("logError",function(){throw new Error(a)})()},a.prototype.tryToExecute=function(a,b){var c=this;return function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];try{return b.apply(void 0,d)}catch(b){try{c.logger.logError(b,"function "+a+", "+c.getContext())}catch(a){}}}},a.prototype.setContext=function(a,b){this.visitorManager=a,this.sessionManager=b},a.prototype.getContext=function(){if(!this.visitorManager||!this.visitorManager.doesVisitorExist())return"No context";var a=this.visitorManager.getVisitor(),b=this.sessionManager.getSession(),c={userId:a.id,sessionNumber:a.visitsCount,pageNumber:null!==b?b.pageNumber:null};return window.JSON.stringify(c)},a}(),CSFrameCommunication=window.CSFrameCommunication||function(){function a(){return window!==k&&window.addEventListener}function b(a){return a+"?cb="+(new Date).getTime()}function c(a,b){var c=document.createElement("script");c.type="text/javascript",c.async=!0;var d=j.replace(/^https?:/,"");c.src=d+"/"+l+"/"+a,c.onload=b,document.getElementsByTagName("head")[0].appendChild(c)}function d(){e(m.ping)}function e(a){window.addEventListener("message",a,!1)}function f(a){window.removeEventListener("message",a,!1)}function g(a){return function(b){b.origin===j&&a(b)}}function h(a){j&&k.postMessage(a,j)}function i(a){return/^https?:\/\/.*\.content-square\.fr$/.test(a)}var j,k=window.opener||window.parent,l="tag",m={ping:function(a){"ping"===a.data&&i(a.origin)&&(j=a.origin,f(m.ping),e(m.insertMessageScript),c(b("jquery.js"),function(){window.jQuery_cs=window.jQuery.noConflict(!0),c(b("utils.js"))}))},insertMessageScript:g(function(a){var b=a.data;"string"==typeof b&&"ping"!==b&&(f(m.insertMessageScript),c(b))})};return{isActivable:a,waitForConnection:d,listen:e,removeListener:f,secureListener:g,post:h,isAuthorizedDomain:i}}(),UpToDateStateSelection;!function(a){function b(a,b){var c=getUpToDateExlusion(a,b),d=getUpToDateVisitor(a,b);return c||d}a.select=b}(UpToDateStateSelection||(UpToDateStateSelection={}));var CrossDomainManager=function(){function a(a,b,c){this.configuration=a,this.currentDomainState=b,this.otherDomainStates=c}return a.prototype.applyUpToDate=function(a){var b=this;this.otherDomainStates.retrieve(this.configuration.hostnames,function(c){var d=[b.currentDomainState.get()].concat(c),e=UpToDateStateSelection.select(d,b.configuration.lastTrackingDraw);b.currentDomainState.apply(e),a()})},a}(),CUSTOM_VAR_SESSION_COOKIE="_cs_cvars",CvarsStorage;!function(a){function b(){return window.JSON.parse(d())}function c(a,b){e(window.JSON.stringify(a),b)}function d(){return UXUtils.getCookie(CUSTOM_VAR_SESSION_COOKIE)}function e(a,b){UXUtils.setCookie(CUSTOM_VAR_SESSION_COOKIE,a,b)}function f(a){UXUtils.deleteCookie(CUSTOM_VAR_SESSION_COOKIE,a)}function g(a){return"string"==typeof a}a.get=b,a.set=c,a.getRaw=d,a.setRaw=e,a.remove=f,a.isValidCustomVarString=g}(CvarsStorage||(CvarsStorage={}));var EXCLUSION_COOKIE_TIMEOUT=2592e6,EXCLUSION_KEY="_cs_ex",VALID_EXCLUSION_FORMAT=/^[0-9]+$/,ExclusionManager;!function(a){function b(a,b){UXUtils.setCookie(EXCLUSION_KEY,a,b,EXCLUSION_COOKIE_TIMEOUT)}function c(a){UXUtils.deleteCookie(EXCLUSION_KEY,a)}function d(){return Number(UXUtils.getCookie(EXCLUSION_KEY))}function e(){return f()||g()}function f(){return 0!==d()}function g(){return UXUtils.getWindowLocation().href.indexOf(EXCLUSION_KEY)>0}function h(a){return VALID_EXCLUSION_FORMAT.test(a)}a.exclude=b,a.removeExclusion=c,a.getAppliedTrackingDraw=d,a.isExcluded=e,a.isValidExclusionString=h}(ExclusionManager||(ExclusionManager={}));var CurrentDomainState=function(){function a(a,b,c,d){this.visitorManager=a,this.sessionManager=b,this.configuration=c,this.cookieDomain=d}return a.prototype.get=function(){return{exclusion:ExclusionManager.getAppliedTrackingDraw(),visitor:this.visitorManager.getVisitor(),session:this.sessionManager.getSession(),cvars:CvarsStorage.getRaw()}},a.prototype.apply=function(a){a&&(a.exclusion?this.exclude():this.include(a))},a.prototype.exclude=function(){ExclusionManager.exclude(this.configuration.lastTrackingDraw,this.cookieDomain),this.visitorManager.removeCurrentVisitor(),this.sessionManager.removeCurrentSession(),CvarsStorage.remove(this.cookieDomain)},a.prototype.include=function(a){ExclusionManager.removeExclusion(this.cookieDomain),this.visitorManager.setVisitor(a.visitor),a.session?this.sessionManager.setSession(a.session):this.sessionManager.removeCurrentSession(),a.cvars?CvarsStorage.setRaw(a.cvars,this.cookieDomain):CvarsStorage.remove(this.cookieDomain)},a}(),VISITOR_KEY="_cs_id",VISITOR_COOKIE_VALUE_DELIMITER=".",VALID_VISITOR_FORMAT=/^([a-z0-9\-])+(\.[0-9]+){6}$/,VisitorStorage;!function(a){function b(){var a=UXUtils.getCookie(VISITOR_KEY);return a?f(a):null}function c(a,b){var c=e(a),d=new Date(a.expires);UXUtils.setCookie(VISITOR_KEY,c,b,d)}function d(a){UXUtils.deleteCookie(VISITOR_KEY,a)}function e(a){return[a.id,a.creationTimestamp,a.visitsCount,a.hitTimestamp,a.lastVisitTimestamp,a.appliedTrackingDraw,a.expires].join(VISITOR_COOKIE_VALUE_DELIMITER)}function f(a){var b=a.split(VISITOR_COOKIE_VALUE_DELIMITER),c=b[0],d=b.slice(1),e=d.map(Number);return{id:c,creationTimestamp:e[0],visitsCount:e[1],hitTimestamp:e[2],lastVisitTimestamp:e[3],appliedTrackingDraw:e[4],expires:e[5]}}function g(a){return VALID_VISITOR_FORMAT.test(a)}a.get=b,a.set=c,a.remove=d,a.fromString=f,a.isValidVisitorString=g}(VisitorStorage||(VisitorStorage={}));var CookieCache;!function(a){function b(a){var b=f[a];return b||UXUtils.getCookie(a)}function c(a,b,c,e){UXUtils.setCookie(a,b,c,e),f[a]=b,d(a,e)}function d(a,b){clearTimeout(g[a]),g[a]=setTimeout(function(){delete f[a]},b)}function e(a,b){UXUtils.deleteCookie(a,b),clearTimeout(g[a]),delete f[a]}var f={},g={};a.getCookie=b,a.setCookie=c,a.deleteCookie=e}(CookieCache||(CookieCache={}));var SESSION_KEY="_cs_s",VALID_SESSION_FORMAT=/^\d+\.[012]$/,SESSION_COOKIE_VALUE_DELIMITER=".",THIRTY_MINUTES=18e5,SessionStorage=function(){function a(a){this.cookieDomain=a}return a.prototype.get=function(b){var c=this.getRawSession(b);return this.isValid(c)?a.fromString(c):null},a.prototype.getRawSession=function(a){return a?UXUtils.getCookie(SESSION_KEY):CookieCache.getCookie(SESSION_KEY)},a.prototype.set=function(a){CookieCache.setCookie(SESSION_KEY,this.toString(a),this.cookieDomain,THIRTY_MINUTES)},a.prototype.remove=function(a){CookieCache.deleteCookie(SESSION_KEY,a)},a.prototype.isValid=function(b){return null!==b&&a.isValidSessionString(b)},a.prototype.toString=function(a){return[a.pageNumber,a.recordingState].join(SESSION_COOKIE_VALUE_DELIMITER)},a.fromString=function(a){var b=a.split(SESSION_COOKIE_VALUE_DELIMITER),c=b[0];return{recordingState:b[1],pageNumber:parseInt(c,10)}},a.isValidSessionString=function(a){return VALID_SESSION_FORMAT.test(a)},a}(),DomainState;!function(a){function b(a){return{exclusion:Number(a._cs_ex),visitor:a._cs_id?VisitorStorage.fromString(a._cs_id):null,session:a._cs_s?SessionStorage.fromString(a._cs_s):null,cvars:a._cs_cvars}}a.fromRaw=b}(DomainState||(DomainState={}));var RawDomainState;!function(a){function b(a){return(!a._cs_id||VisitorStorage.isValidVisitorString(a._cs_id))&&(!a._cs_s||SessionStorage.isValidSessionString(a._cs_s))&&(!a._cs_ex||ExclusionManager.isValidExclusionString(a._cs_ex))&&(!a._cs_cvars||CvarsStorage.isValidCustomVarString(a._cs_cvars))}a.isValid=b}(RawDomainState||(RawDomainState={}));var THIRTEEN_MONTHS=34164e6,XDFRAME_VERSION="1",OtherDomainStates=function(){function a(a,b){this.xdframeOpener=a,this.logger=b}return a.prototype.retrieve=function(b,c){var d=this;this.callback=c,this.retrievedStates=[],this.xdframeOrigins=b.filter(a.isNotCurrentHostname).map(a.getXdframeOrigin),this.xdframeOpener.onMessage(function(a){d.handleXdframeMessage(a)}),this.xdframeOpener.onTimeout(function(){d.handleTimeout()}),this.xdframeOpener.start(),this.xdframeOrigins.map(a.getXdframeUrl).forEach(function(a){return d.xdframeOpener.open(a)})},a.prototype.handleXdframeMessage=function(a){if(this.isXdframeMessage(a)){var b=a.data;if(!RawDomainState.isValid(b))throw this.xdframeOpener.stop(),"Invalid domain state: "+JSON.stringify(a.data)+" from "+a.origin;this.retrievedStates.push(b)}this.allMessagesAreIn()&&(this.xdframeOpener.stop(),this.callback(this.retrievedStates.map(DomainState.fromRaw)))},a.prototype.handleTimeout=function(){this.logger.logMessage("xdframe: all messages not received")},a.prototype.isXdframeMessage=function(a){return this.xdframeOrigins.indexOf(a.origin)>-1},a.prototype.allMessagesAreIn=function(){return this.retrievedStates.length===this.xdframeOrigins.length},a.isNotCurrentHostname=function(a){return!endsWith(UXUtils.getWindowLocation().hostname,a)},a.getXdframeOrigin=function(a){return"https://csxd."+a},a.getXdframeUrl=function(a){return a+"/xdframe-"+XDFRAME_VERSION+".html"},a}(),XdframeOpener=function(){function a(a){var b=this;this.logger=a,this.ALL_MESSAGES_RECEIVED_TIMEOUT=3e3,this.scopedHandleMessage=function(a){b.handleMessage(a)}}return a.prototype.onMessage=function(a){this.onMessageCallback=a},a.prototype.onTimeout=function(a){this.onTimeoutCallback=a},a.prototype.start=function(){var a=this;window.addEventListener("message",this.scopedHandleMessage),this.timeout=window.setTimeout(function(){a.onTimeoutCallback()},this.ALL_MESSAGES_RECEIVED_TIMEOUT)},a.prototype.open=function(a){var b=document.createElement("iframe");b.src=a,b.style.display="none",document.body.appendChild(b)},a.prototype.stop=function(){window.removeEventListener("message",this.scopedHandleMessage),window.clearTimeout(this.timeout),this.onMessageCallback=doNothing,this.onTimeoutCallback=doNothing},a.prototype.handleMessage=function(a){var b=this;this.logger.tryToExecute("XdframeMessage",function(){b.onMessageCallback(a)})()},a}(),storageFactory=function(a){function b(a){var b=String(Math.random()).slice(2,8),c=[E,H,b,a].join(F);return K[b]={id:b,name:a},K[b][I]={},K[b][J]={},h(K[b],c)}function c(a){var b=[];for(var c in K)if(K.hasOwnProperty(c)){var d=K[c];if(d.name===a){var e=[E,H,c,a].join(F);b.push(h(d,e))}}return b}function d(a){localStorage.setItem(G,a)}function e(){return localStorage.getItem(G)}function f(){var a=e();if(!a)return d(L),!1;var b=a!==L;return b&&(L=a),b}function g(){return!1}function h(a,b){function c(b){return a[I][b]={},f(b)}function d(b){return a[J][b]=[],g(b)}function e(){return a.id}function f(c){var d=a[I][c],e=[b,I,c].join(F);return d?i(d,e):void 0}function g(c){var d=a[J][c],e=[b,J,c].join(F);return d?n(d,e):void 0}function h(){var b=a[I];for(var c in b)b.hasOwnProperty(c)&&f(c).deleteAll();var d=a[J];for(var e in d)d.hasOwnProperty(e)&&g(e).clear()}return{createMap:c,createQueue:d,getId:e,getMap:f,getQueue:g,empty:h}}function i(a,b){function c(c,d){z(a,c,d,b)}function d(a){for(var b in a)a.hasOwnProperty(b)&&c(b,a[b])}function e(b){return a[b]}function f(){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function g(c){B(a,c,b)}function h(){for(var b in a)a.hasOwnProperty(b)&&g(b)}return{setItem:c,setItemsFromObject:d,getItem:e,getAll:f,deleteItem:g,deleteAll:h}}function j(a,b,c){a[b]=c}function k(a,b,c,d){localStorage.setItem(d+F+b,window.JSON.stringify(c)),j(a,b,c)}function l(a,b){delete a[b]}function m(a,b,c){localStorage.removeItem(c+F+b),l(a,b)}function n(a,b){function c(c){A(a,c,b)}function d(){for(var b=[],c=0;c<a.length;c+=1)void 0!==a[c]&&b.push(a[c]);return b}function e(){return a.length}function f(){return C(a,b)}function g(){for(var b=a.length,c=0;c<b;c+=1)f()}return{push:c,getAll:d,length:e,pop:f,clear:g}}function o(a,b){a.push(b)}function p(a,b,c){var d=a.length;localStorage.setItem(c+F+d,window.JSON.stringify(b)),o(a,b)}function q(a){return a.pop()}function r(a,b){var c=a.length-1;return localStorage.removeItem(b+F+c),q(a)}function s(a){return a[0]===E&&a[1]===H}function t(a,b,c){var d=b[2],e=b[3],f=b[4],g=b[5],h=b[6];w(d,e);var i=K[d];x(i,f,g);var j=i[f][g],k=u(a);null!==k?j[h]=k:c.push(a),f===J&&Number(h)>j.maxIndex&&(j.maxIndex=Number(h))}function u(a){var b=localStorage.getItem(a);if(null===b||"null"===b)return v(a,b),null;try{return window.JSON.parse(b)}catch(c){return v(a,b),null}}function v(b,c){a.logError("Invalid item in localStorage. (key:"+b+"; value:"+JSON.stringify(c)+")")}function w(a,b){if(!K[a]){var c={id:a,name:b};c[I]={},c[J]={},K[a]=c}}function x(a,b,c){if(!a[b][c]){var d={};b===J&&(d.maxIndex=0),a[b][c]=d}}function y(){for(var a in K)if(K.hasOwnProperty(a)){var b=K[a],c=b[J];for(var d in c)if(c.hasOwnProperty(d)){for(var e=b[J][d],f=[],g=e.maxIndex+1,h=0;h<g;h+=1)f.push(e[h]);b[J][d]=f}}}var z,A,B,C,D,E="CSStorageData",F=":",G=E+F+"timeStamp",H="stores",I="maps",J="queues",K={},L=""+(new Date).getTime();return isLocalStorageAvailable()?(!function(){for(var a=[],b=localStorage.length,c=0;c<b;c+=1){var d=localStorage.key(c),e=d.split(F);s(e)&&t(d,e,a)}a.forEach(function(a){localStorage.removeItem(a)}),y()}(),d(L),z=k,A=p,B=m,C=r,D=f):(z=j,A=o,B=l,C=q,D=g),{createStore:b,getAllStoresByName:c,hasBeenRecovered:D}},CUSTOM_VAR_KEY_MAX_LENGTH=20,CUSTOM_VAR_VALUE_MAX_LENGTH=255,CustomVariables=function(){function a(a){this.cookieDomain=a,this.customVariablesPage={}}return a.prototype.set=function(a,b,c,d){var e,f;if(a>0&&validationSchema.isDefinedAndNotNull(b)&&validationSchema.isDefinedAndNotNull(c)){var g=validationSchema.isString(b)?b:String(b),h=validationSchema.isString(c)?c:String(c);if(e=[g.slice(0,CUSTOM_VAR_KEY_MAX_LENGTH),h.slice(0,CUSTOM_VAR_VALUE_MAX_LENGTH)],f=""!==c,!validationSchema.isDefined(d)||"visit"===d||2===d){var i=this.getCustomVariablesSession();f?i[a]=e:delete i[a],CvarsStorage.set(i,this.cookieDomain)}validationSchema.isDefined(d)&&"page"!==d&&3!==d||(f?this.customVariablesPage[a]=e:delete this.customVariablesPage[a])}},a.prototype.addParams=function(a){var b=this.getCustomVariablesSession();for(var c in this.customVariablesPage)this.customVariablesPage.hasOwnProperty(c)&&(b[c]=this.customVariablesPage[c]);window.JSON.stringify(b).length>2&&(a.CUSTOM_VAR_SESSION=b,a.CUSTOM_VAR_USER=b,this.customVariablesPage&&window.JSON.stringify(this.customVariablesPage).length>2&&(a.CUSTOM_VAR_PAGE=this.customVariablesPage))},a.prototype.getCustomVariablesSession=function(){var a=CvarsStorage.get();return null!==a&&validationSchema.isObject(a)?a:{}},a.prototype.onOptout=function(){CvarsStorage.remove(this.cookieDomain)},a}(),validationSchema={isString:isString,isNotEmptyString:isNotEmptyString,isObject:isObject,isDefined:isDefined,isDefinedAndNotNull:isDefinedAndNotNull,CACHE_BUSTING:{getErrorMessage:getErrorMessage,getFormattedValue:identity,paramName:"r",isValid:function(a){return isPositiveInt(parseInt(a,10))&&6===a.length},isValidType:isString},PROJECT_ID:{getErrorMessage:getErrorMessage,getFormattedValue:identity,paramName:"pid",isValid:isStrictlyPositiveInt,isValidType:isInt},EVENT:{getErrorMessage:getErrorMessage,getFormattedValue:getFormattedEvent,paramName:"e",isValid:isValidEvent,isValidType:isArray},PAGE_URL:{getErrorMessage:getErrorMessage,getFormattedValue:encodeURIComponent,paramName:"url",isValid:isValidUrl,isValidType:isString},PAGE_CONTENT:{getErrorMessage:getErrorMessage,getFormattedValue:encodeURIComponent,paramName:"content",isValid:isString,isValidType:isString},CUSTOM_VAR_PAGE:{getErrorMessage:getErrorMessage,getFormattedValue:getValidCustomVars,paramName:"cvarp",isValid:isValidCustomVar,isValidType:isObject},CUSTOM_VAR_SESSION:{getErrorMessage:getErrorMessage,getFormattedValue:getValidCustomVars,paramName:"cvars",isValid:isValidCustomVar,isValidType:isObject},CUSTOM_VAR_USER:{getErrorMessage:getErrorMessage,getFormattedValue:getValidCustomVars,paramName:"cvaru",isValid:isValidCustomVar,isValidType:isObject},LANGUAGE:{getErrorMessage:getErrorMessage,getFormattedValue:identity,paramName:"la",isValid:isString,isValidType:isString}},__assign=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},ioFactory=function(a,b,c,d){function e(a){var b=new Image(1,1);b.onload=doNothing,b.onerror=doNothing,b.src=""+c.getTrackerUri()+a}function f(a,b){var c=new Date;e("/"+b+"?"+a),n=c.getTime()+o}function g(){return __assign({PROJECT_ID:c.projectId,CACHE_BUSTING:(""+Math.random()).slice(2,8)},a.getRequestParameters(),b.getRequestParameters())}function h(){return __assign({pid:""+c.projectId,r:(""+Math.random()).slice(2,8)},a.getRequestParameters(),b.getRequestParameters())}function i(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var d=validationSchema[c];if(!d)continue;var e=a[c],f=d.paramName;d.isValidType(e)?d.isValid(e)||b.push(d.getErrorMessage(c,f,e)):b.push("Breaking TypeError: "+d.getErrorMessage(c,f,e))}return b}function j(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var d=validationSchema[c],e=a[c];if(d){var f=d.paramName;b.push(f+"="+d.getFormattedValue(e))}else b.push(c+"="+e)}return b.push(k()),b.join("&")}function k(){return"v="+getRequestParameters().v}function l(a,b){if(!ExclusionManager.isExcluded()){var c=i(a);c.length>0&&d.logMessage("["+b+"] "+c);var e=j(a);"page"!==b?f(e,b):m(e,"/page")}}function m(a,b){if(null!==window.XMLHttpRequest){var d=new XMLHttpRequest;d.open("POST",""+c.getTrackerUri()+b,!0),d.setRequestHeader("Access-Control-Expose-Headers","Content-compression"),d.setRequestHeader("Content-type","text/plain; charset=UTF-8"),d.setRequestHeader("Content-compression","LZString"),d.onreadystatechange=function(){},d.send(a)}}var n,o=400;return{sendValidRequest:l,getBaseParams:g,getRequestParameters:h}},MAX_NB_RENEW_SESSION_TRIES=5,nbRenewSessionTries,toStorage={},toRequestParameter={};associateKeys("pn","PAGE_NUMBER"),associateKeys("hd","HIT_DATE"),associateKeys("lhd","LAST_HIT_DATE"),associateKeys("lv","LAST_VISIT"),associateKeys("PROJECT_ID","PROJECT_ID"),associateKeys("re","RECORDING"),associateKeys("sr","SCROLL_RATE"),associateKeys("sn","SESSION_NUMBER"),associateKeys("uu","USER_ID"),associateKeys("CACHE_BUSTING","CACHE_BUSTING"),associateKeys("str","START_RENDER"),associateKeys("di","DOM_INTERACTIVE"),associateKeys("dc","DOM_COMPLETE"),associateKeys("fl","FULLY_LOADED");var windowPerformance=window.performance||window.msPerformance,PerformanceTimingMetrics=function(){function a(){}return a.prototype.getRequestParameters=function(){if(this.areTimingsUnavailable())return{};var a=this.compute();return{str:a.startRender,di:a.domInteractive,dc:a.domComplete,fl:a.fullyLoaded}},a.prototype.compute=function(){var a=windowPerformance.timing;return{startRender:""+(a.domLoading-a.requestStart),domInteractive:""+(a.domInteractive-a.requestStart),domComplete:""+(a.domComplete-a.requestStart),fullyLoaded:""+(a.loadEventEnd-a.requestStart)}},a.prototype.areTimingsUnavailable=function(){return!(windowPerformance&&windowPerformance.timing&&windowPerformance.timing.loadEventEnd>0)},a}(),EVENT_BATCH_SIZE_IF_RECORDED=100,EVENT_BATCH_SIZE_IF_NOT_RECORDED=50,STORAGE_NAMES={EVENTS_STORE:"eventsStore",EVENTS:"events",EVENTS_META_DATA:"eventsMetaData"},Events=function(){function a(a,b,c,d,e,f){this.storage=a,this.io=b,this.sessionManager=c,this.pageView=d,this.analysisEventsTracker=e,this.scrollRateTracker=f}return a.prototype.init=function(){var a=this;this.performanceTimingMetrics=new PerformanceTimingMetrics,this.initStorages(),this.analysisEventsTracker.onEvent(function(b){return a.addEvent(b)}),this.scrollRateTracker.onEvent(function(b){return a.updateMaxScrollRate(b)})},a.prototype.start=function(){this.pushPersistedEvents(),this.analysisEventsTracker.start(),this.scrollRateTracker.start()},a.prototype.initStorages=function(){this.recoveredStoresFromPreviousSessions=this.storage.getAllStoresByName(STORAGE_NAMES.EVENTS_STORE),this.eventsStore=this.storage.createStore(STORAGE_NAMES.EVENTS_STORE),this.events=this.eventsStore.createQueue(STORAGE_NAMES.EVENTS),this.eventsMetaData=this.eventsStore.createMap(STORAGE_NAMES.EVENTS_META_DATA)},a.prototype.pushPersistedEvents=function(){for(var a=0;a<this.recoveredStoresFromPreviousSessions.length;a+=1){var b=this.recoveredStoresFromPreviousSessions[a],c=b.getQueue(STORAGE_NAMES.EVENTS),d=b.getMap(STORAGE_NAMES.EVENTS_META_DATA);this.sendEvents(c,d),b.empty()}},a.prototype.addEvent=function(a){renewSessionIfNeeded(),this.storage.hasBeenRecovered()&&this.events.clear(),0===this.events.length()&&this.eventsMetaData.setItemsFromObject(withStorageKeys(this.io.getBaseParams())),this.events.push(this.serializeAnalysisEvent(a)),
this.events.length()>=(this.sessionManager.isAnalysisRecorded()?EVENT_BATCH_SIZE_IF_RECORDED:EVENT_BATCH_SIZE_IF_NOT_RECORDED)&&this.pushEvents()},a.prototype.serializeAnalysisEvent=function(a){var b=[a.type,this.pageView.getRelativeTime()];return"x"in a&&b.push(a.x),"y"in a&&b.push(a.y),"target"in a&&b.push(a.target),b},a.prototype.pushEvents=function(){var a=withStorageKeys(this.performanceTimingMetrics.getRequestParameters());this.eventsMetaData.setItemsFromObject(a),this.sendEvents(this.events,this.eventsMetaData),this.events.clear()},a.prototype.sendEvents=function(a,b){if(a&&b){var c=withRequestParameterKeys(b.getAll());c.EVENT=a.getAll(),c.EVENT.length>0&&this.io.sendValidRequest(c,"events")}},a.prototype.updateMaxScrollRate=function(a){this.eventsMetaData.setItemsFromObject(withStorageKeys({sr:a}))},a.prototype.onOptout=function(){this.analysisEventsTracker.stop(),this.scrollRateTracker.stop(),this.eventsStore.empty()},a}(),BrowserDimensions;!function(a){function b(){var a=[d()];return document.documentElement&&a.push(document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&a.push(document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,a)}function c(){return document.documentElement.scrollWidth}function d(){return window.innerHeight}function e(){return window.innerWidth}function f(){return screen.width}function g(){return screen.height}function h(){return window.pageXOffset}function i(){return window.pageYOffset}function j(){return{dw:""+c(),dh:""+b(),ww:""+e(),wh:""+d(),sw:""+f(),sh:""+g()}}a.documentHeight=b,a.documentWidth=c,a.windowHeight=d,a.windowWidth=e,a.screenWidth=f,a.screenHeight=g,a.windowOffsetX=h,a.windowOffsetY=i,a.getRequestParameters=j}(BrowserDimensions||(BrowserDimensions={}));var __assign$2=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},GetRequest=function(){function a(a,b){this.domainUri=a,this.path=b,this.beforeRequest=doNothing,this.afterRequest=doNothing}return a.prototype.setRequestParametersProviders=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.requestParametersProviders=a},a.prototype.before=function(a){this.beforeRequest=a},a.prototype.after=function(a){this.afterRequest=a},a.prototype.send=function(){this.beforeRequest();var b=this.retrieveParameters(),c=a.convertToQuery(b);this.generatePixel(c),this.afterRequest()},a.prototype.retrieveParameters=function(){return this.requestParametersProviders?this.requestParametersProviders.map(function(a){return a.getRequestParameters()}).reduce(function(a,b){return __assign$2({},a,b)}):{}},a.convertToQuery=function(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")},a.prototype.generatePixel=function(a){var b=new window.Image(1,1);b.onload=doNothing,b.onerror=doNothing,b.src=this.domainUri+"/"+this.path+"?"+a},a}(),Transaction=function(){function a(a,b){this.id=a,this.revenue=b}return a.from=function(b){var c=new a(b.id,parseFloat(b.revenue));return isNaN(parseFloat(b.tax))||(c.tax=parseFloat(b.tax)),isNaN(parseFloat(b.shipping))||(c.shipping=parseFloat(b.shipping)),c},a}(),TransactionItem=function(){function a(a,b,c,d){this.id=a,this.name=b,this.price=c,this.quantity=d}return a.from=function(b){if(!a.isValid(b))return null;var c=new a(b.id,b.name,parseFloat(b.price),parseInt(b.quantity,10));return isDefined(b.sku)&&(c.sku=b.sku),isDefined(b.category)&&(c.category=b.category),c},a.isValid=function(a){return isString(a.id)&&isString(a.name)&&isNumber(parseFloat(a.price))&&isInt(parseInt(a.quantity,10))&&(!isDefined(a.sku)||isString(a.sku))&&(!isDefined(a.category)||isString(a.category))},a}(),TransactionManager=function(){function a(){this.clear()}return a.prototype.addTransaction=function(a){this.transaction=Transaction.from(a)},a.prototype.getTransaction=function(){return this.transaction},a.prototype.addItem=function(a){var b=TransactionItem.from(a);null!==b&&this.transactionItems.push(b)},a.prototype.getItems=function(){return this.transactionItems},a.prototype.clear=function(){this.transaction={id:void 0,revenue:NaN},this.transactionItems=[]},a.prototype.getRequestParameters=function(){var a={id:""+this.transaction.id,revenue:""+this.transaction.revenue};return isDefined(this.transaction.tax)&&(a.tax=""+this.transaction.tax),isDefined(this.transaction.shipping)&&(a.shipping=""+this.transaction.shipping),a.items=window.JSON.stringify(this.transactionItems),a},a}(),IntegrationService=function(){function a(a){this.visitorManager=a,this.pendingCallbacks=[]}return a.prototype.applyGetSessionKey=function(a){var b=this.getSessionKey();return this.hasCallback(a)&&null!==b&&this.execute(a.callback,b),b},a.prototype.addPendingGetSessionKey=function(a){this.hasCallback(a)&&this.pendingCallbacks.push(a.callback)},a.prototype.flushPendingGetSessionKeys=function(){var a=this,b=this.getSessionKey();null!==b&&this.pendingCallbacks.forEach(function(c){a.execute(c,b)}),this.pendingCallbacks=[]},a.prototype.getSessionKey=function(){if(this.visitorManager.doesVisitorExist()){var a=this.visitorManager.getVisitor();return a.id+"."+a.visitsCount}return null},a.prototype.hasCallback=function(a){return a&&"function"==typeof a.callback},a.prototype.execute=function(a,b){setTimeout(function(){a(b)})},a}(),IntegrationModule=function(){function a(a,b){this.visitorManager=a,this.commands=b}return a.prototype.init=function(){var a=this;this.isVisitorUpdated=!1,this.service=new IntegrationService(this.visitorManager),this.commands.register("getSessionKey",function(b){return a.isVisitorUpdated?a.service.applyGetSessionKey(b):void a.service.addPendingGetSessionKey(b)})},a.prototype.onAfterNaturalPageView=function(){this.isVisitorUpdated=!0,this.service.flushPendingGetSessionKeys()},a}(),__assign$1=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},trackingFactory=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(){initNbRenewSessionTries();var c=new IntegrationModule(d,n);i.addListeners(d,e,n,l,b,r,c),m.init(),r.init(),c.init();var f=new GetRequest(o.getTrackerUri(),"transaction"),h=new TransactionManager;f.setRequestParametersProviders(a,h,Version),f.before(function(){renewSessionIfNeeded()}),f.after(function(){h.clear()}),n.register("ecommerce:addTransaction",function(a){h.addTransaction(a)}),n.register("ecommerce:addItem",function(a){return h.addItem(a)}),n.register("ecommerce:send",function(){return f.send()}),n.register("page:asyncSendHtml",function(){return B()}),n.register("page:sendHtml",function(){return C()}),n.register("trackPageview",function(a){return x(a)}),n.register("setCustomVariable",function(a,b,c,d){l.set(a,b,c,d)}),n.register("setPath",function(a){return g.overridePath(a)}),n.register("setTestContext",function(a){return E(a)}),n.register("clearSession",function(){return q.remove(t)}),n.register("optout",function(){i.emitOptout(),p.setCookie()}),b.init(),n.startProcessing(),v()}function v(){w(),D(function(){h.send(),i.emitStartTracking(),b.start()})}function w(){g.isAlreadyTracked()||y()}function x(a){b.pushEvents(),k.reset(),g.overridePath(a),y(),h.forcedSend(),z()?i.emitAfterSessionRenewal():i.emitAfterTrackPageView()}function y(){g.resetStartTime(),d.createOrUpdateVisitor(),e.createOrUpdateSession();var b=encodeValues(c.getRequestParameters()),h=BrowserDimensions.getRequestParameters(),j=encodeValues(f.getRequestParameters()),k=encodeValues(g.getRequestParameters()),m=s.getRequestParameters(),n=__assign$1({},a.getBaseParams(),b,h,j,k,m);A(n),l.addParams(n),a.sendValidRequest(n,"pageview"),g.isAlreadyTracked()||(g.setAlreadyTracked(!0),i.emitAfterNaturalPageView())}function z(){return 1===e.getSession().pageNumber}function A(a){a.LANGUAGE=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown"}function B(){h.incrementStopSend()}function C(){h.incrementStartSend(),h.send()}function D(a){F?a():G.push(a)}function E(a){c.set(a)}var F=!1,G=[],H={loadHandler:function(){if(!F){F=!0;for(var a=0;a<G.length;a+=1)G[a]()}return!0}};return function(a){function b(){document.removeEventListener("DOMContentLoaded",b),window.removeEventListener("load",b),a()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(a):(document.addEventListener("DOMContentLoaded",b),window.addEventListener("load",b))}(j.tryToExecute("CSTracker.loadHandler",H.loadHandler)),{start:u}},TestContext=function(){function a(){}return a.prototype.set=function(a){this.activeTests=a.tests,this.testingTagVersion=a.tagVersion},a.prototype.getRequestParameters=function(){return this.activeTests&&this.testingTagVersion?{uxt:serializeTests(this.activeTests),uxtv:this.testingTagVersion}:{}},a}(),RECORDING_DISABLED="0",ANALYSIS_RECORDING_ENABLED="1",REPLAY_RECORDING_ENABLED="2",FORCE_INCLUSION_KEY="_cs_inc",ForceInclusionManager;!function(a){function b(){return f()||h()}function c(){return g(RECORDING_DISABLED)||i(RECORDING_DISABLED)}function d(){return g(ANALYSIS_RECORDING_ENABLED)||i(ANALYSIS_RECORDING_ENABLED)}function e(){return g(REPLAY_RECORDING_ENABLED)||i(REPLAY_RECORDING_ENABLED)}function f(){return null!==UXUtils.getCookie(FORCE_INCLUSION_KEY)}function g(a){return UXUtils.getCookie(FORCE_INCLUSION_KEY)===a}function h(){return UXUtils.getWindowLocation().href.indexOf(FORCE_INCLUSION_KEY)>0}function i(a){return UXUtils.getWindowLocation().href.indexOf(FORCE_INCLUSION_KEY+"="+a)>0}a.isForceIncluded=b,a.isForceNotRecorded=c,a.isForceAnalysisRecorded=d,a.isForceReplayRecorded=e}(ForceInclusionManager||(ForceInclusionManager={}));var TrackingState=function(){function a(a,b,c,d,e,f){this.configuration=a,this.visitorManager=b,this.outdatedState=c,this.allowSubdomainsChange=d,this.crossDomainManager=e,this.cookieDomain=f}return a.prototype.compute=function(a){var b=this;this.configuration.crossDomainTracking?this.crossDomainManager.applyUpToDate(function(){return b.computeState(a)}):this.computeState(a)},a.prototype.computeState=function(a){this.allowSubdomainsChange.handle(),this.outdatedState.clear(),this.isIncluded()?(this.outdatedState.restoreClearedVisitor(),a(!0)):(ExclusionManager.exclude(this.configuration.lastTrackingDraw,this.cookieDomain),a(!1))},a.prototype.isIncluded=function(){var a=UXUtils.randLtPercent(this.configuration.sampleRate);return ForceInclusionManager.isForceIncluded()||!ExclusionManager.isExcluded()&&this.visitorManager.doesVisitorExist()||!ExclusionManager.isExcluded()&&a},a}(),Guid;!function(a){function b(){var a=navigator.userAgent+navigator.language+navigator.platform,b=c(a).toString(16).slice(-4),d=(new Date).getTime();return"xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===a?b:7&b|8).toString(16)}).replace("hhhh",b)}function c(a){for(var b=0,c=0;c<a.length;c+=1)b=a.charCodeAt(c)+(b<<6)+(b<<16)-b;return Math.abs(b)}a.generate=b}(Guid||(Guid={}));var VisitorManager=function(){function a(a,b,c){this.configuration=a,this.sessionManager=b,this.cookieDomain=c}return a.prototype.createOrUpdateVisitor=function(){var a=this.getVisitor();null===a&&(a=this.createVisitor(),this.sessionManager.removeCurrentSession()),this.updateVisitor(a),this.setVisitor(a)},a.prototype.createVisitor=function(){return{id:Guid.generate(),visitsCount:0,appliedTrackingDraw:this.configuration.lastTrackingDraw,creationTimestamp:nowInSeconds(),lastVisitTimestamp:0,hitTimestamp:0,expires:Date.now()+this.configuration.visitorCookieTimeout}},a.prototype.updateVisitor=function(a){var b=nowInSeconds();this.sessionManager.doesSessionExist()||(a.visitsCount+=1,a.lastVisitTimestamp=b),a.hitTimestamp=b,a.appliedTrackingDraw=this.configuration.lastTrackingDraw},a.prototype.getRequestParameters=function(){if(this.doesVisitorExist()){var a=this.getVisitor();return{uu:a.id,sn:""+a.visitsCount,lv:""+a.lastVisitTimestamp,lhd:""+a.lastVisitTimestamp,hd:""+a.hitTimestamp}}return{}},a.prototype.getVisitor=function(){return VisitorStorage.get()},a.prototype.setVisitor=function(a){VisitorStorage.set(a,this.cookieDomain)},a.prototype.doesVisitorExist=function(){return null!==VisitorStorage.get()},a.prototype.removeCurrentVisitor=function(){this.removeVisitor(this.cookieDomain)},a.prototype.removeVisitor=function(a){VisitorStorage.remove(a)},a.prototype.onOptout=function(){this.removeCurrentVisitor()},a}(),TextAnonymization=function(){function a(){}return a.apply=function(a){return a.replace(this.ALL_CHARACTERS_BUT_WHITESPACES,this.REPLACEMENT)},a.REPLACEMENT="a",a.ALL_CHARACTERS_BUT_WHITESPACES=/[^\s]/g,a}(),AttributeAnonymization=function(){function a(){}return a.apply=function(b,c){return-1===a.NOT_ANONYMIZED_ATTRIBUTES.indexOf(b)?"":c},a.NOT_ANONYMIZED_ATTRIBUTES=["id","class","style","src","srcset","href","rel","type"],a}(),__assign$3=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},defaultOptions={forceChildrenSerialization:!1,withAnonymization:!1},csMaskAttribute="data-cs-mask",sensitiveAttributes=["value","checked","src","data","alt"],DOMSerializer=function(){function a(){this.currentCsId=1}return a.prototype.serialize=function(a,b){void 0===b&&(b={});var c=__assign$3({},defaultOptions,b),d=a.nodeType;switch(c.forceChildrenSerialization&&this.popId(a),d){case Node.ELEMENT_NODE:return this.serializeElementNode(a,c);case Node.TEXT_NODE:return this.serializeTextNode(a,c);case Node.COMMENT_NODE:return this.serializeCommentNode(a,c);case Node.DOCUMENT_TYPE_NODE:return this.serializeDoctypeNode(a,c);case Node.DOCUMENT_NODE:return this.serializeDocumentNode(a,c);default:throw new Error("serialization is not supported (nodeType: "+d+")")}},a.prototype.getId=function(a){return a.__contentsquare_identifier},a.prototype.popId=function(a){var b=a.__contentsquare_identifier;delete a.__contentsquare_identifier;for(var c=a.firstChild;null!==c;c=c.nextSibling)this.popId(c);return b},a.prototype.isSensitiveElementNode=function(a){return a.nodeType===Node.ELEMENT_NODE&&a.hasAttribute(csMaskAttribute)},a.prototype.isSensitiveAttribute=function(a,b){return this.isSensitiveElementNode(a)&&-1!==sensitiveAttributes.indexOf(b)||this.isSensitiveInputValue(a,b)},a.prototype.serializeElementNode=function(a,b){var c=this.initSerializedNode(a,b);return c.tagName=a.tagName,c.namespaceURI=a.namespaceURI,c.attributes=this.serializeAttributes(a,b),this.isSensitiveElementNode(a)?(c.children=[],c.attributes.push(this.getSensitiveElementDimensions(a,b))):"SCRIPT"===a.tagName?c.children=[]:"STYLE"===a.tagName?c.children=this.serializeUnknownChildren(a.childNodes,__assign$3({},b,{withAnonymization:!1})):c.children=this.serializeUnknownChildren(a.childNodes,b),c},a.prototype.serializeTextNode=function(a,b){var c=this.initSerializedNode(a,b),d=a.data;return c.data=b.withAnonymization?TextAnonymization.apply(d):d,c},a.prototype.serializeCommentNode=function(a,b){var c=this.initSerializedNode(a,b);return c.data=a.data,c},a.prototype.serializeDoctypeNode=function(a,b){var c=this.initSerializedNode(a,b);return c.name=a.name,c.publicId=a.publicId,c.systemId=a.systemId,c},a.prototype.serializeDocumentNode=function(b,c){var d=this.initSerializedNode(b,c);return d.baseURI=a.getBaseURI(b),d.children=this.serializeUnknownChildren(b.childNodes,c),d},a.prototype.initSerializedNode=function(a,b){var c=this.currentCsId;this.currentCsId+=1;var d={csId:c,nodeType:a.nodeType,anonymized:b.withAnonymization};return a.__contentsquare_identifier=c,d},a.getBaseURI=function(a){var b=a.baseURI;if(null===b||void 0===b){var c=a.getElementsByTagName("base");b=0!==c.length?c[0].href:a.URL}return b},a.prototype.serializeAttributes=function(a,b){var c=this;return arrayFrom(a.attributes).map(function(a){return c.serializeAttribute(a,b)}).filter(function(b){return!c.isSensitiveAttribute(a,b.name)})},a.prototype.serializeAttribute=function(a,b){return{name:a.name,value:b.withAnonymization?AttributeAnonymization.apply(a.name,a.value):a.value,namespaceURI:null!==a.namespaceURI?a.namespaceURI:"",anonymized:b.withAnonymization}},a.prototype.getSensitiveElementDimensions=function(a,b){var c=a.getBoundingClientRect();return{name:"style",value:"width: "+c.width+"px; height: "+c.height+"px;",namespaceURI:"",anonymized:b.withAnonymization}},a.prototype.isSensitiveInputValue=function(a,b){return"INPUT"===a.tagName&&"value"===b&&"button"!==a.getAttribute("type")},a.prototype.serializeUnknownChildren=function(a,b){var c=this;return arrayFrom(a).filter(function(a){return!c.hasIdentifier(a)}).map(function(a){return c.serialize(a,b)})},a.prototype.hasIdentifier=function(a){return void 0!==a.__contentsquare_identifier},a}(),__assign$4=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},PostRequest=function(){function a(a,b,c,d){this.domainUri=a,this.path=b,this.compressor=c,this.logger=d,this.beforeRequest=doNothing,this.afterRequest=doNothing,this.afterRequestDataRetrieved=doNothing}return a.prototype.setRequestParametersProviders=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.requestParametersProviders=a},a.prototype.setRequestPayloadProvider=function(a){this.requestPayloadProvider=a},a.prototype.before=function(a){this.beforeRequest=a},a.prototype.after=function(a){this.afterRequest=a},a.prototype.afterProvidersCalled=function(a){this.afterRequestDataRetrieved=a},a.prototype.send=function(){var b=this;this.beforeRequest();var c=this.retrieveParameters(),d=a.convertToQuery(c),e=this.retrievePayload();this.afterRequestDataRetrieved(),this.compressor.compress(e,function(a){b.logger.tryToExecute("POST request",function(){b.sendXMLHttpRequest(d,a),b.afterRequest()})()})},a.prototype.retrieveParameters=function(){return this.requestParametersProviders?this.requestParametersProviders.map(function(a){return a.getRequestParameters()}).reduce(function(a,b){return __assign$4({},a,b)}):{}},a.prototype.retrievePayload=function(){return this.requestPayloadProvider?this.requestPayloadProvider.getRequestPayload():""},a.convertToQuery=function(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")},a.prototype.sendXMLHttpRequest=function(a,b){if(null!==window.XMLHttpRequest){var c=new XMLHttpRequest;c.open("POST",this.domainUri+"/"+this.path+"?"+a,!0),c.setRequestHeader("Access-Control-Expose-Headers","Content-compression"),c.setRequestHeader("Content-compression","LZString"),c.setRequestHeader("Content-type","text/plain; charset=UTF-8"),c.onreadystatechange=doNothing,c.send(b)}},a}(),RecordingEventType;!function(a){a[a.MUTATION_INSERT=1]="MUTATION_INSERT",a[a.MUTATION_REMOVE=2]="MUTATION_REMOVE",a[a.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",a[a.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",a[a.INITIAL_DOM=5]="INITIAL_DOM",a[a.SCROLL=6]="SCROLL",a[a.MOUSE_MOVE=7]="MOUSE_MOVE",a[a.CLICK=8]="CLICK",a[a.RESIZE=9]="RESIZE",a[a.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",a[a.INPUT_SELECT=11]="INPUT_SELECT",a[a.INPUT_TEXT=12]="INPUT_TEXT",a[a.HASH_CHANGE=13]="HASH_CHANGE",a[a.CONSENT_GRANTED=14]="CONSENT_GRANTED",a[a.CONSENT_WITHDRAWN=15]="CONSENT_WITHDRAWN"}(RecordingEventType||(RecordingEventType={}));var RecordingEventsTracker=function(){function a(b,c,d){var e=this;this.serializer=b,this.logger=c,this.selector=d,this.eventHandlers=[{boundElement:document,type:"change",listener:this.selector.on(a.whiteListedCheckableInputsSelector,function(a){return e.inputCheckableListener(a.target)})},{boundElement:document,type:"change",listener:this.selector.on("select",function(a){return e.inputSelectListener(a.target)})},{boundElement:document,type:"keyup",listener:this.selector.on(a.whiteListedTextInputSelector,function(a){return e.inputTextListener(a.target)})},{boundElement:document,type:"scroll",listener:function(a){return e.scrollListener(a.target)},useCapture:!0},{boundElement:document,type:"mousemove",listener:function(a){return e.mouseMoveListener(a)}},{boundElement:document,type:"click",listener:function(){return e.clickListener()},useCapture:!0},{boundElement:window,type:"resize",listener:function(){return e.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return e.hashChangeListener()}}]}return a.prototype.onEvent=function(a){this.onEventCallback=function(b){b.date=Date.now(),a(b)}},a.prototype.start=function(){this.bindHandlers(),this.triggerInitialEvents()},a.prototype.stop=function(){this.unbindHandlers()},a.prototype.bindHandlers=function(){this.eventHandlers.forEach(function(a){return bindHandler(a)})},a.prototype.unbindHandlers=function(){this.eventHandlers.forEach(function(a){return unbindHandler(a)})},a.prototype.triggerInitialEvents=function(){this.resizeListener(),this.initialTextInputListener(),this.initialScrollListener(),this.initialSelectListener(),this.initialCheckableListener(),this.hashChangeListener()},a.prototype.initialTextInputListener=function(){for(var b=document.querySelectorAll(a.whiteListedTextInputSelector),c=0;c<b.length;c+=1){var d=b.item(c);d.value.length>0&&this.inputTextListener(d)}},a.prototype.initialScrollListener=function(){for(var a=document.getElementsByTagName("*"),b=0;b<a.length;b+=1){var c=a[b],d=this.getScrollPosition(c),e=d.top,f=d.left;0===e&&0===f||this.scrollListener(c)}},a.prototype.initialSelectListener=function(){for(var a=document.getElementsByTagName("select"),b=0;b<a.length;b+=1)this.inputSelectListener(a[b])},a.prototype.initialCheckableListener=function(){for(var b=document.querySelectorAll(a.whiteListedCheckableInputsSelector),c=0;c<b.length;c+=1)this.inputCheckableListener(b[c])},a.prototype.getScrollPosition=function(a){return a===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:a.scrollTop,left:a.scrollLeft}},a.prototype.scrollListener=function(a){var b=this;this.logger.tryToExecute("scroll",function(){var c=b.serializer.getId(a);if(c&&!b.serializer.isSensitiveElementNode(a)){var d=b.getScrollPosition(a);b.onEventCallback({type:RecordingEventType.SCROLL,args:[c,d.left,d.top]})}})()},a.prototype.mouseMoveListener=function(a){var b=this;this.logger.tryToExecute("mouseMove",function(){b.onEventCallback({type:RecordingEventType.MOUSE_MOVE,args:[a.clientX,a.clientY]})})()},a.prototype.clickListener=function(){var a=this;this.logger.tryToExecute("click",function(){a.onEventCallback({type:RecordingEventType.CLICK})})()},a.prototype.resizeListener=function(){var a=this;this.logger.tryToExecute("resize",function(){a.onEventCallback({type:RecordingEventType.RESIZE,args:[BrowserDimensions.windowWidth(),BrowserDimensions.windowHeight()]})})()},a.prototype.hashChangeListener=function(){var a=this;this.logger.tryToExecute("hashChange",function(){a.onEventCallback({type:RecordingEventType.HASH_CHANGE,args:[UXUtils.getWindowLocation().href]})})()},a.prototype.inputCheckableListener=function(a){var b=this;this.logger.tryToExecute("checkable",function(){var c=b.serializer.getId(a);c&&!b.serializer.isSensitiveElementNode(a)&&b.onEventCallback({type:RecordingEventType.INPUT_CHECKABLE,args:[c,a.checked]})})()},a.prototype.inputSelectListener=function(a){var b=this;this.logger.tryToExecute("select",function(){var c=b.serializer.getId(a);c&&!b.serializer.isSensitiveElementNode(a)&&b.onEventCallback({type:RecordingEventType.INPUT_SELECT,args:[c,a.selectedIndex]})})()},a.prototype.inputTextListener=function(a){var b=this;this.logger.tryToExecute("text",function(){var c=b.serializer.getId(a);c&&!b.serializer.isSensitiveElementNode(a)&&b.onEventCallback({type:RecordingEventType.INPUT_TEXT,args:[c,a.value.replace(/\S/g,"•")]})})()},a}();RecordingEventsTracker.whiteListedTextInputSelector=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]'].join(","),RecordingEventsTracker.whiteListedCheckableInputsSelector=['input[type="checkbox"]','input[type="radio"]'].join(",");var RecordingMutationsTracker=function(){function a(a,b){var c=this;this.mutationSerializer=a,this.logger=b,this.mutationObserverConfig={subtree:!0,attributes:!0,childList:!0,characterData:!0},this.mutationObserver=new MutationObserver(function(a){c.logger.tryToExecute("mutations",function(){for(var b=Date.now(),d=0;d<a.length;d+=1){var e=a[d];switch(e.date=b,e.type){case"attributes":c.attributesMutation(e);break;case"characterData":c.characterDataMutation(e);break;case"childList":c.childListMutation(e);break;default:throw new Error("mutation type is not supported")}}})()})}return a.prototype.onEvent=function(a){this.onEventCallback=a},a.prototype.start=function(){this.mutationObserver.observe(document,this.mutationObserverConfig),this.recordInitialDom()},a.prototype.stop=function(){this.mutationObserver.disconnect()},a.prototype.recordInitialDom=function(){var a=this.mutationSerializer.serializeDocument(document);this.onEventCallback({args:a,date:Date.now(),type:RecordingEventType.INITIAL_DOM})},a.prototype.attributesMutation=function(a){var b=this.mutationSerializer.serializeMutationAttribute(a);b&&this.onEventCallback({args:b,date:a.date,type:RecordingEventType.MUTATION_ATTRIBUTE})},a.prototype.characterDataMutation=function(a){var b=this.mutationSerializer.serializeMutationCharacterData(a);b&&this.onEventCallback({args:b,date:a.date,type:RecordingEventType.MUTATION_CHARACTER_DATA})},a.prototype.childListMutation=function(a){var b=this,c=this.mutationSerializer.serializeMutationChildList(a);if(c){var d=c.removedNodes,e=c.addedNodes;d.forEach(function(c){b.onEventCallback({args:c,date:a.date,type:RecordingEventType.MUTATION_REMOVE})}),e.forEach(function(c){b.onEventCallback({args:c,date:a.date,type:RecordingEventType.MUTATION_INSERT})})}},a}(),UTF16_BYTES_PER_CHAR=2,DEFAULT_MAX_SIZE_BYTES=512e3,DEFAULT_MAX_STORED_CHARS=DEFAULT_MAX_SIZE_BYTES/UTF16_BYTES_PER_CHAR,MAX_BATCH_SIZE=100,RecordingBatch=function(){function a(a,b,c){void 0===a&&(a=[]),void 0===b&&(b={}),void 0===c&&(c=DEFAULT_MAX_STORED_CHARS),this.events=a,this.requestParameters=b,this.maxStoredChars=c,this.storageCharsUsed=0}return a.prototype.addEvent=function(a){this.storageCharsUsed+=JSON.stringify(a).length,this.events.push(a)},a.prototype.eventsCount=function(){return this.events.length},a.prototype.clearEvents=function(){this.storageCharsUsed=0,this.events=[]},a.prototype.isFull=function(){return this.storageCharsUsed>this.maxStoredChars||this.eventsCount()>=MAX_BATCH_SIZE},a.prototype.setRequestParametersFromProvider=function(a){var b=a.getRequestParameters();for(var c in b)b.hasOwnProperty(c)&&(this.requestParameters[c]=b[c])},a.prototype.getEvents=function(){return this.events},a.prototype.getRequestPayload=function(){return JSON.stringify(this.events)},a.prototype.getRequestParameters=function(){return this.requestParameters},a}(),STORAGE_NAME="csPersisted",RecordingBatchStorage=function(){function a(a){this.logger=a}return a.prototype.save=function(a){localStorage.setItem(STORAGE_NAME,JSON.stringify({events:a.getEvents(),metadata:a.getRequestParameters()}))},a.prototype.clearStorage=function(){localStorage.removeItem(STORAGE_NAME)},a.prototype.recover=function(){var a=localStorage.getItem(STORAGE_NAME);if(null===a)return null;var b=null;try{var c=JSON.parse(a),d=c.metadata,e=c.events;b=new RecordingBatch(e,d)}catch(b){this.logger.logError("Invalid item in localStorage.\n         (key:"+STORAGE_NAME+"; value:"+a+")")}finally{return this.clearStorage(),b}},a}(),RequestIndex=function(){function a(){this.index=1}return a.prototype.increment=function(){this.index+=1},a.prototype.reset=function(){this.index=1},a.prototype.getRequestParameters=function(){return{ri:""+this.index}},a}(),__assign$5=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},RecordingRequestParameters=function(){function a(a,b,c,d){this.configuration=a,this.visitorManager=b,this.sessionManager=c,this.requestIndex=d}return a.prototype.incrementIndex=function(){this.requestIndex.increment()},a.prototype.resetIndex=function(){this.requestIndex.reset()},a.prototype.getRequestParameters=function(){if(!this.visitorManager.doesVisitorExist()||!this.sessionManager.doesSessionExist())return{};var a=this.visitorManager.getVisitor();return __assign$5({},getRequestParameters(),this.requestIndex.getRequestParameters(),{pid:""+this.configuration.projectId,uu:a.id,sn:""+a.visitsCount,pn:""+this.sessionManager.getSession().pageNumber})},a
}(),stringifiedLZString='var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(input){if(input==null){return""}var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=LZString.compress(input);while(i<input.length*2){if(i%2==0){chr1=input.charCodeAt(i/2)>>8;chr2=input.charCodeAt(i/2)&255;if(i/2+1<input.length){chr3=input.charCodeAt(i/2+1)>>8}else{chr3=NaN}}else{chr1=input.charCodeAt((i-1)/2)&255;if((i+1)/2<input.length){chr2=input.charCodeAt((i+1)/2)>>8;chr3=input.charCodeAt((i+1)/2)&255}else{chr2=chr3=NaN}}i+=3;enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else{if(isNaN(chr3)){enc4=64}}output=output+LZString._keyStr.charAt(enc1)+LZString._keyStr.charAt(enc2)+LZString._keyStr.charAt(enc3)+LZString._keyStr.charAt(enc4)}return output},decompressFromBase64:function(input){if(input==null){return""}var output="",ol=0,output_,chr1,chr2,chr3,enc1,enc2,enc3,enc4,i=0,f=LZString._f;input=input.replace(/[^A-Za-z0-9+/=]/g,"");while(i<input.length){enc1=LZString._keyStr.indexOf(input.charAt(i++));enc2=LZString._keyStr.indexOf(input.charAt(i++));enc3=LZString._keyStr.indexOf(input.charAt(i++));enc4=LZString._keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;if(ol%2==0){output_=chr1<<8;if(enc3!=64){output+=f(output_|chr2)}if(enc4!=64){output_=chr3<<8}}else{output=output+f(output_|chr1);if(enc3!=64){output_=chr2<<8}if(enc4!=64){output+=f(output_|chr3)}}ol+=3}return LZString.decompress(output)},compressToUTF16:function(input){if(input==null){return""}var output="",i,c,current,status=0,f=LZString._f;input=LZString.compress(input);for(i=0;i<input.length;i++){c=input.charCodeAt(i);switch(status++){case 0:output+=f((c>>1)+32);current=(c&1)<<14;break;case 1:output+=f((current+(c>>2))+32);current=(c&3)<<13;break;case 2:output+=f((current+(c>>3))+32);current=(c&7)<<12;break;case 3:output+=f((current+(c>>4))+32);current=(c&15)<<11;break;case 4:output+=f((current+(c>>5))+32);current=(c&31)<<10;break;case 5:output+=f((current+(c>>6))+32);current=(c&63)<<9;break;case 6:output+=f((current+(c>>7))+32);current=(c&127)<<8;break;case 7:output+=f((current+(c>>8))+32);current=(c&255)<<7;break;case 8:output+=f((current+(c>>9))+32);current=(c&511)<<6;break;case 9:output+=f((current+(c>>10))+32);current=(c&1023)<<5;break;case 10:output+=f((current+(c>>11))+32);current=(c&2047)<<4;break;case 11:output+=f((current+(c>>12))+32);current=(c&4095)<<3;break;case 12:output+=f((current+(c>>13))+32);current=(c&8191)<<2;break;case 13:output+=f((current+(c>>14))+32);current=(c&16383)<<1;break;case 14:output+=f((current+(c>>15))+32,(c&32767)+32);status=0;break}}return output+f(current+32)},decompressFromUTF16:function(input){if(input==null){return""}var output="",current,c,status=0,i=0,f=LZString._f;while(i<input.length){c=input.charCodeAt(i)-32;switch(status++){case 0:current=c<<1;break;case 1:output+=f(current|(c>>14));current=(c&16383)<<2;break;case 2:output+=f(current|(c>>13));current=(c&8191)<<3;break;case 3:output+=f(current|(c>>12));current=(c&4095)<<4;break;case 4:output+=f(current|(c>>11));current=(c&2047)<<5;break;case 5:output+=f(current|(c>>10));current=(c&1023)<<6;break;case 6:output+=f(current|(c>>9));current=(c&511)<<7;break;case 7:output+=f(current|(c>>8));current=(c&255)<<8;break;case 8:output+=f(current|(c>>7));current=(c&127)<<9;break;case 9:output+=f(current|(c>>6));current=(c&63)<<10;break;case 10:output+=f(current|(c>>5));current=(c&31)<<11;break;case 11:output+=f(current|(c>>4));current=(c&15)<<12;break;case 12:output+=f(current|(c>>3));current=(c&7)<<13;break;case 13:output+=f(current|(c>>2));current=(c&3)<<14;break;case 14:output+=f(current|(c>>1));current=(c&1)<<15;break;case 15:output+=f(current|c);status=0;break}i++}return LZString.decompress(output)},compressToUint8Array:function(uncompressed){var compressed=LZString.compress(uncompressed);var buf=new Uint8Array(compressed.length*2);for(var i=0,TotalLen=compressed.length;i<TotalLen;i++){var current_value=compressed.charCodeAt(i);buf[i*2]=current_value>>>8;buf[i*2+1]=current_value%256}return buf},decompressFromUint8Array:function(compressed){if(compressed===null||compressed===undefined){return LZString.decompress(compressed)}else{var buf=new Array(compressed.length/2);for(var i=0,TotalLen=buf.length;i<TotalLen;i++){buf[i]=compressed[i*2]*256+compressed[i*2+1]}return LZString.decompress(String.fromCharCode.apply(null,buf))}},compressToEncodedURIComponent:function(uncompressed){return LZString.compressToBase64(uncompressed).replace("=","$").replace("/","-")},decompressFromEncodedURIComponent:function(compressed){if(compressed){compressed=compressed.replace("$","=").replace("-","/")}return LZString.decompressFromBase64(compressed)},compress:function(uncompressed){if(uncompressed==null){return""}var i,value,context_dictionary={},context_dictionaryToCreate={},context_c="",context_wc="",context_w="",context_enlargeIn=2,context_dictSize=3,context_numBits=2,context_data_string="",context_data_val=0,context_data_position=0,ii,f=LZString._f;for(ii=0;ii<uncompressed.length;ii+=1){context_c=uncompressed.charAt(ii);if(!Object.prototype.hasOwnProperty.call(context_dictionary,context_c)){context_dictionary[context_c]=context_dictSize++;context_dictionaryToCreate[context_c]=true}context_wc=context_w+context_c;if(Object.prototype.hasOwnProperty.call(context_dictionary,context_wc)){context_w=context_wc}else{if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1);if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|value;if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}context_dictionary[context_wc]=context_dictSize++;context_w=String(context_c)}}if(context_w!==""){if(Object.prototype.hasOwnProperty.call(context_dictionaryToCreate,context_w)){if(context_w.charCodeAt(0)<256){for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1);if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}}value=context_w.charCodeAt(0);for(i=0;i<8;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}value=value>>1}}else{value=1;for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|value;if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}value=0}value=context_w.charCodeAt(0);for(i=0;i<16;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}delete context_dictionaryToCreate[context_w]}else{value=context_dictionary[context_w];for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}value=value>>1}}context_enlargeIn--;if(context_enlargeIn==0){context_enlargeIn=Math.pow(2,context_numBits);context_numBits++}}value=2;for(i=0;i<context_numBits;i++){context_data_val=(context_data_val<<1)|(value&1);if(context_data_position==15){context_data_position=0;context_data_string+=f(context_data_val);context_data_val=0}else{context_data_position++}value=value>>1}while(true){context_data_val=(context_data_val<<1);if(context_data_position==15){context_data_string+=f(context_data_val);break}else{context_data_position++}}return context_data_string},decompress:function(compressed){if(compressed==null){return""}if(compressed==""){return null}var dictionary=[],next,enlargeIn=4,dictSize=4,numBits=3,entry="",result="",i,w,bits,resb,maxpower,power,c,f=LZString._f,data={string:compressed,val:compressed.charCodeAt(0),position:32768,index:1};for(i=0;i<3;i+=1){dictionary[i]=i}bits=0;maxpower=Math.pow(2,2);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=32768;data.val=data.string.charCodeAt(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(next=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=32768;data.val=data.string.charCodeAt(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=32768;data.val=data.string.charCodeAt(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}c=f(bits);break;case 2:return""}dictionary[3]=c;w=result=c;while(true){if(data.index>data.string.length){return""}bits=0;maxpower=Math.pow(2,numBits);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=32768;data.val=data.string.charCodeAt(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}switch(c=bits){case 0:bits=0;maxpower=Math.pow(2,8);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=32768;data.val=data.string.charCodeAt(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 1:bits=0;maxpower=Math.pow(2,16);power=1;while(power!=maxpower){resb=data.val&data.position;data.position>>=1;if(data.position==0){data.position=32768;data.val=data.string.charCodeAt(data.index++)}bits|=(resb>0?1:0)*power;power<<=1}dictionary[dictSize++]=f(bits);c=dictSize-1;enlargeIn--;break;case 2:return result}if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}if(dictionary[c]){entry=dictionary[c]}else{if(c===dictSize){entry=w+w.charAt(0)}else{return null}}result+=entry;dictionary[dictSize++]=w+entry.charAt(0);enlargeIn--;w=entry;if(enlargeIn==0){enlargeIn=Math.pow(2,numBits);numBits++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString};',StringCompression=function(){function StringCompression(a){this.onError=a,this.worker=this.tryCreateCompressionWorker(),this.callbacks={},this.callbackId=0}return StringCompression.prototype.tryCreateCompressionWorker=function(){try{return this.createWorker("("+this.compressionScript.toString()+")()")}catch(a){}},StringCompression.prototype.createWorker=function(a){var b=this,c=window.URL||window.webkitURL,d=window.Blob,e=window.Worker;if(c&&d&&e){var f=new window.Blob([a]),g=new e(c.createObjectURL(f));return g.onerror=function(a){return b.handleWorkerError(a)},g.onmessage=function(a){return b.handleWorkerMessage(a)},g}},StringCompression.prototype.handleWorkerError=function(a){var b="WorkerError: "+(a.message?a.message:"No message");return this.onError(b)},StringCompression.prototype.handleWorkerMessage=function(a){var b=a.data,c=b[0],d=b[1];this.callbacks[c](d),delete this.callbacks[c]},StringCompression.prototype.compressionScript=function(){self.addEventListener("message",function(message){var _a=message.data,html=_a[0],lzStringSource=_a[1],callbackId=_a[2],exports={};eval(lzStringSource+"exports.LZString = LZString;"),self.postMessage([callbackId,exports.LZString.compressToBase64(html)])})},StringCompression.prototype.compress=function(a,b){if(this.isSupported()){var c=this.getNewCallbackId();this.callbacks[c]=b,this.worker.postMessage([a,stringifiedLZString,c])}},StringCompression.prototype.getNewCallbackId=function(){return this.callbackId+=1},StringCompression.prototype.isSupported=function(){return void 0!==this.worker},StringCompression}(),EventEmitter=function(){function a(){}return a.prototype.emit=function(b){var c=a.createEvent(a.prefix+"."+b);document.dispatchEvent(c)},a.createEvent=function(a,b){if(void 0===b&&(b={bubbles:!1,cancelable:!1}),"function"==typeof Event)return new Event(a,b);var c=document.createEvent("Event");return c.initEvent(a,b.bubbles,b.cancelable),c},a}();EventEmitter.prefix="cs.tracking";var RecordingManager=function(){function a(a,b,c,d,e,f){this.recordingRequest=a,this.recordingBatch=b,this.requestParameters=c,this.recordingMutationsTracker=d,this.recordingEventsTracker=e,this.sessionManager=f,this.eventEmitter=new EventEmitter}return a.prototype.init=function(){this.bindRecordingRequest(),this.recordingBatch.setRequestParametersFromProvider(this.requestParameters),this.bindTrackers(),this.sessionManager.isReplayRecorded()&&this.startRecording()},a.prototype.bindRecordingRequest=function(){var a=this;this.recordingRequest.setRequestPayloadProvider(this.recordingBatch),this.recordingRequest.setRequestParametersProviders(this.recordingBatch),this.recordingRequest.afterProvidersCalled(function(){a.recordingBatch.clearEvents(),a.requestParameters.incrementIndex(),a.recordingBatch.setRequestParametersFromProvider(a.requestParameters)})},a.prototype.bindTrackers=function(){var a=this;this.recordingMutationsTracker.onEvent(function(b){return a.processEvent(b)}),this.recordingEventsTracker.onEvent(function(b){return a.processEvent(b)})},a.prototype.processEvent=function(a){renewSessionIfNeeded(),this.recordingBatch.addEvent(a),this.recordingBatch.isFull()&&this.pushEvents()},a.prototype.startRecording=function(){this.recordingMutationsTracker.start(),this.recordingEventsTracker.start(),this.eventEmitter.emit("replayRecordingStarted")},a.prototype.stopRecording=function(){this.recordingMutationsTracker.stop(),this.recordingEventsTracker.stop()},a.prototype.pushEvents=function(){this.recordingBatch.eventsCount()>0&&this.recordingRequest.send()},a.prototype.onAfterTrackPageView=function(){this.sessionManager.isReplayRecorded()&&(this.clearStates(),this.recordingMutationsTracker.recordInitialDom(),this.recordingEventsTracker.triggerInitialEvents())},a.prototype.onAfterSessionRenewal=function(){this.clearStates(),this.sessionManager.isReplayRecorded()?this.startRecording():this.stopRecording()},a.prototype.onConsentGranted=function(){this.recordingBatch.addEvent({date:Date.now(),type:RecordingEventType.CONSENT_GRANTED})},a.prototype.onConsentWithdrawn=function(){this.recordingBatch.addEvent({date:Date.now(),type:RecordingEventType.CONSENT_WITHDRAWN})},a.prototype.clearStates=function(){this.pushEvents(),this.requestParameters.resetIndex(),this.recordingBatch.setRequestParametersFromProvider(this.requestParameters)},a}(),RecordingRecovery=function(){function a(a,b,c,d){var e=this;this.recordingRecoveryRequest=a,this.recordingBatch=b,this.recordingBatchStorage=c,this.sessionManager=d,this.pageChangeHandler=function(){try{e.recordingBatchStorage.save(e.recordingBatch)}catch(a){}}}return a.prototype.init=function(){this.sendPersistedRecordings(),this.sessionManager.isReplayRecorded()&&this.addPageChangeListener()},a.prototype.stop=function(){this.removePageChangeListener()},a.prototype.sendPersistedRecordings=function(){var a=this.recordingBatchStorage.recover();a&&(this.recordingRecoveryRequest.setRequestPayloadProvider(a),this.recordingRecoveryRequest.setRequestParametersProviders(a),this.recordingRecoveryRequest.send())},a.prototype.addPageChangeListener=function(){window.addEventListener("pagehide",this.pageChangeHandler)},a.prototype.removePageChangeListener=function(){window.removeEventListener("pagehide",this.pageChangeHandler)},a.prototype.onAfterSessionRenewal=function(){this.sessionManager.isReplayRecorded()?this.addPageChangeListener():this.removePageChangeListener()},a.isSupported=function(){return"onpagehide"in window&&isLocalStorageAvailable()},a}(),MutationSerializer=function(){function a(a,b){this.consentService=a,this.domSerializer=b,this.resetAnonymization()}return a.prototype.serializeDocument=function(a){return[this.domSerializer.serialize(a,{forceChildrenSerialization:!0,withAnonymization:this.useAnonymization})]},a.prototype.serializeMutationCharacterData=function(a){var b=this.domSerializer.getId(a.target);if(b){var c=a.target.data;return c=this.anonymizeTextIfNeeded(c),[b,c]}},a.prototype.anonymizeTextIfNeeded=function(a){return this.useAnonymization?TextAnonymization.apply(a):a},a.prototype.serializeMutationAttribute=function(a){var b=a.target,c=a.attributeName,d=a.attributeNamespace,e=this.domSerializer.getId(a.target);if(e&&!this.domSerializer.isSensitiveAttribute(b,c)){var f=a.target.getAttributeNS(a.attributeNamespace,a.attributeName);return f=this.anonymizeAttributeIfNeeded(c,f),[e,d,c,f]}},a.prototype.anonymizeAttributeIfNeeded=function(a,b){return this.useAnonymization?AttributeAnonymization.apply(a,b):b},a.prototype.serializeMutationChildList=function(a){var b=this.domSerializer.getId(a.target);if(b&&!this.domSerializer.isSensitiveElementNode(a.target)){return{removedNodes:this.serializeRemovedNodes(a),addedNodes:this.serializeAddedNodes(a,b)}}},a.prototype.serializeRemovedNodes=function(a){for(var b=[],c=0;c<a.removedNodes.length;c+=1){var d=this.domSerializer.popId(a.removedNodes[c]);d&&b.push([d])}return b},a.prototype.serializeAddedNodes=function(a,b){for(var c=[],d=a.nextSibling?this.domSerializer.getId(a.nextSibling):null,e=0;e<a.addedNodes.length;e+=1){var f=a.addedNodes[e];if(!this.domSerializer.getId(f)){var g=this.domSerializer.serialize(f,{withAnonymization:this.useAnonymization});c.push([b,d,g])}}return c},a.prototype.resetAnonymization=function(){this.useAnonymization=!this.consentService.isAllowedByConsent()},a}(),Recording=function(){function a(a,b,c,d,e,f,g){this.visitorManager=a,this.sessionManager=b,this.configuration=c,this.lifeCycleEvents=d,this.logger=e,this.selector=f,this.consentService=g}return a.prototype.init=function(){var b=this;if(a.isSupported()){var c=new StringCompression(function(a){b.logger.logError(a)}),d=new DOMSerializer,e=new RecordingBatch,f=this.createRequestParameters(),g=this.createRecordingPostRequest(c);this.mutationSerializer=new MutationSerializer(this.consentService,d),this.recordingManager=new RecordingManager(g,e,f,new RecordingMutationsTracker(this.mutationSerializer,this.logger),new RecordingEventsTracker(d,this.logger,this.selector),this.sessionManager);var h=new RecordingBatchStorage(this.logger),i=this.createRecordingPostRequest(c);this.recordingRecovery=new RecordingRecovery(i,e,h,this.sessionManager),this.lifeCycleEvents.addListeners(this)}},a.prototype.onStartTracking=function(){this.recordingManager.init(),this.lifeCycleEvents.addListeners(this.recordingManager),RecordingRecovery.isSupported()&&(this.recordingRecovery.init(),this.lifeCycleEvents.addListeners(this.recordingRecovery))},a.prototype.onOptout=function(){this.recordingManager.stopRecording(),this.recordingRecovery.stop()},a.prototype.createRequestParameters=function(){var a=new RequestIndex;return new RecordingRequestParameters(this.configuration,this.visitorManager,this.sessionManager,a)},a.prototype.onConsentGranted=function(){this.mutationSerializer.resetAnonymization()},a.prototype.onConsentWithdrawn=function(){this.mutationSerializer.resetAnonymization()},a.prototype.createRecordingPostRequest=function(a){return new PostRequest(this.configuration.getRecordingUri(),"recording",a,this.logger)},a.isSupported=function(){return"MutationObserver"in window&&new StringCompression(doNothing).isSupported()},a}(),MAX_SUMMED_RECORDING_RATES=100,SessionManager=function(){function a(a,b,c,d){this.configuration=a,this.sessionStorage=b,this.logger=c,this.cookieDomain=d}return a.prototype.createOrUpdateSession=function(){var a=this.getSessionWithoutCache();null===a&&(a=this.createSession()),this.updateSession(a),this.setSession(a)},a.prototype.createSession=function(){return{pageNumber:0,recordingState:this.computeRecordingState()}},a.prototype.computeRecordingState=function(){return this.isCompressionSupported()?ForceInclusionManager.isForceNotRecorded()?RECORDING_DISABLED:ForceInclusionManager.isForceAnalysisRecorded()?ANALYSIS_RECORDING_ENABLED:ForceInclusionManager.isForceReplayRecorded()?REPLAY_RECORDING_ENABLED:this.computeRecordingType(this.configuration.replayRecordingRate,this.configuration.analysisRecordingRate):RECORDING_DISABLED},a.prototype.isCompressionSupported=function(){return new StringCompression(doNothing).isSupported()},a.prototype.computeRecordingType=function(a,b){var c=a+b;if(c>MAX_SUMMED_RECORDING_RATES)return this.reportMaxRecordingRatesExceeded(a,b),RECORDING_DISABLED;var d=UXUtils.getRandomPercentage();return d<a?Recording.isSupported()?REPLAY_RECORDING_ENABLED:RECORDING_DISABLED:d<c?ANALYSIS_RECORDING_ENABLED:RECORDING_DISABLED},a.prototype.reportMaxRecordingRatesExceeded=function(a,b){var c="Sum of recording rates exceeds "+MAX_SUMMED_RECORDING_RATES+".\n      Replay recording rate: "+a+" \n      Analysis recording rate: "+b;this.logger.logError(c)},a.prototype.updateSession=function(a){a.pageNumber+=1},a.prototype.isAnalysisRecorded=function(){return this.doesSessionExist()&&this.getSession().recordingState===ANALYSIS_RECORDING_ENABLED},a.prototype.isReplayRecorded=function(){return this.doesSessionExist()&&this.getSession().recordingState===REPLAY_RECORDING_ENABLED},a.prototype.removeCurrentSession=function(){this.removeSession(this.cookieDomain)},a.prototype.getRequestParameters=function(){if(this.doesSessionExist()){var a=this.getSession();return{pn:""+a.pageNumber,re:a.recordingState}}return{}},a.prototype.getSession=function(){return this.sessionStorage.get()},a.prototype.getSessionWithoutCache=function(){return this.sessionStorage.get(!0)},a.prototype.doesSessionExist=function(){return null!==this.sessionStorage.get()},a.prototype.setSession=function(a){this.sessionStorage.set(a)},a.prototype.removeSession=function(a){this.sessionStorage.remove(a)},a.prototype.onOptout=function(){this.removeCurrentSession()},a}(),OutdatedState=function(){function a(a,b,c){this.configuration=a,this.visitorManager=b,this.cookieDomain=c}return a.prototype.clear=function(){this.isVisitorOutdated()&&(this.savedVisitor=this.visitorManager.getVisitor(),this.visitorManager.removeVisitor(this.cookieDomain)),this.isExclusionOutdated()&&ExclusionManager.removeExclusion(this.cookieDomain)},a.prototype.isVisitorOutdated=function(){return this.visitorManager.doesVisitorExist()&&this.visitorManager.getVisitor().appliedTrackingDraw!==this.configuration.lastTrackingDraw},a.prototype.isExclusionOutdated=function(){return ExclusionManager.getAppliedTrackingDraw()!==this.configuration.lastTrackingDraw},a.prototype.restoreClearedVisitor=function(){this.savedVisitor&&this.visitorManager.setVisitor(this.savedVisitor)},a}(),AllowSubdomainsChange=function(){function a(a,b,c){this.configuration=a,this.visitorManager=b,this.sessionManager=c}return a.prototype.handle=function(){this.handleVisitor(),this.handleSession()},a.prototype.handleVisitor=function(){var a=this.visitorManager.getVisitor();a&&(this.configuration.allowSubdomains?this.visitorManager.removeVisitor():this.visitorManager.removeVisitor(UXUtils.getRootDomain()),this.visitorManager.setVisitor(a))},a.prototype.handleSession=function(){var a=this.sessionManager.getSessionWithoutCache();a&&(this.configuration.allowSubdomains?this.sessionManager.removeSession():this.sessionManager.removeSession(UXUtils.getRootDomain()),this.sessionManager.setSession(a))},a}(),ExternalCommands=function(){function a(a){this.logger=a,this.registry={}}return a.prototype.register=function(a,b){this.registry[a]=b},a.prototype.startProcessing=function(){this.applyPending(),this.enableImmediateApplication()},a.prototype.onOptout=function(){window._uxa=[]},a.prototype.applyPending=function(){var a=this;window._uxa.forEach(function(b){var c=b[0],d=b.slice(1);return a.apply(c,d)})},a.prototype.enableImmediateApplication=function(){var a=this;window._uxa={push:function(b){var c=b[0],d=b.slice(1);return a.apply(c,d)}}},a.prototype.apply=function(a,b){var c=this;return this.logger.tryToExecute("ExternalCommands.apply",function(){if(c.registry[a])return(d=c.registry)[a].apply(d,b);var d})()},a}(),TESTING_TAG_REFERRER_SOURCE="uxt_referrer_source",Referrer=function(){function a(a){this.cookieDomain=a}return a.prototype.getRequestParameters=function(){return{dr:this.get()}},a.prototype.get=function(){return this.consumeTestingTagRedirectionReferrer()||UXUtils.getReferrer()},a.prototype.consumeTestingTagRedirectionReferrer=function(){var a=UXUtils.getCookie(TESTING_TAG_REFERRER_SOURCE);return null!==a?(UXUtils.deleteCookie(TESTING_TAG_REFERRER_SOURCE,this.cookieDomain),a):null},a}(),PageView=function(){function a(){this.alreadyTracked=!1,this.path=""}return a.prototype.resetStartTime=function(){this.startTime=Date.now()},a.prototype.getRelativeTime=function(){return Date.now()-this.startTime},a.prototype.isAlreadyTracked=function(){return this.alreadyTracked},a.prototype.setAlreadyTracked=function(a){this.alreadyTracked=a},a.prototype.overridePath=function(a){isDefined(a)&&(this.path=a)},a.prototype.getRequestParameters=function(){return{url:a.computeUrl(this.path,window.location)}},a.computeUrl=function(a,b){if(""===a)return b.href;var c="/"===a.substring(0,1)?a:"/"+a;return b.protocol+"//"+b.host+c+b.search},a}(),LifeCycleEvents=function(){function a(){this.listeners=[]}return a.prototype.addListeners=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];(c=this.listeners).push.apply(c,a);var c},a.prototype.emitAfterNaturalPageView=function(){for(var a=0,b=this.listeners;a<b.length;a++){var c=b[a];c.onAfterNaturalPageView&&c.onAfterNaturalPageView()}},a.prototype.emitStartTracking=function(){for(var a=0,b=this.listeners;a<b.length;a++){var c=b[a];c.onStartTracking&&c.onStartTracking()}},a.prototype.emitAfterTrackPageView=function(){for(var a=0,b=this.listeners;a<b.length;a++){var c=b[a];c.onAfterTrackPageView&&c.onAfterTrackPageView()}},a.prototype.emitAfterSessionRenewal=function(){for(var a=0,b=this.listeners;a<b.length;a++){var c=b[a];c.onAfterSessionRenewal&&c.onAfterSessionRenewal()}},a.prototype.emitOptout=function(){for(var a=0,b=this.listeners;a<b.length;a++){var c=b[a];c.onOptout&&c.onOptout()}},a.prototype.emitConsentGranted=function(){for(var a=0,b=this.listeners;a<b.length;a++){var c=b[a];c.onConsentGranted&&c.onConsentGranted()}},a.prototype.emitConsentWithdrawn=function(){for(var a=0,b=this.listeners;a<b.length;a++){var c=b[a];c.onConsentWithdrawn&&c.onConsentWithdrawn()}},a}(),AnalysisEventType;!function(a){a[a.RESIZE=0]="RESIZE",a[a.SCROLL=1]="SCROLL",a[a.MOUSEMOVE=2]="MOUSEMOVE",a[a.MOUSEDOWN=3]="MOUSEDOWN",a[a.MOUSEUP=4]="MOUSEUP",a[a.CLICK=5]="CLICK",a[a.MOUSEOVER=6]="MOUSEOVER",a[a.MOUSEOUT=7]="MOUSEOUT",a[a.FOCUSIN=11]="FOCUSIN",a[a.FOCUSOUT=12]="FOCUSOUT",a[a.TAP=14]="TAP"}(AnalysisEventType||(AnalysisEventType={}));var AnalysisEventsTracker=function(){function a(a,b,c,d){var e=this;this.logger=a,this.sessionManager=b,this.pathComputation=c,this.selector=d,this.FOCUSABLE_ELEMENTS_SELECTOR="select, select *, input, textarea",this.HOVERABLE_ELEMENTS_SELECTOR="a, a *, button, button *, select, select *, input, textarea",this.globalHandlers=[{boundElement:window,type:"resize",listener:function(){return e.resizeListener()}},{boundElement:document,type:"scroll",listener:function(){return e.scrollListener()}},{boundElement:document,type:"mousemove",listener:function(a){return e.mouseMoveListener(a)}},{boundElement:document,type:"mousedown",listener:function(a){return e.mouseDownListener(a)}},{boundElement:document,type:"mouseup",listener:function(a){return e.mouseUpListener(a)}},{boundElement:document,type:"click",listener:function(a){return e.clickListener(a)}}],this.onSelectorHandlers=[{boundElement:document,type:"mouseover",listener:this.selector.on(this.HOVERABLE_ELEMENTS_SELECTOR,function(a){return e.mouseOverListener(a)})},{boundElement:document,type:"mouseout",listener:this.selector.on(this.HOVERABLE_ELEMENTS_SELECTOR,function(a){return e.mouseOutListener(a)})},{boundElement:document,type:"focusin",listener:this.selector.on(this.FOCUSABLE_ELEMENTS_SELECTOR,function(a){return e.focusInListener(a)})},{boundElement:document,type:"focusout",listener:this.selector.on(this.FOCUSABLE_ELEMENTS_SELECTOR,function(a){return e.focusOutListener(a)})}]}return a.prototype.onEvent=function(a){this.onEventCallback=a},a.prototype.start=function(){this.getSupportedHandlers().forEach(function(a){return bindHandler(a)}),this.resizeListener()},a.prototype.stop=function(){this.getSupportedHandlers().forEach(function(a){return unbindHandler(a)})},a.prototype.getSupportedHandlers=function(){return this.selector.isMatchesSelectorSupported()?this.globalHandlers.concat(this.onSelectorHandlers):(this.logger.logMessage("Element.matches is not implemented yet"),this.globalHandlers)},a.prototype.resizeListener=function(){var a=this;this.logger.tryToExecute("Event handler type: resize",function(){a.onEventCallback({type:AnalysisEventType.RESIZE,x:BrowserDimensions.windowWidth(),y:BrowserDimensions.windowHeight()})})()},a.prototype.scrollListener=function(){var a=this;this.logger.tryToExecute("Event handler type: scroll",function(){a.sessionManager.isAnalysisRecorded()&&a.onEventCallback({type:AnalysisEventType.SCROLL,x:BrowserDimensions.windowOffsetX(),y:BrowserDimensions.windowOffsetY()})})()},a.prototype.mouseMoveListener=function(a){var b=this;this.logger.tryToExecute("Event handler type: mouseMove",function(){b.sessionManager.isAnalysisRecorded()&&b.onEventCallback({type:AnalysisEventType.MOUSEMOVE,x:a.pageX,y:a.pageY})})()},a.prototype.mouseDownListener=function(a){var b=this;this.logger.tryToExecute("Event handler type: mouseDown",function(){b.onEventCallback({type:AnalysisEventType.MOUSEDOWN,x:a.pageX,y:a.pageY,target:b.pathComputation.getElementPath(a.target)})})()},a.prototype.mouseUpListener=function(a){var b=this;this.logger.tryToExecute("Event handler type: mouseUp",function(){b.onEventCallback({type:AnalysisEventType.MOUSEUP,x:a.pageX,y:a.pageY,target:b.pathComputation.getElementPath(a.target)})})()},a.prototype.clickListener=function(a){var b=this;this.logger.tryToExecute("Event handler type: click",function(){b.onEventCallback({type:AnalysisEventType.CLICK,x:a.pageX,y:a.pageY,target:b.pathComputation.getElementPath(a.target)})})()},a.prototype.mouseOverListener=function(a){var b=this;this.logger.tryToExecute("Event handler type: mouseOver",function(){b.onEventCallback({type:AnalysisEventType.MOUSEOVER,x:a.pageX,y:a.pageY,target:b.pathComputation.getElementPath(a.target)})})()},
a.prototype.mouseOutListener=function(a){var b=this;this.logger.tryToExecute("Event handler type: mouseOut",function(){b.onEventCallback({type:AnalysisEventType.MOUSEOUT,x:a.pageX,y:a.pageY,target:b.pathComputation.getElementPath(a.target)})})()},a.prototype.focusInListener=function(a){var b=this;this.logger.tryToExecute("Event handler type: focusIn",function(){b.onEventCallback({type:AnalysisEventType.FOCUSIN,target:b.pathComputation.getElementPath(a.target)})})()},a.prototype.focusOutListener=function(a){var b=this;this.logger.tryToExecute("Event handler type: focusOut",function(){b.onEventCallback({type:AnalysisEventType.FOCUSOUT,target:b.pathComputation.getElementPath(a.target)})})()},a}(),UXBrowserUtils=function(){return{getWindowSize:function(){var a=document.documentElement,b=document.body,c=window;return{windowWidth:c.innerWidth?c.innerWidth:a&&a.clientWidth?a.clientWidth:b&&b.clientWidth?b.clientWidth:0,windowHeight:c.innerHeight?c.innerHeight:a&&a.clientHeight?a.clientHeight:b&&b.clientHeight?b.clientHeight:0}},getDocumentSize:function(){var a=document.body,b=window;return{documentWidth:a&&a.scrollWidth>a.offsetWidth?a.scrollWidth:a&&a.offsetWidth?a.offsetWidth:b.innerWidth&&b.scrollMaxX?b.innerWidth+b.scrollMaxX:0,documentHeight:a&&a.scrollHeight>a.offsetHeight?a.scrollHeight:a&&a.offsetHeight?a.offsetHeight:b.innerHeight&&b.scrollMaxY?b.innerHeight+b.scrollMaxY:0}},getDocumentEncoding:function(){return document.charset||document.characterSet||document.inputEncoding||document.defaultCharset||""},getPageReferrer:function(){return document.referrer||window.document.referrer||window.top.document.referrer||""},getPageTitle:function(){return document.title||window.document.title||""},getPageHtml:function(){var a=document.doctype||window.document.doctype,b="";return a&&(b="<!DOCTYPE "+a.name+(a.publicId?' PUBLIC "'+a.publicId+'"':"")+(!a.publicId&&a.systemId?" SYSTEM":"")+(a.systemId?' "'+a.systemId+'"':"")+">"),b+=document.documentElement.outerHTML||"<html>"+document.documentElement.innerHTML+"</html>"},windowPerformance:{get:function(){return window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{}},dnsLookupTime:function(){var a=this.get().timing;return a?a.domainLookupEnd-a.domainLookupStart:0},timeToStartLoading:function(){var a=this.get().timing;return a?a.responseStart-a.requestStart:0},pageDownloadTime:function(){var a=this.get().timing;return a?a.responseEnd-a.responseStart:0},contentLoadEventTime:function(){var a=this.get().timing;return a?a.domContentLoadedEventEnd-a.domContentLoadedEventStart:0},loadEventTime:function(){var a=this.get().timing;return a?a.loadEventEnd-a.loadEventStart:0},timeBeforeDomLoading:function(){var a=this.get().timing;return a?a.domLoading-a.navigationStart:0},timeBeforeDomInteractive:function(){var a=this.get().timing;return a?a.domInteractive-a.navigationStart:0},timeBeforeDomComplete:function(){var a=this.get().timing;return a?a.domComplete-a.navigationStart:0}}}}(),HtmlPage=function(){function a(a,b,c,d,e,f){this.io=a,this.pageView=b,this.sessionManager=c,this.projectConfiguration=d,this.logger=e,this.consentService=f,this.htmlSent=!1,this.stopSend=0,this.startSend=1}return a.prototype.send=function(){this.sendHtml(!1)},a.prototype.forcedSend=function(){this.sendHtml(!0)},a.prototype.incrementStartSend=function(){this.startSend+=1},a.prototype.incrementStopSend=function(){this.stopSend+=1},a.prototype.sendHtml=function(a){var b=this;if(this.isSendAllowed()&&(a||this.pageView.isAlreadyTracked()&&!this.htmlSent&&this.startSend>this.stopSend)){renewSessionIfNeeded(),this.htmlSent=!0;var c=UXBrowserUtils.getPageHtml();c=this.stripSensitiveContent(c),c=this.stripUserInputData(c);var d=this.io.getBaseParams();d.PAGE_URL=window.location.href;new StringCompression(function(a){b.logger.logError(a)}).compress(c,function(a){b.logger.tryToExecute("Send compressed HTML",function(){a&&(d.PAGE_CONTENT=a,b.io.sendValidRequest(d,"page"))})()})}},a.prototype.isSendAllowed=function(){return this.sessionManager.isAnalysisRecorded()&&this.projectConfiguration.collectHtml&&this.consentService.isAllowedByConsent()},a.prototype.stripSensitiveContent=function(a){for(var b=a.replace(/<!-- MousetestSensitiveStart ([\s\S]*?)-->([\s\S]*?)<!-- MousetestSensitiveEnd -->/g,"$1"),c=document.querySelectorAll("[data-cs-mask]"),d=0;d<c.length;d+=1){var e=c[d];b=b.replace(e.outerHTML,e.outerHTML.replace(e.innerHTML,""))}return b},a.prototype.stripUserInputData=function(a){var b=a.replace(/(<\s*input)([^>]*)(type\s*=\s*('|")\s*(?:email|file|hidden|number|password|search|tel|text)\s*\4)([^>]*)(value\s*=\s*'[^']*'|value\s*=\s*"[^"]*")/gim,"$1$2$3$5value=''");return b=b.replace(/(<\s*input)([^>]*)(value\s*=\s*'[^']*'|value\s*=\s*"[^"]*")([^>]*)(type\s*=\s*('|")\s*(?:email|file|hidden|number|password|search|tel|text)\s*\6)/gim,"$1$2value=''$4$5"),b=b.replace(/(<\s*input)((?:(?!type\s*=\s*)[^>])*)(?:value\s*=\s*'[^']*'|value\s*=\s*"[^"]*")((?:(?!type\s*=\s*).)*?>)/gim,"$1$2value=''$3"),b=b.replace(/(<\s*textarea)([^>]*)>([^<]*)/gim,"$1$2>")},a}(),MaxScrollRateTracker=function(){function a(a){var b=this;this.logger=a,this.MAX_SCROLL_RATE_THRESHOLD=100,this.maxScrollRate=0,this.maxScrollRateHandler={boundElement:document,type:"scroll",listener:function(){return b.maxScrollRateListener()}}}return a.prototype.onEvent=function(a){this.onEventCallback=a},a.prototype.start=function(){bindHandler(this.maxScrollRateHandler),this.reset()},a.prototype.stop=function(){unbindHandler(this.maxScrollRateHandler)},a.prototype.reset=function(){this.maxScrollRate=this.currentScrollRate(),this.onEventCallback(this.maxScrollRate)},a.prototype.maxScrollRateListener=function(){var a=this;this.logger.tryToExecute("MaxScrollRate handler",function(){var b=a.currentScrollRate();b>a.maxScrollRate&&(a.maxScrollRate=b,a.onEventCallback(a.maxScrollRate))})()},a.prototype.currentScrollRate=function(){var a=BrowserDimensions.documentHeight(),b=Math.round(this.lastPixelLine()/a*100);return Math.min(b,this.MAX_SCROLL_RATE_THRESHOLD)},a.prototype.lastPixelLine=function(){var a=BrowserDimensions.windowHeight();return BrowserDimensions.windowOffsetY()+a},a}(),CONSENT_COOKIE="_cs_c",ConsentValue;!function(a){a[a.NOT_REQUIRED=0]="NOT_REQUIRED",a[a.NOT_EXPRESSED=1]="NOT_EXPRESSED",a[a.GRANTED=2]="GRANTED",a[a.WITHDRAWN=3]="WITHDRAWN"}(ConsentValue||(ConsentValue={}));var ConsentStorage=function(){function a(a){this.cookieDomain=a}return a.prototype.get=function(){var a=UXUtils.getCookie(CONSENT_COOKIE);return null===a?a:Number(a)},a.prototype.set=function(a){UXUtils.setCookie(CONSENT_COOKIE,a,this.cookieDomain,THIRTEEN_MONTHS)},a.prototype.remove=function(a){UXUtils.deleteCookie(CONSENT_COOKIE,a)},a}(),ConsentModule=function(){function a(a,b){this.commands=a,this.service=b}return a.prototype.init=function(){this.service.handleSubdomainChange(),this.service.setInitialConsent(),this.registerCommands()},a.prototype.registerCommands=function(){var a=this;this.commands.register("trackConsentGranted",function(){a.service.grantConsent()}),this.commands.register("trackConsentWithdrawn",function(){a.service.withdrawConsent()})},a.prototype.onOptout=function(){this.service.removeCurrentConsent()},a}(),ConsentService=function(){function a(a,b,c,d){this.configuration=a,this.storage=b,this.lifeCycleEvents=c,this.cookieDomain=d}return a.prototype.setInitialConsent=function(){var a=this.storage.get();(null===a||this.hasConsentRequiredChanged(a))&&this.setDefault()},a.prototype.hasConsentRequiredChanged=function(a){var b=this.configuration.consentRequired;return b&&a===ConsentValue.NOT_REQUIRED||!b&&a!==ConsentValue.NOT_REQUIRED},a.prototype.handleSubdomainChange=function(){this.configuration.allowSubdomains?this.storage.remove():this.storage.remove(UXUtils.getRootDomain())},a.prototype.setDefault=function(){var a=this.configuration.consentRequired?ConsentValue.NOT_EXPRESSED:ConsentValue.NOT_REQUIRED;this.storage.set(a)},a.prototype.grantConsent=function(){this.configuration.consentRequired&&(this.storage.set(ConsentValue.GRANTED),this.lifeCycleEvents.emitConsentGranted())},a.prototype.withdrawConsent=function(){this.configuration.consentRequired&&(this.storage.set(ConsentValue.WITHDRAWN),this.lifeCycleEvents.emitConsentWithdrawn())},a.prototype.removeCurrentConsent=function(){this.storage.remove(this.cookieDomain)},a.prototype.isAllowedByConsent=function(){return!this.configuration.consentRequired||this.storage.get()===ConsentValue.GRANTED},a.prototype.getRequestParameters=function(){return{uc:""+this.storage.get()}},a}(),EventTargetSelector=function(){function a(a){this.pathComputation=a}return a.prototype.on=function(a,b){var c=this;return function(d){c.pathComputation.isValidElement(d.target)&&c.matchesSelector(d.target,a)&&b(d)}},a.prototype.matchesSelector=function(a,b){return this.getSelectorMatcher().call(a,b)},a.prototype.isMatchesSelectorSupported=function(){return!!this.getSelectorMatcher()},a.prototype.getSelectorMatcher=function(){return Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector},a}(),OPTOUT_KEY="_cs_optout",OPTOUT_VALUE="1",TEN_YEARS=315576e6,Optout=function(){function a(a){this.cookieDomain=a}return a.isActive=function(){return UXUtils.getCookie(OPTOUT_KEY)===OPTOUT_VALUE},a.prototype.setCookie=function(){UXUtils.setCookie(OPTOUT_KEY,OPTOUT_VALUE,this.cookieDomain,TEN_YEARS)},a}(),Exclusion=function(){function a(a,b,c,d,e){this.lifeCycleEvents=a,this.commands=b,this.optout=c,this.consentModule=d,this.cookieDomain=e}return a.prototype.start=function(){var a=this;this.lifeCycleEvents.addListeners(this.commands,this.consentModule),this.commands.register("optout",function(){a.lifeCycleEvents.emitOptout(),ExclusionManager.removeExclusion(a.cookieDomain),a.optout.setCookie()}),this.consentModule.init(),this.commands.startProcessing()},a}(),STATUS_ACTIVE=1,ProjectConfiguration=function(){function a(a){this.trackerDomain=a.trackerDomain,this.errorDomain=a.ed,this.projectId=a.projectId,this.status=a.status,this.hostnames=a.hostnames,this.crossDomainTracking=!!a.crossDomainTracking,this.collectHtml=!!a.collectHtml,this.consentRequired=!!a.consentRequired,this.allowSubdomains=!!a.allowSubdomains,this.visitorCookieTimeout=a.visitorCookieTimeout||THIRTEEN_MONTHS,this.sampleRate=a.sampleRate,this.analysisRecordingRate=a.recordingRate,this.replayRecordingRate=a.replayRecordingRate,this.validationRate=a.validationRate,this.jquery=!!a.jquery,this.lastTrackingDraw=a.lastTrackingDraw||1,this.useHttps=!0,this.recordingDomain=a.recordingDomain}return a.prototype.getTrackerUri=function(){return this.protocol()+"://"+this.trackerDomain},a.prototype.getRecordingUri=function(){return this.protocol()+"://"+this.recordingDomain},a.prototype.protocol=function(){return this.useHttps?"https":"http"},a.prototype.isProjectActive=function(){return this.status===STATUS_ACTIVE},a.prototype.setOverridableField=function(a,b){"trackerDomain"===a&&(this.trackerDomain=b),"recordingDomain"===a&&(this.recordingDomain=b),"errorDomain"===a&&(this.errorDomain=b),"useHttps"===a&&(this.useHttps=!!b)},a}(),EnvironmentChecker;!function(a){function b(){if(void 0!==Object.assign&&!c())throw a.INVALID_OBJECT_ASSIGN_MESSAGE;return!0}function c(){try{var a={},b=Object.assign(a,{a:1},{b:2,c:{d:4}}),c={a:1,b:2,c:{d:4}};return JSON.stringify(b)===JSON.stringify(c)&&JSON.stringify(a)===JSON.stringify(c)}catch(a){return!1}}a.INVALID_OBJECT_ASSIGN_MESSAGE="Invalid implementation of Object.assign",a.checkObjectAssignImplementation=b}(EnvironmentChecker||(EnvironmentChecker={}));var TEST_COOKIE="_cs_t",loader={isAlreadyLoaded:!1,load:function(){var a=this;if(!Optout.isActive()){var b=new ProjectConfiguration(window.CS_CONF);window._uxa=window._uxa||[],overrideOptions(b);var c=new Logger(b);try{this.setEnv(b)}catch(a){return}c.tryToExecute("loader.load",function(){a.isLoadAllowed()&&(b.isProjectActive()&&a.executeLoad(b,c),CSFrameCommunication.isActivable()&&(window.CSFrameCommunication=CSFrameCommunication,CSFrameCommunication.waitForConnection()))})()}},isLoadAllowed:function(){return!this.isUXALoaded()&&this.areCookieEnabled()&&!this.isDocPrerendered()&&isBrowserSupported()&&UXUtils.isBrowserSupported()&&EnvironmentChecker.checkObjectAssignImplementation()},isUXALoaded:function(){return this.isAlreadyLoaded||void 0!==window.UXAnalytics},areCookieEnabled:function(){return"cookie"in document&&(document.cookie.length>0||UXUtils.setCookie(TEST_COOKIE,1)&&document.cookie.indexOf(TEST_COOKIE)>-1)},isDocPrerendered:function(){return"visibilityState"in document&&"prerender"===document.visibilityState},setEnv:function(a){this.env=this.initEnvParameters(a.allowSubdomains)},initEnvParameters:function(a){return{host:window.location.hostname,domain:UXUtils.getCookieDomain(a)}},executeLoad:function(a,b){this.isAlreadyLoaded=!0,this.matchHostnames(a)&&(window.UXAnalytics=uxa(a,this.env.domain,b))},matchHostnames:function(a){for(var b=0;b<a.hostnames.length;b+=1)if(this.env.host.indexOf(a.hostnames[b])>=0)return!0;return!1}};initJQuery(),loader.load()}();
var ADMO=ADMO||{};if(ADMO.tvTagsQueue=new Array,ADMO.tvTagsQueueDelayer=null,ADMO.tvTagsQueueTry=0,ADMO.syncCallValue=null,ADMO.optOutValue=-11234,ADMO.ajax={x:function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var e,t=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],o=0;o<t.length;o++)try{e=new ActiveXObject(t[o]);break}catch(e){}return e},send:function(e,t,o,i,n){void 0===n&&(n=!0);var a=ADMO.ajax.x();a.open(o,e,n),a.onreadystatechange=function(){4==a.readyState&&t(a.responseText)},"POST"==o&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.withCredentials=!0,a.send(i)},get:function(e,t,o,i){var n=[];for(var a in t)n.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));ADMO.ajax.send(e+(n.length?"?"+n.join("&"):""),o,"GET",null,i)},post:function(e,t,o,i){var n=[];for(var a in t)n.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));ADMO.ajax.send(e,o,"POST",n.join("&"),i)}},ADMO.method={loadConfig:function(){for(var e=document.getElementsByTagName("script"),t="",o="v=1.100",i=0;i<e.length;i++)if(""!=e[i].src&&-1!=e[i].src.search(/\.*admo\.tv/i)){var n=e[i].src.split("?");t=n[0],1!=n.length&&(o=n[1]);break}var a="/";if(""==t){var r=window.location.hostname.split(".");for(i=r.length;i>0;i--)if(r[i-1].length>3){t="//"+r[i-1]+".admo.tv/";break}""==t||(a=t)}else a=t.split("/").slice(0,-1).join("/")+"/";if("undefined"==typeof ADMO_config){var s=document.createElement("script");s.type="text/javascript",s.src=a+"config.js?"+o,document.body.insertBefore(s,document.body.childNodes[0])}},bindEvent:function(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent("on"+t,o)},callTvAction:function(tvClient){tvClient?void 0!==ADMO_config.attributes.ADMO_callToAction&&eval(ADMO_config.attributes.ADMO_callToAction):void 0!==ADMO_config.attributes.ADMO_callToActionNotOnTv&&eval(ADMO_config.attributes.ADMO_callToActionNotOnTv)},queueTvTag:function(e,t,o,i){ADMO.tvTagsQueue.push([e,t,o,i]),null===ADMO.tvTagsQueueDelayer&&(ADMO.tvTagsQueueDelayer=setTimeout(ADMO.method.processQueue,1e3))},processQueue:function(){if("undefined"==typeof ADMO_config)return ADMO.tvTagsQueueTry++,void(ADMO.tvTagsQueueTry<=5&&(ADMO.tvTagsQueueDelayer=setTimeout(ADMO.method.processQueue,1e3)));void 0!==ADMO.tvTagsQueueDelayer&&clearTimeout(ADMO.tvTagsQueueDelayer),delete ADMO.tvTagsQueueDelayer;for(var e=0;e<ADMO.tvTagsQueue.length;e++)ADMO.method.TvTag_insertToDatabase(ADMO.tvTagsQueue[e][0],ADMO.tvTagsQueue[e][1],ADMO.tvTagsQueue[e][2],ADMO.tvTagsQueue[e][3])},load:function(){null==ADMO.method.getCookieInformation("cikneeto_optout")&&(ADMO.method.bindEvent(window,"error",ADMO.method.handleError),ADMO.method.get_main_url(),ADMO.method.manageUserId(),void 0!==ADMO_config.attributes.ADMO_isWeborama&&1==ADMO_config.attributes.ADMO_isWeborama?ADMO.method.getVisitorReferrerWeborama():ADMO.method.getVisitorReferrer(),ADMO.method.trackVisitor(),ADMO.method.checkUserActivity(),ADMO.method.processQueue())},handleError:function(e){void 0!==e.filename&&-1!==e.filename.indexOf("admo.tv")&&ADMO.method.postError(e,"Handling error")},postError:function(e,t){if("undefined"!=typeof ADMO_config){t=navigator.userAgent+" : Issue preprocesstag : "+e.filename+", on line "+e.lineno+", "+e.message;ADMO.ajax.post(ADMO_config.attributes.ADMO_Ip_ajax+"/server/receptor.php",{error:t},function(e){})}},get_main_url:function(){ADMO_config.attributes.parent_domain=ADMO.method.getDomain(window.location.hostname)},getDomain:function(e,t){if("undefined"!=typeof ADMO_config&&void 0!==ADMO_config.attributes.ADMO_ClientDomain)return ADMO_config.attributes.ADMO_ClientDomain;t=t||!1;var o=e.replace(/(https?:\/\/)?(www.)?/i,"");if(!t){var i=o.split(".");o=i.slice(i.length-2).join(".");for(var n=["co.uk","org.uk","me.uk","gouv.fr"],a=0;a<n.length;a++)if(n[a]==o){o=i.slice(i.length-3).join(".");break}}return-1!==o.indexOf("/")?o.split("/")[0]:o},admo_guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},manageUserId:function(){var e=ADMO.method.getCookieInformation("cikneeto_uuid");if(e)t=(e=ADMO.method.getCookieInformation("cikneeto_uuid")).split(":")[1];else{var t=ADMO.method.admo_guid(),o=new Date;o.setTime(o.getTime()+33696e6),document.cookie="cikneeto_uuid=id:"+t+";path=/;domain="+ADMO_config.attributes.parent_domain+";expires="+o.toGMTString()}ADMO_config.attributes.ADMO_uuid=t},getAcquisition:function(){window.location.href.split("?")},getVisitorReferrer:function(){var e=document.referrer;void 0!==ADMO_config.attributes.ADMO_isIframe&&1==ADMO_config.attributes.ADMO_isIframe&&(e=parent.document.referrer),-1!=e.indexOf("google")?ADMO_config.attributes.ADMO_referrer="google":-1!=e.indexOf("yahoo")?ADMO_config.attributes.ADMO_referrer="yahoo":-1!=e.indexOf("bing")?ADMO_config.attributes.ADMO_referrer="bing":-1!=e.indexOf("lycos")?ADMO_config.attributes.ADMO_referrer="lycos":-1!=e.indexOf("lemoteur")?ADMO_config.attributes.ADMO_referrer="lemoteur":-1!=e.indexOf("baidu")?ADMO_config.attributes.ADMO_referrer="baidu":ADMO_config.attributes.ADMO_referrer=""==e?"by_url":"unknown"},getVisitorReferrerWeborama:function(){for(var e=(window.location.toString(),""),t=[],o=location.search.substr(1).split("&"),i=0;i<o.length;i++)t=o[i].split("="),"g.ru"===t[0]&&(e=decodeURIComponent(t[1]));-1!=e.indexOf("google")?ADMO_config.attributes.ADMO_referrer="google":-1!=e.indexOf("yahoo")?ADMO_config.attributes.ADMO_referrer="yahoo":-1!=e.indexOf("bing")?ADMO_config.attributes.ADMO_referrer="bing":-1!=e.indexOf("lycos")?ADMO_config.attributes.ADMO_referrer="lycos":-1!=e.indexOf("lemoteur")?ADMO_config.attributes.ADMO_referrer="lemoteur":-1!=e.indexOf("baidu")?ADMO_config.attributes.ADMO_referrer="baidu":ADMO_config.attributes.ADMO_referrer=""==e?"by_url":"unknown"},trackVisitor:function(){for(var e=location.search.substring(1).split("&"),t=[],o=0;o<e.length;o++){var i=e[o].split("=");t[i[0]]=i[1],i[0]==ADMO_config.attributes.ADMO_tracking_param_name?ADMO_config.attributes.ADMO_utm_medium=i[1]:i[0]==ADMO_config.attributes.ADMO_gclid_param_name&&(ADMO_config.attributes.ADMO_gclid_value=i[1],ADMO_config.attributes.ADMO_utm_medium="google_adwords")}var n=location.hash;0!=n.length&&-1!=n.indexOf("#xtor=")&&(n=n.replace("#xtor=",""),ADMO_config.attributes.ADMO_utm_medium=n)},checkUserActivity:function(){void 0!==ADMO_config.attributes.ADMO_siteCentrics&&0!==ADMO_config.attributes.ADMO_siteCentrics&&ADMO.method.sendSessionInfoToReceptor(),ADMO.method.callTvAction(!1),null==ADMO.method.getCookieInformation("cikneeto")?(ADMO_config.attributes.ADMO_test_cookie_period=1,ADMO.method.sendUserInfoToReceptor()):ADMO.method.checkSession(),ADMO.method.checkSessionOnClick()},createLastAdCookie:function(e){var t=new Date,o=new Date,i=new Date,n=Math.floor(i.getTime()/1e3);e.message=""+e.message,ADMO_config.attributes.ADMO_idlast_ad_analysis=e.message.trim(),o.setTime(o.getTime()+5184e6);var a=ADMO.method.getCookieInformation("cikneeto_lastad");if(1==ADMO_config.attributes.ADMO_test_cookie_period){var r="cikneeto_lastad=idlast_ad_analysis:"+ADMO_config.attributes.ADMO_idlast_ad_analysis+",cookie_date:"+n+";path=/;domain="+ADMO_config.attributes.parent_domain+";expires="+o.toGMTString();if(null==a||void 0===a)document.cookie=r;else{var s=a.split(","),u=s[0].split(":"),c=s[1].split(":"),d=u[1],M=c[1],g=(t=new Date,parseInt(t.getTime()/1e3));d!=e.message&&g-M>1800&&(document.cookie=r)}ADMO.method.callTvAction(!0)}document.cookie="cikneeto=date:"+t.getTime()+";domain="+ADMO_config.attributes.parent_domain+"; path=/"},createDefaultCookie:function(){var e=new Date;document.cookie="cikneeto=date:"+e.getTime()+";domain="+ADMO_config.attributes.parent_domain+"; path=/"},getCookieInformation:function(e){if(0==document.cookie.length)return null;for(var t=new RegExp("(; )","g"),o=document.cookie.split(t),i=0;i<o.length;i++){var n=new RegExp("=","g"),a=o[i].split(n);if(a[0]==e)return unescape(a[1])}return null},sendUserInfoToReceptor:function(){navigator.cookieEnabled&&(0!=ADMO.method.isMobile()?(ADMO_config.attributes.ADMO_navigator=ADMO.method.isMobile(),screen.width>=480&&screen.height>=800||screen.width>=800&&screen.height>=480||navigator.userAgent.match(/ipad/gi)?(ADMO_config.attributes.ADMO_mobile=2,ADMO_config.attributes.ADMO_navigator=ADMO.method.isTablet()):ADMO_config.attributes.ADMO_mobile=1):(ADMO_config.attributes.ADMO_navigator=ADMO.method.web_Navigator(),ADMO_config.attributes.ADMO_mobile=0),ADMO.ajax.post(ADMO_config.attributes.ADMO_Ip_ajax+"/server/receptor.php",{message:"cookie&1&1&"+ADMO_config.attributes.ADMO_navigator+"&"+ADMO_config.attributes.ADMO_mobile+"&"+ADMO_config.attributes.ADMO_referrer+"&"+ADMO_config.attributes.ADMO_utm_medium+"&"+ADMO_config.attributes.ADMO_gclid_value+"&"+ADMO_config.attributes.ADMO_uuid},function(e){if(""!=e){var t=parseInt(e);if(!ADMO.method.isNan(t)){if(t==ADMO.optOutValue)return void ADMO.method.eraseCookies();if(t>=0&&(ADMO.method.createDefaultCookie(),t>0)){var o={};o.message=t,ADMO.method.createLastAdCookie(o)}}}}))},checkSession:function(){var e=new Date,t=ADMO.method.getCookieInformation("cikneeto");if(t){var o=t.split(":")[1];(new Date).getTime()-o>18e5?(ADMO_config.attributes.ADMO_test_cookie_period=1,ADMO.method.sendUserInfoToReceptor()):document.cookie="cikneeto=date:"+e.getTime()+";domain="+ADMO_config.attributes.parent_domain+"; path=/"}},checkSessionOnClick:function(){ADMO.method.bindEvent(window,"click",ADMO.method.checkSession)},sendSessionInfoToReceptor:function(){if(navigator.cookieEnabled){var e=ADMO.method.getCookieInformation("cikneeto_uuid");if(null===e)return!1;var t=e.split(":")[1];ADMO.ajax.post(ADMO_config.attributes.ADMO_Ip_ajax+"/server/receptor.php",{message:"session&"+t},function(e){if(""!=e){var t=parseInt(e);if(!ADMO.method.isNan(t)&&t==ADMO.optOutValue)return void ADMO.method.eraseCookies()}})}},isNan:function(e){if("undefined"!=typeof Number&&void 0!==Number.isNaN)var t=Number.isNaN(e);else t="number"==typeof e;return t},eraseCookies:function(){new Date;document.cookie="cikneeto=;domain="+ADMO_config.attributes.parent_domain+"; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT",document.cookie="cikneeto_lastad=;domain="+ADMO_config.attributes.parent_domain+"; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT",document.cookie="cikneeto_uuid=;domain="+ADMO_config.attributes.parent_domain+"; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT";var e=new Date;e.setTime(e.getTime()+33696e6),document.cookie="cikneeto_optout=1;path=/;domain="+ADMO_config.attributes.parent_domain+";expires="+e.toGMTString()},isMobile:function(){return navigator.userAgent.match(/Android/i)?1:navigator.userAgent.match(/BlackBerry/i)?2:navigator.userAgent.match(/iPhone|iPad|iPod/i)?3:navigator.userAgent.match(/Opera Mini/i)?4:!!navigator.userAgent.match(/IEMobile/i)&&5},isTablet:function(){return navigator.userAgent.match(/Android/i)?12:navigator.userAgent.match(/BlackBerry/i)?13:navigator.userAgent.match(/iPhone|iPad|iPod/i)?14:navigator.userAgent.match(/Opera Mini/i)?15:navigator.userAgent.match(/IEMobile/i)?16:17},web_Navigator:function(){var e=navigator.userAgent;return-1!=navigator.userAgent.indexOf("OPR")?7:-1!=navigator.userAgent.indexOf("Chrome")?6:-1!=navigator.userAgent.indexOf("Firefox")?8:-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?9:-1!=e.indexOf("Safari")?10:11},escape_string:function(e){return e&&(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\\/g,"\\\\")).replace(/'/g,"\\'")).replace(/</g,"")).replace(/>/g,"")).replace(/ /g,"_")).replace(/é/g,"e")).replace(/à/g,"a")).replace(/è/g,"e")).replace(/ê/g,"e")).replace(/&/g,"ET")).replace(/ç/g,"c")),e},event_tv:function(e,t,o,i){null==ADMO.method.getCookieInformation("cikneeto_optout")&&(ADMO.method.bindEvent(window,"error",ADMO.method.handleError),t=ADMO.method.escape_string(t),""!=(e=ADMO.method.escape_string(e))&&(void 0!==o&&""!==o||(o=1),ADMO.method.TvTag_insertToDatabase(e,t,o,i)))},unqueuePreprocessTags:function(){for(var e=0;e<window.ADMO_TT.length;e++){var t=window.ADMO_TT[e];if(void 0!==t.action){var o=t.action;if(void 0!==t.label){var i=t.label,n="";void 0!==t.customField&&(a=t.customField);var a="";void 0!==t.value&&(a=t.value);n=null;void 0!==t.customField&&(n=t.customField),ADMO.method.event_tv(o,i,a,n)}else ADMO.method.postError({filename:"script",message:"Missing label",lineno:0},"Issue unqueuePreprocessTags")}else ADMO.method.postError({filename:"script",message:"Missing action",lineno:0},"Issue unqueuePreprocessTags")}},TvTag_insertToDatabase:function(e,t,o,i){if("undefined"!=typeof ADMO_config){var n=ADMO.method.getCookieInformation("cikneeto_lastad"),a=0;if(null!=n){var r=n.split(",")[0].split(":"),s=(new Date).getTime()/1e3;s=parseInt(s);a=r[1]}if(navigator.cookieEnabled){0!=ADMO.method.isMobile()?(ADMO_config.attributes.ADMO_navigator=ADMO.method.isMobile(),screen.width>=480&&screen.height>=800||screen.width>=800&&screen.height>=480||navigator.userAgent.match(/ipad/gi)?(ADMO_config.attributes.ADMO_mobile=2,ADMO_config.attributes.ADMO_navigator=ADMO.method.isTablet()):ADMO_config.attributes.ADMO_mobile=1):(ADMO_config.attributes.ADMO_navigator=ADMO.method.web_Navigator(),ADMO_config.attributes.ADMO_mobile=0);var u={message:"tag&"+e+"&"+t+"&"+o+"&"+a+"&unknown&"+ADMO_config.attributes.ADMO_navigator+"&"+ADMO_config.attributes.ADMO_mobile+"&"+ADMO_config.attributes.ADMO_uuid};void 0!==i&&(u.customField=i),ADMO.ajax.post(ADMO_config.attributes.ADMO_Ip_ajax+"/server/receptor.php",u,function(e){})}}else ADMO.method.queueTvTag(e,t,o,i)},get_ad_data:function(e){return"complete"==document.readyState?ADMO.method.get_ad_data_sync(e):(ADMO.method.bindEvent(window,"load",function(){return ADMO.method.get_ad_data_sync(e)}),ADMO.syncCallValue)},get_ad_data_sync:function(e){if("undefined"!=typeof ADMO_config){if(null==ADMO.method.getCookieInformation("cikneeto_optout")){void 0===e&&(e=0);var t={message:"adData",simulate:e,uuid:ADMO_config.attributes.ADMO_uuid};return ADMO.ajax.post(ADMO_config.attributes.ADMO_Ip_ajax+"/server/receptor.php",t,function(e){""!=e&&"undefined"!=typeof JSON?ADMO.syncCallValue=JSON.parse(e):ADMO.syncCallValue={}},!1),ADMO.syncCallValue}}else"undefined"!=typeof console&&console.log("Config is not loaded !")}},"complete"==document.readyState&&void 0!==ADMO&&void 0!==ADMO.method&&void 0!==ADMO.method.loadConfig&&"undefined"==typeof ADMO_config?ADMO.method.loadConfig():ADMO.method.bindEvent(window,"load",function(){void 0!==ADMO&&void 0!==ADMO.method&&void 0!==ADMO.method.loadConfig&&"undefined"==typeof ADMO_config&&ADMO.method.loadConfig()}),"undefined"!=typeof ADMO_config&&ADMO.method.load(),void 0!==window.ADMO_TT)try{ADMO.method.unqueuePreprocessTags()}catch(e){ADMO.method.postError(e,"Issue preprocesstag")}function ADMO_bindEvent(e,t,o){e.addEventListener?e.addEventListener(t,o,!1):e.attachEvent("on"+t,o)}function ADMO_TvTag_event_tv(e,t,o){ADMO.method.event_tv(e,t,o,null)}window.ADMO_TT={push:function(e){try{if(void 0===e.action)return void ADMO.method.postError({filename:"script",message:"Missing action",lineno:0},"Issue push tag");var t=e.action;if(void 0===e.label)return void ADMO.method.postError({filename:"script",message:"Missing label",lineno:0},"Issue push tag");var o=e.label,i="";void 0!==e.value&&(i=e.value);var n=null;void 0!==e.customField&&(n=e.customField),ADMO.method.event_tv(t,o,i,n)}catch(e){ADMO.method.postError(e,"Issue postprocesstag")}}};
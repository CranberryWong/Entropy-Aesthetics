define("tpaWarmup",["lodash","experiment","zepto","warmupUtils"],function(e,t,i,n){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=925)}({0:function(t,i){t.exports=e},11:function(e,t){e.exports=i},13:function(e,t){e.exports=n},8:function(e,i){e.exports=t},922:function(e,t,i){var n,a;n=[i(0)],void 0===(a=function(e){"use strict";var t={APP:"APP",COMPONENT:"COMPONENT"},i=function(e,t,i){var n=e.getDataByQuery(t,i);return n&&n.content?JSON.parse(n.content):null},n=function(t,n,a,r){if(!e.isEmpty(a)){var d=i(t,a,r);if(d)return e.pick(d,n)}return null};return{SCOPE:t,getValue:function(i,a,r,d){var o=a.data.key,p=a.data.scope,s=void 0;return s=d?p===t.APP?n(i,o,"tpaData-"+d.applicationId,"masterPage"):n(i,o,d.tpaData,r):{},e.isEmpty(s)?{error:{message:"key "+o+" not found in "+p+" scope"}}:s},getTpaDataContent:i}}.apply(t,n))||(e.exports=a)},923:function(e){e.exports={APP_IFRAME_START_LOADING:{eventId:642,src:42,params:{widget_id:"widgetId",widget_name:"widgetName",instance_id:"compId",appId:"appDefinitionId",loading_time:"loadingTime",pid:"pageId",pn:"pageNo",iss:"ssr",tts:"totalLoadingTime",external_app_id:"externalAppDefinitionId",external_widget_id:"externalWidgetId"}},APP_LOADED_SUCCESSFULLY:{eventId:643,src:42,params:{widget_id:"widgetId",instance_id:"compId",appId:"appDefinitionId",loading_time:"loadingTime",pid:"pageId",pn:"pageNo",iss:"ssr",tts:"totalLoadingTime",external_app_id:"externalAppDefinitionId",external_widget_id:"externalWidgetId"}},APP_LOADED_PARTIALLY:{eventId:644,src:42,params:{widget_id:"widgetId",instance_id:"compId",appId:"appDefinitionId",loading_time:"loadingTime",stage:"stage",stage_number:"stageNum",pid:"pageId",pn:"pageNo",iss:"ssr",tts:"totalLoadingTime",external_app_id:"externalAppDefinitionId",external_widget_id:"externalWidgetId"}},APP_SDK_START_LOADING:{eventId:645,src:42,params:{widget_id:"widgetId",instance_id:"compId",appId:"appDefinitionId",loading_time:"loadingTime",pid:"pageId",pn:"pageNo",iss:"ssr",tts:"totalLoadingTime",external_app_id:"externalAppDefinitionId",external_widget_id:"externalWidgetId"}}}},924:function(e,t,i){var n,a;n=[i(923),i(0),i(13)],void 0===(a=function(e,t,i){"use strict";return i.loggingUtils.logger.register("tpaWarmup","event",e),e}.apply(t,n))||(e.exports=a)},925:function(e,t,i){var n,a;function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}n=[i(0),i(11),i(13),i(924),i(922),i(8)],void 0===(a=function(e,t,i,n,a,d){"use strict";var o,p,s="13d21c63-b5ec-5912-8397-c3a5ddb27a97",u="13d27016-697f-b82f-7512-8e20854c09f6",f="14271d6f-ba62-d045-549b-ab972ae1f70e",g="142bb34d-3439-576a-7118-683e690a1e0d",c=(r(p={},"14409595-f076-4753-8303-9a86f9f71469",!0),r(p,"14bcded7-0066-7c35-14d7-466cb3f09103",!0),r(p,"14724f35-6794-cd1a-0244-25fd138f9242",r({},"1489040e-001f-4631-55a9-2c29b4417126",!0)),r(p,"1380b703-ce81-ff05-f115-39571d94dfcd",(r(o={},"1380bba0-253e-a800-a235-88821cf3f8a4",!0),r(o,"13a94f09-2766-3c40-4a32-8edb5acdd8bc",!0),r(o,"13afb094-84f9-739f-44fd-78d036adb028",!0),r(o,"13ec3e79-e668-cc0c-2d48-e99d53a213dd",!0),r(o,"14fd5970-8072-c276-1246-058b79e70c1a",!0),o)),p);function l(t,i,n,a,r,d,o,p){var s=n.getTime(),u={compId:a,pageId:n.getPageId(),pageNo:n.getPageNumber(),ssr:r,loadingTime:s.loadingTime,totalLoadingTime:s.totalLoadingTime};e.get(d,"isWixTPA")?(u.widgetId=o,u.appDefinitionId=e.get(d,"appDefinitionId")):(u.externalWidgetId=o,u.externalAppDefinitionId=e.get(d,"appDefinitionId")),e.merge(u,p),i(t,u)}function I(t,i){var n=e.get(t,"widgetId");if(!n){var a=e.find(i.widgets,["appPage.hidden",!1]);n=e.get(a,"widgetId")}return n}function m(t,i,n,a){n("sv_ssrLoadBookings",a)&&(c[s]=r({},u,!0)),n("sv_ssrLoadProGallery",a)&&(c[f]=r({},g,!0));var d=e.get(t,"appDefinitionId");return!!c[d]&&(!e.isObject(c[d])||c[d][i])}return{tpaDataService:a,events:n,reportPerformanceBiEvent:l,reportWarmupPerformanceBiEvent:function(t,n,a,r){var d=void 0,o=void 0,p=n.getCurrentUrlPageId(),s=e.find(n.pagesData[p].structure[n.getViewMode()],{id:a});if(s){var u=n.getDataByQuery(s.dataQuery);d=I(u,o=n.rendererModel.clientSpecMap[e.get(u,"applicationId")])}var f=e.partial(i.loggingUtils.logger.reportBI,n),g=e.includes(n.tpasRenderedInSsr,a);l(t,f,n.biData,a,g,o,d,r)},isTpaSupportedInWarmup:function(i,n){if(e.includes(i.tpasRenderedInSsr,n))return!0;if(d.isOpen("sv_ssrLoadTpa",i)){var a=function(t,i){var n=t.getCurrentUrlPageId(),a=e.get(t,["pagesData",n,"structure",t.getViewMode()]);return e.find(a,{id:i})}(i,n);if(a){var r=i.getDataByQuery(a.dataQuery),o=i.rendererModel.clientSpecMap[e.get(r,"applicationId")];if(o&&m(o,I(r,o),d.isOpen,i)&&function(i,n){if(d.isOpen("sv_ssrTpaAboveTheFold",i)){var a=t(window),r=a?a.scrollTop()+a.height():void 0,o=e.get(i,["measureMap","absoluteTop",n]);if(!o){var p=t("#"+n)[0];o=p?e.get(t(p).offset(),"top"):void 0}return o<r}return!0}(i,n))return i.tpasRenderedInSsr.push(n),!0}}return!1},isTpaSupported:m}}.apply(t,n))||(e.exports=a)}})});
//# sourceMappingURL=tpaWarmup.min.js.map
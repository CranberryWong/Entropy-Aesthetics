!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[a]={exports:{}};t[a][0].call(d.exports,function(e){var n=t[a][1][e];return i(n?n:e)},d,d.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);if("function"!=typeof t)throw new TypeError("predicate must be a function");var r=Object(e),i=r.length;if(0===i)return-1;for(var o=0;o<i;o++)if(t.call(n,r[o],o,r))return o;return-1}},{}],2:[function(e,t,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")}},{}],3:[function(e,t,n){(function(e){function r(e,t){return e.set(t[0],t[1]),e}function i(e,t){return e.add(t),e}function o(e,t){for(var n=-1,r=e?e.length:0;++n<r&&t(e[n],n,e)!==!1;);return e}function a(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function s(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function l(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function u(e,t){return null==e?void 0:e[t]}function d(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function c(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function p(e,t){return function(n){return e(t(n))}}function f(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function h(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function v(){this.__data__=Bt?Bt(null):{}}function y(e){return this.has(e)&&delete this.__data__[e]}function _(e){var t=this.__data__;if(Bt){var n=t[e];return n===Te?void 0:n}return Et.call(t,e)?t[e]:void 0}function m(e){var t=this.__data__;return Bt?void 0!==t[e]:Et.call(t,e)}function g(e,t){var n=this.__data__;return n[e]=Bt&&void 0===t?Te:t,this}function b(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(){this.__data__=[]}function A(e){var t=this.__data__,n=F(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():jt.call(t,n,1),!0}function P(e){var t=this.__data__,n=F(t,e);return n<0?void 0:t[n][1]}function w(e){return F(this.__data__,e)>-1}function S(e,t){var n=this.__data__,r=F(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function C(){this.__data__={hash:new h,map:new(Ut||b),string:new h}}function O(e){return ae(this,e).delete(e)}function T(e){return ae(this,e).get(e)}function j(e){return ae(this,e).has(e)}function R(e,t){return ae(this,e).set(e,t),this}function L(e){this.__data__=new b(e)}function D(){this.__data__=new b}function M(e){return this.__data__.delete(e)}function U(e){return this.__data__.get(e)}function I(e){return this.__data__.has(e)}function x(e,t){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!Ut||r.length<Oe-1)return r.push([e,t]),this;n=this.__data__=new k(r)}return n.set(e,t),this}function N(e,t){var n=Xt(e)||me(e)?l(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!Et.call(e,o)||i&&("length"==o||ce(o,r))||n.push(o);return n}function B(e,t,n){var r=e[t];Et.call(e,t)&&_e(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function F(e,t){for(var n=e.length;n--;)if(_e(e[n][0],t))return n;return-1}function V(e,t){return e&&re(t,Se(t),e)}function H(e,t,n,r,i,a,s){var l;if(r&&(l=a?r(e,i,a,s):r(e)),void 0!==l)return l;if(!Pe(e))return e;var u=Xt(e);if(u){if(l=le(e),!t)return ne(e,l)}else{var c=Qt(e),p=c==Ie||c==xe;if(Kt(e))return Q(e,t);if(c==Fe||c==Re||p&&!a){if(d(e))return a?e:{};if(l=ue(p?{}:e),!t)return ie(e,V(l,e))}else{if(!lt[c])return a?e:{};l=de(e,c,H,t)}}s||(s=new L);var f=s.get(e);if(f)return f;if(s.set(e,l),!u)var h=n?oe(e):Se(e);return o(h||e,function(i,o){h&&(o=i,i=e[o]),B(l,o,H(i,t,n,r,o,e,s))}),l}function z(e){return Pe(e)?Ot(e):{}}function G(e,t,n){var r=t(e);return Xt(e)?r:a(r,n(e))}function q(e){return At.call(e)}function Y(e){if(!Pe(e)||fe(e))return!1;var t=Ee(e)||d(e)?Pt:at;return t.test(ve(e))}function W(e){if(!he(e))return Dt(e);var t=[];for(var n in Object(e))Et.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Q(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function X(e){var t=new e.constructor(e.byteLength);return new kt(t).set(new kt(e)),t}function K(e,t){var n=t?X(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function $(e,t,n){var i=t?n(c(e),!0):c(e);return s(i,r,new e.constructor)}function J(e){var t=new e.constructor(e.source,ot.exec(e));return t.lastIndex=e.lastIndex,t}function Z(e,t,n){var r=t?n(f(e),!0):f(e);return s(r,i,new e.constructor)}function ee(e){return Yt?Object(Yt.call(e)):{}}function te(e,t){var n=t?X(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ne(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function re(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;B(n,a,void 0===s?e[a]:s)}return n}function ie(e,t){return re(e,Wt(e),t)}function oe(e){return G(e,Se,Wt)}function ae(e,t){var n=e.__data__;return pe(t)?n["string"==typeof t?"string":"hash"]:n.map}function se(e,t){var n=u(e,t);return Y(n)?n:void 0}function le(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Et.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ue(e){return"function"!=typeof e.constructor||he(e)?{}:z(Ct(e))}function de(e,t,n,r){var i=e.constructor;switch(t){case We:return X(e);case De:case Me:return new i(+e);case Qe:return K(e,r);case Xe:case Ke:case $e:case Je:case Ze:case et:case tt:case nt:case rt:return te(e,r);case Ne:return $(e,r,n);case Be:case Ge:return new i(e);case He:return J(e);case ze:return Z(e,r,n);case qe:return ee(e)}}function ce(e,t){return t=null==t?je:t,!!t&&("number"==typeof e||st.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function fe(e){return!!gt&&gt in e}function he(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||_t;return e===n}function ve(e){if(null!=e){try{return bt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ye(e){return H(e,!1,!0)}function _e(e,t){return e===t||e!==e&&t!==t}function me(e){return be(e)&&Et.call(e,"callee")&&(!Tt.call(e,"callee")||At.call(e)==Re)}function ge(e){return null!=e&&Ae(e.length)&&!Ee(e)}function be(e){return we(e)&&ge(e)}function Ee(e){var t=Pe(e)?At.call(e):"";return t==Ie||t==xe}function Ae(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=je}function Pe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function we(e){return!!e&&"object"==typeof e}function Se(e){return ge(e)?N(e):W(e)}function ke(){return[]}function Ce(){return!1}var Oe=200,Te="__lodash_hash_undefined__",je=9007199254740991,Re="[object Arguments]",Le="[object Array]",De="[object Boolean]",Me="[object Date]",Ue="[object Error]",Ie="[object Function]",xe="[object GeneratorFunction]",Ne="[object Map]",Be="[object Number]",Fe="[object Object]",Ve="[object Promise]",He="[object RegExp]",ze="[object Set]",Ge="[object String]",qe="[object Symbol]",Ye="[object WeakMap]",We="[object ArrayBuffer]",Qe="[object DataView]",Xe="[object Float32Array]",Ke="[object Float64Array]",$e="[object Int8Array]",Je="[object Int16Array]",Ze="[object Int32Array]",et="[object Uint8Array]",tt="[object Uint8ClampedArray]",nt="[object Uint16Array]",rt="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,ot=/\w*$/,at=/^\[object .+?Constructor\]$/,st=/^(?:0|[1-9]\d*)$/,lt={};lt[Re]=lt[Le]=lt[We]=lt[Qe]=lt[De]=lt[Me]=lt[Xe]=lt[Ke]=lt[$e]=lt[Je]=lt[Ze]=lt[Ne]=lt[Be]=lt[Fe]=lt[He]=lt[ze]=lt[Ge]=lt[qe]=lt[et]=lt[tt]=lt[nt]=lt[rt]=!0,lt[Ue]=lt[Ie]=lt[Ye]=!1;var ut="object"==typeof e&&e&&e.Object===Object&&e,dt="object"==typeof self&&self&&self.Object===Object&&self,ct=ut||dt||Function("return this")(),pt="object"==typeof n&&n&&!n.nodeType&&n,ft=pt&&"object"==typeof t&&t&&!t.nodeType&&t,ht=ft&&ft.exports===pt,vt=Array.prototype,yt=Function.prototype,_t=Object.prototype,mt=ct["__core-js_shared__"],gt=function(){var e=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),bt=yt.toString,Et=_t.hasOwnProperty,At=_t.toString,Pt=RegExp("^"+bt.call(Et).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=ht?ct.Buffer:void 0,St=ct.Symbol,kt=ct.Uint8Array,Ct=p(Object.getPrototypeOf,Object),Ot=Object.create,Tt=_t.propertyIsEnumerable,jt=vt.splice,Rt=Object.getOwnPropertySymbols,Lt=wt?wt.isBuffer:void 0,Dt=p(Object.keys,Object),Mt=se(ct,"DataView"),Ut=se(ct,"Map"),It=se(ct,"Promise"),xt=se(ct,"Set"),Nt=se(ct,"WeakMap"),Bt=se(Object,"create"),Ft=ve(Mt),Vt=ve(Ut),Ht=ve(It),zt=ve(xt),Gt=ve(Nt),qt=St?St.prototype:void 0,Yt=qt?qt.valueOf:void 0;h.prototype.clear=v,h.prototype.delete=y,h.prototype.get=_,h.prototype.has=m,h.prototype.set=g,b.prototype.clear=E,b.prototype.delete=A,b.prototype.get=P,b.prototype.has=w,b.prototype.set=S,k.prototype.clear=C,k.prototype.delete=O,k.prototype.get=T,k.prototype.has=j,k.prototype.set=R,L.prototype.clear=D,L.prototype.delete=M,L.prototype.get=U,L.prototype.has=I,L.prototype.set=x;var Wt=Rt?p(Rt,Object):ke,Qt=q;(Mt&&Qt(new Mt(new ArrayBuffer(1)))!=Qe||Ut&&Qt(new Ut)!=Ne||It&&Qt(It.resolve())!=Ve||xt&&Qt(new xt)!=ze||Nt&&Qt(new Nt)!=Ye)&&(Qt=function(e){var t=At.call(e),n=t==Fe?e.constructor:void 0,r=n?ve(n):void 0;if(r)switch(r){case Ft:return Qe;case Vt:return Ne;case Ht:return Ve;case zt:return ze;case Gt:return Ye}return t});var Xt=Array.isArray,Kt=Lt||Ce;t.exports=ye}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(e){function r(e,t){return e.set(t[0],t[1]),e}function i(e,t){return e.add(t),e}function o(e,t){for(var n=-1,r=e?e.length:0;++n<r&&t(e[n],n,e)!==!1;);return e}function a(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function s(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function l(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function u(e,t){return null==e?void 0:e[t]}function d(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function c(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function p(e,t){return function(n){return e(t(n))}}function f(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function h(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function v(){this.__data__=Bt?Bt(null):{}}function y(e){return this.has(e)&&delete this.__data__[e]}function _(e){var t=this.__data__;if(Bt){var n=t[e];return n===Te?void 0:n}return Et.call(t,e)?t[e]:void 0}function m(e){var t=this.__data__;return Bt?void 0!==t[e]:Et.call(t,e)}function g(e,t){var n=this.__data__;return n[e]=Bt&&void 0===t?Te:t,this}function b(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(){this.__data__=[]}function A(e){var t=this.__data__,n=F(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():jt.call(t,n,1),!0}function P(e){var t=this.__data__,n=F(t,e);return n<0?void 0:t[n][1]}function w(e){return F(this.__data__,e)>-1}function S(e,t){var n=this.__data__,r=F(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function k(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function C(){this.__data__={hash:new h,map:new(Ut||b),string:new h}}function O(e){return ae(this,e).delete(e)}function T(e){return ae(this,e).get(e)}function j(e){return ae(this,e).has(e)}function R(e,t){return ae(this,e).set(e,t),this}function L(e){this.__data__=new b(e)}function D(){this.__data__=new b}function M(e){return this.__data__.delete(e)}function U(e){return this.__data__.get(e)}function I(e){return this.__data__.has(e)}function x(e,t){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!Ut||r.length<Oe-1)return r.push([e,t]),this;n=this.__data__=new k(r)}return n.set(e,t),this}function N(e,t){var n=Xt(e)||me(e)?l(e.length,String):[],r=n.length,i=!!r;for(var o in e)!t&&!Et.call(e,o)||i&&("length"==o||ce(o,r))||n.push(o);return n}function B(e,t,n){var r=e[t];Et.call(e,t)&&_e(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function F(e,t){for(var n=e.length;n--;)if(_e(e[n][0],t))return n;return-1}function V(e,t){return e&&re(t,Se(t),e)}function H(e,t,n,r,i,a,s){var l;if(r&&(l=a?r(e,i,a,s):r(e)),void 0!==l)return l;if(!Pe(e))return e;var u=Xt(e);if(u){if(l=le(e),!t)return ne(e,l)}else{var c=Qt(e),p=c==Ie||c==xe;if(Kt(e))return Q(e,t);if(c==Fe||c==Re||p&&!a){if(d(e))return a?e:{};if(l=ue(p?{}:e),!t)return ie(e,V(l,e))}else{if(!lt[c])return a?e:{};l=de(e,c,H,t)}}s||(s=new L);var f=s.get(e);if(f)return f;if(s.set(e,l),!u)var h=n?oe(e):Se(e);return o(h||e,function(i,o){h&&(o=i,i=e[o]),B(l,o,H(i,t,n,r,o,e,s))}),l}function z(e){return Pe(e)?Ot(e):{}}function G(e,t,n){var r=t(e);return Xt(e)?r:a(r,n(e))}function q(e){return At.call(e)}function Y(e){if(!Pe(e)||fe(e))return!1;var t=Ee(e)||d(e)?Pt:at;return t.test(ve(e))}function W(e){if(!he(e))return Dt(e);var t=[];for(var n in Object(e))Et.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Q(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function X(e){var t=new e.constructor(e.byteLength);return new kt(t).set(new kt(e)),t}function K(e,t){var n=t?X(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function $(e,t,n){var i=t?n(c(e),!0):c(e);return s(i,r,new e.constructor)}function J(e){var t=new e.constructor(e.source,ot.exec(e));return t.lastIndex=e.lastIndex,t}function Z(e,t,n){var r=t?n(f(e),!0):f(e);return s(r,i,new e.constructor)}function ee(e){return Yt?Object(Yt.call(e)):{}}function te(e,t){var n=t?X(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ne(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function re(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;B(n,a,void 0===s?e[a]:s)}return n}function ie(e,t){return re(e,Wt(e),t)}function oe(e){return G(e,Se,Wt)}function ae(e,t){var n=e.__data__;return pe(t)?n["string"==typeof t?"string":"hash"]:n.map}function se(e,t){var n=u(e,t);return Y(n)?n:void 0}function le(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&Et.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ue(e){return"function"!=typeof e.constructor||he(e)?{}:z(Ct(e))}function de(e,t,n,r){var i=e.constructor;switch(t){case We:return X(e);case De:case Me:return new i(+e);case Qe:return K(e,r);case Xe:case Ke:case $e:case Je:case Ze:case et:case tt:case nt:case rt:return te(e,r);case Ne:return $(e,r,n);case Be:case Ge:return new i(e);case He:return J(e);case ze:return Z(e,r,n);case qe:return ee(e)}}function ce(e,t){return t=null==t?je:t,!!t&&("number"==typeof e||st.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function fe(e){return!!gt&&gt in e}function he(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||_t;return e===n}function ve(e){if(null!=e){try{return bt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ye(e){return H(e,!0,!0)}function _e(e,t){return e===t||e!==e&&t!==t}function me(e){return be(e)&&Et.call(e,"callee")&&(!Tt.call(e,"callee")||At.call(e)==Re)}function ge(e){return null!=e&&Ae(e.length)&&!Ee(e)}function be(e){return we(e)&&ge(e)}function Ee(e){var t=Pe(e)?At.call(e):"";return t==Ie||t==xe}function Ae(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=je}function Pe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function we(e){return!!e&&"object"==typeof e}function Se(e){return ge(e)?N(e):W(e)}function ke(){return[]}function Ce(){return!1}var Oe=200,Te="__lodash_hash_undefined__",je=9007199254740991,Re="[object Arguments]",Le="[object Array]",De="[object Boolean]",Me="[object Date]",Ue="[object Error]",Ie="[object Function]",xe="[object GeneratorFunction]",Ne="[object Map]",Be="[object Number]",Fe="[object Object]",Ve="[object Promise]",He="[object RegExp]",ze="[object Set]",Ge="[object String]",qe="[object Symbol]",Ye="[object WeakMap]",We="[object ArrayBuffer]",Qe="[object DataView]",Xe="[object Float32Array]",Ke="[object Float64Array]",$e="[object Int8Array]",Je="[object Int16Array]",Ze="[object Int32Array]",et="[object Uint8Array]",tt="[object Uint8ClampedArray]",nt="[object Uint16Array]",rt="[object Uint32Array]",it=/[\\^$.*+?()[\]{}|]/g,ot=/\w*$/,at=/^\[object .+?Constructor\]$/,st=/^(?:0|[1-9]\d*)$/,lt={};lt[Re]=lt[Le]=lt[We]=lt[Qe]=lt[De]=lt[Me]=lt[Xe]=lt[Ke]=lt[$e]=lt[Je]=lt[Ze]=lt[Ne]=lt[Be]=lt[Fe]=lt[He]=lt[ze]=lt[Ge]=lt[qe]=lt[et]=lt[tt]=lt[nt]=lt[rt]=!0,lt[Ue]=lt[Ie]=lt[Ye]=!1;var ut="object"==typeof e&&e&&e.Object===Object&&e,dt="object"==typeof self&&self&&self.Object===Object&&self,ct=ut||dt||Function("return this")(),pt="object"==typeof n&&n&&!n.nodeType&&n,ft=pt&&"object"==typeof t&&t&&!t.nodeType&&t,ht=ft&&ft.exports===pt,vt=Array.prototype,yt=Function.prototype,_t=Object.prototype,mt=ct["__core-js_shared__"],gt=function(){var e=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),bt=yt.toString,Et=_t.hasOwnProperty,At=_t.toString,Pt=RegExp("^"+bt.call(Et).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wt=ht?ct.Buffer:void 0,St=ct.Symbol,kt=ct.Uint8Array,Ct=p(Object.getPrototypeOf,Object),Ot=Object.create,Tt=_t.propertyIsEnumerable,jt=vt.splice,Rt=Object.getOwnPropertySymbols,Lt=wt?wt.isBuffer:void 0,Dt=p(Object.keys,Object),Mt=se(ct,"DataView"),Ut=se(ct,"Map"),It=se(ct,"Promise"),xt=se(ct,"Set"),Nt=se(ct,"WeakMap"),Bt=se(Object,"create"),Ft=ve(Mt),Vt=ve(Ut),Ht=ve(It),zt=ve(xt),Gt=ve(Nt),qt=St?St.prototype:void 0,Yt=qt?qt.valueOf:void 0;h.prototype.clear=v,h.prototype.delete=y,h.prototype.get=_,h.prototype.has=m,h.prototype.set=g,b.prototype.clear=E,b.prototype.delete=A,b.prototype.get=P,b.prototype.has=w,b.prototype.set=S,k.prototype.clear=C,k.prototype.delete=O,k.prototype.get=T,k.prototype.has=j,k.prototype.set=R,L.prototype.clear=D,L.prototype.delete=M,L.prototype.get=U,L.prototype.has=I,L.prototype.set=x;var Wt=Rt?p(Rt,Object):ke,Qt=q;(Mt&&Qt(new Mt(new ArrayBuffer(1)))!=Qe||Ut&&Qt(new Ut)!=Ne||It&&Qt(It.resolve())!=Ve||xt&&Qt(new xt)!=ze||Nt&&Qt(new Nt)!=Ye)&&(Qt=function(e){var t=At.call(e),n=t==Fe?e.constructor:void 0,r=n?ve(n):void 0;if(r)switch(r){case Ft:return Qe;case Vt:return Ne;case Ht:return Ve;case zt:return ze;case Gt:return Ye}return t});var Xt=Array.isArray,Kt=Lt||Ce;t.exports=ye}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){(function(e){function n(e,t,n){function i(t){var n=v,r=y;return v=y=void 0,w=t,m=e.apply(r,n)}function o(e){return w=e,g=setTimeout(d,t),S?i(e):m}function l(e){var n=e-P,r=e-w,i=t-n;return k?E(i,_-r):i}function u(e){var n=e-P,r=e-w;return void 0===P||n>=t||n<0||k&&r>=_}function d(){var e=A();return u(e)?c(e):void(g=setTimeout(d,l(e)))}function c(e){return g=void 0,C&&v?i(e):(v=y=void 0,m)}function p(){void 0!==g&&clearTimeout(g),w=0,v=P=y=g=void 0}function f(){return void 0===g?m:c(A())}function h(){var e=A(),n=u(e);if(v=arguments,y=this,P=e,n){if(void 0===g)return o(P);if(k)return g=setTimeout(d,t),i(P)}return void 0===g&&(g=setTimeout(d,t)),m}var v,y,_,m,g,P,w=0,S=!1,k=!1,C=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,r(n)&&(S=!!n.leading,k="maxWait"in n,_=k?b(a(n.maxWait)||0,t):_,C="trailing"in n?!!n.trailing:C),h.cancel=p,h.flush=f,h}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||i(e)&&g.call(e)==u}function a(e){if("number"==typeof e)return e;if(o(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=p.test(e);return n||f.test(e)?h(e.slice(2),n?2:8):c.test(e)?l:+e}var s="Expected a function",l=NaN,u="[object Symbol]",d=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,f=/^0o[0-7]+$/i,h=parseInt,v="object"==typeof e&&e&&e.Object===Object&&e,y="object"==typeof self&&self&&self.Object===Object&&self,_=v||y||Function("return this")(),m=Object.prototype,g=m.toString,b=Math.max,E=Math.min,A=function(){return _.Date.now()};t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){(function(e){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function i(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function o(e,t,n,r,a){var s=-1,l=e.length;for(n||(n=u),a||(a=[]);++s<l;){var d=e[s];t>0&&n(d)?t>1?o(d,t-1,n,r,a):i(a,d):r||(a[a.length]=d)}return a}function a(e,t){return e=Object(e),s(e,t,function(t,n){return n in e})}function s(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=e[a];n(s,a)&&(o[a]=s)}return o}function l(e,t){return t=M(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=M(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=a,n(e,this,s)}}function u(e){return U(e)||c(e)||!!(D&&e&&e[D])}function d(e){if("string"==typeof e||m(e))return e;var t=e+"";return"0"==t&&1/e==-g?"-0":t}function c(e){return f(e)&&T.call(e,"callee")&&(!L.call(e,"callee")||j.call(e)==E)}function p(e){return null!=e&&v(e.length)&&!h(e)}function f(e){return _(e)&&p(e)}function h(e){var t=y(e)?j.call(e):"";return t==A||t==P}function v(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=b}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){return!!e&&"object"==typeof e}function m(e){return"symbol"==typeof e||_(e)&&j.call(e)==w}var g=1/0,b=9007199254740991,E="[object Arguments]",A="[object Function]",P="[object GeneratorFunction]",w="[object Symbol]",S="object"==typeof e&&e&&e.Object===Object&&e,k="object"==typeof self&&self&&self.Object===Object&&self,C=S||k||Function("return this")(),O=Object.prototype,T=O.hasOwnProperty,j=O.toString,R=C.Symbol,L=O.propertyIsEnumerable,D=R?R.isConcatSpreadable:void 0,M=Math.max,U=Array.isArray,I=l(function(e,t){return null==e?{}:a(e,r(o(t,1),d))});t.exports=I}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){t.exports={Play:"Play",Pause:"Pause","Current Time":"Current Time","Duration Time":"Duration Time","Remaining Time":"Remaining Time","Stream Type":"Stream Type",LIVE:"LIVE",Loaded:"Loaded",Progress:"Progress",Fullscreen:"Fullscreen","Non-Fullscreen":"Non-Fullscreen",Mute:"Mute",Unmute:"Unmute","Playback Rate":"Playback Rate",Subtitles:"Subtitles","subtitles off":"subtitles off",Captions:"Captions","captions off":"captions off",Chapters:"Chapters","Close Modal Dialog":"Close Modal Dialog",Descriptions:"Descriptions","descriptions off":"descriptions off","You aborted the media playback":"An error has occurred.  Reload the web page or use another browser.\n\nError 1","A network error caused the media download to fail part-way.":"An error has occurred.  Reload the web page or use another browser.\n\nError 2","The media could not be loaded, either because the server or network failed or because the format is not supported.":"An error has occurred.  Reload the web page or use another browser.\n\nError 3","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"An error has occurred.  Reload the web page or use another browser.\n\nError 4","No compatible source was found for this media.":"An error has occurred.  Reload the web page or use another browser.\n\nError 5","Play Video":"Play Video",Close:"Close","Modal Window":"Modal Window","This is a modal window":"This is a modal window","This modal can be closed by pressing the Escape key or activating the close button.":"This modal can be closed by pressing the Escape key or activating the close button.",", opens captions settings dialog":", opens captions settings dialog",", opens subtitles settings dialog":", opens subtitles settings dialog",", opens descriptions settings dialog":", opens descriptions settings dialog",", selected":", selected"}},{}],8:[function(e,t,n){t.exports={RADIO:{id:"TRITON_RADIO",title:"TRITON_RADIO",live:1,form_type:"Triton Radio",poster:"https://assets.bwbx.io/business/public/images/radio-splash-9269acddc2.jpg",player_type:"radio",streamProvider:"TRITON",streamProviderConfig:{apiVersion:"1.8",station:"WBBRAM",mount:"WBBRAMAAC48",stationId:"69443"}},US:{id:"LIVE_US",title:"LIVE_US",live:1,form_type:"Live U.S.",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"79",cdns:[{weight:.42,name:"bvp_us_east_fastly",cdn:"fastly",streams:[{url:"https://liveproduseast.global.ssl.fastly.net/btv/desktop/us_live.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.global.ssl.fastly.net/btv/desktop/us_live.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_us_east_akamai",cdn:"akamai",streams:[{url:"https://liveproduseast.akamaized.net/btv/desktop/us_live.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.akamaized.net/btv/desktop/us_live.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_us_east_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveproduseast.hs.llnwd.net/btv/desktop/us_live.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveproduswest.hs.llnwd.net/btv/desktop/us_live.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_us_east_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1g4mbj10o50ni.cloudfront.net/btv/desktop/us_live.m3u8",type:"application/x-mpegURL"},{url:"https://dgecf4oi437o0.cloudfront.net/btv/desktop/us_live.m3u8",type:"application/x-mpegURL"}]}]},ASIA:{id:"LIVE_ASIA",title:"LIVE_ASIA",live:1,form_type:"Live Asia",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"81",cdns:[{weight:.42,name:"bvp_asia_northeast_fastly",cdn:"fastly",streams:[{url:"https://liveprodapnortheast.global.ssl.fastly.net/btv/desktop/ap_live.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.global.ssl.fastly.net/btv/desktop/ap_live.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_asia_northeast_akamai",cdn:"akamai",streams:[{url:"https://liveprodapnortheast.akamaized.net/btv/desktop/ap_live.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.akamaized.net/btv/desktop/ap_live.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_asia_northeast_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodapnortheast.hs.llnwd.net/btv/desktop/ap_live.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodapsoutheast.hs.llnwd.net/btv/desktop/ap_live.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_asia_northeast_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1xy5gfz8tdshw.cloudfront.net/btv/desktop/ap_live.m3u8",type:"application/x-mpegURL"},{url:"https://dd87vs5e13un4.cloudfront.net/btv/desktop/ap_live.m3u8",type:"application/x-mpegURL"}]}]},AUS:{id:"LIVE_AUS",title:"LIVE_AUS",live:1,form_type:"Live Australia",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"89",cdns:[{weight:.42,name:"bvp_asia_northeast_fastly",cdn:"fastly",streams:[{url:"https://liveprodapnortheast.global.ssl.fastly.net/btv/desktop/aus_live.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.global.ssl.fastly.net/btv/desktop/aus_live.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_asia_northeast_akamai",cdn:"akamai",streams:[{url:"https://liveprodapnortheast.akamaized.net/btv/desktop/aus_live.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.akamaized.net/btv/desktop/aus_live.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_asia_northeast_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodapnortheast.hs.llnwd.net/btv/desktop/aus_live.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodapsoutheast.hs.llnwd.net/btv/desktop/aus_live.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_asia_northeast_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1xy5gfz8tdshw.cloudfront.net/btv/desktop/aus_live.m3u8",type:"application/x-mpegURL"},{url:"https://dd87vs5e13un4.cloudfront.net/btv/desktop/aus_live.m3u8",type:"application/x-mpegURL"}]}]},EU:{id:"LIVE_EU",title:"LIVE_EU",live:1,form_type:"Live Europe",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"80",cdns:[{weight:.42,name:"bvp_eu_west_fastly",cdn:"fastly",streams:[{url:"https://liveprodeuwest.global.ssl.fastly.net/btv/desktop/eu_live.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodeucentral.global.ssl.fastly.net/btv/desktop/eu_live.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_eu_west_akamai",cdn:"akamai",streams:[{url:"https://liveprodeuwest.akamaized.net/btv/desktop/eu_live.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodeucentral.akamaized.net/btv/desktop/eu_live.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_eu_west_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodeuwest.hs.llnwd.net/btv/desktop/eu_live.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodeucentral.hs.llnwd.net/btv/desktop/eu_live.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_eu_west_cloudfront",cdn:"cloudfront",streams:[{url:"https://dxszb7y0qye8h.cloudfront.net/btv/desktop/eu_live.m3u8",type:"application/x-mpegURL"},{url:"https://d2yp3qrqmx80p0.cloudfront.net/btv/desktop/eu_live.m3u8",type:"application/x-mpegURL"}]}]},EVENT:{id:"LIVE_EVENT",title:"LIVE_EVENT",live:1,form_type:"Live Event",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"82",cdns:[{weight:.42,name:"bvp_us_east_fastly",cdn:"fastly",streams:[{url:"https://liveproduseast.global.ssl.fastly.net/btv/desktop/us_event.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.global.ssl.fastly.net/btv/desktop/us_event.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_us_east_akamai",cdn:"akamai",streams:[{url:"https://liveproduseast.akamaized.net/btv/desktop/us_event.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.akamaized.net/btv/desktop/us_event.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_us_east_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveproduseast.hs.llnwd.net/btv/desktop/us_event.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveproduswest.hs.llnwd.net/btv/desktop/us_event.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_us_east_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1g4mbj10o50ni.cloudfront.net/btv/desktop/us_event.m3u8",type:"application/x-mpegURL"},{url:"https://dgecf4oi437o0.cloudfront.net/btv/desktop/us_event.m3u8",type:"application/x-mpegURL"}]}]},EMEA_EVENT:{id:"LIVE_EMEA_EVENT",title:"LIVE_EMEA_EVENT",live:1,form_type:"Live EMEA Event",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"83",cdns:[{weight:.42,name:"bvp_eu_west_fastly",
cdn:"fastly",streams:[{url:"https://liveprodeuwest.global.ssl.fastly.net/btv/desktop/eu_event.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodeucentral.global.ssl.fastly.net/btv/desktop/eu_event.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_eu_west_akamai",cdn:"akamai",streams:[{url:"https://liveprodeuwest.akamaized.net/btv/desktop/eu_event.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodeucentral.akamaized.net/btv/desktop/eu_event.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_eu_west_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodeuwest.hs.llnwd.net/btv/desktop/eu_event.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodeucentral.hs.llnwd.net/btv/desktop/eu_event.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_eu_west_cloudfront",cdn:"cloudfront",streams:[{url:"https://dxszb7y0qye8h.cloudfront.net/btv/desktop/eu_event.m3u8",type:"application/x-mpegURL"},{url:"https://d2yp3qrqmx80p0.cloudfront.net/btv/desktop/eu_event.m3u8",type:"application/x-mpegURL"}]}]},ASIA_EVENT:{id:"LIVE_ASIA_EVENT",title:"LIVE_ASIA_EVENT",live:1,form_type:"Live Asia Event",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cedexisAppID:"84",cdns:[{weight:.42,name:"bvp_asia_northeast_fastly",cdn:"fastly",streams:[{url:"https://liveprodapnortheast.global.ssl.fastly.net/btv/desktop/ap_event.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.global.ssl.fastly.net/btv/desktop/ap_event.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_asia_northeast_akamai",cdn:"akamai",streams:[{url:"https://liveprodapnortheast.akamaized.net/btv/desktop/ap_event.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.akamaized.net/btv/desktop/ap_event.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_asia_northeast_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodapnortheast.hs.llnwd.net/btv/desktop/ap_event.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodapsoutheast.hs.llnwd.net/btv/desktop/ap_event.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_asia_northeast_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1xy5gfz8tdshw.cloudfront.net/btv/desktop/ap_event.m3u8",type:"application/x-mpegURL"},{url:"https://dd87vs5e13un4.cloudfront.net/btv/desktop/ap_event.m3u8",type:"application/x-mpegURL"}]}]},US_MINI:{id:"LIVE_US_MINI",title:"LIVE_US_MINI",live:1,form_type:"Live US Mini",player_type:"mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",cdns:[{weight:.42,name:"bvp_us_east_fastly",cdn:"fastly",streams:[{url:"https://liveproduseast.global.ssl.fastly.net/btv/desktop/us_mini.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.global.ssl.fastly.net/btv/desktop/us_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_us_east_akamai",cdn:"akamai",streams:[{url:"https://liveproduseast.akamaized.net/btv/desktop/us_mini.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.akamaized.net/btv/desktop/us_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_us_east_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveproduseast.hs.llnwd.net/btv/desktop/us_mini.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveproduswest.hs.llnwd.net/btv/desktop/us_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_us_east_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1g4mbj10o50ni.cloudfront.net/btv/desktop/us_mini.m3u8",type:"application/x-mpegURL"},{url:"https://dgecf4oi437o0.cloudfront.net/btv/desktop/us_mini.m3u8",type:"application/x-mpegURL"}]}]},ASIA_MINI:{id:"LIVE_ASIA_MINI",title:"LIVE_ASIA_MINI",live:1,form_type:"Live Asia Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:.42,name:"bvp_asia_northeast_fastly",cdn:"fastly",streams:[{url:"https://liveprodapnortheast.global.ssl.fastly.net/btv/desktop/ap_mini.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.global.ssl.fastly.net/btv/desktop/ap_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_asia_northeast_akamai",cdn:"akamai",streams:[{url:"https://liveprodapnortheast.akamaized.net/btv/desktop/ap_mini.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.akamaized.net/btv/desktop/ap_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_asia_northeast_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodapnortheast.hs.llnwd.net/btv/desktop/ap_mini.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodapsoutheast.hs.llnwd.net/btv/desktop/ap_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_asia_northeast_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1xy5gfz8tdshw.cloudfront.net/btv/desktop/ap_mini.m3u8",type:"application/x-mpegURL"},{url:"https://dd87vs5e13un4.cloudfront.net/btv/desktop/ap_mini.m3u8",type:"application/x-mpegURL"}]}]},EU_MINI:{id:"LIVE_EU_MINI",title:"LIVE_EU_MINI",live:1,form_type:"Live Europe Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:.42,name:"bvp_eu_west_fastly",cdn:"fastly",streams:[{url:"https://liveprodeuwest.global.ssl.fastly.net/btv/desktop/eu_mini.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodeucentral.global.ssl.fastly.net/btv/desktop/eu_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_eu_west_akamai",cdn:"akamai",streams:[{url:"https://liveprodeuwest.akamaized.net/btv/desktop/eu_mini.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodeucentral.akamaized.net/btv/desktop/eu_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_eu_west_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodeuwest.hs.llnwd.net/btv/desktop/eu_mini.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodeucentral.hs.llnwd.net/btv/desktop/eu_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_eu_west_cloudfront",cdn:"cloudfront",streams:[{url:"https://dxszb7y0qye8h.cloudfront.net/btv/desktop/eu_mini.m3u8",type:"application/x-mpegURL"},{url:"https://d2yp3qrqmx80p0.cloudfront.net/btv/desktop/eu_mini.m3u8",type:"application/x-mpegURL"}]}]},AUS_MINI:{id:"LIVE_AUS_MINI",title:"LIVE_AUS_MINI",live:1,form_type:"Live Australia Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:.42,name:"bvp_asia_northeast_fastly",cdn:"fastly",streams:[{url:"https://liveprodapnortheast.global.ssl.fastly.net/btv/desktop/aus_mini.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.global.ssl.fastly.net/btv/desktop/aus_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_asia_northeast_akamai",cdn:"akamai",streams:[{url:"https://liveprodapnortheast.akamaized.net/btv/desktop/aus_mini.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.akamaized.net/btv/desktop/aus_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_asia_northeast_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodapnortheast.hs.llnwd.net/btv/desktop/aus_mini.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodapsoutheast.hs.llnwd.net/btv/desktop/aus_mini.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_asia_northeast_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1xy5gfz8tdshw.cloudfront.net/btv/desktop/aus_mini.m3u8",type:"application/x-mpegURL"},{url:"https://dd87vs5e13un4.cloudfront.net/btv/desktop/aus_mini.m3u8",type:"application/x-mpegURL"}]}]},BBG_RADIO:{id:"LIVE_RADIO",title:"LIVE_RADIO",live:1,form_type:"Live Radio",poster:"https://assets.bwbx.io/business/public/images/radio-splash-9269acddc2.jpg",player_type:"radio",cdns:[{weight:.42,name:"bvp_us_east_fastly",cdn:"fastly",streams:[{url:"https://liveproduseast.global.ssl.fastly.net/btv/desktop/us_radio_bbr.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.global.ssl.fastly.net/btv/desktop/us_radio_bbr.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_us_east_akamai",cdn:"akamai",streams:[{url:"https://liveproduseast.akamaized.net/btv/desktop/us_radio_bbr.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.akamaized.net/btv/desktop/us_radio_bbr.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_us_east_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveproduseast.hs.llnwd.net/btv/desktop/us_radio_bbr.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveproduswest.hs.llnwd.net/btv/desktop/us_radio_bbr.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_us_east_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1g4mbj10o50ni.cloudfront.net/btv/desktop/us_radio_bbr.m3u8",type:"application/x-mpegURL"},{url:"https://dgecf4oi437o0.cloudfront.net/btv/desktop/us_radio_bbr.m3u8",type:"application/x-mpegURL"}]}]},POLITICS:{id:"LIVE_POLITICS",title:"LIVE_POLITICS",live:1,form_type:"Live Politics",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"standard",cdns:[{weight:.42,name:"bvp_us_east_fastly",cdn:"fastly",streams:[{url:"https://liveproduseast.global.ssl.fastly.net/btv/desktop/us_politics.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.global.ssl.fastly.net/btv/desktop/us_politics.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_us_east_akamai",cdn:"akamai",streams:[{url:"https://liveproduseast.akamaized.net/btv/desktop/us_politics.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.akamaized.net/btv/desktop/us_politics.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_us_east_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveproduseast.hs.llnwd.net/btv/desktop/us_politics.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveproduswest.hs.llnwd.net/btv/desktop/us_politics.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_us_east_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1g4mbj10o50ni.cloudfront.net/btv/desktop/us_politics.m3u8",type:"application/x-mpegURL"},{url:"https://dgecf4oi437o0.cloudfront.net/btv/desktop/us_politics.m3u8",type:"application/x-mpegURL"}]}]},US_LINEUP:{id:"LIVE_US_LINEUP_MINI",title:"LIVE_US_LINEUP_MINI",live:1,form_type:"Live US Lineup Mini",player_type:"mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",cdns:[{weight:.42,name:"bvp_us_east_fastly",cdn:"fastly",streams:[{url:"https://liveproduseast.global.ssl.fastly.net/btv/desktop/us_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.global.ssl.fastly.net/btv/desktop/us_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_us_east_akamai",cdn:"akamai",streams:[{url:"https://liveproduseast.akamaized.net/btv/desktop/us_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.akamaized.net/btv/desktop/us_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_us_east_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveproduseast.hs.llnwd.net/btv/desktop/us_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveproduswest.hs.llnwd.net/btv/desktop/us_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_us_east_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1g4mbj10o50ni.cloudfront.net/btv/desktop/us_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://dgecf4oi437o0.cloudfront.net/btv/desktop/us_lineup.m3u8",type:"application/x-mpegURL"}]}]},ASIA_LINEUP:{id:"LIVE_ASIA_LINEUP_MINI",title:"LIVE_ASIA_LINEUP_MINI",live:1,form_type:"Live Asia Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:.42,name:"bvp_asia_northeast_fastly",cdn:"fastly",streams:[{url:"https://liveprodapnortheast.global.ssl.fastly.net/btv/desktop/ap_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.global.ssl.fastly.net/btv/desktop/ap_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_asia_northeast_akamai",cdn:"akamai",streams:[{url:"https://liveprodapnortheast.akamaized.net/btv/desktop/ap_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.akamaized.net/btv/desktop/ap_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_asia_northeast_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodapnortheast.hs.llnwd.net/btv/desktop/ap_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodapsoutheast.hs.llnwd.net/btv/desktop/ap_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_asia_northeast_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1xy5gfz8tdshw.cloudfront.net/btv/desktop/ap_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://dd87vs5e13un4.cloudfront.net/btv/desktop/ap_lineup.m3u8",type:"application/x-mpegURL"}]}]},EU_LINEUP:{id:"LIVE_EU_LINEUP_MINI",title:"LIVE_EU_LINEUP_MINI",live:1,form_type:"Live Europe Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:.42,name:"bvp_eu_west_fastly",cdn:"fastly",streams:[{url:"https://liveprodeuwest.global.ssl.fastly.net/btv/desktop/eu_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodeucentral.global.ssl.fastly.net/btv/desktop/eu_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_eu_west_akamai",cdn:"akamai",streams:[{url:"https://liveprodeuwest.akamaized.net/btv/desktop/eu_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodeucentral.akamaized.net/btv/desktop/eu_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_eu_west_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodeuwest.hs.llnwd.net/btv/desktop/eu_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodeucentral.hs.llnwd.net/btv/desktop/eu_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_eu_west_cloudfront",cdn:"cloudfront",streams:[{url:"https://dxszb7y0qye8h.cloudfront.net/btv/desktop/eu_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://d2yp3qrqmx80p0.cloudfront.net/btv/desktop/eu_lineup.m3u8",type:"application/x-mpegURL"}]}]},AUS_LINEUP:{id:"LIVE_AUS_LINEUP_MINI",title:"LIVE_AUS_LINEUP_MINI",live:1,form_type:"Live Australia Lineup Mini",poster:"https://assets.bwbx.io/images/izrptLrH5AWw/v1/-1x-1.jpg",player_type:"mini",cdns:[{weight:.42,name:"bvp_asia_northeast_fastly",cdn:"fastly",streams:[{url:"https://liveprodapnortheast.global.ssl.fastly.net/btv/desktop/aus_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.global.ssl.fastly.net/btv/desktop/aus_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_asia_northeast_akamai",cdn:"akamai",streams:[{url:"https://liveprodapnortheast.akamaized.net/btv/desktop/aus_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://liveprodapsoutheast.akamaized.net/btv/desktop/aus_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_asia_northeast_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveprodapnortheast.hs.llnwd.net/btv/desktop/aus_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveprodapsoutheast.hs.llnwd.net/btv/desktop/aus_lineup.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_asia_northeast_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1xy5gfz8tdshw.cloudfront.net/btv/desktop/aus_lineup.m3u8",type:"application/x-mpegURL"},{url:"https://dd87vs5e13un4.cloudfront.net/btv/desktop/aus_lineup.m3u8",type:"application/x-mpegURL"}]}]},TICTOC:{id:"LIVE_TICTOC",title:"LIVE_TICTOC",live:1,form_type:"Live TICTOC",poster:"https://assets.bwbx.io/images/users/iqjWHBFdfxIU/i0Qkr___7gkw/v0/-1x-1.jpg",player_type:"standard",cedexisAppID:"127",cdns:[{weight:.42,name:"bvp_us_east_fastly",cdn:"fastly",streams:[{url:"https://liveproduseast.global.ssl.fastly.net/btv/desktop/us_tictoc.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.global.ssl.fastly.net/btv/desktop/us_tictoc.m3u8",type:"application/x-mpegURL"}]},{weight:.01,name:"bvp_us_east_akamai",cdn:"akamai",streams:[{url:"https://liveproduseast.akamaized.net/btv/desktop/us_tictoc.m3u8",type:"application/x-mpegURL"},{url:"https://liveproduswest.akamaized.net/btv/desktop/us_tictoc.m3u8",type:"application/x-mpegURL"}]},{weight:.52,name:"bvp_us_east_limelight",cdn:"limelight",streams:[{url:"https://bblive-liveproduseast.hs.llnwd.net/btv/desktop/us_tictoc.m3u8",type:"application/x-mpegURL"},{url:"https://bblive-liveproduswest.hs.llnwd.net/btv/desktop/us_tictoc.m3u8",type:"application/x-mpegURL"}]},{weight:.05,name:"bvp_us_east_cloudfront",cdn:"cloudfront",streams:[{url:"https://d1g4mbj10o50ni.cloudfront.net/btv/desktop/us_tictoc.m3u8",type:"application/x-mpegURL"},{url:"https://dgecf4oi437o0.cloudfront.net/btv/desktop/us_tictoc.m3u8",type:"application/x-mpegURL"}]}]}}},{}],9:[function(e,t,n){t.exports={techOrder:["html5","flash","Chromecast"],hlsjs:{hlsConfig:{abrBandWidthFactor:.9,abrBandWidthUpFactor:.8,debug:!1,fragLoadingMaxRetry:4,fragLoadingRetryDelay:100,levelLoadingMaxRetry:4,levelLoadingRetryDelay:100,manifestLoadingMaxRetry:4,manifestLoadingRetryDelay:100,autoStartLoad:!1,liveSyncDurationCount:2,maxBufferLength:30,maxMaxBufferLength:60,maxBufferSize:12e6,enableWebVTT:!1}},flash:{flashVars:{"controls.fullscreen":!0,"controls.popout":!1,hls_debug:!1,hls_minbufferlength:-1,"js.events.callback":"onPlayerEvent","js.playback.callback":"onPlaybackStatusChange","module.com.bloomberg.player.ads::LiveStreamAdSensor":"enabled","module.com.bloomberg.player.captions::Captions":"enabled","module.com.bloomberg.player.chrome::Chrome":"enabled","module.com.bloomberg.player.js::EventBridge":"enabled","module.com.bloomberg.player.js::JsMediaController":"autoload","module.com.bloomberg.player.js::UserPreferencesStore":"enabled","module.com.bloomberg.player.media::MediaContainer":"enabled","module.com.bloomberg.player.media::MediaController":"enabled","module.com.bloomberg.player.media::MediaLoader":"enabled","module.com.bloomberg.player.reporting::Youbora":"enabled"},params:{wmode:"opaque",allowscriptaccess:"always",bgcolor:"#000000",quality:"high",allowfullscreen:!0}},html5:{nativeTextTracks:!1},ad_code_prefix:"",ad_midroll_max_duration:9e4,ad_midroll_min_duration:1e3,ad_tag:"",ad_tag_gpt_midroll:!1,ad_tag_gpt_preroll:!1,ad_tag_midroll:"",ad_companion:!0,ads_live_per_block:3,ads_live_playback_delay:4,ads_max_retries_midroll:3,ads_max_retries_preroll:1,ads_playback_timeout:3e3,ads_vast_timeout:3e3,adAlmostFinishedThreshold:4,auto_setup:!0,autoplay:!0,comscore_ns_site:"bloomberg-stream-test",comscore_page_level_tags:{},controls:!0,disable_companion_ads:!1,disable_overlay_companion_ads:!1,forcePosterMobile:!0,live:!1,log_debug:!0,maxRetries:3,module_ad_player:"enabled",persistTextTrackSettings:!0,poster_as_slate:!1,preroll_ads_per_block:1,preroll_ads_playback_delay:0,start_muted:!1,start_time:0,ui_autohide_timeout:2e3,use_activity_out:!0,use_bvp_volume_button:!0,use_captions:!0,use_clickable_ads:!0,use_comscore:!0,use_js_ads:!0,use_moat:!0,use_parsely:!0,use_persist_listeners:!0,use_playback_outro:!0,use_poster_slate:!0,use_recover_hls:!0,use_smooth_scrub:!0,use_stream_watchdog:!0,use_title_bar:!0,use_google_tag_manager:!1,use_youbora:!0,use_resize_player:!0,useIndexExchange:!1,useAutoplayBrowsersPlugin:!0,useVideoMidrollPlugin:!0,useMutedOverlayPlugin:!0,useChromeCastPlugin:!1,google_tag_manager_data_layer_id:"dataLayer",enableFence:!1,useRegUIPopUpPlugin:!1,controlBar:{children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","captionsButton","shareButton",{name:"bloombergChromeCastButton",appId:"18168741",metadata:{title:"Live TV - Bloomberg",subtitle:"Bloomberg delivers business and markets news, data, analysis, and video to the world, featuring stories from Businessweek and Bloomberg News."}},"fullscreenToggle"]},AdControlsComponent:{children:["adBufferingSpinner","adPlayButton","adTagContainer","adControlBar","adTimeRemaining"]},CompanionAdComponent:{},PlaybackOutro:{message:"Play Again"},TitleBar:{},ShareOverlay:{},MutedOverlayComponent:!1,FenceComponent:{},plugins:{ActivityOverridePlugin:{},ClosedCaptionsPlugin:{},GoogleAdsPlugin:{},MoatAdViewabilityPlugin:{},OverrideVideojsVolumeButton:{},ParselyPlugin:{},PersistListeners:{},PlaybackOutroPlugin:{},PosterPlugin:{},RecoverHlsError:{},ShareControl:{},SmoothScrubbingPlugin:{},TitleBarPlugin:{},GoogleTagManagerPlugin:{},TritonSidebandMetadataPlugin:{},TritonCompanionAdPlugin:{},ComscoreStreamSensePlugin:{c4:"BBG",c5:"02"},StreamWatchdogPlugin:{liveStreamTimeout:1e4,vodStreamTimeout:8e3},YouboraIntegration:{},ResizePlayerPlugin:{},AutoplayBrowsersPlugin:{},VideoMidrollPlugin:{},MutedOverlayPlugin:{},VideoWatchedTimeUpdatePlugin:{},FencePlugin:{},RegUIPopUpPlugin:{},ChromeCastPlugin:{}}}},{}],10:[function(e,t,n){"use strict";e("./lib/google-ads/videojs-google-ads"),e("./videojs-plugins/closed-captions/videojs-closed-captions-control"),e("./videojs-plugins/youbora/videojs-youbora"),e("./videojs-plugins/hls/videojs-hls-bridge"),e("./videojs-plugins/hls/videojs-recover-hls-error"),e("./videojs-plugins/share-control-js/videojs-share-control"),e("./videojs-plugins/share-control-js/videojs-share-overlay"),e("./videojs-plugins/videojs-activity-override"),e("./videojs-plugins/videojs-comscore-stream-sense"),e("./videojs-plugins/videojs-moat-ad-viewability"),e("./videojs-plugins/videojs-parsely"),e("./videojs-plugins/videojs-persist-listeners"),e("./videojs-plugins/videojs-playback-outro"),e("./videojs-plugins/videojs-poster"),e("./videojs-plugins/videojs-smooth-scrubbing"),e("./videojs-plugins/videojs-stream-watchdog"),e("./videojs-plugins/videojs-title-bar"),e("./videojs-plugins/videojs-volume-button"),e("./videojs-plugins/tracking/google-tag-manager"),e("./videojs-plugins/triton/TritonSidebandMetadataPlugin"),e("./videojs-plugins/triton/TritonCompanionAdPlugin"),e("./videojs-plugins/ResizePlayer"),e("./videojs-plugins/AutoplayBrowsers"),e("./videojs-plugins/VideoMidroll"),e("./videojs-plugins/MutedOverlay"),e("./videojs-plugins/VideoWatchedTimeUpdate"),e("./videojs-plugins/videojs-fence"),e("./videojs-plugins/RegUIPopUp"),e("./videojs-plugins/ChromeCast"),window._V_=window.videojs,window.BPlayer&&(window.BPlayer.BloombergVideoPlayer=window.BPlayer.BloombergVideoPlayer||e("./lib/bloomberg-video-player"),window.BPlayer.EmbedStrategy=window.BPlayer.EmbedStrategy||e("./strategy/EmbedStrategy"),window.BPlayer.ScriptTagStrategy=window.BPlayer.ScriptTagStrategy||e("./strategy/ScriptTagStrategy"))},{"./lib/bloomberg-video-player":18,"./lib/google-ads/videojs-google-ads":39,"./strategy/EmbedStrategy":57,"./strategy/ScriptTagStrategy":58,"./videojs-plugins/AutoplayBrowsers":78,"./videojs-plugins/ChromeCast":79,"./videojs-plugins/MutedOverlay":80,"./videojs-plugins/RegUIPopUp":81,"./videojs-plugins/ResizePlayer":82,"./videojs-plugins/VideoMidroll":83,"./videojs-plugins/VideoWatchedTimeUpdate":84,"./videojs-plugins/closed-captions/videojs-closed-captions-control":85,"./videojs-plugins/hls/videojs-hls-bridge":89,"./videojs-plugins/hls/videojs-recover-hls-error":92,"./videojs-plugins/share-control-js/videojs-share-control":94,"./videojs-plugins/share-control-js/videojs-share-overlay":95,"./videojs-plugins/tracking/google-tag-manager":96,"./videojs-plugins/triton/TritonCompanionAdPlugin":100,"./videojs-plugins/triton/TritonSidebandMetadataPlugin":101,"./videojs-plugins/videojs-activity-override":102,"./videojs-plugins/videojs-comscore-stream-sense":103,"./videojs-plugins/videojs-fence":104,"./videojs-plugins/videojs-moat-ad-viewability":105,"./videojs-plugins/videojs-parsely":106,"./videojs-plugins/videojs-persist-listeners":107,"./videojs-plugins/videojs-playback-outro":108,"./videojs-plugins/videojs-poster":109,"./videojs-plugins/videojs-smooth-scrubbing":110,"./videojs-plugins/videojs-stream-watchdog":111,"./videojs-plugins/videojs-title-bar":112,"./videojs-plugins/videojs-volume-button":113,"./videojs-plugins/youbora/videojs-youbora":114}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("../../events/player-events"),d=r(u),c=videojs.getComponent("ChromeCastButton"),p="vjs-chromecast-button--hidden",f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.player_.on(d.default.SUBSCRIBER_STATUS_CHANGE,r._onSubscriberStatusChange.bind(r)),r.addClass(p),r}return a(t,e),s(t,[{key:"handleClick",value:function(){var e=this.casting?d.default.STOP_CHROME_CAST:d.default.START_CHROME_CAST;this.player_.trigger(e),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleClick",this).call(this)}},{key:"_onSubscriberStatusChange",value:function(e){e.data.isBBGSubscriber?this.removeClass(p):this.addClass(p)}}]),t}(c);n.default=f},{"../../events/player-events":17}],12:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=videojs.getComponent("Component"),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"createEl",value:function(){return this.selector="bvp-fence-subscribe-"+Math.floor(1e4*Math.random()),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-fence-subscribe",id:this.selector})}}]),t}(l);n.default=u},{}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("log"),d=r(u),c=e("../../utils/projector-utils"),p=r(c),f=e("bvp-constant"),h=e("../../events/player-events"),v=r(h),y=e("../../events/ad-events"),_=r(y),m=e("../../utils/css-helpers"),g=r(m),b=new d.default("MutedOverlayComponent"),E=videojs.getComponent("Component"),A=["_initializeOverlay","_suppressMouseOver","_updateSkipState","_clearSkipState"],P="bvp-muted-overlay--skippable",w=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));r.player=e,r.hasBuiltOverlay=!1;for(var a=0;a<A.length;a++){var s=A[a];r[s]=r[s].bind(r)}return e.ready(r._initializeOverlay),e.on(v.default.ENDED,function(){return r._destroy()}),r}return a(t,e),s(t,[{key:"show",value:function(){this._buildOverlay(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"_destroy",value:function(){this.hide(),this._clickOverlayEl&&(this._clickOverlayEl.removeEventListener("click",this._unmuteAndLoadContent),this._clickOverlayEl.removeEventListener("mouseover",this._suppressMouseOver),this._clickOverlayEl=null)}},{key:"_initializeOverlay",value:function(){var e=this.player_;return e.techName_===f.FLASH_TECH_NAME?void b.info("component disabled for Flash tech"):e.options_.original_user_options.autoplay?void this._buildOverlay():void this.hide()}},{key:"_buildOverlay",value:function(){if(!this.hasBuiltOverlay){var e=videojs.createEl("div",{className:"bvp-muted-overlay"});this.el().appendChild(e),this._clickOverlayEl=e;var t=this.player_;this._unmuteAndLoadContent=this._unmuteAndLoadContent.bind(this,t),this._clickOverlayEl.addEventListener("click",this._unmuteAndLoadContent),this._clickOverlayEl.addEventListener("mouseover",this._suppressMouseOver),this.player.on(_.default.SKIP_STATE_CHANGED,this._updateSkipState),this.player.on(_.default.ALL_ADS_COMPLETED,this._clearSkipState),this.player.on(v.default.ADS_TIMEOUT_ERROR,this._clearSkipState),this.player.trigger(v.default.MUTED_OVERLAY_SHOW),this.hasBuiltOverlay=!0}}},{key:"_suppressMouseOver",value:function(e){e.stopPropagation()}},{key:"_unmuteAndLoadContent",value:function(e,t){t.stopPropagation(),this.hide(),b.info("Unmute content;"),this.player.trigger(v.default.MUTED_OVERLAY_CLICKED),p.default.canAutoplayAfterAction()&&(b.info("Set autoplayAllowed to true"),p.default.setAutoplayAllowed(!0)),this._unmuteContent(e),this._loadContent(e)}},{key:"_loadContent",value:function(e){var t=e.AdController;t&&t.loadAdAndContent()}},{key:"_unmuteContent",value:function(e){var t=e.AdController;return t?void t.unmuteAdAndContent():void e.muted(!1)}},{key:"_updateSkipState",value:function(e){var t=e.data.adSkipState;t?g.default.addClass(this._clickOverlayEl,P):this._clearSkipState()}},{key:"_clearSkipState",value:function(){g.default.removeClass(this._clickOverlayEl,P)}}]),t}(E);n.default=w},{"../../events/ad-events":16,"../../events/player-events":17,"../../utils/css-helpers":65,"../../utils/projector-utils":72,"bvp-constant":"bvp-constant",log:"log"}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");
}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=new s.default("BasicCompanionAdRenderer"),u="companion-ad-iframe",d=function(){function e(t,n){i(this,e),this.containerEl=t,this.adData=n}return o(e,[{key:"render",value:function(){var e=this.adData.parameters,t=e.ad_url.split("|")[1];this.containerEl.innerHTML='<iframe class="'+u+'" scrolling="no" src="'+t+'">'}},{key:"dispose",value:function(){l.debug("Removing companion Ad");var e=this.containerEl.querySelector(".companion-ad-iframe");e&&e.parentNode.removeChild(e)}}]),e}();n.default=d},{log:"log"}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("log"),d=r(u),c=e("./BasicCompanionAdRenderer"),p=r(c),f=e("../../events/player-events"),h=r(f),v=new d.default("CompanionAdComponent"),y=videojs.getComponent("Component"),_=5e3,m="bvp-companion-ad--visible",g=["_onCompanionAd","_onTimeUpdate"],b=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return g.forEach(function(e){return r[e]=r[e].bind(r)}),r.renderer=null,r.adExpireTime=1/0,r.player=e,r.player.on(h.default.COMPANION_AD,r._onCompanionAd),r.player.on(h.default.TIMEUPDATE,r._onTimeUpdate),r}return a(t,e),s(t,[{key:"createEl",value:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-companion-ad"})}},{key:"dispose",value:function(){this._removeAd(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_onCompanionAd",value:function(e){var t=e.data,n=this._playerCurrentTime(),r=parseInt(t.parameters.cue_time_duration,10)||_,i=t.timestamp+r;n>i||(v.debug("Showing Companion Ad",t),this._removeAd(),this._showAd(t),this.adExpireTime=i)}},{key:"_onTimeUpdate",value:function(){var e=this._playerCurrentTime();this.adExpireTime<e&&this._removeAd()}},{key:"_playerCurrentTime",value:function(){return 1e3*this.player.currentTime()}},{key:"_showAd",value:function(e){this.addClass(m),e.parameters.ad_url&&(this.renderer=new p.default(this.el(),e),this.renderer.render())}},{key:"_removeAd",value:function(){this.removeClass(m),this.adExpireTime=1/0,this.renderer&&(this.renderer.dispose(),this.renderer=null)}}]),t}(y);n.default=b},{"../../events/player-events":17,"./BasicCompanionAdRenderer":14,log:"log"}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={AD_ALMOST_FINISHED:"AD_ALMOST_FINISHED",AD_CLICKED:"AD_CLICKED",AD_COMPLETED:"AD_COMPLETED",AD_LOAD_ERROR:"AD_LOAD_ERROR",AD_LOAD_TIMED_OUT:"AD_LOAD_TIMED_OUT",AD_LOADING:"AD_LOADING",AD_LOADED:"AD_LOADED",AD_PAUSED:"AD_PAUSED",AD_PLAY_ERROR:"AD_PLAY_ERROR",AD_PLAYBACK_PROGRESS_UPDATE:"AD_PLAYBACK_PROGRESS_UPDATE",AD_PLAYBACK_TIMED_OUT:"AD_PLAYBACK_TIMED_OUT",AD_REQUESTED:"AD_REQUESTED",AD_RESUMED:"AD_RESUMED",AD_STARTED:"AD_STARTED",ADS_FAILURE:"ADS_FAILURE",ADS_READY:"ADS_READY",ALL_ADS_COMPLETED:"ALL_ADS_COMPLETED",CLIP:"clip",CONTENT_PAUSE_REQUESTED:"CONTENT_PAUSE_REQUESTED",CONTENT_RESUME_REQUESTED:"CONTENT_RESUME_REQUESTED",DURATION_CHANGE:"DURATION_CHANGE",MAX_RETRIES_REACHED:"MAX_RETRIES_REACHED",PAUSED:"PAUSED",REQUEST_AD_PAUSE:"REQUEST_AD_PAUSE",REQUEST_AD_PLAY:"REQUEST_AD_PLAY",RESUMED:"RESUMED",STARTED:"STARTED",SKIPPED:"SKIPPED",SKIP_STATE_CHANGED:"SKIP_STATE_CHANGED"};n.default=r},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={AD_LOADING:"adloading",ADS_LOAD_ERROR:"adsloaderror",ADS_LOAD_TIMEOUT:"adsloadtimeout",ADS_PLAY_ERROR:"adsplayerror",ADS_PLAY_TIMEOUT:"adsplaytimeout",ADS_TIMEOUT_ERROR:"adstimeouterror",BITRATE_CHANGE:"bitrateChange",BUFFER:"buffer",CAPTIONS_CHANGE:"captionschange",CONTENT_CHANGE:"contentchange",DISMISS_SHARE:"dismissShare",DISPOSE:"dispose",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",FATAL_ERROR:"fatalError",FULL_SCREEN_CHANGE:"fullscreenchange",HLS_BRIDGE_ERROR:"hlsBridgeError",HLS_BRIDGE_FATAL_ERROR:"hlsBridgeFatalError",HLS_CUE_IN:"hlsCueIn",HLS_CUE_OUT:"hlsCueOut",HLS_CUE_OUT_LOADED:"hlsCueOutLoaded",LOADED_METADATA:"loadedmetadata",LOADED_METADATA_SHIM:"loadedmetadata_shim",PAUSE:"pause",PLAY:"play",PLAY_PREROLL:"playPreroll",PREPARED_MIDROLL:"preparemidroll",READY:"ready",REQUEST_SHARE:"requestShare",RETRY:"retry",SEEK_START:"seekStart",SHARE:"share",SHARE_ACTION:"share_action",START_MIDROLL:"startmidroll",TIMEUPDATE:"timeupdate",TRACK_INFO:"track-info",USER_ACTIVE:"useractive",USER_INACTIVE:"userinactive",VOLUME_CHANGE:"volumechange",WATCHDOG_RELOAD:"watchdogreload",BVP_VOLUME_CHANGE:"bvp_volumechange",CONTINUOUS_PLAY_START:"continuousPlayStart",COMPANION_AD:"companionAd",VIDEO_CHANGE:"videoChange",REPLAY:"replay",MUTED_OVERLAY_SHOW:"mutedOverlayShow",MUTED_OVERLAY_CLICKED:"mutedOverlayClicked",PAY_WALL_PLAY:"payWallPlay",PAY_WALL_PAUSE:"payWallPause",SUBSCRIBER_STATUS_CHANGE:"subscriberStatusChange",REG_UI_POP_UP_SHOWN:"reg-ui-show-pop-up",REG_UI_POP_UP_CLOSED:"reg-ui-close-pop-up",START_CHROME_CAST:"startChromeCast",STOP_CHROME_CAST:"stopChromeCast"};n.default=r},{}],18:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return h.FLASH_TECH_NAME===e.techName_}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../events/ad-events"),u=r(l),d=e("../lib/google-ads/ad-utils"),c=r(d),p=e("../utils/projector-utils"),f=r(p),h=e("bvp-constant"),v=e("../events/player-events"),y=r(v),_=e("log"),m=r(_),g=e("error-report"),b=r(g),E=new m.default("BloombergVideoPlayer"),A="AdController",P=[y.default.ADS_TIMEOUT_ERROR,u.default.ALL_ADS_COMPLETED],w=Symbol("eventHandlers"),S=Symbol("readyHandlers"),k=Symbol("triggerHandlers"),C=Symbol("strategyPromise"),O="function",T="unload",j="GoogleAdsPlugin",R=function(){},L=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,r=arguments[1],o=arguments[2];i(this,e),this.disposed=!1,this._hasContentStarted=!1,this.player=null,this.userOptions=t,this[w]=[],this[S]=[],this[k]=[],r||(r={onReady:R,onError:R}),this._onVolumeChange=this._onVolumeChange.bind(this),this[C]=o.run().then(function(e){if(!n.disposed){e.options_.plugins.hasOwnProperty(j)&&c.default.hasPreroll(e.options_.plugins[j])&&n.setIsAdPlaying(!0);var t=void 0;for(n.player=e,a(r.onReady)===O&&r.onReady.call(n.player,n.player);t=n[S].pop();)n.player.ready(t.handler,t.sync);for(;t=n[w].pop();)n.player.on(t.first,t.second,t.third);for(;t=n[k].pop();)n.player.trigger(t.type,t.eventDetails);return t=null,n.player.on(u.default.AD_STARTED,function(){return n.setIsAdPlaying(!0)}),n.player.on(P,function(){return n.setIsAdPlaying(!1)}),n.player.on(y.default.REQUEST_SHARE,function(){return n.setIsShareShowing(!0)}),n.player.on(y.default.DISMISS_SHARE,function(){return n.setIsShareShowing(!1)}),n.player.on(y.default.PLAY,function(){return n._hasContentStarted=!0}),n.player.on(y.default.VOLUME_CHANGE,n._onVolumeChange),n.player.on(y.default.PAY_WALL_PLAY,n.play.bind(n)),n.player.on(y.default.PAY_WALL_PAUSE,n.pause.bind(n)),n.player.on(y.default.REG_UI_POP_UP_SHOWN,n.pause.bind(n)),n.player.on(y.default.REG_UI_POP_UP_CLOSED,n.play.bind(n)),e}},function(e){a(r.onError)===O&&r.onError(e),b.default.recordGenericError(E,e)}),this.dispose=this.dispose.bind(this),window.addEventListener(T,this.dispose)}return s(e,[{key:"isAdPlaying",value:function(){return this.adStatus}},{key:"setIsAdPlaying",value:function(e){this.adStatus=e}},{key:"isShareShowing",value:function(){return this.shareStatus}},{key:"setIsShareShowing",value:function(e){this.shareStatus=e}},{key:"getId",value:function(){return this.userOptions.id}},{key:"getPlaylistIndex",value:function(){return this.userOptions.playlistIndex}},{key:"getHtmlChildId",value:function(){return this.userOptions.htmlChildId}},{key:"setAutoplay",value:function(e){this.player&&this.player.hasOwnProperty(A)&&this.player[A].setAutoplay(e),this.userOptions.autoplay=e}},{key:"isAutoplay",value:function(){return Boolean(this.userOptions.autoplay)}},{key:"play",value:function(){var e=this.player,t=o(e);if(this.isAdPlaying()){if(t)return void e.play();var n=e[A];if(!n)return;return f.default.isAutoplayDisabledBrowser()&&!n.isAdStarted()&&(n.muteAdAndContent(),this._showMutedOverlay()),n.setAutoplay(!0),void e.trigger({type:u.default.REQUEST_AD_PLAY})}e&&!this.isShareShowing()&&(t||this._hasContentStarted||!f.default.isAutoplayDisabledBrowser()||(e.muted(!0),this._showMutedOverlay()),e.play())}},{key:"_showMutedOverlay",value:function(){this.player.MutedOverlayComponent&&this.player.MutedOverlayComponent.show()}},{key:"pause",value:function(){return this.isAdPlaying()?o(this.player)?void this.player.pause():void this.player.trigger({type:u.default.REQUEST_AD_PAUSE}):void(this.player&&this.player.pause())}},{key:"ready",value:function(e,t){if(e){if(this.player)return this.player.ready(e,t),this[C];this[S].push({handler:e,sync:t})}return this[C]}},{key:"dispose",value:function(){this.disposed=!0,this.player&&this.player.dispose(),this.player=this.userOptions=null,this[w]=null,this[S]=null,this[k]=null,window.removeEventListener(T,this.dispose)}},{key:"on",value:function(e,t,n){return this.player?this.player.on(e,t,n):(this[w].push({first:e,second:t,third:n}),this)}},{key:"off",value:function(e,t,n){return this.player&&this.player.off(e,t,n),this}},{key:"trigger",value:function(e,t){return this.player?this.player.trigger(e,t):(this[k].push({type:e,eventDetails:t}),this)}},{key:"trackInfo",value:function(e){this.trigger("track-info",e)}},{key:"isPlaying",value:function(){return f.default.isAdOrContentPlaying(this.player)}},{key:"_onVolumeChange",value:function(){var e=this.player;e.trigger({type:y.default.BVP_VOLUME_CHANGE,data:{volume:e.volume(),muted:e.muted()}})}}]),e}();t.exports=L},{"../events/ad-events":16,"../events/player-events":17,"../lib/google-ads/ad-utils":30,"../utils/projector-utils":72,"bvp-constant":"bvp-constant","error-report":"error-report",log:"log"}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=B.resourceID;return k.default.getTextForXPath(e,t)}function a(e){var t=B.showName;return k.default.getTextForXPath(e,t)}function s(e){return l(e,B)||u(e,B)||d(e,B)||c(e,B)||p(e,B)||f(e,B)||""}function l(e,t){var n=t.web_title;return k.default.getTextForXPath(e,n)}function u(e,t){var n=t.mobile_title;return k.default.getTextForXPath(e,n)}function d(e,t){var n=t.avmm_media_title;return k.default.getTextForXPath(e,n)}function c(e,t){var n=t.terminal_story_title;return k.default.getTextForXPath(e,n)}function p(e,t){var n=t.seo_title;return k.default.getTextForXPath(e,n)}function f(e,t){var n=t.nt_st_ep;return k.default.getTextForXPath(e,n)}function h(e){var t=B.durationMSec;return parseInt(k.default.getTextForXPath(e,t),10)}function v(e){var t=B.createdUnixUTC,n=parseInt(k.default.getTextForXPath(e,t),10),r=1e3*n,i=new Date(r);return isNaN(i)?null:i.toISOString().slice(0,10)}function y(e){var t=B.niCodes,n=k.default.getNodeForXPath(e,t),r=n?P(n.childNodes):[];return r.reduce(function(e,t){var n=P(t.childNodes);return e.push(n.reduce(function(e,t){return e[t.nodeName]=k.default.getTextForNode(t),e},{})),e},[])}function _(e){var t=B.keywords,n=k.default.getNodeForXPath(e,t),r=n?P(n.childNodes):[];return r.map(function(e){return e.textContent})}function m(e){var t=B.peopleCodes,n=k.default.getNodeForXPath(e,t),r=n?P(n.childNodes):[];return r.map(function(e){var t=P(e.childNodes);return t.reduce(function(e,t){return e[t.nodeName]=k.default.getTextForNode(t),e},{})})}function g(e){var t=e.thumbnail,n=t.images;return Object.keys(n).reduce(function(e,t){var r=n[t];return e.push({url:r.url[0],width:parseInt(r.width,10),height:parseInt(r.height,10)}),e},[])}function b(e){var t=B.comscore,n=void 0===t?{}:t;return new L.default({ntStEp:k.default.getTextForXPath(e,n.nt_st_ep),nsStTy:k.default.getTextForXPath(e,n.ns_st_ty),c5:k.default.getTextForXPath(e,n.c5),bbPubD:k.default.getTextForXPath(e,n.bb_pub_d)})}function E(e){var t=e.captions;return t?[new j.default({url:t})]:[]}function A(e,t){var n=e.secureStreams,r=e.streams,i=t&&n&&n.length?n:r;return i.map(function(e){return new O.default(e)})}function P(e){return Array.prototype.slice.call(e)}Object.defineProperty(n,"__esModule",{value:!0});var w=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=e("../xml-utils-js"),k=r(S),C=e("./video-stream"),O=r(C),T=e("./caption"),j=r(T),R=e("./comscore-metadata"),L=r(R),D=e("../../utils/memoizer"),M=r(D),U=e("../projector-settings-js/poster-size"),I=r(U),x="/bmObject/bmContents/bmContent/descriptions/description/ExtensionGroup/bmBloombergCustom",N="/bmObject/bmContents/bmContent/descriptions/description/bmContentDescription/alternativeTitle",B={resourceID:"/bmObject/resourceID",durationMSec:x+"/durationMSec",createdUnixUTC:x+"/createdUnixUTC",showName:x+"/showName",thumbnails:x+"/thumbnails",niCodes:x+"/NiCodes",comscore:{nt_st_ep:x+"/comscore/nt_st_ep",bb_pub_d:x+"/comscore/bb_pub_d",ns_st_ty:x+"/comscore/ns_st_ty",c5:x+"/comscore/C5"},web_title:N+'[@typeDefinition="web_title"]',mobile_title:N+'[@typeDefinition="mobile_title"]',avmm_media_title:N+'[@typeDefinition="avmm_media_title"]',terminal_story_title:N+'[@typeDefinition="terminal_story_title"]',seo_title:N+'[@typeDefinition="seo_title"]',keywords:x+"/seoKeywords",peopleCodes:x+"/peopleCodes"},F=Symbol("bmmrResponse"),V=Symbol("xmlObject"),H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,e),!t||!t.xml)throw new Error("Invalid BMMR response passed.");var n=k.default.removeXmlNamespaces(t.xml);this[F]=t,this[V]=k.default.parseXml(n),this.getId=M.default.memoize(o.bind(null,this[V])),this.getTitle=M.default.memoize(s.bind(null,this[V])),this.getDuration=M.default.memoize(h.bind(null,this[V])),this.getCreateDate=M.default.memoize(v.bind(null,this[V])),this.getShowName=M.default.memoize(a.bind(null,this[V])),this.getNiCodes=M.default.memoize(y.bind(null,this[V])),this.getComscoreMetadata=M.default.memoize(b.bind(null,this[V])),this.getCaptions=M.default.memoize(E.bind(null,this[F])),this.getStreams=M.default.memoize(A.bind(null,this[F])),this.getImages=M.default.memoize(g.bind(null,this[F])),this.getKeywords=M.default.memoize(_.bind(null,this[V])),this.getPeoples=M.default.memoize(m.bind(null,this[V]))}return w(e,[{key:"getCedexisAppID",value:function(){return this[F].cedexisAppID}},{key:"getCompressedID",value:function(){return this[F].compressed_id}},{key:"getAdTag",value:function(){return this[F].ad_tag}},{key:"getPrerollAdUnit",value:function(){return this[F].preroll_ad_unit}},{key:"getRawNiData",value:function(){return this[F].ni}},{key:"getPosterTemplateImage",value:function(){var e=this.getImages();if(!e)return null;for(var t=0;t<e.length;t++){var n=e[t].url;if(I.default.isTemplateImage(n))return n}return null}},{key:"getContentTags",value:function(){return(this[F].metadata||{}).contentTags}},{key:"getAdCuePoints",value:function(){return this[F].adCuePoints?this[F].adCuePoints.split(",").map(function(e){return parseFloat(e)}).sort(function(e,t){return e-t}):[]}}]),e}();n.default=H},{"../../utils/memoizer":70,"../projector-settings-js/poster-size":46,"../xml-utils-js":53,"./caption":21,"./comscore-metadata":22,"./video-stream":23}],20:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("bvp-shims"),s=e("./bmmr-asset-js"),l=r(s),u=e("log"),d=r(u),c=e("error-report"),p=r(c),f=e("load-timer"),h=r(f),v=new d.default("BmmrLoader"),y=/^\/\//,_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=t.serverUrl,r=t.id,o=t.idType,s=t.htmlChildId;if(!n||!r)throw new Error("BmmrLoader Missing required options. Please check that serverUrl and id are supplied.");this.isLive=Boolean(t.live),this.url=n+"?id="+r+"&version="+a.version,this.htmlChildId=s,y.test(this.url)&&(this.url="https:"+this.url),o&&(this.url+="&idType="+o)}return o(e,null,[{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new e(t).loadBmmrMetadata()}}]),o(e,[{key:"loadBmmrMetadata",value:function(){var e=this;if(this.isLive)return Promise.reject(new Error("BmmrLoader Live video flag is set"));var t={mode:"cors",credentials:"same-origin",cache:"no-cache"};return h.default.trackLoadStart(this.htmlChildId,h.default.loadTypes.BMMR,this.url),fetch(this.url,t).then(this.handleBmmrResponse.bind(this)).then(function(t){var n=new l.default(t);return h.default.trackLoadComplete(e.htmlChildId,h.default.loadTypes.BMMR,h.default.loadStatus.COMPLETE),n}).catch(function(t){p.default.recordLoadError(v,e.url,t),h.default.trackLoadComplete(e.htmlChildId,h.default.loadTypes.BMMR,h.default.loadStatus.ERROR)})}},{key:"handleBmmrResponse",value:function(e){if(200!==e.status)throw new Error("BmmrLoader Unable to load BMMR metadata for "+this.url+" with status "+e.status);return e.json()}}]),e}();n.default=_},{"./bmmr-asset-js":19,"bvp-shims":"bvp-shims","error-report":"error-report","load-timer":"load-timer",log:"log"}],21:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=t.url,i=void 0===n?null:n;r(this,e),this.url=i}return i(e,[{key:"getUrl",value:function(){return this.url}}]),e}();n.default=o},{}],22:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=t.ntStEp,i=void 0===n?null:n,o=t.nsStTy,a=void 0===o?null:o,s=t.bbPubD,l=void 0===s?null:s,u=t.c5,d=void 0===u?null:u;r(this,e),this.ntStEp=i,this.nsStTy=a,this.bbPubD=l,this.c5=d}return i(e,[{key:"getNtStEp",value:function(){return this.ntStEp}},{key:"getNsStTy",value:function(){return this.nsStTy}},{key:"getBbPubD",value:function(){return this.bbPubD}},{key:"getC5",value:function(){return this.c5}}]),e}();n.default=o},{}],23:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=t.video_codec,i=void 0===n?null:n,o=t.muxing_format,a=void 0===o?null:o,s=t.video_bitrate,l=void 0===s?0:s,u=t.audio_codec,d=void 0===u?null:u,c=t.audio_bitrate,p=void 0===c?null:c,f=t.profile,h=void 0===f?null:f,v=t.stream_type,y=void 0===v?null:v,_=t.url,m=void 0===_?null:_,g=t.height,b=void 0===g?null:g,E=t.width,A=void 0===E?null:E,P=t.file_size,w=void 0===P?null:P,S=t.percent,k=void 0===S?null:S,C=t.cedexis_platform,O=void 0===C?null:C;r(this,e),this.videoCodec=i,this.videoBitrate=l?parseInt(l,10):l,this.audioCodec=d,this.audioBitrate=p?parseInt(p,10):p,this.muxingFormat=a,this.profile=h,this.streamType=y,this.url=m,this.height=b?parseInt(b,10):b,this.width=A?parseInt(A,10):A,this.fileSize=w?parseInt(w,10):w,this.percent=k?parseInt(k,10):k,this.cedexisPlatform=O}return i(e,[{key:"getVideoCodec",value:function(){return this.videoCodec}},{key:"getMuxingFormat",value:function(){return this.muxingFormat}},{key:"getVideoBitrate",value:function(){return this.videoBitrate}},{key:"getAudioCodec",value:function(){return this.audioCodec}},{key:"getAudioBitrate",value:function(){return this.audioBitrate}},{key:"getProfile",value:function(){return this.profile}},{key:"getStreamType",value:function(){return this.streamType}},{key:"getUrl",value:function(){return this.url}},{key:"getHeight",value:function(){return this.height}},{key:"getWidth",value:function(){return this.width}},{key:"getFileSize",value:function(){return this.fileSize}},{key:"getPercent",value:function(){return this.percent}},{key:"isSecure",value:function(){return this.url&&"https"===this.url.slice(0,5)}},{key:"toJSON",value:function(){return{url:this.url,type:this.streamType,bitrate:this.videoBitrate,percent:this.percent}}}]),e}();n.default=o},{}],24:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n,r,i){return new p.default({playerWidth:t.width(),playerHeight:t.height(),playerId:t.el().id,poster:t.options_.metadata.poster,bufferingAnimation:e.bufferingAnimation,controlsFadeMillis:e.controlsFadeMillis,adDimensions:i,volume:n,muted:r},t)}function a(e){j.info("setAutoPlayClass on",e),b.default.addClass(e,"vjs-autoplay")}function s(e){return{type:e.options_.metadata.form_type,clip:e.options_.metadata.id,duration:e.duration(),url:e.currentSrc(),metadata:{}}}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("../../utils/projector-utils"),d=r(u),c=e("./ad-controls"),p=r(c),f=e("../../events/player-events"),h=r(f),v=e("../../events/ad-events"),y=r(v),_=e("../../utils/persist-controls"),m=r(_),g=e("../../utils/css-helpers"),b=r(g),E=e("./ad-preroll"),A=r(E),P=e("./ad-midroll"),w=r(P),S=e("./ad-utils"),k=r(S),C=e("log"),O=r(C),T=e("bvp-constant"),j=new O.default("AdController"),R=".bvp-ad__content",L=["destroy","fetchMidroll","onAdComplete","onAdLoaded","onAdLoading","onAdPause","onAdPauseRequest","onAdPlayError","onAdPlayRequest","onAdResume","onAdStart","onAdSkipped","onAdSkipStateChange","onAdsTimedOut","onAllAdsComplete","onContentPauseRequested","onDurationChange","onExitFullscreen","onFullscreen","onPlaybackStatusUpdate","onPlayerResize","onVolumeChange","playMidroll","prerollForAutoplayDisabledBrowser"],D=function(){function e(t,n){i(this,e);var r=k.default.hasPreroll(t),o=k.default.hasMidroll(t);if(r||o){j.info("HTML5 browser detected");var a=n.el().getBoundingClientRect(),s=n.options_.original_user_options;this.videoTag=null,this.player=n,this.currentAdStarted=null,this.isMobile=d.default.isMobile(),this.isAdPlayable=Boolean(s.autoplay||t.forcePlay),this.isLive=s.live,this.playerWidth=a.width,this.playerHeight=a.height,this.animationFrameId=null,this.muteStatus=n.options_.muted,this.config=t,this.adDimensions=null,this.adUnit=null;for(var l=0;l<L.length;l++){var u=L[l];this[u]=this[u].bind(this)}this.player.on(y.default.REQUEST_AD_PLAY,this.onAdPlayRequest).on(y.default.REQUEST_AD_PAUSE,this.onAdPauseRequest).on(h.default.DISPOSE,this.destroy),this.volume=this.getPlayerVolume(),this.adControls=this.createAdControls(),this.googleIma=window.google.ima;var c=this.player.el().querySelector(R);this.adDisplayContainer=new this.googleIma.AdDisplayContainer(c),this.adsLoader=new this.googleIma.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(this.googleIma.ImaSdkSettings.VpaidMode.ENABLED),this.adsLoader.getSettings().setAutoPlayAdBreaks(!1),r?this.setupPreroll():this.adControls.hidePlayButton(),o&&this.setupMidroll()}}return l(e,[{key:"_initializeAdDisplayContainer",value:function(){d.default.needDirectUserActionToPlay()&&this._getAdType()===T.AD_TYPES.PREROLL&&this.videoTag.load(),this.adDisplayContainer.initialize()}},{key:"setupMidroll",value:function(){this.player.tech_.on(h.default.HLS_CUE_OUT,this.playMidroll)}},{key:"setupPreroll",value:function(){return this.prepareForAd(),d.default.isActionRequiredToPlayAd(this.muteStatus)?void this.adControls.one(p.default.events.AD_REQUEST,this.prerollForAutoplayDisabledBrowser):void this.preRollForDesktop()}},{key:"preRollForDesktop",value:function(){this.isAdPlayable?(this.showBufferingAnimation(),this.fetchPreroll({autoPlay:!0})):(this.hideBufferingAnimation(),this.adControls.one(p.default.events.AD_REQUEST,this.onAdPlayRequest))}},{key:"prerollForAutoplayDisabledBrowser",value:function(){this.isAdPlayable=!0,this.showBufferingAnimation(),this.fetchPreroll({autoPlay:!1})}},{key:"_createFetchOptions",value:function(){return Object.assign({},this.config,{adDisplayContainer:this.adDisplayContainer,adsLoader:this.adsLoader})}},{key:"fetchPreroll",value:function(e){var t=e.autoPlay;if(!this.adUnit){var n=this.muteStatus?0:this.volume;this.adUnit=new A.default(this._createFetchOptions(),this.adDimensions,this.videoTag,this.player,n,t),this.fetchAd()}}},{key:"playMidroll",value:function(e){if(!this.player.paused()){var t=this.player.muted();this.isAdPlayable=!0,this.setMuteStatus(t),this.fetchMidroll(e)}}},{key:"fetchMidroll",value:function(e){if(!this.adUnit){if(this.prepareForAd(),j.info("fetch midroll is called with the event",e),e&&e.data){var t=e.data.duration>>0;t>0&&(this.config.midrollMaxDuration=1e3*e.data.duration)}var n=this.muteStatus?0:this.volume;this.adUnit=new w.default(this._createFetchOptions(),this.adDimensions,this.videoTag,this.player,n),this.fetchAd()}}},{key:"fetchAd",value:function(){this.adControls.show(),this._initializeAdDisplayContainer(),this.adUnit.on([y.default.MAX_RETRIES_REACHED,y.default.AD_PLAYBACK_TIMED_OUT,y.default.AD_LOAD_TIMED_OUT].join(),this.onAdsTimedOut).on(y.default.AD_COMPLETED,this.onAdComplete).on(y.default.AD_LOADED,this.onAdLoaded).on(y.default.AD_LOADING,this.onAdLoading).on(y.default.AD_PAUSED,this.onAdPause).on(y.default.AD_PLAY_ERROR,this.onAdPlayError).on(y.default.AD_PLAYBACK_PROGRESS_UPDATE,this.onPlaybackStatusUpdate).on(y.default.AD_RESUMED,this.onAdResume).on(y.default.AD_STARTED,this.onAdStart).on(y.default.ALL_ADS_COMPLETED,this.onAllAdsComplete).on(y.default.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested).on(y.default.DURATION_CHANGE,this.onDurationChange).on(y.default.SKIPPED,this.onAdSkipped).on(y.default.SKIP_STATE_CHANGED,this.onAdSkipStateChange),this.adUnit.fetchAd(),setTimeout(this._sendAdRequestTracking.bind(this),0)}},{key:"_sendAdRequestTracking",value:function(){this.player.trigger({type:y.default.AD_REQUESTED,data:{adType:this._getAdType()}})}},{key:"createAdControls",value:function(){var e=o(this.config,this.player,this.volume,this.muteStatus,this.adDimensions);return e.on(p.default.events.PLAY_REQUEST,this.onAdPlayRequest).on(p.default.events.PAUSE_REQUEST,this.onAdPauseRequest).on(p.default.events.VOLUME_CHANGE,this.onVolumeChange).on(p.default.events.REQUEST_FULLSCREEN,this.onFullscreen).on(p.default.events.EXIT_FULLSCREEN,this.onExitFullscreen),e.initialize(),e}},{key:"switchToContent",value:function(){this.player.controlBar.show(),this.player.muted(this.muteStatus),this.player.play();var e=s(this.player);this.player.trigger({type:y.default.CLIP,data:e})}},{key:"updatePlayerUIForAd",value:function(){this.adjustVolumeControls(this.getPlayerVolume(),this.muteStatus),this.hidePlayerControls(),this.adUnit&&!this.currentAdStarted&&this.isAdPlayable&&this.showBufferingAnimation()}},{key:"showBufferingAnimation",value:function(){var e=this.adControls.getPlayStatus();e!==p.default.playStatus.BUFFERING&&(a(this.player.el()),this.adControls.showBufferingAnimation())}},{key:"hideBufferingAnimation",value:function(){this.adControls.setIdle()}},{key:"prepareForAd",value:function(){var e=this.player.el(),t=e.getBoundingClientRect();this.videoTag=this.player.tech_.el_,this.adDimensions=t}},{key:"hidePlayerControls",value:function(){this.player.controlBar.hide()}},{key:"showAdControls",value:function(){this.adControls.showUI()}},{key:"isPlaying",value:function(){return this.adControls.playStatus===p.default.playStatus.PLAYING}},{key:"destroy",value:function(){this.adControls.hideUI(),this.adControls.hide(),this.animationFrameId=null,this.videoTag=null,this.currentAdStarted=!1,this.adUnit&&(this.adUnit.destroy(),this.adUnit=null)}},{key:"onAdLoaded",value:function(e){j.info("onAdLoaded is called");var t=this.adUnit.getAdController();this.player.trigger({type:y.default.AD_LOADED,data:{adsManager:t.adsManager,adContainer:t.adContainer,viewMode:t.viewMode,adType:this._getAdType(),custParams:this.adUnit.fromConfig("custParams"),isLive:this.isLive,duration:e.detail.data.duration,title:e.detail.data.title,mediaUrl:e.detail.data.mediaUrl}}),this.updatePlayerUIForAd()}},{key:"onAdLoading",value:function(){this.player.trigger({type:h.default.AD_LOADING})}},{key:"onAdStart",value:function(e){this.hideBufferingAnimation(),j.info("Ad started"),this.monitorAdSizeStart(),this.player.trigger({type:y.default.CLIP,data:e.detail.data}),this.currentAdStarted=!0,this.showAdControls(),this.adControls.setPlayStatus(p.default.playStatus.PLAYING),this.player.trigger({type:y.default.AD_STARTED,data:e.detail.data})}},{key:"onAdResume",value:function(e){this.adControls.setPlayStatus(p.default.playStatus.PLAYING),this.player.trigger({type:y.default.AD_RESUMED,data:e.detail.data})}},{key:"onAdPause",value:function(e){this.adControls.setPlayStatus(p.default.playStatus.PAUSED),
this.player.trigger({type:y.default.AD_PAUSED,data:e.detail.data})}},{key:"onAdPlayError",value:function(e){this.hideBufferingAnimation(),this.monitorAdSizeEnd(),this.player.trigger(h.default.ADS_PLAY_ERROR,e)}},{key:"onAdPlayRequest",value:function(){return this.isAdPlayable=!0,this.adUnit?void(this.currentAdStarted?this.adUnit.resume():this.adUnit.startAd()):void this.fetchPreroll({autoPlay:!1})}},{key:"onAdPauseRequest",value:function(){this.adUnit&&this.adUnit.pause(),!this.isMobile&&this.isAdPlayable&&(this.isAdPlayable=!1,this.hideBufferingAnimation(),this.adControls.setPlayStatus(p.default.playStatus.PLAYING),this.adControls.setPlayStatus(p.default.playStatus.PAUSED))}},{key:"onContentPauseRequested",value:function(){return j.debug("onContentPauseRequested is called"),this.isLive?void this.player.muted(!0):void this.player.pause()}},{key:"onDurationChange",value:function(e){var t=e.detail.duration;this.player.trigger({type:h.default.DURATION_CHANGE,data:t})}},{key:"onPlaybackStatusUpdate",value:function(e){var t=e.detail.data,n=t.remainingTime,r=t.elapsedTime,i=t.duration;this.adControls.setAdCountdownTime(n,r,i),this.player.trigger({type:y.default.AD_PLAYBACK_PROGRESS_UPDATE,data:e.detail.data}),n<=this.player.options_.adAlmostFinishedThreshold&&this.player.tech_.trigger(y.default.AD_ALMOST_FINISHED)}},{key:"onAdSkipped",value:function(e){var t=e.detail?e.detail.data:{};this.player.trigger({type:y.default.SKIPPED,data:t})}},{key:"onAdSkipStateChange",value:function(e){var t=e.detail.data.adSkipState;this.player.trigger({type:y.default.SKIP_STATE_CHANGED,data:{adSkipState:t}})}},{key:"onAdComplete",value:function(e){var t=e.detail?e.detail.data:{};this.player.trigger({type:y.default.AD_COMPLETED,data:t})}},{key:"onAllAdsComplete",value:function(e){this.monitorAdSizeEnd(),this.player.trigger({type:y.default.ALL_ADS_COMPLETED,data:e.detail.data}),this.destroy(),this.switchToContent()}},{key:"onAdsTimedOut",value:function(e){j.info("onAdsTimedOut"),this.player.trigger({type:h.default.ADS_TIMEOUT_ERROR,data:{originalEvent:e,adType:e.detail.data.adType}}),this.destroy(),this.isAdPlayable&&this.switchToContent()}},{key:"onVolumeChange",value:function(e){this.volume=e.detail.volume,m.default.set("volume",this.volume),this.setMuteStatus(e.detail.muted),this.volume>0&&this.player.volume(this.volume),this.setAdVolume(this.volume,this.muteStatus)}},{key:"onFullscreen",value:function(){this.adUnit&&(this.monitorAdSizeEnd(),this.adUnit.resize(window.screen.width,window.screen.height,this.googleIma.ViewMode.FULLSCREEN))}},{key:"onExitFullscreen",value:function(){this.adUnit&&(this.monitorAdSizeStart(),this.adUnit.resize(this.playerWidth,this.playerHeight,this.googleIma.ViewMode.NORMAL))}},{key:"monitorAdSizeStart",value:function(){this.onPlayerResize&&(this.animationFrameId=window.requestAnimationFrame(this.onPlayerResize))}},{key:"monitorAdSizeEnd",value:function(){null!==this.animationFrameId&&window.cancelAnimationFrame(this.animationFrameId)}},{key:"onPlayerResize",value:function(){if(this.adUnit){var e=this.player.el().getBoundingClientRect(),t=e.width,n=e.height;this.playerHeight!=n&&this.playerWidth!=t&&(this.playerHeight=n,this.playerWidth=t,this.adUnit.resize(t,n,this.googleIma.ViewMode.NORMAL)),this.monitorAdSizeEnd(),this.monitorAdSizeStart()}}},{key:"adjustVolumeControls",value:function(e,t){this.adUnit&&(j.debug("adjustVolumeControls muted",t),this.setAdControlsVolume(e,t),d.default.isMobile()&&this.setAdVolume(e,t))}},{key:"setAdVolume",value:function(e,t){this.adUnit&&(e=t?0:e,this.adUnit.setVolume(e),this.player.trigger({type:h.default.BVP_VOLUME_CHANGE,data:{volume:e,muted:t}}))}},{key:"setAdControlsVolume",value:function(e,t){t?this.adControls.mute():this.adControls.setVolume(e)}},{key:"setAutoplay",value:function(e){this.isAdPlayable=e}},{key:"getPlayerVolume",value:function(){var e=parseFloat(m.default.get("volume"));return isFinite(e)?e:this.player.volume()}},{key:"setMuteStatus",value:function(e){this.muteStatus=e}},{key:"_isLinearAdPlaying",value:function(){return this.adUnit}},{key:"loadAdAndContent",value:function(){var e=this.adUnit&&this.adUnit.getAdType()===T.AD_TYPES.PREROLL;e&&d.default.needDirectUserActionToPlay()&&this.videoTag.load();var t=this._isLinearAdPlaying();t||this.adDisplayContainer.initialize()}},{key:"muteAdAndContent",value:function(){this.setMuteStatus(!0);var e=this.getPlayerVolume();this.adjustVolumeControls(e,!0)}},{key:"unmuteAdAndContent",value:function(){if(this.player.muted(!1),this._isLinearAdPlaying()){this.player.muted(!0),this.setMuteStatus(!1);var e=this.getPlayerVolume();this.adjustVolumeControls(e,!1)}}},{key:"isAdStarted",value:function(){return this.currentAdStarted}},{key:"_getAdType",value:function(){return this.adUnit?this.adUnit.getAdType():null}}]),e}();n.default=D},{"../../events/ad-events":16,"../../events/player-events":17,"../../utils/css-helpers":65,"../../utils/persist-controls":71,"../../utils/projector-utils":72,"./ad-controls":25,"./ad-midroll":26,"./ad-preroll":27,"./ad-utils":30,"bvp-constant":"bvp-constant",log:"log"}],25:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){return!!window.videojs.browser.IS_IOS&&("ontouchend"in window&&A.default.isChromeIos())}function l(e,t){e.addEventListener("touchend",t)}function u(e,t){s()||e.addEventListener(L,t)}function d(e,t){s()?l(e,t):e.addEventListener(L,t)}function c(e,t){s()?l(e,t):e.addEventListener(L,t)}Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=e("../../utils/event-target"),h=r(f),v=e("../../utils/css-helpers"),y=r(v),_=e("../../utils/datetime-utils"),m=r(_),g=e("./ad-volume-control"),b=r(g),E=e("../../utils/projector-utils"),A=r(E),P=e("../../events/player-events"),w=r(P),S=e("log"),k=r(S),C=e("error-report"),O=r(C),T=e("../../utils/fullscreen"),j=r(T),R=new k.default("AdControls"),L="click",D="bvp-ad-play-button__paused",M="bvp-ad-big-play-button__visible",U="bvp-ad-big-play-button__mobile",I="bvp-ad-buffering__visible",x="bvp-ad-control-bar__initial",N="bvp-ad-control-bar__hidden",B=3e3,F="vjs-fullscreen",V=["onPlayPauseTouch","onFullscreenControlClick","onFullscreenChange"],H="bvp-ad-exit-fullscreen",z=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return V.forEach(function(e){r[e]=r[e].bind(r)}),r.controlsComponent=n.getChild("AdControlsComponent"),r.container=null,r.adDimensions=null,r.controlBar=null,r.playPauseButton=null,r.bigPlayButton=null,r.fullscreenButton=null,r.bufferingAnimation=null,r.volume=e.volume,r.volumeControl=null,r.muted=e.muted,r.poster=e.poster,r.bufferingAnimationImage=e.bufferingAnimation,r.width=e.playerWidth,r.playStatus=t.playStatus.SETUP,r.player=n,r.fullscreen=j.default.isInFullScreen(),r.adDimensions=e.adDimensions,n.on(w.default.FULL_SCREEN_CHANGE,r.onFullscreenChange),r}return a(t,e),p(t,[{key:"initialize",value:function(){var e=this.controlsComponent.el();this.bigPlayButton=e.querySelector(".bvp-ad-big-play-button"),this.playPauseButton=e.querySelector(".bvp-ad-play-button"),this.bufferingAnimation=e.querySelector(".bvp-ad-buffering"),this.controlBar=e.querySelector(".bvp-ad-control-bar"),this.fullscreenButton=e.querySelector(".bvp-ad-fullscreen"),this.fullscreen&&y.default.addClass(this.fullscreenButton,H),this.container=e;var n=e.querySelector(".bvp-ad-sound-menu__mute-control"),r=this.player.tech_;r.featuresVolumeControl?this.initializeVolumeControl(e,n):y.default.addClass(n,"vjs-hidden"),A.default.isMobile()&&y.default.addClass(this.fullscreenButton,"vjs-hidden"),d(this.bigPlayButton,this.onPlayPauseTouch),c(this.playPauseButton,this.onPlayPauseTouch),u(this.fullscreenButton,this.onFullscreenControlClick),e=n=null,this.setPlayStatus(t.playStatus.SETUP)}},{key:"initializeVolumeControl",value:function(e,t){var n=e.querySelector(".bvp-ad-volume-bar__scrubber"),r=e.querySelector(".bvp-ad-volume-bar"),i=e.querySelector(".bvp-ad-volume-bar__container");this.volumeControl=new b.default({volumeBar:r,volumeScrubber:n,volumePath:i,muteControl:t,volume:this.volume,muted:this.muted}),this.volumeControl.setEventParent(this),r=n=i=null}},{key:"destroy",value:function(){var e=this;this.removeAllEventListeners(),this.adDimensions=null,this.bufferingAnimation=null,this.controlBar=null,this.volumeControl&&(this.volumeControl.destroy(),this.volumeControl=null),this.playPauseButton.removeEventListener(L,this.onPlayPauseTouch),this.playPauseButton=null,this.bigPlayButton.removeEventListener(L,this.onPlayPauseTouch),this.bigPlayButton=null,this.fullscreenButton.removeEventListener(L,this.onFullscreenControlClick),this.fullscreenButton=null,this.container=null,this.controlsComponent.hide(),this.player=null,V.forEach(function(t){e[t]=null})}},{key:"hide",value:function(){this.controlsComponent.hide()}},{key:"show",value:function(){this.controlsComponent.show()}},{key:"mute",value:function(){this.volumeControl&&this.volumeControl.mute()}},{key:"setVolume",value:function(e){this.volume=e,this.volumeControl&&this.volumeControl.setVolume(e)}},{key:"getAvailableAdHeight",value:function(){return this.adDimensions.height}},{key:"getPlayStatus",value:function(){return this.playStatus}},{key:"onPlayPauseTouch",value:function(){return this.playStatus!==t.playStatus.SETUP&&this.playStatus!==t.playStatus.IDLE||this.trigger(t.events.AD_REQUEST),this.playStatus===t.playStatus.PAUSED?(this.trigger(t.events.PLAY_REQUEST),void this.setPlay()):void(this.playStatus===t.playStatus.PLAYING&&(this.trigger(t.events.PAUSE_REQUEST),this.setPause()))}},{key:"onFullscreenControlClick",value:function(){return this.fullscreen?(this.player.exitFullscreen(),void this.player.removeClass(F)):(this.player.addClass(F),void this.player.requestFullscreen())}},{key:"onFullscreenChange",value:function(){return this.fullscreen?(this.fullscreen=!1,this.trigger(t.events.EXIT_FULLSCREEN),void y.default.removeClass(this.fullscreenButton,H)):(this.fullscreen=!0,this.trigger(t.events.REQUEST_FULLSCREEN),void y.default.addClass(this.fullscreenButton,H))}},{key:"setPlayStatus",value:function(e){switch(e){case t.playStatus.PAUSED:this.setPause();break;case t.playStatus.PLAYING:this.setPlay();break;case t.playStatus.BUFFERING:this.setBuffering();break;case t.playStatus.SETUP:this.setSetup();break;case t.playStatus.IDLE:this.setIdle();break;default:O.default.recordGenericError(R,"Received unsupported play status: "+e)}}},{key:"showUI",value:function(){this.controlsComponent.showUI()}},{key:"hideUI",value:function(){this.controlsComponent.hideUI()}},{key:"setAdCountdownTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=m.default.formatSeconds(e),i=m.default.formatSeconds(t),o=m.default.formatSeconds(n);this.controlsComponent.setCountdownTime(r,i,o)}},{key:"setPlay",value:function(){var e=this;this.playStatus=t.playStatus.PLAYING,y.default.addClass(this.playPauseButton,D),this.hidePlayButton(),y.default.removeClass(this.bufferingAnimation,I),y.default.removeClass(this.controlBar,N),y.default.addClass(this.controlBar,x),setTimeout(function(){y.default.removeClass(e.controlBar,x)},B)}},{key:"setPause",value:function(){this.playStatus=t.playStatus.PAUSED,y.default.removeClass(this.playPauseButton,D)}},{key:"setBuffering",value:function(){R.info("Buffering..."),this.hidePlayButton(),this.playStatus=t.playStatus.BUFFERING,y.default.addClass(this.bufferingAnimation,I)}},{key:"setIdle",value:function(){R.info("Idle..."),this.playStatus=t.playStatus.IDLE,y.default.removeClass(this.bufferingAnimation,I)}},{key:"setSetup",value:function(){this.playStatus=t.playStatus.SETUP,y.default.addClass(this.controlBar,N),this.showPlayButton(),y.default.removeClass(this.bufferingAnimation,I)}},{key:"showBufferingAnimation",value:function(){this.controlsComponent.show(),this.setPlayStatus(t.playStatus.BUFFERING)}},{key:"hideBufferingAnimation",value:function(){this.setPlayStatus(t.playStatus.SETUP)}},{key:"setPlaying",value:function(){this.setPlayStatus(t.playStatus.PLAYING)}},{key:"showPlayButton",value:function(){return A.default.isMobile()?void y.default.addClass(this.bigPlayButton,U):void y.default.addClass(this.bigPlayButton,M)}},{key:"hidePlayButton",value:function(){return A.default.isMobile()?void y.default.removeClass(this.bigPlayButton,U):void y.default.removeClass(this.bigPlayButton,M)}}]),t}(h.default);Object.defineProperty(z,"playStatus",{value:{PAUSED:"PAUSED",PLAYING:"PLAYING",SETUP:"SETUP",BUFFERING:"BUFFERING",IDLE:"IDLE"}}),Object.defineProperty(z,"events",{value:{AD_REQUEST:"AD_REQUEST",PLAY_REQUEST:"PLAY_REQUEST",PAUSE_REQUEST:"PAUSE_REQUEST",VOLUME_CHANGE:"VOLUME_CHANGE",REQUEST_FULLSCREEN:"REQUEST_FULLSCREEN",EXIT_FULLSCREEN:"EXIT_FULLSCREEN"}}),n.default=z},{"../../events/player-events":17,"../../utils/css-helpers":65,"../../utils/datetime-utils":66,"../../utils/event-target":68,"../../utils/fullscreen":69,"../../utils/projector-utils":72,"./ad-volume-control":31,"error-report":"error-report",log:"log"}],26:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../utils/projector-utils"),l=r(s),u=e("./ad-unit"),d=r(u),c=e("bvp-constant"),p=function(e){function t(e,n,r,a,s){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,r,{adsLoader:e.adsLoader,adDisplayContainer:e.adDisplayContainer,loadTimeoutMillis:e.midrollLoadTimeout,playTimeoutMillis:e.midrollPlaybackTimeout,disableCompanionAds:e.midrollDisableCompanionAds,adsPerBlock:e.midrollAdsPerBlock,playbackDelay:e.midrollPlaybackDelay,unit:e.midrollUnit,isGPT:e.midrollIsGPT,networkId:e.midrollNetworkId,sz:e.midrollSz,tile:e.midrollTile,tpVideo:e.midrollTpVideo,suffix:e.midrollSuffix,custParams:e.midrollCustParams,maxRetries:e.midrollMaxRetries,fade:e.midrollFade,imageHeight:e.midrollImageHeight,minDuration:1e3,maxDuration:e.midrollMaxDuration||9e4,isMobile:l.default.isMobile(),width:n.width,height:n.height,adContainerId:e.playerId+"AdTagContainer",adType:c.AD_TYPES.MIDROLL,isLive:a.options_.original_user_options.live,enableAdFallback:!1,initialVolume:s,autoPlay:!0,shouldFetchCompanionAd:e.shouldFetchCompanionAd!==!1}))}return a(t,e),t}(d.default);n.default=p},{"../../utils/projector-utils":72,"./ad-unit":29,"bvp-constant":"bvp-constant"}],27:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../utils/projector-utils"),l=r(s),u=e("./ad-unit"),d=r(u),c=e("bvp-constant"),p=function(e){function t(e,n,r,a,s,u){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,r,{adsLoader:e.adsLoader,adDisplayContainer:e.adDisplayContainer,loadTimeoutMillis:e.prerollLoadTimeout,playTimeoutMillis:e.prerollPlaybackTimeout,disableCompanionAds:e.prerollDisableCompanionAds,adsPerBlock:e.prerollAdsPerBlock,playbackDelay:e.prerollPlaybackDelay,unit:e.prerollUnit,isGPT:e.prerollIsGPT,networkId:e.prerollNetworkId,sz:e.prerollSz,tile:e.prerollTile,tpVideo:e.prerollTpVideo,suffix:e.prerollSuffix,custParams:e.prerollCustParams,maxRetries:e.prerollMaxRetries,fade:e.prerollFade,imageHeight:e.prerollImageHeight,isMobile:l.default.isMobile(),width:n.width,height:n.height,adContainerId:e.playerId+"AdTagContainer",adType:c.AD_TYPES.PREROLL,isLive:a.options_.original_user_options.live,enableAdFallback:!0,initialVolume:s,autoPlay:u,shouldFetchCompanionAd:e.shouldFetchCompanionAd!==!1}))}return a(t,e),t}(d.default);n.default=p},{"../../utils/projector-utils":72,"./ad-unit":29,"bvp-constant":"bvp-constant"}],28:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){var e=window.location.pathname.toString();if(e)return e=e.replace(T,j),e=decodeURIComponent(e).replace(C,j)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("log"),l=r(s),u=e("bvp-constant"),d=e("../../utils/AdTagUtils"),c=r(d),p=e("error-report"),f=r(p),h=new l.default("AdTagGenerator"),v="{server_id}",y="{unit}",_="{sz}",m="{tile}",g="{tp_video}",b="{url}",E="{ord}",A="",P="1x1",w="1",S="null",k="//pubads.g.doubleclick.net/gampad",C=/[\"\"=!\+*~^\(\)<>\[\]]/g,O=/(autoplay)=(\w+)/,T=/[?&#].*/,j="",R="impl=s&gdfp_req=1&env=vp&unviewed_position_start=1",L="&ciu_szs=300x250,728x90",D="//ad.doubleclick.net"+v+"/pfadx/"+y+";sz="+_+";tile="+m+";tp_video="+g+";dcmt=text/xml;url="+b+";ord="+E,M="sz="+_+"&iu="+(v+y)+"&output=vast&"+R+"&correlator="+E,U=k+"/ads?sz="+_+"&iu="+v+"/"+y+"&output=vast&url="+b+"&"+R+"&correlator="+E+"&vad_type=nonlinear",I=1,x=1,N={"business/midroll":!0,"bloomberg/video/midroll/live":!0,"bloomberg/video/midroll/vod":!0},B=function(){function e(t){i(this,e),this.unit=t.unit,this.isGPT=t.isGPT,this.isBanner=t.isBanner,this.networkId=t.networkId,this.sz=t.sz,this.tile=t.tile,this.tpVideo=t.tpVideo,this.suffix=t.suffix,this.custParams=decodeURIComponent(t.custParams),this.isMobile=t.isMobile,this.isLive=t.isLive,this.minDuration=t.minDuration,this.maxDuration=t.maxDuration,this.adType=t.adType,this.enableAdFallback=t.enableAdFallback,this.shouldFetchCompanionAd=t.shouldFetchCompanionAd,this.trigr=t.trigr,this.srnd=t.srnd,this.lotame=t.lotame,this.width=t.width,this.height=t.height,this.isIndexExchangeEnabled=t.isIndexExchangeEnabled,this.isMuted=(t.initialVolume||0)<=0,this.randIncrementer=Math.round(1e3*Math.random())}return a(e,[{key:"getAdTag",value:function(){var e=this._getServerId(),t=this.randIncrementer++ +String((new Date).getTime()),n=o(),r=this._getAdTagTemplate();if(this.unit){var i=this.unit.toLowerCase();N[i]&&f.default.recordGenericError(h,"Mystery Ad Unit: "+i)}var a=r.replace(y,this.unit).replace(_,this.sz?this.sz:P).replace(m,this.tile?this.tile:w).replace(g,this.tpVideo?this.tpVideo:S).replace(v,e).replace(E,t).replace(b,n?n:j);if(this.isGPT&&this.pageUrl&&(a=a.replace(b,n)),this.isGPT){var s=this._getCustParams();s=s+"url="+n,this.isMobile&&(s=s.replace(O,"$1=false")),a=a+"&cust_params="+encodeURIComponent(s),this.isLive&&(a+="&pod="+I++),a+="&vpos="+this.adType,this.adType===u.AD_TYPES.MIDROLL&&(a+="&mridx="+x++)}if(this.suffix&&this.suffix.length>0&&(a=a+(this.isGPT?"&":";")+this.suffix),this.minDuration>0&&this.maxDuration>0&&(a=a+"&pmnd="+this.minDuration+"&pmxd="+this.maxDuration),this.enableAdFallback||(a+="&nofb=1"),this.isIndexExchangeEnabled){h.info("Getting Index Exchange Ads");var l=this._getValidAspectRatioSize();a=window.getIndexAds&&window.getIndexAds(a,l)||a}return h.debug("Generated ad tag: "+a),a}},{key:"_getValidAspectRatioSize",value:function(){if(!this.width||!this.height)return null;var e=Math.floor(9*this.width/16);return Math.floor(this.width)+"x"+e}},{key:"_getServerId",value:function(){var e=this.networkId?String(this.networkId):A;return e.length>0&&(e="/"+e,this.isGPT&&(e+="/")),e}},{key:"_getAdTagTemplate",value:function(){if(this.isBanner)return U;if(!this.isGPT)return D;var e=M+(this.shouldFetchCompanionAd?L:"");return this._getGPTDomain()+e}},{key:"_getGPTDomain",value:function(){return k+(this.isLive?"/live":"")+"/ads?"}},{key:"_getCustParams",value:function(){var e=this.custParams||j;e&&e.length>0&&(e+="&");var t=this._getTrigrResults();if(t&&t.length>0&&(e=e+t+"&"),e=e+"adsound="+(this.isMuted?"off":"on")+"&",this.srnd&&(e=e+"srnd="+this.srnd+"&"),this.width&&this.height&&(e=e+"playerWidth="+Math.ceil(this.width)+"&playerHeight="+Math.ceil(this.height)+"&"),window._fence){var n=!!window._fence.isTerminalSubscriber,r=!!window._fence.isBBGSubscriber,i=n?"term":r?"yes":"no";e=e+"subscriber="+i+"&"}return e=c.default.upsertCustomParam(e,"ksg",this.lotame,u.REGEX_FOR_KRUX)}},{key:"_getTrigrResults",value:function(){var e=j;if(this.trigr){var t=this.trigr.results;Array.isArray(t)&&(e="tr="+t.join(","))}return e}}],[{key:"__resetPodCounters",value:function(){I=1,x=1}}]),e}();n.default=B},{"../../utils/AdTagUtils":59,"bvp-constant":"bvp-constant","error-report":"error-report",log:"log"}],29:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("./ima3-controller"),d=r(u),c=e("./ad-tag-generator"),p=r(c),f=e("../../utils/event-target"),h=r(f),v=e("../../events/ad-events"),y=r(v),_=e("log"),m=r(_),g=e("../../services/trigr-service"),b=r(g),E=e("../../services/lotame-service"),A=r(E),P=e("../../utils/SuperBurst"),w=r(P),S=new m.default("AdUnit"),k=["onAdLoading","onAdLoaded","onAdStart","onAdResume","onAdPause","onAdPlayError","onAdCompleted","onAllAdsComplete","onContentPauseRequested","onContentResumeRequested","onPlaybackStatusUpdate","onAdsTimedOut","onDurationChange","onAdSkipped","onAdSkipStateChange"],C=".bvp-ad__content",O=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.ima3Controller=null,a.config=r,a.config.isIndexExchangeEnabled=e.options_.useIndexExchange,a.trigrService=new b.default,a.lotame=new A.default({playerHtmlChildId:e.options_.htmlChildId});for(var s=0;s<k.length;s++){var l=k[s];a[l]=a[l].bind(a)}return a.createAd(e,n),a}return a(t,e),s(t,[{key:"createAd",value:function(e,t){S.info("creating ad");var n=e.el().querySelector(C);this.ima3Controller=new d.default({videoContent:t,adContainer:n,adDisplayContainer:this.config.adDisplayContainer,adsLoader:this.config.adsLoader,loadTimeoutMillis:this.config.loadTimeoutMillis,isMobile:this.config.isMobile,adType:this.config.adType,maxDuration:this.config.maxDuration,initialVolume:this.config.initialVolume,maxRetries:this.config.maxRetries,autoPlay:this.config.autoPlay}),this.ima3Controller.on(y.default.AD_LOADING,this.onAdLoading).on(y.default.AD_LOADED,this.onAdLoaded).on(y.default.AD_STARTED,this.onAdStart).on(y.default.AD_RESUMED,this.onAdResume).on(y.default.AD_PAUSED,this.onAdPause).on(y.default.AD_PLAY_ERROR,this.onAdPlayError).on(y.default.AD_COMPLETED,this.onAdCompleted).on(y.default.ALL_ADS_COMPLETED,this.onAllAdsComplete).on(y.default.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested).on(y.default.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested).on(y.default.AD_PLAYBACK_PROGRESS_UPDATE,this.onPlaybackStatusUpdate).on([y.default.MAX_RETRIES_REACHED,y.default.AD_PLAYBACK_TIMED_OUT,y.default.AD_LOAD_TIMED_OUT].join(),this.onAdsTimedOut).on(y.default.DURATION_CHANGE,this.onDurationChange).on(y.default.SKIPPED,this.onAdSkipped).on(y.default.SKIP_STATE_CHANGED,this.onAdSkipStateChange),t=null,n=null}},{key:"fetchAd",value:function(){var e=this,t=[this.trigrService.getTrigrResults(),w.default.retrieveSuperBurstParams(),this.lotame.getSegments()];return Promise.all(t).then(function(t){var n=t&&t[0],r=t&&t[1],i=t&&t[2];n&&(e.config.trigr=n),r&&r.srnd&&(e.config.srnd=r.srnd),i&&(e.config.lotame=i);var o=e.generateAdUrl(e.config);e.getAdController().requestAds(o)})}},{key:"fromConfig",value:function(e){return this.config[e]}},{key:"getAdController",value:function(){return this.ima3Controller}},{key:"startAd",value:function(){this.ima3Controller.startAd()}},{key:"startOverlayAd",value:function(){this.ima3Controller.startOverlayAd()}},{key:"pause",value:function(){this.ima3Controller.pause()}},{key:"resume",value:function(){this.ima3Controller.resume()}},{key:"resize",value:function(e,t,n){this.ima3Controller.resizeAd(e,t,n)}},{key:"setVolume",value:function(e){this.ima3Controller.setVolume(e)}},{key:"isLinearAd",value:function(){return this.ima3Controller.adLoadedData.linear}},{key:"generateAdUrl",value:function(e){var t=new p.default(e);return t.getAdTag()}},{key:"onAdLoading",value:function(){this.trigger(y.default.AD_LOADING)}},{key:"onAdLoaded",value:function(e){this.trigger(y.default.AD_LOADED,this.getEventData(e.detail))}},{key:"onAdStart",value:function(e){this.trigger(y.default.AD_STARTED,this.getEventData(e.detail))}},{key:"onAdResume",value:function(e){this.trigger(y.default.AD_RESUMED,this.getEventData(e.detail))}},{key:"onAdPause",value:function(e){this.trigger(y.default.AD_PAUSED,this.getEventData(e.detail))}},{key:"onAdPlayError",value:function(e){this.trigger(y.default.AD_PLAY_ERROR,e.detail)}},{key:"onAdCompleted",value:function(e){this.trigger(y.default.AD_COMPLETED,this.getEventData(e.detail))}},{key:"onAllAdsComplete",value:function(e){this.trigger(y.default.ALL_ADS_COMPLETED,this.getEventData(e.detail))}},{key:"onContentPauseRequested",value:function(){this.trigger(y.default.CONTENT_PAUSE_REQUESTED)}},{key:"onContentResumeRequested",value:function(){this.trigger(y.default.CONTENT_RESUME_REQUESTED)}},{key:"onPlaybackStatusUpdate",value:function(e){this.trigger(y.default.AD_PLAYBACK_PROGRESS_UPDATE,this.getEventData(e.detail))}},{key:"onAdsTimedOut",value:function(e){this.trigger(e.type,this.getEventData(e.detail))}},{key:"onDurationChange",value:function(e){this.trigger(y.default.DURATION_CHANGE,e.detail)}},{key:"onAdSkipped",value:function(e){this.trigger(y.default.SKIPPED,this.getEventData(e.detail))}},{key:"onAdSkipStateChange",value:function(e){this.trigger(y.default.SKIP_STATE_CHANGED,e.detail)}},{key:"getEventData",value:function(e){var t=e?e.data:{};return{data:Object.assign({},t,{type:"ad-"+this.config.adType,adType:this.config.adType})}}},{key:"getAdType",value:function(){return this.config.adType}},{key:"destroy",value:function(){S.info("Destroying Ad Unit"),this.ima3Controller.destroy(),this.ima3Controller=null;for(var e=0;e<k.length;e++){var n=k[e];this[n]=null}l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(h.default);n.default=O},{"../../events/ad-events":16,"../../services/lotame-service":54,"../../services/trigr-service":55,"../../utils/SuperBurst":61,"../../utils/event-target":68,"./ad-tag-generator":28,"./ima3-controller":32,log:"log"}],30:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"canDisplayAds",value:function(t){var n=e.hasPreroll(t),r=e.hasMidroll(t),i="enabled"===t.enabled||t.jsAdsEnabled===!0;return(n||r)&&i}},{key:"hasPreroll",value:function(e){return!!(e.prerollUnit&&e.prerollUnit.length>0)}},{key:"hasMidroll",value:function(e){return!!(e.midrollUnit&&e.midrollUnit.length>0)}},{key:"isAdMuted",value:function(e){return!(!e||!e.AdController||!e.AdController.muteStatus&&0!==e.AdController.volume)}},{key:"isAdPlaying",value:function(e){return!!(e&&e.AdController&&e.AdController.currentAdStarted)}}]),e}();n.default=o},{}],31:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e*E;return Math.max(0,Math.min(E,t))}function l(e,t){h.default.transform(e,"translateX("+t+"px)")}function u(e,t,n){return!t||n?(h.default.addClass(e,P),h.default.removeClass(e,w),void h.default.removeClass(e,S)):t<=A?(h.default.addClass(e,w),h.default.removeClass(e,P),void h.default.removeClass(e,S)):(h.default.addClass(e,S),h.default.removeClass(e,P),void h.default.removeClass(e,w))}Object.defineProperty(n,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../utils/event-target"),p=r(c),f=e("../../utils/css-helpers"),h=r(f),v="click",y=["onMouseDown","onDragStop","onMouseMove","onPathClick","toggleMute"],_="mousedown",m="mouseup",g="mouseleave",b="mousemove",E=70,A=.25,P="mute",w="volume-down",S="volume-up",k=function(e){function t(e){var n=e.volumeBar,r=e.volumeScrubber,a=e.volumePath,s=e.muteControl,l=e.volume,u=e.muted;i(this,t);var d=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return y.forEach(function(e){
d[e]=d[e].bind(d)}),d.dragStarted=!1,d.volumeBar=n,d.volumePath=a,d.volumeScrubber=r,d.volumeBarDimensions=null,d.volumeBarWidth=null,d.volumeBarXOffset=null,d.scrubOffset=null,d.scrubberCenter=null,d.volume=l,d.muted=u,d.muteControl=s,d.volumeScrubber.addEventListener(_,d.onMouseDown),d.volumeScrubber.addEventListener(m,d.onDragStop),d.volumeBar.addEventListener(g,d.onDragStop),d.volumeBar.addEventListener(b,d.onMouseMove),d.volumePath.addEventListener(v,d.onPathClick),d.muteControl.addEventListener(v,d.toggleMute),d.setInitialVolume(d.volume),d}return a(t,e),d(t,[{key:"onMouseDown",value:function(e){this.dragStarted=!0,this.scrubberCenter=this.scrubberCenter||e.target.clientWidth/2}},{key:"onDragStop",value:function(){this.dragStarted=!1}},{key:"onVolumeChange",value:function(e){this.muted=0==e,this.setVolume(e)}},{key:"onPathClick",value:function(e){this.dragStarted=!0,this.onMouseMove(e),this.dragStarted=!1}},{key:"onMouseMove",value:function(e){if(this.dragStarted){this.volumeBarDimensions=this.volumeBarDimensions||this.volumeBar.getBoundingClientRect(),this.volumeBarWidth=this.volumeBarWidth||this.volumeBarDimensions.width,this.volumeBarXOffset=this.volumeBarDimensions.left,this.scrubOffset=this.scrubOffset||this.volumeBarWidth-E-this.scrubberCenter;var t=Math.max(0,Math.abs(this.volumeBarXOffset-e.clientX)-this.scrubOffset),n=Math.max(0,Math.min(E,t));l(this.volumeScrubber,n);var r=n/E;this.onVolumeChange(r)}}},{key:"dispatchVolumeChange",value:function(){this.trigger(t.events.VOLUME_CHANGE,{volume:this.volume,muted:this.muted}),u(this.muteControl,this.volume,this.muted)}},{key:"setInitialVolume",value:function(e){return this.muted?void this.showMuteControls():void this.setVolume(e)}},{key:"setVolume",value:function(e){e=parseFloat(e),this.volume=e,0===e?this.showMuteControls():this.hideMuteControls(),this.volumeBar.setAttribute("aria-valuenow",e.toPrecision(2));var t=s(e);l(this.volumeScrubber,t),this.dispatchVolumeChange()}},{key:"showMuteControls",value:function(){this.muted=!0,this.volumeBar.setAttribute("aria-valuenow","0.0"),l(this.volumeScrubber,0),u(this.muteControl,0,this.muted)}},{key:"hideMuteControls",value:function(){this.muted=!1;var e=s(this.volume);l(this.volumeScrubber,e),u(this.muteControl,this.volume,this.muted)}},{key:"toggleMute",value:function(){this.muted?this.unmute():this.mute()}},{key:"mute",value:function(){this.showMuteControls(),this.dispatchVolumeChange()}},{key:"unmute",value:function(){0==this.volume&&(this.volume=1),this.muted=!1,this.setVolume(this.volume)}},{key:"destroy",value:function(){this.removeAllEventListeners(),this.volumeScrubber.removeEventListener(_,this.onMouseDown),this.volumeScrubber.removeEventListener(m,this.onDragStop),this.volumeBar.removeEventListener(g,this.onDragStop),this.volumeBar.removeEventListener(b,this.onMouseMove),this.volumePath.removeEventListener(v,this.onPathClick),this.muteControl.removeEventListener(v,this.toggleMute),this.volumeBarDimensions=null,this.volumeScrubber=null,this.volumeBar=null,this.volumePath=null,this.muteControl=null}}]),t}(p.default);Object.defineProperty(k,"events",{value:{VOLUME_CHANGE:"VOLUME_CHANGE"}}),n.default=k},{"../../utils/css-helpers":65,"../../utils/event-target":68}],32:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.getType=function(){return R},e.getErrorCode=function(){return 0},{getError:function(){return e}}}function l(e){return!!e&&F[e]}function u(e){var t=E.default.getURLExtension(e.mediaUrl);return!!t&&V[t]}function d(e,t){return e?{clip:{contentId:e.getAdId()},duration:e.getDuration(),url:t.mediaUrl,metadata:{},title:e.getTitle(),mediaUrl:e.getMediaUrl()}:{}}function c(e){return e===A.AD_TYPES.PREROLL||e===A.AD_TYPES.MIDROLL}Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=e("../../utils/event-target"),v=r(h),y=e("../../events/ad-events"),_=r(y),m=e("../../utils/deadline"),g=r(m),b=e("../../utils/url-utils"),E=r(b),A=e("bvp-constant"),P=e("log"),w=r(P),S=e("error-report"),k=r(S),C=3,O="ended",T=1e4,j=8e3,R="BVP_ERROR",L=250,D="Maximum retries reached",M="Ads failed to load within specified time limit",U="Ads failed to play within specified time limit",I=2e3,x=5e3,N=5e3,B=50,F={"video/x-flv":!0,"application/x-shockwave-flash":!0},V={swf:!0,flv:!0},H=new w.default("IMA3Controller"),z=["onAdClicked","onAdError","onAdPlaybackTimeout","onAdsManagerLoaded","onAdSkipped","onAdSkipStateChange","onAllAdsCompleted","onComplete","onContentPauseRequested","onContentResumeRequested","onDurationChange","onLoaded","onPause","onResume","onStart","onVideoEnd"],G=function(e){function t(e){var n=e.adContainer,r=e.adDisplayContainer,a=e.videoContent,s=e.adsLoader,l=e.viewMode,u=e.autoPlay,d=e.loadTimeout,c=void 0===d?T:d,p=e.isMobile,f=void 0!==p&&p,h=e.adType,v=void 0===h?null:h,y=e.maxDuration,_=void 0===y?null:y,m=e.initialVolume,g=void 0===m?0:m,b=e.maxRetries,E=void 0===b?C:b;i(this,t);var A=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return z.forEach(function(e){A[e]=A[e].bind(A)}),A.googleIma=window.google.ima,A.retryCount=0,A.loadTimeout=c,A.videoContent=a,A.videoContent.addEventListener(O,A.onVideoEnd),A.viewMode=l||A.googleIma.ViewMode.NORMAL,A.adContainer=n,A.isMobile=f,A.isPaused=!1,A.adLoadedData={},A.currentVolume=g,A.remainingTime=-1,A.adType=v,A.maxDuration=_,A.isFirstAd=!0,A.maxRetries=E,A.isPauseRequested=!1,A.isAdStarted=!1,A.autoPlay=u,A.adDisplayContainer=r,A.adsLoader=s,A.adsLoader.addEventListener(A.googleIma.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,A.onAdsManagerLoaded),A.adsLoader.addEventListener(A.googleIma.AdErrorEvent.Type.AD_ERROR,A.onAdError),A.requestAdResolver=null,A.requestAdRejector=null,A.adTagUrl=null,A.pendingRetryTimer=null,A.playbackTimeoutTimer=null,A.statusUpdateTimer=null,A.adsRenderingSettings=A._createRenderingSettings({autoAlign:!1,useStyledNonLinearAds:!0,restoreCustomPlaybackStateOnAdBreakComplete:!1,allowCompanionBeforeMaster:!0,loadVideoTimeout:j,enablePreloading:!1,uiElements:[]}),A}return a(t,e),p(t,[{key:"initiateAdRequest",value:function(){H.info("Initating Ad request:",this.retryCount);var e=this.createAdsRequest();try{this.adsLoader.requestAds(e)}catch(e){k.default.recordAdError(H,this.adTagUrl,"Error occurred while calling adsLoader.requestAds",e),this.onAdError(s(e))}}},{key:"requestAds",value:function(e){var t=this,n=new Promise(function(n,r){t.trigger(_.default.AD_LOADING),t.requestAdResolver=n,t.requestAdRejector=r,t.adTagUrl=e,t.initiateAdRequest()});return(0,g.default)(this.loadTimeout,n).catch(function(e){return e===D||e===U?(t.clearPendingRetryTimer(),Promise.reject(e)):(H.warn(M),t.clearPendingRetryTimer(),t.adLoaded||t.trigger(_.default.AD_LOAD_TIMED_OUT,{data:{message:"Ad failed to load in "+t.loadTimeout+"ms"}}),Promise.reject(M))})}},{key:"retry",value:function(e){var t=this;return H.info("retry"),this.isAdStarted=!1,this.clearAdStartTimer(),this.adsManager&&this.cleanupAdsManager(),this.retryCount<this.maxRetries?(this.retryCount++,H.warn("Retry "+this.retryCount+" of "+this.maxRetries+" executing:",e),void(this.pendingRetryTimer=setTimeout(function(){t.initiateAdRequest()},0))):(H.warn(D),window.BVP_GTM.trackDevEvent({bvpEventAction:"admaxretry",bvpEventLabel:this.adType,bvpEventValue:this.retryCount,bvpTrackGA:!0}),this.trigger(_.default.MAX_RETRIES_REACHED,{data:e}),this.requestAdRejector(D),this.clearAdPlaybackTimer(),void this.clearPendingRetryTimer())}},{key:"startAd",value:function(){H.info("start ad"),this.isPauseRequested=!1,this.adsManager&&this._internalStartAd()}},{key:"_internalStartAd",value:function(){try{if(this.clearAdPlaybackTimer(),this.isPauseRequested||this.isAdStarted)return;this.adsManager.start(),this.isAdStarted=!0,c(this.adType)&&this.startAdStartTimer(x)}catch(e){k.default.recordAdError(H,this.adTagUrl,"Error occurred while adsManager.start call",e),this.onAdError(s(e))}}},{key:"createAdsManager",value:function(e){var t=e.getAdsManager(this.adDisplayContainer,this.adsRenderingSettings);return t.addEventListener(this.googleIma.AdErrorEvent.Type.AD_ERROR,this.onAdError),t.addEventListener(this.googleIma.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted),t.addEventListener(this.googleIma.AdEvent.Type.CLICK,this.onAdClicked),t.addEventListener(this.googleIma.AdEvent.Type.COMPLETE,this.onComplete),t.addEventListener(this.googleIma.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),t.addEventListener(this.googleIma.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),t.addEventListener(this.googleIma.AdEvent.Type.DURATION_CHANGE,this.onDurationChange),t.addEventListener(this.googleIma.AdEvent.Type.LOADED,this.onLoaded),t.addEventListener(this.googleIma.AdEvent.Type.PAUSED,this.onPause),t.addEventListener(this.googleIma.AdEvent.Type.RESUMED,this.onResume),t.addEventListener(this.googleIma.AdEvent.Type.STARTED,this.onStart),t.addEventListener(this.googleIma.AdEvent.Type.SKIPPED,this.onAdSkipped),t.addEventListener(this.googleIma.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.onAdSkipStateChange),t}},{key:"createAdsRequest",value:function(){var e=this.videoContent.getBoundingClientRect(),t=e.width,n=e.height;this.width=t,this.height=n;var r=new this.googleIma.AdsRequest;r.adTagUrl=this.adTagUrl,r.linearAdSlotWidth=t,r.linearAdSlotHeight=n,r.nonLinearAdSlotWidth=t,r.nonLinearAdSlotHeight=n/3,r.setAdWillAutoPlay(this.autoPlay);var i=0===this.currentVolume;return r.setAdWillPlayMuted(i),r}},{key:"destroy",value:function(){var e=this;H.info("destroy"),this.adsLoader&&(this.adsLoader.removeEventListener(this.googleIma.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded),this.adsLoader.removeEventListener(this.googleIma.AdErrorEvent.Type.AD_ERROR,this.onAdError)),this.adsLoader=null,this.adDisplayContainer=null,this.adContainer&&(this.adContainer.style.left="0px",this.adContainer.style.top="0px"),this.clearAdPlaybackTimer(),this.clearPendingRetryTimer(),this.clearStatusUpdateTimer(),this.clearAdStartTimer(),this.videoContent&&this.videoContent.removeEventListener(O,this.onVideoEnd),this.videoContent=null,this.adContainer=null,this.removeAdsManagerEventListeners(),setTimeout(function(){e.destroyAdsManager()},I),z.forEach(function(t){e[t]=null}),this.isAdStarted=null,this.isPauseRequested=null,f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"cleanupAdsManager",value:function(){this.removeAdsManagerEventListeners(),this.destroyAdsManager()}},{key:"destroyAdsManager",value:function(){this.adsManager&&this.adsManager.destroy&&(this.adsManager.destroy(),this.adsManager=null)}},{key:"removeAdsManagerEventListeners",value:function(){this.adsManager&&(this.adsManager.removeEventListener(this.googleIma.AdErrorEvent.Type.AD_ERROR,this.onAdError),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.CLICK,this.onAdClicked),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.COMPLETE,this.onComplete),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.DURATION_CHANGE,this.onDurationChange),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.LOADED,this.onLoaded),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.PAUSED,this.onPause),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.RESUMED,this.onResume),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.STARTED,this.onStart),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.SKIPPED,this.onAdSkipped),this.adsManager.removeEventListener(this.googleIma.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.onAdSkipStateChange))}},{key:"startStatusUpdateTimer",value:function(e){var t=this,n=Date.now();this.statusUpdateTimer=setInterval(function(){if(t.adsManager){var r=t.adsManager.getRemainingTime();r<0&&(r=e-Math.abs(n-Date.now())/1e3),t.remainingTime=r,t.trigger(_.default.AD_PLAYBACK_PROGRESS_UPDATE,{data:{remainingTime:r,elapsedTime:e-r,duration:e}}),r<=0&&t.clearStatusUpdateTimer()}},L)}},{key:"clearPendingRetryTimer",value:function(){this.pendingRetryTimer&&(clearTimeout(this.pendingRetryTimer),this.pendingRetryTimer=null)}},{key:"clearStatusUpdateTimer",value:function(){this.statusUpdateTimer&&(clearInterval(this.statusUpdateTimer),this.statusUpdateTimer=null)}},{key:"clearAdPlaybackTimer",value:function(){this.playbackTimeoutTimer&&(clearTimeout(this.playbackTimeoutTimer),this.playbackTimeoutTimer=null)}},{key:"pause",value:function(){H.info("Ad paused requested"),this.adsManager&&this.adsManager.pause(),this.isPauseRequested=!0}},{key:"resume",value:function(){H.info("Ad resume requested"),this.adsManager.resume(),this.isPauseRequested=!1}},{key:"setVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.currentVolume=e,this.adsManager&&this.adsManager.setVolume(e)}},{key:"startAdPlaybackTimer",value:function(e){this.playbackTimeoutTimer=setTimeout(this.onAdPlaybackTimeout,e)}},{key:"startAdStartTimer",value:function(e){var t=this;this.startAdTimeOutId=setTimeout(function(){k.default.recordAdError(H,t.adTagUrl,"Ad Loaded but failed to start in given time interval of "+x),t.trigger(_.default.AD_PLAYBACK_TIMED_OUT,{data:{message:"Ad Loaded but failed to start in given time interval of "+x}})},e)}},{key:"clearAdStartTimer",value:function(){this.startAdTimeOutId&&(clearTimeout(this.startAdTimeOutId),this.startAdTimeOutId=null)}},{key:"positionNonLinearAd",value:function(e,t,n,r){var i=(n-e)/2;this.adContainer.style.left=i+"px";var o=r-t-B;this.adContainer.style.top=o+"px"}},{key:"resizeAd",value:function(e,t,n){var r=this.adsManager.getCurrentAd();r&&!r.isLinear()&&this.positionNonLinearAd(r.getWidth(),r.getHeight(),e,t),this.adsManager.resize(e,t,n)}},{key:"onAdsManagerLoaded",value:function(e){H.info("Ad manager loaded"),this.adsManager=this.createAdsManager(e),this.adsManager.init(this.width,this.height,this.viewMode),this.setVolume(this.currentVolume),this._internalStartAd()}},{key:"onAdError",value:function(e){this.clearPendingRetryTimer();var t=e.getError(),n=t.getType();switch(k.default.recordAdError(H,this.adTagUrl,"onAdError",t),n){case this.googleIma.AdError.Type.AD_LOAD:case R:this.trigger(_.default.AD_LOAD_ERROR,{error:t}),this.retry(t);break;case this.googleIma.AdError.Type.AD_PLAY:this.trigger(_.default.AD_PLAY_ERROR,{error:t}),this.adType===A.AD_TYPES.PREROLL&&this.retry(t)}}},{key:"onContentPauseRequested",value:function(){this.clearAdPlaybackTimer(),this.videoContent.removeEventListener(O,this.onVideoEnd),this.trigger(_.default.CONTENT_PAUSE_REQUESTED)}},{key:"onContentResumeRequested",value:function(){H.info("Content resume requested"),this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.videoContent.addEventListener(O,this.onVideoEnd),this.trigger(_.default.CONTENT_RESUME_REQUESTED)}},{key:"onDurationChange",value:function(e){var t=e.getAd(),n=t.getDuration();this.trigger(_.default.DURATION_CHANGE,{duration:n})}},{key:"onAllAdsCompleted",value:function(e){H.info("All Ads completed",e.getAd()),this.isFirstAd=!0,this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.trigger(_.default.ALL_ADS_COMPLETED,{data:d(e.getAd(),this.adLoadedData)}),this.isPaused&&H.warn("Ads completed despite being paused!")}},{key:"onLoaded",value:function(e){var t=e.getAd();this.adLoadedData=e.getAdData();var n=t.getContentType();if(H.info("onLoaded is triggered",e,e.getAd(),e.getAdData()),!this.adLoadedData)return void this.onAdError(s(new Error("No ad data found")));if(this.isMobile&&l(n))return void this.onAdError(s(new Error("Disallowed mobile content")));if(this.isMobile&&""===n&&u(this.adLoadedData))return void this.onAdError(s(new Error("Disallowed mobile url")));if(t&&!t.isLinear()){var r=e.getAdData();r&&this.positionNonLinearAd(r.width,r.height,this.width,this.height)}this.adLoaded=!0,this.clearPendingRetryTimer(),H.info("trigger AdEvents.AD_LOADED"),this.trigger(_.default.AD_LOADED,{data:d(t,this.adLoadedData)}),this.requestAdResolver()}},{key:"onStart",value:function(e){var t=e.getAd();H.info("Ad started",t),window.BVP_GTM&&this.retryCount>0&&window.BVP_GTM.trackDevEvent({bvpEventAction:"adretry",bvpEventLabel:this.adType,bvpEventValue:this.retryCount,bvpTrackGA:!0}),this.clearAdStartTimer(),this.setVolume(this.currentVolume),this.retryCount=0;var n=t.getDuration();if(n>0){this.startStatusUpdateTimer(n);var r=t.getAdPodInfo();if(this.isFirstAd){var i=this.maxDuration/1e3;0===i&&void 0!==r&&void 0!==r.getMaxDuration()?i=r.getMaxDuration():0===i&&(i=n),this.isFirstAd=!1,this.startAdPlaybackTimer(this._getAdPlaybackTimerThreshold(i))}}this.resizeAd(this.width,this.height,this.googleIma.ViewMode.NORMAL),this.trigger(_.default.AD_STARTED,{data:d(t,this.adLoadedData)})}},{key:"onComplete",value:function(e){H.info("Ad completed"),this.remainingTime=-1;var t=e.getAd();this.clearStatusUpdateTimer(),this.trigger(_.default.AD_COMPLETED,{data:d(t,this.adLoadedData)})}},{key:"onPause",value:function(e){var t=e.getAd();this.isPaused=!0,this.clearStatusUpdateTimer(),this.clearAdPlaybackTimer(),this.trigger(_.default.AD_PAUSED,{data:d(t,this.adLoadedData)})}},{key:"onResume",value:function(e){var t=e.getAd();this.isPaused=!1;var n=t.getDuration();if(n<=0){var r=t.getAdPodInfo();n=r.getMaxDuration()}this.startStatusUpdateTimer(n),this.trigger(_.default.AD_RESUMED,{data:d(t,this.adLoadedData)})}},{key:"onAdClicked",value:function(e){var t=e.getAd();H.info("Ad clicked",t),this.pause(),this.trigger(_.default.AD_CLICKED,{data:d(t,this.adLoadedData)})}},{key:"onVideoEnd",value:function(){H.info("onVideoEnd"),this.adsLoader.contentComplete()}},{key:"onAdSkipped",value:function(e){var t=e.getAd();this.trigger(_.default.SKIPPED,{data:d(t,this.adLoadedData)})}},{key:"onAdSkipStateChange",value:function(){var e=this.adsManager&&this.adsManager.getAdSkippableState();this.trigger(_.default.SKIP_STATE_CHANGED,{data:{adSkipState:e}})}},{key:"onAdPlaybackTimeout",value:function(){k.default.recordAdError(H,this.adTagUrl,U),this.trigger(_.default.AD_PLAYBACK_TIMED_OUT),this.requestAdRejector(U)}},{key:"_getAdPlaybackTimerThreshold",value:function(e){var t=1e3*(this._getRemainingTime(e)+20*e/100);return Math.max(t,N)}},{key:"_getRemainingTime",value:function(e){return this.remainingTime&&this.remainingTime>=0?this.remainingTime:e}},{key:"_createRenderingSettings",value:function(e){var t=new this.googleIma.AdsRenderingSettings;return Object.assign(t,e),t}}]),t}(v.default);n.default=G},{"../../events/ad-events":16,"../../utils/deadline":67,"../../utils/event-target":68,"../../utils/url-utils":75,"bvp-constant":"bvp-constant","error-report":"error-report",log:"log"}],33:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=videojs.getComponent("Component"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),a(t,[{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-ad-buffering",innerHTML:'\n      <div class="bvp-ad-buffering__spinner"></div>\n      '})}}]),t}(l);n.default=u},{}],34:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=videojs.getComponent("Component"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),a(t,[{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-ad-control-bar",innerHTML:'\n      <button class="bvp-ad-play-button bvp-ad-button" aria-live="polite"></button>\n      <div class="bvp-ad-sound-menu" aria-live="polite">\n        <div class="bvp-ad-sound-menu__mute-control bvp-ad-button"></div>\n        <div class="bvp-ad-volume-bar" role="slider" aria-valuemin="0" aria-valuemax="1" aria-valuenow="0">\n          <div class="bvp-ad-volume-bar__container">\n            <div class="bvp-ad-volume-bar__scrubber"></div>\n          </div>\n        </div>\n      </div>\n      <div class="bvp-ad-fullscreen bvp-ad-button"></div>\n    '})}}]),t}(l);n.default=u},{}],35:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=videojs.getComponent("Component"),u="bvp-ad--active",d=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.timeRemainingComponent=o.getChild("AdTimeRemaining"),o.on("mouseenter",o.onMouseEnter),o.on("mouseout",o.onMouseOut),o}return o(t,e),a(t,[{key:"showUI",value:function(){this.timeRemainingComponent.show()}},{key:"hideUI",value:function(){this.timeRemainingComponent.hide()}},{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-ad"})}},{key:"setCountdownTime",value:function(e){this.timeRemainingComponent.el_.textContent=e}},{key:"onMouseEnter",value:function(){this.player_.blockControls||this.addClass(u)}},{key:"onMouseOut",value:function(){this.removeClass(u)}},{key:"dispose",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.remainingElement=null}}]),t}(l);n.default=d},{}],36:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=videojs.getComponent("Component"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),a(t,[{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"button",{className:"bvp-ad-big-play-button"},{"aria-live":"polite"})}}]),t}(l);n.default=u},{}],37:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=videojs.getComponent("Component"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),a(t,[{key:"createEl",value:function(){var e=this.id();return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-ad__content",id:e.concat("AdTagContainer")})}}]),t}(l);n.default=u},{}],38:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=videojs.getComponent("Component"),u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return o(t,e),a(t,[{key:"createEl",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-ad-time-remaining vjs-hidden",innerHTML:"0:00"})}}]),t}(l);n.default=u},{}],39:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./videojs-ad-buffering-spinner"),s=r(a),l=e("./videojs-ad-controlbar"),u=r(l),d=e("./ad-controller"),c=r(d),p=e("./videojs-ad-controls"),f=r(p),h=e("./videojs-ad-time-remaining"),v=r(h),y=e("./videojs-ad-play-button"),_=r(y),m=e("./videojs-ad-tag-container"),g=r(m),b=e("./ad-utils"),E=r(b),A=e("../../events/player-events"),P=r(A),w=e("../../utils/projector-utils"),S=r(w),k=e("log"),C=r(k),O=new C.default("GoogleAdsPlugin"),T=function(){function e(t,n){i(this,e),this.options=t,this.player=n,videojs.registerComponent("AdControlsComponent",f.default),videojs.registerComponent("AdTimeRemaining",v.default),videojs.registerComponent("AdBufferingSpinner",s.default),
videojs.registerComponent("AdPlayButton",_.default),videojs.registerComponent("AdTagContainer",g.default),videojs.registerComponent("AdControlBar",u.default),O.info("Google Ads Plugin Initialized")}return o(e,[{key:"onReady",value:function(){O.info("Plugin Ready Starting Ad Controller"),this.adController=this.player.AdController=new c.default(this.options,this.player)}},{key:"onPlayPreroll",value:function(){this.adController&&(this.adController.destroy(),this.adController=this.player.AdController=null);var e=Object.assign({forcePlay:!0},this.options);this.adController=this.player.AdController=new c.default(e,this.player),S.default.isAutoplayDisabledBrowser()&&this.adController.prerollForAutoplayDisabledBrowser()}},{key:"dispose",value:function(){this.adController.destroy(),this.adController=null,this.player.AdController=null,this.player=this.options=null}}],[{key:"init",value:function(t){var n=this,r=S.default.isMiniPlayer(n.options_);if(!r&&E.default.canDisplayAds(t)){if(!S.default.isHlsSupported()||S.default.forcedToPlayFlash(this.options_))return void O.warn("Plugin not enabled for non-Html5 techs.");var i=new e(t,n);n.ready(i.onReady.bind(i)),n.on(P.default.PLAY_PREROLL,i.onPlayPreroll.bind(i)),n.on(P.default.DISPOSE,function(){i.dispose(),i=null})}}}]),e}();videojs.plugin("GoogleAdsPlugin",T.init),n.default=T},{"../../events/player-events":17,"../../utils/projector-utils":72,"./ad-controller":24,"./ad-utils":30,"./videojs-ad-buffering-spinner":33,"./videojs-ad-controlbar":34,"./videojs-ad-controls":35,"./videojs-ad-play-button":36,"./videojs-ad-tag-container":37,"./videojs-ad-time-remaining":38,log:"log"}],40:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t?e.replace(E,A):e:""}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./projector-autoplay"),l=r(s),u=e("../utils/projector-utils"),d=r(u),c=e("../utils/query-string"),p=r(c),f=e("../utils/LocalStorage"),h=r(f),v=e("error-report"),y=r(v),_=e("../../polyfills/url-search-params"),m=r(_),g=e("log"),b=r(g),E=/\bvod\b/g,A="embed/vod",P=new b.default("ProjectorAds"),w="kx",S="kuid",k="segs",C=["www.bloomberg.com","www.bloombergradio.com","www.bloomberg.co.jp","staging.bloomberg.com","sandcastle.bloomberg.com","local.bloomberg.com"],O=["test","demo","bpop","adv","tagr","cmpid","srnd"],T="ad_test",j="sandcastle.bloomberg.com",R="test",L=function(){function e(t,n){if(i(this,e),!t||!t.original_user_options)return void y.default.recordGenericError(P,"User options are missing");var r=t.original_user_options,a=r.ad_tag_midroll,s=void 0===a?"":a,u=r.module_ad_player;this.dataSetup=t,this.options=r,this.autoplay=l.default.getReportingValues(t).dfp,this.video=n,this.live=Boolean(r.live),this.offsiteEmbed="true"===String(r.offsite_embed)||"offsite"===r.partner;var d=this.isPrerollAdUnit()?this.addVerticalToUnit():this.getUnitWithVertical(),c=this._getPrerollAdCodePrefix();this.prerollUnit=o(d?c+d:"",this.offsiteEmbed),this.midrollUnit=o(s,this.offsiteEmbed),this.adsEnabled="disabled"!==u&&Boolean(this.prerollUnit||this.midrollUnit)}return a(e,[{key:"isPrerollAdUnit",value:function(){return Boolean(this.video&&this.video.getPrerollAdUnit()&&this.options.vertical)}},{key:"addVerticalToUnit",value:function(){if(this.options.ad_tag)return this.options.ad_tag;if(this.isPrerollAdUnit())return this.options.vertical+"/"+this.video.getPrerollAdUnit()}},{key:"getUnitWithVertical",value:function(){return this.live?this.options.ad_tag:this.options.ad_tag?this.options.ad_tag:this.video?this.video.getAdTag():null}},{key:"_computedParameters",value:function(){var e=this._generateByzantiumParams(),t=this.video?this.video.getRawNiData():null;t&&(e.ni=t);var n=this.video?this.video.getId():null;return n&&(e.guid=n),e.autoplay=this.autoplay,e.platform=d.default.isMobile()?"mobile":"desktop",this._isOnsiteUrl()?e.onsite=!0:e.offsite=!0,h.default.get(w+S)&&(e.ksg=h.default.get(w+k)),e}},{key:"_mergeCustomParameters",value:function(e){var t=e?decodeURIComponent(e):"",n=p.default.parseQueryString(t),r=this._computedParameters(),i=this._getAdTestParams(),o=Object.assign({},n,i,r),a=Object.keys(o).map(function(e){return e+"="+o[e]});return encodeURIComponent(a.join("&"))}},{key:"prepare",value:function(){if(this.adsEnabled){var e=this.options.ad_tag_cust_params_preroll,t=this.options.ad_tag_cust_params_midroll;return{hasPreroll:Boolean(this.prerollUnit),module_ad_player:"enabled",ad_tag:this.prerollUnit,ad_tag_midroll:this.midrollUnit,ad_tag_cust_params_preroll:this.prerollUnit?this._mergeCustomParameters(e):"",ad_tag_cust_params_midroll:this.midrollUnit?this._mergeCustomParameters(t):"",share_overrides:{ad_tag:this.prerollUnit,ad_tag_midroll:this.midrollUnit}}}return{module_ad_player:"disabled",ad_tag:"",ad_tag_midroll:"",ad_tag_cust_params_preroll:"",share_overrides:{ad_tag:"",ad_tag_midroll:""}}}},{key:"_isOnsiteUrl",value:function(){var e=window.location.hostname;return C.indexOf(e)>=0}},{key:"_generateByzantiumParams",value:function(){var e=this.dataSetup.byzantiumClient||(window.__bloomberg__||{}).byzantium,t=void 0;if(e&&e.getTagsWithContentInfo){var n={};this.video&&(n={id:this.video.getId(),contentType:"video",contentTags:this.video.getContentTags()||[]}),t=e.getTagsWithContentInfo({},n)}return t||{}}},{key:"_getAdTestParams",value:function(){var e=this._getWindowSearchParams();return O.reduce(function(t,n){return e.has(n)&&(t[n]=e.get(n)),t},{})}},{key:"_getWindowSearchParams",value:function(){var e=new URL(window.location).searchParams;if(e)return e;var t=document.createElement("a");t.href=window.location;var n=t,r=n.search;return t=null,new m.default(r)}},{key:"_getWindowHost",value:function(){return window.location.hostname}},{key:"_getPrerollAdCodePrefix",value:function(){var e=this._getWindowHost();if(e===j)return R;var t=this.dataSetup.ad_code_prefix?this.dataSetup.ad_code_prefix:"",n=this._getWindowSearchParams();return n.has(T)?n.get(T):t}}]),e}();n.default=L},{"../../polyfills/url-search-params":119,"../utils/LocalStorage":60,"../utils/projector-utils":72,"../utils/query-string":73,"./projector-autoplay":41,"error-report":"error-report",log:"log"}],41:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=e.original_user_options,n=!!t.hasOwnProperty(f)&&t.autoplay,r=!p.default.isMobile()||p.default.isMiniPlayer(e);return n&&r}function s(e){return e.autoPlay}function l(e){return e.hasOwnProperty(v)}Object.defineProperty(n,"__esModule",{value:!0});var u,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../utils/projector-utils"),p=r(c),f="autoplay",h="continuousplay",v="continuous_play_previous_url",y="false",_="mobile",m="offsite",g="offsiteembed",b="true",E="video_autoplay_on_page",A="vod",P=Object.freeze({bss_cont_play:0,bss_auto_play:0}),w=(u={},o(u,f+b+h+y+_+y+A+y,{bss_cont_play:0,bss_auto_play:1}),o(u,f+y+h+y+_+y+A+y,P),o(u,f+b+h+y+_+b+A+y,P),o(u,f+y+h+y+_+b+A+y,P),o(u,f+y+h+b+_+y+A+y,{bss_cont_play:1,bss_auto_play:1}),o(u,f+y+h+y+_+b+A+y,P),o(u,f+y+h+b+_+b+A+y,{bss_cont_play:1,bss_auto_play:0}),o(u,f+b+h+y+_+y+A+b,{bss_cont_play:0,bss_auto_play:1}),o(u,f+b+h+b+_+y+A+b,{bss_cont_play:1,bss_auto_play:1}),o(u,f+y+h+y+_+y+A+y+g+b,{bss_cont_play:0,bss_auto_play:0,bss_offsite:1}),u),S=function(){function e(){i(this,e)}return d(e,null,[{key:"getAutoPlayBoolean",value:function(e){var t=e.original_user_options;return!!t.hasOwnProperty(E)||a(e)}},{key:"getAutoPlayTruthString",value:function(e){return f+(e.autoPlay?b:y)+h+(e.continuousPlayPreviousUrl?b:y)+_+(p.default.isMobile()?b:y)+A+(e.vod?b:y)+(e.offsiteEmbed?g+b:"")}},{key:"getComscoreAutoplayValues",value:function(t){return w[e.getAutoPlayTruthString(t)]||P}},{key:"getAutoplayConfigData",value:function(t){var n=t.original_user_options;return{continuousPlayPreviousUrl:l(n),autoPlay:e.getAutoPlayBoolean(t),vod:!n.live,offsiteEmbed:n.offsite_embed||n.partner===m}}},{key:"getReportingValues",value:function(t){var n=e.getAutoplayConfigData(t),r=e.getComscoreAutoplayValues(n);return{dfp:s(n),comscore:r,analytics:{continuousPlay:Boolean(r.bss_cont_play),autoplay:Boolean(r.bss_auto_play)}}}}]),e}();n.default=S},{"../utils/projector-utils":72}],42:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../../config/projector_defaults.json"),s=r(a),l=e("../../config/livestreams.json"),u=r(l),d=e("../utils/deadline"),c=r(d),p=e("load-timer"),f=r(p),h=e("resources"),v=r(h),y=e("log"),_=r(y),m=e("error-report"),g=r(m),b=e("lodash.clonedeep"),E=r(b),A=new _.default("ProjectorConfig"),P=300,w=function(){function e(t){var n=t.userOptions,r=t.version,o=t.bmmrAsset,a=t.liveId;i(this,e),Object.defineProperties(this,{userOptions:{value:n},version:{value:r},bmmrAsset:{value:o},liveId:{value:a}}),this.defaultOptions=Object.freeze((0,E.default)(s.default)),this.liveStreams=Object.freeze(u.default)}return o(e,null,[{key:"load",value:function(t){return new e(t).loadRemoteOverrides()}}]),o(e,[{key:"loadRemoteOverrides",value:function(){var e=this,t=v.default.CONFIG_OVERWRITES;f.default.trackLoadStart(this.userOptions.htmlChildId,f.default.loadTypes.CONFIG,t);var n=(0,c.default)(P,fetch(t)).then(function(e){return e.json()}).then(function(t){e.defaultOptions=Object.freeze(t.projector_defaults),e.liveStreams=Object.freeze(t.livestreams),f.default.trackLoadComplete(e.userOptions.htmlChildId,f.default.loadTypes.CONFIG,f.default.loadStatus.COMPLETE)}).catch(function(n){g.default.recordLoadError(A,t,"Unable to load:",n),f.default.trackLoadComplete(e.userOptions.htmlChildId,f.default.loadTypes.CONFIG,f.default.loadStatus.ERROR)});return n.then(function(){return e}).catch(function(){return e})}}]),e}();n.default=w},{"../../config/livestreams.json":8,"../../config/projector_defaults.json":9,"../utils/deadline":67,"error-report":"error-report","load-timer":"load-timer","lodash.clonedeep":4,log:"log",resources:"resources"}],43:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=t.url,r=t.type;return new u.default(n,r,e)}function a(e,t,n){n.cname=e,t.push(n)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./stream"),u=r(l),d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments[2];i(this,e),this.name=t,this.weight=n,this.streams=r}return s(e,null,[{key:"getStreams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=e.combineStreams(e.parse(t));return n.streams}},{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce(function(t,n){var r=n.name,i=n.weight,a=n.streams,s=a.map(o.bind(null,i));return t.push(new e(r,i,s)),t},[])}},{key:"combineStreams",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[],r=t.reduce(function(e,t){var r=t.name,i=t.streams;return i.forEach(a.bind(null,r,n)),e+"_"+r},"");return new e(r,null,n)}}]),e}();n.default=d},{"./stream":50}],44:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){Object.keys(e).map(function(r){var i=e[r];void 0!==t[r]&&(n[i]=t[r])})}function a(e,t){var n=h.test(e);return n&&t===v||!n&&t!==v}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments[2],r=e&&e.length?"&":"",i=encodeURIComponent(""+r+t+"="+n);return""+e+i}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("resources"),d=r(u),c=e("bvp-constant"),p=e("../../utils/AdTagUtils"),f=r(p),h=/\.m3u8/,v="hls",y={posterUrl:"poster",poster_as_slate:"poster_as_slate",stream_type:"stream_type",buffering_animation:"buffering.animation",log_debug:"log.*.debug",use_share_overlay:"use_share_overlay",ad_tag:"ads.preroll.unit",ad_tag_midroll:"ads.midroll.unit",ad_network_id_preroll:"ads.preroll.network.id",ad_network_id_midroll:"ads.midroll.network.id",ad_tag_suffix_preroll:"ads.preroll.suffix",ad_tag_suffix_midroll:"ads.midroll.suffix",ad_midroll_min_duration:"ads.midroll.minduration",ad_midroll_max_duration:"ads.midroll.maxduration",ad_tag_sz_preroll:"ads.preroll.sz",ad_tag_sz_midroll:"ads.midroll.sz",ad_tag_tile_preroll:"ads.preroll.tile",ad_tag_tile_midroll:"ads.midroll.tile",ad_tag_gpt_preroll:"ads.preroll.gpt",ad_tag_gpt_midroll:"ads.midroll.gpt",ad_tag_cust_params_preroll:"ads.preroll.cust_params",ad_tag_cust_params_midroll:"ads.midroll.cust_params",disable_overlay_companion_ads:"ads.overlay.companions.disable",disable_companion_ads:"ads.companions.disable",ads_playback_timeout:"ads.playback.timeout",ads_vast_timeout:"ads.vast.timeout",ads_live_per_block:"ads.live.ads_per_block",ads_live_playback_delay:"ads.live.playback_delay",ui_autohide_timeout:"ui.autohide.timeout",use_js_ads:"jsAdsEnabled",autoplay:"autoplay","video.start_at":"start_at",start_muted:"start_muted",continuous_play_previous_url:"continuous_play_previous_url",live:"live",module_ad_player:"module.com.bloomberg.player.ads::AdPlayer",log_debug_2:"log.com.bloomberg.player::Player.debug",ui_skin_url:"ui.skin.url",ui_controls_fullscreen:"controls.fullscreen"},_=function(){function e(){i(this,e)}return l(e,null,[{key:"addOptions",value:function(t){e.declareHlsSupportForFlash(),t.flash||(t.flash={}),t.flash.swf=t.swf,e.addFlashVars(t)}},{key:"declareHlsSupportForFlash",value:function(){var e=videojs.getTech("Flash");e.formats["application/x-mpegurl"]="M3U8"}},{key:"addFlashVars",value:function(t){t.flash.flashVars||(t.flash.flashVars={}),o(y,t,t.flash.flashVars),e.addStreamTypeToFlashVars(t),e.mergeMetadataIntoFlashVars(t),e.addSrcToFlashVars(t),e.addYouboraSettingToFlashVars(t),e.addControlSettingsToFlashVars(t)}},{key:"addStreamTypeToFlashVars",value:function(e){e.flash.flashVars.stream_type=v}},{key:"mergeMetadataIntoFlashVars",value:function(e){e.flash.flashVars.metadata=encodeURIComponent(JSON.stringify(e.metadata))}},{key:"addControlSettingsToFlashVars",value:function(e){e.flash.flashVars["module.com.bloomberg.player.chrome::Chrome"]=e.controls?"enabled":"disabled"}},{key:"addSrcToFlashVars",value:function(e){for(var t=[],n=e.streams||[],r=0;r<n.length;r++){var i=n[r];if(a(i.url,e.flash.flashVars.stream_type)){var o={src:i.url,type:i.type,cname:i.cname,"data-bitrate":i.bitrate};i.percent>=0&&(o["data-percent"]=i.percent),t.push(o)}}t.length&&(e.flash.flashVars.src=encodeURIComponent(JSON.stringify(t)))}},{key:"addYouboraSettingToFlashVars",value:function(e){var t=e.flash.flashVars;t&&(t["youbora.account"]=d.default.YOUBORA_ACCOUNT||"bloombergdev")}},{key:"addCustomParam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2];e.flash=e.flash||{},e.flash.flashVars=e.flash.flashVars||{};var r=e.flash.flashVars,i=["ads.preroll.cust_params","ads.midroll.cust_params"];i.forEach(function(e){return r[e]=s(r[e],t,n)})}},{key:"upsertLotameParam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(t&&0!==t.length){e.flash=e.flash||{},e.flash.flashVars=e.flash.flashVars||{};var n=e.flash.flashVars,r=["ads.preroll.cust_params","ads.midroll.cust_params"];r.forEach(function(e){n[e]=f.default.upsertCustomParamToURI(n[e],"ksg",t,c.REGEX_FOR_KRUX)})}}}]),e}();n.default=_},{"../../utils/AdTagUtils":59,"bvp-constant":"bvp-constant",resources:"resources"}],45:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){Object.keys(e).map(function(r){var i=e[r];void 0!==t[i]&&(n[r]=t[i])})}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a={bufferingAnimation:"buffering_animation",prerollUnit:"ad_tag",midrollUnit:"ad_tag_midroll",prerollNetworkId:"ad_network_id_preroll",midrollNetworkId:"ad_network_id_midroll",prerollSuffix:"ad_tag_suffix_preroll",midrollSuffix:"ad_tag_suffix_midroll",midrollMinDuration:"ad_midroll_min_duration",midrollMaxDuration:"ad_midroll_max_duration",prerollSz:"ad_tag_sz_preroll",midrollSz:"ad_tag_sz_midroll",prerollTile:"ad_tag_tile_preroll",midrollTile:"ad_tag_tile_midroll",prerollIsGPT:"ad_tag_gpt_preroll",midrollIsGPT:"ad_tag_gpt_midroll",prerollCustParams:"ad_tag_cust_params_preroll",midrollCustParams:"ad_tag_cust_params_midroll",overlayDisableCompanionAds:"disable_overlay_companion_ads",prerollDisableCompanionAds:"disable_companion_ads",midrollDisableCompanionAds:"disable_companion_ads",prerollPlaybackTimeout:"ads_playback_timeout",midrollPlaybackTimeout:"ads_playback_timeout",prerollLoadTimeout:"ads_vast_timeout",midrollLoadTimeout:"ads_vast_timeout",debug:"log_debug",prerollAdsPerBlock:"preroll_ads_per_block",midrollAdsPerBlock:"ads_live_per_block",prerollPlaybackDelay:"preroll_ads_playback_delay",midrollPlaybackDelay:"ads_live_playback_delay",controlsFadeMillis:"ui_autohide_timeout",jsAdsEnabled:"use_js_ads",prerollMaxRetries:"ads_max_retries_preroll",midrollMaxRetries:"ads_max_retries_midroll",shouldFetchCompanionAd:"ad_companion",byzantiumClient:"byzantium_client"},s={ns_site:"comscore_ns_site",page_level_tags:"comscore_page_level_tags"},l=function(){function e(){r(this,e)}return o(e,null,[{key:"addOptions",value:function(t){t.plugins||(t.plugins={}),e.addGoogleAdOptions(t),e.addComscoreOptions(t)}},{key:"addGoogleAdOptions",value:function(e){e.plugins.GoogleAdsPlugin||(e.plugins.GoogleAdsPlugin={}),i(a,e,e.plugins.GoogleAdsPlugin)}},{key:"addComscoreOptions",value:function(e){e.plugins.ComscoreStreamSensePlugin||(e.plugins.ComscoreStreamSensePlugin={}),i(s,e,e.plugins.ComscoreStreamSensePlugin)}}]),e}();n.default=l},{}],46:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("array-find-index"),u=r(l),d=new s.default("PosterSize"),c=[{width:320,height:180},{width:640,height:360},{width:960,height:540}],p=/(.*)-1x-1\.(.*)/,f=.5625,h=function(){function e(){i(this,e)}return o(e,null,[{key:"isTemplateImage",value:function(e){return p.test(e)}},{key:"closestImage",value:function(t,n,r){if(!e.isTemplateImage(r))return d.warn("Cannot resize: Invalid template image",r),r;if(t=parseFloat(t),n=parseFloat(n),t<=0)return d.warn("Cannot resize: Invalid container size",t,n),r;n<=0&&(n=t*f);var i=(0,u.default)(c,function(e){return e.width>=t&&e.height>=n});i===-1&&(i=c.length-1);var o=c[i];return r.replace(p,"$1"+o.width+"x"+o.height+".$2")}}]),e}();n.default=h},{"array-find-index":1,log:"log"}],47:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return""+E+e+"/decision"}function a(e,t){var n=e.providers,r=s(n,P);return l(t,r)}function s(e,t){return e.reduce(function(e,n,r){return e[n[t]]=r,e},{})}function l(e,t){return e.sort(function(e,n){var r=e.cedexisPlatform,i=n.cedexisPlatform,o=t[r],a=t[i];return void 0!==o&&void 0!==a?o-a:void 0!==o?-1:void 0!==a?1:0})}function u(e,t){var n=e.providers,r=s(n,P);return d(t,r)}function d(e,t){return e.sort(function(e,n){var r=e.name,i=n.name,o=t[r],a=t[i];return void 0!==o&&void 0!==a?o-a:void 0!==o?-1:void 0!==a?1:0})}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=e("../../../utils/deadline"),f=r(p),h=e("load-timer"),v=r(h),y=e("log"),_=r(y),m=e("error-report"),g=r(m),b=new _.default("CedexisPriorityProvider"),E="//hopx.cedexis.com/zones/1/customers/12403/apps/",A=500,P="provider",w=function(){function e(t,n){i(this,e),this.appId=t,this.htmlChildId=n}return c(e,[{key:"prioritizeStreams",value:function(e){var t=this;return e?this.appId?this._loadCedexisResponse(this.appId).then(function(t){return a(t,e)}).catch(function(n){return g.default.recordLoadError(b,o(t.appId),"Unable to prioritize streams:",n),e}):(b.info("No cedexis app id. Skipping Cedexis decision and returning streams unchanged"),Promise.resolve(e)):Promise.resolve(null)}},{key:"prioritizeCDNs",value:function(e){var t=this;return e?this.appId?this._loadCedexisResponse(this.appId).then(function(t){return u(t,e)}).catch(function(n){return g.default.recordLoadError(b,o(t.appId),"Unable to prioritize cdns:",n),e}):(b.info("No cedexis app id. Skipping Cedexis decision and returning cdns unchanged"),Promise.resolve(e)):Promise.resolve(null)}},{key:"_loadCedexisResponse",value:function(e){var t=o(e);v.default.trackLoadStart(this.htmlChildId,v.default.loadTypes.CEDEXIS,t);var n=fetch(t,{mode:"cors"});return(0,f.default)(A,n).then(this._handleDecisionResponse.bind(this))}},{key:"_handleDecisionResponse",value:function(e){if(200!=e.status)throw v.default.trackLoadComplete(this.htmlChildId,v.default.loadTypes.CEDEXIS,v.default.loadStatus.ERROR),new Error("Unexepected response status "+e.status);return v.default.trackLoadComplete(this.htmlChildId,v.default.loadTypes.CEDEXIS,v.default.loadStatus.COMPLETE),e.json()}}]),e}();n.default=w},{"../../../utils/deadline":67,"error-report":"error-report","load-timer":"load-timer",log:"log"}],48:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=[].concat(e),r=[],i=n.reduce(function(e,n){return e+n[t]},0),o=void 0,a=void 0,s=void 0;n.length>0&&i>l;){o=0,a=Math.random()*i;for(var u=0,d=n.length;u<d;u++)if(s=n[u],o+=s[t],a<=o){r.push(s),n.splice(u,1),i-=s[t];break}}return r.concat(n)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a="percent",s="weight",l=1e-13,u=function(){function e(){r(this,e)}return o(e,[{key:"prioritizeStreams",value:function(e){return e?i(e,a):null}},{key:"prioritizeCDNs",value:function(e){return e?i(e,s):null}}]),e}();n.default=u},{}],49:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){videojs.addLanguage("en",_.default)}function a(e){return"https:"===location.protocol&&R.default.isDev?e.replace(":"+R.default.localPort,":"+(R.default.localPort+1)):e}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../projector-autoplay"),u=r(l),d=e("../bmmr-asset-js/bmmr-asset-js"),c=r(d),p=e("./cdn"),f=r(p),h=e("./prioritize-cdn/cedexis-priority-provider"),v=r(h),y=e("../../../config/errorStrings.json"),_=r(y),m=e("./flash-options"),g=r(m),b=e("./plugin-options"),E=r(b),A=e("./poster-size"),P=r(A),w=e("../projector-ads"),S=r(w),k=e("../../utils/projector-utils"),C=r(k),O=e("../google-ads/ad-utils"),T=r(O),j=e("resources"),R=r(j),L=e("./prioritize-cdn/weighted-random-priority-provider"),D=r(L),M=e("log"),U=r(M),I=e("error-report"),x=r(I),N=e("triton-stream-provider"),B=r(N),F=e("bvp-constant"),V=e("../../utils/SuperBurst"),H=r(V),z=e("lodash.clone"),G=r(z),q=e("lodash.pick"),Y=r(q),W=e("../bmmr-asset-js/video-stream"),Q=r(W),X=e("../../services/lotame-service"),K=r(X),$=new U.default("ProjectorSettings"),J=9999,Z=F.MPEG_STREAM_TYPE,ee={MP4:!0,TS:!0,F4M:!0},te=["id","title","live","form_type","player_type","cedexisAppID","streamProvider","streamProviderConfig"],ne=function(){function e(t){var n=this;if(i(this,e),this.config=t,!this.config.version)return void x.default.recordGenericError($,"Invalid version passed");if(this.liveId=null,this.dataSetup=null,this.prioritizeStreams=null,this.version=this.config.version,this.userOptions=this.config.userOptions,this.userOptions.live=Boolean(+this.userOptions.live),this.bmmrAsset=this.config.bmmrAsset,this.htmlChildId=this.userOptions.htmlChildId,this.lotame=new K.default({playerHtmlChildId:this.htmlChildId}),this.userOptions.live){if(!this.config.liveId)return void x.default.recordGenericError($,"liveId not passed");if(this.liveId=this.config.liveId,!this.config.liveStreams[this.liveId])return void x.default.recordGenericError($,"Invalid liveId:",this.liveId)}return!this.bmmrAsset||this.bmmrAsset instanceof c.default?(this.debugLogEnabled=this.userOptions.log_debug,o(),void 0!==this.userOptions.tech_order&&(this.userOptions.techOrder=this.userOptions.tech_order),void(this.readyPromise=this.prepareStreams().then(this.setPrioritizedStreams.bind(this),function(e){return $.warn("Stream prioritize failure: "+e)}).then(this.finalizeSettings.bind(this)).then(function(){return n}))):void x.default.recordGenericError($,"Unexpected BMMR asset type")}return s(e,[{key:"ready",value:function(){return this.readyPromise}},{key:"finalizeSettings",value:function(){var e=this,t=Object.assign({swf:this.getSwfUrl(),ui_skin_url:this.getSkinUrl(),buffering_animation:this.getBufferingAnimationUrl(),asset_version:this.version,original_user_options:this.config.userOptions},this.config.defaultOptions||{},this.userOptions||{},{poster:void 0},this.generateProjectorAssetWithStreams()),n=new S.default(t,this.bmmrAsset);this.dataSetup=Object.assign(t,n.prepare()),g.default.addOptions(this.dataSetup),E.default.addOptions(this.dataSetup),this.determineTechOrder(),this.determineTitle(),this.setControlsVisibility(),this.setNativeTextTrack(),this.addPlayerIdToPluginSettings(),this.determineMuteState(),this.filterStreamsForMobile(),this._overwriteSettingsForStreamProvider(),this._overwriteSettingsForExperiment(),!this._isTritonStream()&&this.dataSetup.hlsjs?this.dataSetup.hlsjs.hlsConfig.startLevel=-1:this.dataSetup.hlsjs&&(this.dataSetup.hlsjs.hlsConfig.liveSyncDurationCount=void 0),this.dataSetup.autoplayReportingValues=u.default.getReportingValues(this.dataSetup);var r=this.dataSetup.plugins.GoogleAdsPlugin;if(C.default.forcedToPlayFlash(this.dataSetup)&&T.default.canDisplayAds(r)){var i=[H.default.retrieveSuperBurstParams(),this.lotame.getSegments()];return Promise.all(i).then(function(t){var n=t&&t[0],r=t&&t[1];n&&n.srnd&&g.default.addCustomParam(e.dataSetup,"srnd",n.srnd),r&&r.length>0&&g.default.upsertLotameParam(e.dataSetup,r)})}}},{key:"determineTechOrder",value:function(){var e=this.dataSetup.techOrder||[],t=[];if(C.default.isMobile())return void(this.dataSetup.techOrder=["html5"]);if(!Hls.isSupported())return void(this.dataSetup.techOrder=["flash"]);if(C.default.isSafariDesktop())return void(this.dataSetup.techOrder=["flash","html5"]);for(var n=0;n<e.length;n++)"html5"===e[n]?t.push("hlsjs"):t.push(e[n]);this.dataSetup.techOrder=t}},{key:"determineMuteState",value:function(){var e=C.default.isMiniPlayer(this.dataSetup),t=this.config.userOptions.start_muted;this.dataSetup.muted=C.default.shouldStartMuted(this.dataSetup)||t||e}},{key:"setControlsVisibility",value:function(){C.default.forcedToPlayFlash(this.dataSetup)&&(this.dataSetup.controls=!1),C.default.isMobile()&&(this.dataSetup.nativeControlsForTouch=!0)}},{key:"setNativeTextTrack",value:function(){var e=this.dataSetup&&this.dataSetup.html5||{};this.userOptions.live&&C.default.isSafariDesktop()&&(e.nativeTextTracks=!0);var t=!e.hasOwnProperty("nativeTextTracks")||e.nativeTextTracks,n=videojs.getTech("Html5");n&&(n.prototype.featuresNativeTextTracks=t);var r=videojs.getTech("Hlsjs");r&&(r.prototype.featuresNativeTextTracks=t)}},{key:"prepareStreams",value:function(){if(this._isTritonStream()){var e=this.config.liveStreams[this.liveId].streamProviderConfig;return B.default.syncAndFetchStreamInfo(e,this.htmlChildId)}if(this.userOptions.url_override)return this.getStreamsManualUrl();var t=new D.default,n=new v.default(this.getCedexisAppID(),this.htmlChildId);if(this.userOptions.live){var r=t.prioritizeCDNs(this.config.liveStreams[this.liveId].cdns);return n.prioritizeCDNs(r).then(function(e){return f.default.getStreams(e)})}var i=t.prioritizeStreams(this.getStreams());return n.prioritizeStreams(i)}},{key:"getCedexisAppID",value:function(){return this.bmmrAsset?this.bmmrAsset.getCedexisAppID():this.config.liveStreams[this.liveId].cedexisAppID}},{key:"getStreams",value:function(){if(this.bmmrAsset){var e="https:"===window.location.protocol;return this.bmmrAsset.getStreams(e)}return f.default.getStreams(this.config.liveStreams[this.liveId].cdns)}},{key:"getStreamsManualUrl",value:function(){var e=this.userOptions.url_override;return Promise.resolve([new Q.default({percent:100,stream_type:e.type,url:e.url,muxing_format:e.mux})])}},{key:"setPrioritizedStreams",value:function(e){this.prioritizeStreams=e}},{key:"getPrioritizedStreams",value:function(){return this.prioritizeStreams?this.prioritizeStreams:this.getStreams()}},{key:"addPlayerIdToPluginSettings",value:function(){return this.dataSetup&&this.dataSetup.plugins?void Object.keys(this.dataSetup.plugins).forEach(function(e){this.dataSetup.plugins[e].playerId=this.dataSetup.id}.bind(this)):void $.debug("Cannot add playerid tp plugin options")}},{key:"getProjectorAssetCaptionsVod",value:function(){var e=this.bmmrAsset?this.bmmrAsset.getCaptions():null;if(e){for(var t=[],n=0;n<e.length;++n)t.push({url:e[n].getUrl()});return t}}},{key:"getProjectorAssetStreamsVod",value:function(){for(var e=this.getPrioritizedStreams(),t=[],n=0;n<e.length;++n){var r=e[n],i=r.getMuxingFormat();
ee[i]&&t.push(r.toJSON())}return t}},{key:"getProjectorAssetNiCodesVod",value:function(){var e=this.bmmrAsset?this.bmmrAsset.getNiCodes():null;return e.map(function(e){return e.code})}},{key:"getProjectorAssetPeoplesVod",value:function(){var e=this.bmmrAsset?this.bmmrAsset.getPeoples():null;return e.map(function(e){return e.description})}},{key:"getPosterTemplateImage",value:function(){return this.userOptions.poster?this.userOptions.poster:this.userOptions.live?this.config.liveStreams[this.liveId].poster:this.bmmrAsset?this.bmmrAsset.getPosterTemplateImage():null}},{key:"getPosterContainerSize",value:function(){if(this.userOptions.width&&this.userOptions.height)return{width:this.userOptions.width,height:this.userOptions.height};if(this.userOptions.containerElement){var e=this.userOptions.containerElement.getBoundingClientRect();return{width:e.width,height:e.height}}return{width:J,height:J}}},{key:"getPosterImage",value:function(){var e=this.getPosterTemplateImage();if(!e)return $.warn("No poster template image"),null;var t=this.getPosterContainerSize();return P.default.closestImage(t.width,t.height,e)}},{key:"generateProjectorAssetWithStreamsVod",value:function(){var e=this.getPosterImage(),t={posterUrl:e,streams:this.getProjectorAssetStreamsVod(),metadata:this.userOptions.url_override?{id:"urlOverride_"+(Math.floor(1e3*Math.random())+1)}:{bb_pub_d:this.bmmrAsset.getComscoreMetadata().getBbPubD(),c5:this.bmmrAsset.getComscoreMetadata().getC5(),cedexisAppID:this.bmmrAsset.getCedexisAppID(),compressedID:this.bmmrAsset.getCompressedID(),createdate:this.bmmrAsset.getCreateDate(),duration:""+this.bmmrAsset.getDuration(),form_type:this.bmmrAsset.getComscoreMetadata().getNsStTy(),id:this.bmmrAsset.getId(),show_name:(this.bmmrAsset.getShowName()||"").replace(/[']/g,"&apos;"),title:this.bmmrAsset.getTitle(),version:this.version,captions:this.getProjectorAssetCaptionsVod(),ni_codes:this.getProjectorAssetNiCodesVod(),keywords:this.bmmrAsset.getKeywords(),peoples:this.getProjectorAssetPeoplesVod(),adCuePoints:this.bmmrAsset.getAdCuePoints(),poster:e}};return t}},{key:"generateProjectorAssetWithStreamsLive",value:function(){var e=this.config.liveStreams[this.liveId],t=this.getPosterImage(),n=this.getPrioritizedStreams(),r={posterUrl:t,streams:n,playerType:e.player_type,metadata:Object.assign((0,G.default)((0,Y.default)(e,te)),{streams:n,poster:t,version:this.version})};return r}},{key:"generateProjectorAssetWithStreams",value:function(){return this.userOptions.live?this.generateProjectorAssetWithStreamsLive():this.generateProjectorAssetWithStreamsVod()}},{key:"filterStreamsForMobile",value:function(){C.default.isMobile()&&(this.dataSetup.streams=this.dataSetup.streams.filter(function(e){return e.type===Z}))}},{key:"getSwfUrl",value:function(){return a(R.default.SWF_FILE_NAME_INSIGHTS)}},{key:"getSkinUrl",value:function(){return a(R.default.SKIN_FILE_NAME)}},{key:"getBufferingAnimationUrl",value:function(){return a(R.default.BUFFERING_ANIMATION_FILE_NAME)}},{key:"determineTitle",value:function(){var e=this.config.bmmrAsset?this.config.bmmrAsset.getTitle():this.config.title;this.dataSetup.title=e||""}},{key:"_isTritonStream",value:function(){return this.userOptions.live&&this.config.liveStreams[this.liveId].streamProvider===F.TRITON_PROVIDER_NAME}},{key:"_overwriteSettingsForStreamProvider",value:function(){if(this._isTritonStream()){var e=this.dataSetup;if(e.hlsjs){var t=e.hlsjs.hlsConfig;t.autoStartLoad=!0,t.manifestLoadingMaxRetry=0}C.default.isSafariDesktop()&&(e.preload=!0),e.flash&&(e.flash.flashVars.hls_manifestloadmaxretry=0)}}},{key:"_overwriteSettingsForExperiment",value:function(){}}]),e}();n.default=ne},{"../../../config/errorStrings.json":7,"../../services/lotame-service":54,"../../utils/SuperBurst":61,"../../utils/projector-utils":72,"../bmmr-asset-js/bmmr-asset-js":19,"../bmmr-asset-js/video-stream":23,"../google-ads/ad-utils":30,"../projector-ads":40,"../projector-autoplay":41,"./cdn":43,"./flash-options":44,"./plugin-options":45,"./poster-size":46,"./prioritize-cdn/cedexis-priority-provider":47,"./prioritize-cdn/weighted-random-priority-provider":48,"bvp-constant":"bvp-constant","error-report":"error-report","lodash.clone":3,"lodash.pick":6,log:"log",resources:"resources","triton-stream-provider":"triton-stream-provider"}],50:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n,i){r(this,e);var o=100*i;if(!t||!n)throw new Error("Invalid url and type specified");if(isNaN(o)||0>o||o>100)throw new Error("Invalid stream weight specified ("+i+")");this.url=t,this.type=n,this.percent=o}return i(e,[{key:"serialize",value:function(){return{url:this.url,type:this.type,percent:this.percent}}}]),e}();n.default=o},{}],51:[function(require,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findScriptElement(){if(document.currentScript)return document.currentScript;var e=document.getElementsByTagName("script"),t=e[e.length-1],n=void 0;if(REGEXP_BPLAYER_HREF.test(t.src))n=t;else for(var r=0,i=e.length;r<i;++r)REGEXP_BPLAYER_HREF.test(e[r].src)&&!e[r].getAttribute(DATA_EXCLUDE)&&(n=e[r]);if(!n)for(var o=0,a=e.length;o<a;++o)REGEXP_BPLAYER_NAME.test(e[o].getAttribute(DATA_NAME))&&(n=e[o]);return n}function getScriptQueryParameters(scriptElement){log.warn("Specifying user options through URL query-string has been deprecated.");var query=scriptElement.src.split("?")[1];return query?(0,_queryString2.default)(query):("bplayer"!==scriptElement.getAttribute("data-name")&&(log.warn("Initialization of BPlayer within a script tag has been deprecated."),eval(scriptElement.innerHTML)),"undefined"==typeof setup?{}:setup)}Object.defineProperty(exports,"__esModule",{value:!0});var _queryString=require("../utils/query-string"),_queryString2=_interopRequireDefault(_queryString),_log=require("log"),_log2=_interopRequireDefault(_log),REGEXP_BPLAYER_HREF=/bplayer\.js$|bplayer\.js\?/,REGEXP_BPLAYER_NAME=/^bplayer$/,DATA_EXCLUDE="data-exclude",DATA_NAME="data-name",log=new _log2.default("ScriptElement");exports.default={findScriptElement:findScriptElement,getScriptQueryParameters:getScriptQueryParameters}},{"../utils/query-string":73,log:"log"}],52:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("error-report"),u=r(l),d=e("lodash.pick"),c=r(d),p=new s.default("UserOptionsValidator"),f={id:{required:!0,type:String},autoplay:Boolean,htmlChildId:String,serverUrl:String,width:String,height:String,log_debug:Boolean,comscore_ns_site:String,vertical:String,poster:String,start_muted:Boolean,live:Boolean,comscore_page_level_tags:Object,techOrder:Array,tech_order:Array,idType:String,share_metadata:Object,video_autoplay_on_page:Boolean,controls:Boolean,ui_controls_fullscreen:Boolean,containerElement:HTMLElement,source:String,zone:String,poster_as_slate:Boolean,forcePosterMobile:Boolean,byzantium_client:Object,parselyPageUrl:String,playlistIndex:Number,use_comscore:Boolean,use_parsely:Boolean,use_share_overlay:Boolean,use_title_bar:Boolean,continuous_play_previous_url:String,use_google_tag_manager:Boolean,google_tag_manager_data_layer_id:String,enableFence:Boolean,offsite_embed:Boolean,analyticsParams:Object,useRegUIPopUpPlugin:Boolean,useChromeCastPlugin:Boolean,module_ad_player:String,ad_tag:String,ad_tag_sz_preroll:String,ad_tag_midroll:String,ad_tag_sz_midroll:String,ad_tag_gpt_preroll:Boolean,ad_tag_gpt_midroll:Boolean,ad_network_id_preroll:String,ad_network_id_midroll:String,ad_tag_cust_params_preroll:String,ad_tag_cust_params_midroll:String,ads_vast_timeout:Number,ads_playback_timeout:Number,use_js_ads:Boolean,ad_code_prefix:String,ad_companion:Boolean,url_override:Object},h=function(){function e(){i(this,e)}return o(e,null,[{key:"getValidatedOptions",value:function(e){var t=0,n=0;Object.keys(f).forEach(function(n){f[n].constructor!==Object||!f[n].required||void 0!==e[n]&&null!==e[n]||(u.default.recordGenericError(p,'Missing required option "'+n+'"'),t++)}),Object.keys(e).forEach(function(t){var r=e[t];if(void 0===f[t])return p.warn("Unexpected option passed: "+t+" with value: ",r),void n++;var i="[object Object]"===Object.prototype.toString.call(f[t])?f[t].type:f[t];void 0===r||null===r||r.constructor===i||r instanceof i||(p.warn("Unexpected option type: "+t+'. Was expecting type "'+i.name+'" but got',r),n++)}),p.info("validation complete with "+t+" errors and "+n+" warnings");var r=(0,c.default)(e,Object.keys(f));return r}}]),e}();n.default=h},{"error-report":"error-report","lodash.pick":6,log:"log"}],53:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,null,[{key:"isIEBasedXml",value:function(){return void 0!==window.ActiveXObject}},{key:"parseXml",value:function(e){if(this.isIEBasedXml()){var t=new window.ActiveXObject("Microsoft.XMLDOM");if(t)return t.async="false",t.loadXML(e),t}var n=new window.DOMParser;return n.parseFromString(e,"text/xml")}},{key:"removeXmlNamespaces",value:function(e){return e.replace(/xmlns[:]*[a-z]*=\"[^\"]*\"/g,"").replace(/xsi[:]*[a-z]*=\"[^\"]*\"/g,"")}},{key:"getNodeForXPath",value:function(e,t){if(this.isIEBasedXml())return e.selectSingleNode(t);var n=e.evaluate(t,e.documentElement,null,XPathResult.ANY_TYPE,null);return n?n.iterateNext():null}},{key:"getTextForXPath",value:function(e,t){var n=this.getNodeForXPath(e,t);if(n){var r=this.getTextForNode(n);if(r)return r}return null}},{key:"getTextForNode",value:function(e){return e?this.isIEBasedXml()?e.childNodes&&e.childNodes[0]&&void 0!==e.childNodes[0].nodeValue?e.childNodes[0].nodeValue:null:void 0!==e.textContent?e.textContent:null:null}}]),e}();n.default=o},{}],54:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("script-injector"),s=r(a),l=e("log"),u=r(l),d=e("../utils/deadline"),c=r(d),p=e("../utils/cookies"),f=r(p),h=e("load-timer"),v=r(h),y=new u.default("LotameService"),_=5e3,m="_cc_id",g="_cc_domain",b=12097,E=function(){function e(t){var n=t.playerHtmlChildId;i(this,e),this.playerHtmlChildId=n,this._audience=[],this.jsonpCallbackName="jsonpCallback_"+(Math.floor(1e4*Math.random())+2).toString(),window.bvpLotame=window.bvpLotame||{},window.bvpLotame[this.jsonpCallbackName]=this._jsonpCallback.bind(this)}return o(e,[{key:"getSegments",value:function(){var e=this;return(0,c.default)(_,this._loadLotame()).then(function(){return e._audience}).catch(function(e){y.error("Lotame audience data not available",e)})}},{key:"_jsonpCallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.Profile&&e.Profile.Audiences&&e.Profile.Audiences.Audience&&(this._audience=e.Profile.Audiences.Audience.map(function(e){return e.id}))}},{key:"_loadLotame",value:function(){return y.info("Loading lotame data"),s.default.injectScript(this._getLotameUrl(),document.querySelector("body"),this.playerHtmlChildId,v.default.loadTypes.LOTAME)}},{key:"_getLotameUrl",value:function(){var e=".crwdcntrl.net",t=!0,n=f.default.get(g);n&&(e=n,t=!1);var r=void 0,i=!1;if(t){var o=f.default.get(m);o&&(r=o,i=!0)}var a="//ad"+e;return a=a+"/5/c="+b+"/pe=y/rand="+(Math.floor(1e4*Math.random())+2)+"/callback=bvpLotame."+this.jsonpCallbackName,i&&(a=a+"/pid="+r),a}}]),e}();n.default=E},{"../utils/cookies":64,"../utils/deadline":67,"load-timer":"load-timer",log:"log","script-injector":"script-injector"}],55:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("resources"),s=r(a),l=e("error-report"),u=r(l),d=e("log"),c=r(d),p=e("../utils/deadline"),f=r(p),h=new c.default("TrigrService"),v=s.default.TRIGR_API+"/targets",y=500,_=function(){function e(){i(this,e)}return o(e,[{key:"getTrigrResults",value:function(){return(0,f.default)(y,fetch(v,{mode:"cors"})).then(function(e){var t=e.headers.get("content-type");if(e.ok&&t&&t.indexOf("application/json")!==-1)return e.json();throw new Error("Trigr Service returned an invalid response")}).catch(function(e){u.default.recordLoadError(h,v,"Error fetching trigr data ",e)})}}]),e}();n.default=_},{"../utils/deadline":67,"error-report":"error-report",log:"log",resources:"resources"}],56:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("bvp-shims"),s=e("../lib/bmmr-asset-js/bmmr-asset-js"),l=r(s),u=e("../lib/bmmr-asset-js/bmmr-loader"),d=r(u),c=e("../lib/projector-settings-js/projector-settings-js"),p=r(c),f=e("../lib/projector-config"),h=r(f),v=e("../utils/utils"),y=r(v),_=e("../view/View"),m=r(_),g=e("../lib/user-options-validator"),b=r(g),E=["loadBMMRData","loadProjectorConfiguration","setProjectorSettings","setupViewRenderer","renderView"],A=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i(this,e),this.assetDetails=r,this.userOptions=b.default.getValidatedOptions(n),this.view=null,this.el_=null,y.default.isEmptyObject(this.userOptions))throw new Error("Unable to run strategy without userOptions");E.forEach(function(e){t[e]=t[e].bind(t)})}return o(e,[{key:"run",value:function(){return this.loadBMMRData(this.assetDetails).then(this.loadProjectorConfiguration).then(this.setProjectorSettings).then(this.setupViewRenderer).then(this.renderView)}},{key:"loadBMMRData",value:function(e){return this.isLive()?Promise.resolve():this.userOptions.url_override?Promise.resolve():e?Promise.resolve(new l.default(e)):d.default.load(this.userOptions)}},{key:"loadProjectorConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.userOptions.live?this.userOptions.id:void 0;return h.default.load({userOptions:this.userOptions,version:a.version,bmmrAsset:e,liveId:t})}},{key:"setProjectorSettings",value:function(e){var t=new p.default(e);return t.ready()}},{key:"setupViewRenderer",value:function(e){return new this.view(this.el_,e)}},{key:"renderView",value:function(e){var t=this;return new Promise(function(n,r){e.on(m.default.ON_RENDER,function(e){var t=e.detail.player;n(t)}).on(m.default.ON_ERROR,function(e){var t=e.detail.error;r(t)}).on(m.default.ON_DISPOSE,function(){return t.dispose()}),e.render()})}},{key:"isLive",value:function(){return Boolean(this.userOptions.live)}},{key:"dispose",value:function(){this.assetDetails=this.userOptions=this.view=this.el_=null}}]),e}();n.default=A},{"../lib/bmmr-asset-js/bmmr-asset-js":19,"../lib/bmmr-asset-js/bmmr-loader":20,"../lib/projector-config":42,"../lib/projector-settings-js/projector-settings-js":49,"../lib/user-options-validator":52,"../utils/utils":76,"../view/View":116,"bvp-shims":"bvp-shims"}],57:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=e("./AbstractViewStrategy"),l=r(s),u=e("../view/insert-view"),d=r(u),c=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(r.view=d.default,r.el_=e.containerElement,!r.el_)throw new Error("Container element is not found. Make sure userOptions.containerElement is set!");return r}return a(t,e),t}(l.default);t.exports=c},{"../view/insert-view":117,"./AbstractViewStrategy":56}],58:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=e("./AbstractViewStrategy"),l=r(s),u=e("../lib/script-element"),d=r(u),c=e("../view/replace-view"),p=r(c),f=function(e){function t(e,n){i(this,t);var r=e.containerElement||d.default.findScriptElement();e.containerElement=r.parentNode;var a=e?e:d.default.getScriptQueryParameters(r),s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a,n));if(s.view=p.default,s.el_=r,!s.el_)throw new Error("Container element is not found. Make sure your code is wrapped in a script tag.");return s}return a(t,e),t}(l.default);t.exports=f},{"../lib/script-element":51,"../view/replace-view":118,"./AbstractViewStrategy":56}],59:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return"&"!==e[e.length-1]&&(e+="&"),e}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("log"),l=r(s),u=new l.default("AdTagUtils"),d=function(){function e(){i(this,e)}return a(e,null,[{key:"upsertCustomParam",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments[3];return n.length>0&&(e.indexOf(t)>-1&&r?e=e.replace(r,"$1=$2,"+n.join(",")):(e=o(e),e=""+e+t+"="+n.join(",")),e=o(e)),e}},{key:"upsertCustomParamToURI",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments[3];try{return encodeURIComponent(this.upsertCustomParam(decodeURIComponent(e),t,n,r))}catch(t){return u.error("Error while upserting custom params",t),e}}}]),e}();t.exports=d},{log:"log"}],60:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{return s in window&&window[s]}catch(e){return null}}function o(e){var t=i();return t?e(t):null}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="localStorage",l=function(){function e(){r(this,e)}return a(e,null,[{key:"get",value:function(e){return o(function(t){return t.getItem(e)})}},{key:"set",value:function(e,t){o(function(n){return n.setItem(e,t)})}},{key:"del",value:function(e){o(function(t){return t.removeItem(e)})}}]),e}();n.default=l},{}],61:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./deadline"),s=r(a),l=e("log"),u=r(l),d=500,c=new u.default("SuperBurst"),p=function(){function e(){i(this,e)}return o(e,null,[{key:"retrieveSuperBurstParams",value:function(){var e=window.__bloomberg__&&window.__bloomberg__.fetchSuperBurstParam;return e?(0,s.default)(d,e).catch(function(e){c.error("Error retrieving superburst data",e)}):(c.info("window.__bloomberg__.fetchSuperBurstParam not available"),Promise.resolve(null))}}]),e}();n.default=p},{"./deadline":67,log:"log"}],62:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.EVENTS=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("./event-target"),d=r(u),c={VISIBLE:"VISIBLE",INVISIBLE:"INVISIBLE"},p={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},f=void 0,h=void 0,v=!1;for(var y in p)if("undefined"!=typeof document[y]){f=y,h=p[y],v=!0;break}var _=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return t._isVisibilityAPISupported()&&(e._onVisibilityChange=e._onVisibilityChange.bind(e),document.addEventListener(h,e._onVisibilityChange)),e}return a(t,e),s(t,[{key:"dispose",value:function(){t._isVisibilityAPISupported()&&document.removeEventListener(h,this._onVisibilityChange),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_onVisibilityChange",value:function(){var e=t.isPageVisible()?c.VISIBLE:c.INVISIBLE;this.trigger(e)}}],[{key:"isPageVisible",value:function(){return!document[f]}},{key:"_isVisibilityAPISupported",value:function(){return v}}]),t}(d.default);n.EVENTS=c,n.default=_},{"./event-target":68}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return s.default.isDate(e)&&!isNaN(e.getTime())}function o(e){e=e||l;var t=new Date;if(t.setTime(t.getTime()+e),t&&!i(t))throw new Error("Invalid expires parameter");return t}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./utils"),s=r(a),l=7776e6,u={stringInGMT:function(e){var t=o(e);return t.toGMTString()},totalMilliseconds:function(e){var t=o(e);return t.getTime()}};n.default=u},{"./utils":76}],64:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("escape-string-regexp"),s=r(a),l=e("./cookie-expiration-date"),u=r(l),d="/",c=!1,p="",f=function(){function e(){i(this,e)}return o(e,[{key:"get",value:function(e){var t=new RegExp("[; ]"+(0,s.default)(e)+"=([^\\s;]*)"),n=document.cookie.match(t);return e&&n?decodeURI(n[1]):void 0}},{key:"set",value:function(e,t,n,r){var i=this.getCookieOptions(r||{});t=n?encodeURIComponent(t):t,document.cookie=this.generateCookieString(e,t,i)}},{key:"remove",value:function(e,t){var n=this.getCookieOptions(t||{});n.expires=new Date(-1).toGMTString(),this.set(e,"",!1,n)}},{key:"generateCookieString",value:function(e,t,n){var r=e+"="+t;return r+=";path="+n.path,r+=";domain="+n.domain,r+=n.expires?";expires="+n.expires:"",r+=n.secure?";secure":""}},{key:"getCookieOptions",value:function(e){e=e||{};var t=e&&e.expires?e.expires:null;return{path:e&&e.path?e.path:d,domain:p,expires:u.default.stringInGMT(t),secure:void 0!==e.secure?e.secure:c}}}]),e}();n.default=new f},{"./cookie-expiration-date":63,"escape-string-regexp":2}],65:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=e.length,r=0;r<n;r++)if(t===e[r])return r;return-1}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./utils"),l=r(s),u=/\s+/,d=" ",c=["-webkit-","-moz-","-ms-","-o-"],p=function(){function e(){i(this,e)}return a(e,null,[{key:"addClass",value:function(e,t){if(!e||!t)return this;if(e.classList)return e.classList.add(t),this;var n=e.className?e.className.trim().split(u):[];return o(n,t)!==-1?this:(e.className=n.concat([t]).join(d),this)}},{key:"addClassList",value:function(t,n){return l.default.isArray(n)&&n.forEach(function(n){e.addClass(t,n)}),this}},{key:"removeClass",value:function(e,t){if(!e)return this;if(e.classList)return e.classList.remove(t),this;var n=e.className?e.className.trim().split(u):[],r=o(n,t);return r===-1?this:(n.splice(r,1),e.className=n.join(d),this)}},{key:"hasClass",value:function(e,t){if(e){if(e.classList)return e.classList.contains(t);var n=e.className.trim().split(u);return o(n,t)!==-1}}},{key:"css",value:function(e,t){if("string"==typeof t)return void(e.style.cssText=t);var n=Object.keys(t).map(function(e){var n=e.toLowerCase(),r=t[e];return n+": "+r+";"}).join("");n&&(e.style.cssText=n)}},{key:"computedStylesFor",value:function(e){return document.defaultView.getComputedStyle(e,"")}},{key:"transform",value:function(e,t){if(e){var n="transform";if(!(n in e.style))for(var r,i=0,o=c.length;i<o&&(r=c[i],n=r+n,!(n in e.style));i++);e.style[n]=t}}}]),e}();n.default=p},{"./utils":76}],66:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=3600,a=60,s=["January","February","March","April","May","June","July","August","September","October","November","December"],l=function(){function e(){r(this,e)}return i(e,null,[{key:"convertToSeconds",value:function(e){if(!e)return null;var t=e.split(":");if(t.length<3)return null;var n=parseInt(t[0],10),r=parseInt(t[1],10),i=parseFloat(t[2]);return n*o+r*a+i}},{key:"formatSeconds",value:function(e){var t=Math.round(e),n=0;t>=60&&(n=Math.floor(t/60),t%=60);var r=""+(n?n:"0"),i=""+(t<10?"0"+t:t);return r+":"+i}},{key:"formatForReporting",value:function(e){if(!e)return"";var t=e.getDate(),n=e.getMonth(),r=e.getFullYear();return s[n]+" "+t+", "+r}}]),e}();n.default=l},{}],67:[function(e,t,n){"use strict";function r(e,t){return new Promise(function(n,r){var i=setTimeout(function(){r(new Error("Promise timeout"))},e);t.then(function(e){clearTimeout(i),n(e)},function(e){clearTimeout(i),r(e)})})}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r},{}],68:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){e&&t.bubbles&&!t.defaultPrevented&&(t.originalTarget||Object.defineProperty(t,"originalTarget",{value:n}),e.dispatchEvent(t))}function o(e,t){return a(e)&&t&&"function"==typeof t}function a(e){return e&&"string"==typeof e}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=/\s*,\s*/g,u=Symbol("listeners"),d=Symbol("parent"),c=function(){function e(){r(this,e),this[u]={},this[d]=null}return s(e,[{key:"addEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(e,t)&&(this[u][e]||(this[u][e]=[]),this[u][e].push({callback:t,deRegister:n}))}},{key:"removeEventListener",value:function(e,t){if(o(e,t)){var n=this[u][e];if(n){if(!t)return void(n.length=0);for(var r=0,i=n.length;r<i;r++)if(n[r].callback===t)return n.splice(r,1),this.removeEventListener(e,t)}}}},{key:"removeAllEventListeners",value:function(){var e=this;this[u]&&Object.keys(this[u]).forEach(function(t){e[u][t].length=0})}},{key:"dispatchEvent",value:function(e){var t=this;if(this[u]){var n=e.type;if(this[u].hasOwnProperty(n)){var r=this[u][n],o=[];this._overrideEventTarget(e);for(var a=0,s=r.length;a<s;a++){var l=r[a].callback,c=r[a].deRegister;l.call(this,e),c&&o.push(l)}o.forEach(function(e){return t.removeEventListener(n,e)})}i(this[d],e,this)}}},{key:"setEventParent",value:function(t){t instanceof e&&(this[d]=t)}},{key:"on",value:function(e,t){var n=this;if(!o(e,t))return this;var r=e.split(l);return r.forEach(function(e){n.addEventListener(e,t)}),this}},{key:"one",value:function(e,t){var n=this;if(!o(e,t))return this;var r=e.split(l);return r.forEach(function(e){n.addEventListener(e,t,!0)}),this}},{key:"off",value:function(e,t){var n=this;if(!o(e,t))return this;var r=e.split(l);return r.forEach(function(e){n.removeEventListener(e,t)}),this}},{key:"trigger",
value:function(e,t){if(!a(e))return this;var n=new CustomEvent(e,{detail:t,bubbles:!0,originalTarget:this,target:this});return this.dispatchEvent(n),this}},{key:"dispose",value:function(){this.removeAllEventListeners(),this[u]=null,this[d]=null}},{key:"_overrideEventTarget",value:function(e){Object.defineProperty(e,"target",{value:this,configurable:!0})}}]),e}();n.default=c},{}],69:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return void 0!==document.fullscreenEnabled?"default":void 0!==document.webkitFullscreenEnabled?"webkit":void 0!==document.mozFullScreenEnabled?"moz":void 0!==document.msFullscreenEnabled?"ms":void 0}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a={webkit:{element:"webkitFullscreenElement",enabled:"webkitFullscreenEnabled",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror",request:"webkitRequestFullscreen",status:"webkitIsFullScreen"},moz:{element:"mozFullScreenElement",enabled:"mozFullScreenEnabled",exit:"mozCancelFullScreen",onchange:"mozfullscreenchange",onerror:"mozfullscreenerror",request:"mozRequestFullScreen",status:"mozFullScreen"},ms:{element:"msFullscreenElement",enabled:"msFullscreenEnabled",exit:"msExitFullscreen",onchange:"MSfullscreenchange",onerror:"MSfullscreenerror",request:"msRequestFullscreen",status:"msFullscreen"},default:{element:"fullscreenElement",enabled:"fullscreenEnabled",exit:"exitFullscreen",onchange:"fullscreenchange",onerror:"fullscreenerror",request:"requestFullscreen",status:"fullscreen"}},s=i(),l=void 0!==s,u=function(){function e(){r(this,e)}return o(e,null,[{key:"requestFullScreen",value:function(e){if(l){var t=a[s].request;e[t]()}}},{key:"exitFullScreen",value:function(){if(l){var e=a[s].exit;this._getDocumentProperty(e)()}}},{key:"isEnabled",value:function(){if(!l)return!1;var e=a[s].enabled;return this._getDocumentProperty(e)}},{key:"isSupported",value:function(){return l}},{key:"isInFullScreen",value:function(){if(l){var e=a[s].status;return this._getDocumentProperty(e)}}},{key:"getFullScreenElement",value:function(){if(l){var e=a[s].element;return this._getDocumentProperty(e)}}},{key:"getVendorPrefix",value:function(){return s}},{key:"_getDocumentProperty",value:function(e){return document[e]}}]),e}();Object.assign(u,{vendorMap:a,fullscreenchange:l&&a[s].onchange,fullscreenerror:l&&a[s].onerror}),n.default=u},{}],70:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./utils"),s=r(a),l=Symbol("memoCache"),u=function(){function e(){i(this,e)}return o(e,null,[{key:"memoize",value:function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(function(e,t){return e+s.default.isPlainObject(t)?JSON.stringify(t):t},"");return e[l]=e[l]?e[l]:{},e[l].hasOwnProperty(i)||(e[l][i]=e.apply(null,n)),e[l][i]}}}]),e}();n.default=u},{"./utils":76}],71:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./cookies"),o=r(i),a=e("log"),s=r(a),l=new s.default("PersistControls"),u="com.bloomberg.player.volume.level",d={volume:u},c={get:function(e){var t=d[e];return t?o.default.get(t):(l.warn("Attempting to get an unknown type: "+e),null)},set:function(e,t){var n=d[e];return n?void o.default.set(n,t):void l.warn("Attempting to persist an unknown type: "+e)}};n.default=c},{"./cookies":64,log:"log"}],72:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=e.major,r=e.minor,i=e.patch,o=t.major,a=t.minor,s=t.patch;return n>o||n===o&&(r>a||r===a&&i>=s)}function o(e){if(!w.isAutoplayDisabledBrowser()&&!e.start_muted)return!1;var t=e.metadata.player_type;return"mini"!==t&&"radio"!==t}function a(e){try{return new ActiveXObject(e)}catch(e){return!1}}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="$version",u=/Firefox\//,d=/CriOS/,c="mini",p=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,f=/[\d]+/g,h="ShockwaveFlash.ShockwaveFlash",v="ShockwaveFlash.ShockwaveFlash.6",y="ShockwaveFlash.ShockwaveFlash.7",_="Shockwave Flash",m="Shockwave Flash 2.0",g="application/x-shockwave-flash",b="",E=/version\/(\d+)(\.(\d+))?(\.(\d+))?/i,A=/Chrome\/(\d+)(\.(\d+))?(\.(\d+))?/,P=!1,w=function(){function e(){r(this,e)}return s(e,null,[{key:"forcedToPlayFlash",value:function(t){var n=t&&Array.isArray(t.techOrder)&&t.techOrder[0];return!(e.isMobile()||!n||"flash"!==n)&&Boolean(e.getFlashVersion())}},{key:"getFlashVersion",value:function(){var t=void 0;return navigator.plugins&&navigator.plugins.length?(t=navigator.plugins[_])?e.parseFlashVersion(t.description):(t=navigator.plugins[m],t?"2.0.0.11":b):navigator.mimeTypes&&navigator.mimeTypes.length?(t=navigator.mimeTypes[g],t&&t.enabledPlugin?e.parseFlashVersion(t.enabledPlugin.description):b):(t=a(y))?e.parseFlashVersion(t.GetVariable(l)):a(v)?"6.0.21":(t=a(h))?e.parseFlashVersion(t.GetVariable(l)):b}},{key:"isContentAllowedToAutoplay",value:function(t){return!e.isAutoplayDisabledBrowser()||e.isMutedOverlayShowing(t)}},{key:"shouldStartMuted",value:function(t){return e.isMutedOverlayShowing(t)}},{key:"isMutedOverlayShowing",value:function(t){return e.isMutedOverlayEnabled(t)&&t.original_user_options.autoplay}},{key:"isMutedOverlayEnabled",value:function(e){return e.useMutedOverlayPlugin&&o(e)}},{key:"isActionRequiredToPlayAd",value:function(t){return!t&&e.isAutoplayDisabledBrowser()}},{key:"isHlsSupported",value:function(){return!!e.isMobile()||Hls.isSupported()}},{key:"isMiniPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.playerType===c}},{key:"isMobile",value:function(){return p.test(this.userAgent())}},{key:"isSafariDesktop",value:function(){var e=this.userAgent().toLocaleLowerCase();return e.indexOf("safari")!==-1&&e.indexOf("chrome")===-1}},{key:"isChrome64OrAbove",value:function(){var e=this.getBrowserVersion(this.userAgent(),A);return i(e,{major:64,minor:0,patch:0})}},{key:"isSafariDesktop11",value:function(){if(!this.isSafariDesktop())return!1;var e=this.getBrowserVersion(this.userAgent(),E);return 11===e.major&&0===e.minor&&0===e.patch}},{key:"isSafariDesktop11Above",value:function(){if(!this.isSafariDesktop())return!1;var e=this.getBrowserVersion(this.userAgent(),E);return i(e,{major:11,minor:0,patch:1})}},{key:"isSafariDesktop11OrAbove",value:function(){return this.isSafariDesktop11()||this.isSafariDesktop11Above()}},{key:"canAutoplayAfterAction",value:function(){return this.isSafariDesktop11Above()||this.isChrome64OrAbove()}},{key:"isAutoplayDisabledBrowser",value:function(){return!this.getAutoplayAllowed()&&this.isAutoplayWithSoundDisabledBrowser()}},{key:"isAutoplayWithSoundDisabledBrowser",value:function(){return this.isSafariDesktop11OrAbove()||this.isMobile()||this.isChrome64OrAbove()}},{key:"needDirectUserActionToPlay",value:function(){return!this.getAutoplayAllowed()&&(this.isSafariDesktop11()||this.isMobile())}},{key:"setAutoplayAllowed",value:function(e){P=e}},{key:"getAutoplayAllowed",value:function(){return P}},{key:"isFirefox",value:function(){return u.test(this.userAgent())}},{key:"isChromeIos",value:function(){return d.test(navigator.userAgent)}},{key:"parseFlashVersion",value:function(e){return e=e.match(f),e.slice(0,3).join(".")}},{key:"userAgent",value:function(){return navigator.userAgent}},{key:"getBrowserVersion",value:function(e,t){var n=t.exec(e);return n?{major:parseInt(n[1],10)||0,minor:parseInt(n[3],10)||0,patch:parseInt(n[5],10)||0}:{major:0,minor:0,patch:0}}},{key:"isAdOrContentPlaying",value:function(e){var t=e.AdController;return t&&t.adUnit?t.isPlaying():!e.paused()}}]),e}();n.default=w},{}],73:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=/([^?=&]+)(=([^&]*))?/g,a=function(){function e(){r(this,e)}return i(e,null,[{key:"toQueryString",value:function(e){return Object.keys(e).reduce(function(t,n,r){return""+t+(r>0?"&":"")+encodeURIComponent(n)+"="+encodeURIComponent(e[n])},"")}},{key:"parseQueryString",value:function(e){if(!e||"string"!=typeof e)return{};var t={};return e.replace(o,function(e,n,r,i){var o=decodeURIComponent(n),a=void 0!==i?decodeURIComponent(i).replace("+"," "):void 0;return t.hasOwnProperty(o)?Array.isArray(t[o])?t[o].push(a):void(t[o]=[t[o],a]):void(t[o]=a)}),Object.freeze(t)}}]),e}();n.default=a},{}],74:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("./event-target"),d=r(u),c=e("log"),p=r(c),f=new p.default("ResizeMonitor"),h=/\d+/g,v="data-breakpoints",y=["onResize","monitor"],_="resize",m=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.el_=e,n.monitorId_=null,y.forEach(function(e){n[e]=n[e].bind(n)}),n.width=null,n.wBreakpoints_=[],n.setupBreakpoints(),n.monitor(),n}return a(t,e),s(t,[{key:"setupBreakpoints",value:function(){var e=this.el_.getAttribute(v);if(e){var t=e.match(h)||[];t=t.map(function(e){return parseFloat(e)}),this.wBreakpoints_=this.wBreakpoints_.concat(t).sort()}}},{key:"getMinWidth",value:function(e){for(var t=this.wBreakpoints_.length-1;0<=t;t--){var n=this.wBreakpoints_[t];if(e>=n)return n}return 0}},{key:"monitor",value:function(){var e=this;this.monitorId_=window.requestAnimationFrame(function(){var t=e.el_.clientWidth;if(e.width!==t){var n=e.getMinWidth(t);e.width=t,e.el_.setAttribute("min-width",n),e.onResize()}e.monitor()})}},{key:"stopMonitoring",value:function(){window.cancelAnimationFrame(this.monitorId_),this.monitorId_=null}},{key:"onResize",value:function(){try{var e=this.el_.getBoundingClientRect();this.trigger(_,{dimensions:e})}catch(e){f.error("Unable to calculate element bounds")}}},{key:"dispose",value:function(){this.el_=this.width=this.wBreakpoints_=null,this.stopMonitoring(),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(d.default);n.default=m},{"./event-target":68,log:"log"}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=/^\w+:\/\/\w+/i,i={getURLExtension:function(e){if(!e)return"";e=e.split("?")[0].split("#")[0];var t=e.substr(1+e.lastIndexOf("/")),n=t.split(".").pop();return n==t?"":n},getDomain:function(e){if(!e)return"";if(URL&&e.match(r)){var t=new URL(e);return t.hostname}return e.indexOf("//")==-1?"":e.split("/")[2].split(":")[0]},getProtocol:function(e){if(!e)return null;if(URL&&e.match(r)){var t=new URL(e);return t.protocol}return e.indexOf("//")<1?null:e.split("/")[0]}};n.default=i},{}],76:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return Object.prototype.toString.call(e)}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("lodash.clonedeep"),u=r(l),d="object",c="[object Object]",p="[object Array]",f="[object String]",h="[object Date]",v=function(){function e(){i(this,e)}return s(e,null,[{key:"isArray",value:function(e){return o(e)===p}},{key:"isObject",value:function(e){return e&&("undefined"==typeof e?"undefined":a(e))===d}},{key:"isPlainObject",value:function(e){return o(e)===c}},{key:"isString",value:function(e){return o(e)===f}},{key:"isDate",value:function(e){return o(e)===h}},{key:"isEmptyObject",value:function(t){if(!e.isPlainObject(t))return!0;for(var n in t)if(t.hasOwnProperty(n))return!1;return!0}},{key:"deepMerge",value:function(e,t){if(!e)return JSON.parse(JSON.stringify(t));if(!t)return JSON.parse(JSON.stringify(e));var n=(0,u.default)(e);e.streams&&(n.streams=e.streams);for(var r in t)t.hasOwnProperty(r)&&(r in n&&"object"===a(n[r])?n[r]=this.deepMerge(n[r],t[r]):n[r]=t[r]);return n}},{key:"filterEmptyValues",value:function(t){return e.isPlainObject(t)?Object.keys(t).reduce(function(n,r){var i=t[r];return e.isString(i)?""!==i.trim()&&(n[r]=i):"boolean"==typeof i||"number"==typeof i?n[r]=i:i&&(n[r]=i),n},{}):t}}]),e}();n.default=v},{"lodash.clonedeep":4}],77:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./css-helpers"),s=r(a),l=e("../utils/projector-utils"),u=r(l),d=e("log"),c=r(d),p=e("error-report"),f=r(p),h=new c.default("VideoTagGenerator"),v="metadata",y=function(){function e(t){if(i(this,e),!t)return void f.default.recordGenericError(h,"VideoTagGenerator requires a ProjectorSettings instance");var n=t.dataSetup,r=n.streams,o=n.width,a=n.height;this.dataSetup=n,this.options=t.userOptions,this.isMiniPlayer=u.default.isMiniPlayer(n),this.autoplay=this._shouldAutoPlay(),this.height=a,this.playerId=e.getUniqueVideoTagId(n),this.preload=this.options.preload||v,this.streams=r,this.width=o,this.forcePosterMobile=n.forcePosterMobile,this.poster=n.posterUrl,this.autoplay||(t.dataSetup.autoplay=!1)}return o(e,[{key:"generateVideoTag",value:function(){var t=document.createElement("video");t.setAttribute("id",this.playerId),t.setAttribute("preload",this.preload);var n=["video-js","vjs-default-skin"];return this.isMiniPlayer?n.push("bvp-mini-player"):u.default.forcedToPlayFlash(this.dataSetup)||n.push("vjs-show-big-play-button-on-pause"),s.default.addClassList(t,n),this.width&&this.height?s.default.css(t,{width:this.width,height:this.height}):(t.setAttribute("fluid",!0),s.default.addClass(t,"vjs-16-9")),this.autoplay&&t.setAttribute("autoplay",!0),u.default.isMobile()&&(t.setAttribute("playsinline",!0),this.forcePosterMobile&&t.setAttribute("poster",this.poster)),e.setVideoSources(t,this.streams),t}},{key:"_shouldAutoPlay",value:function(){var e=this.options.autoplay,t=u.default.isContentAllowedToAutoplay(this.dataSetup),n="disabled"!==this.options.module_ad_player&&this.dataSetup.hasPreroll;return Boolean(e&&!n&&(this.dataSetup.muted||t))}}],[{key:"getUniqueVideoTagId",value:function(e){var t=String(e.htmlChildId||e.id);return"bvp-"+t.substr(0,6)+"-"+Math.floor(1e6*Math.random())}},{key:"setVideoSources",value:function(e,t){var n=document.createElement("source");t.forEach(function(t){var r=n.cloneNode(!1);r.setAttribute("src",t.url),r.setAttribute("type",t.type),t.percent&&r.setAttribute("data-percent",t.percent),e.appendChild(r)})}}]),e}();n.default=y},{"../utils/projector-utils":72,"./css-helpers":65,"error-report":"error-report",log:"log"}],78:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("../events/player-events"),u=r(l),d=e("../events/ad-events"),c=r(d),p=e("../utils/projector-utils"),f=r(p),h=new s.default("AutoplayBrowsersPlugin"),v=1,y=["_onPlay","_onPause","_onVolumeChange","_onAdTimeUpdate","_onContentTimeUpdate"],_=function(){function e(t){var n=this;i(this,e),this._player=t,y.forEach(function(e){n[e]=n[e].bind(n)}),t.on(u.default.BVP_VOLUME_CHANGE,this._onVolumeChange),t.on(c.default.AD_PLAYBACK_PROGRESS_UPDATE,this._onAdTimeUpdate),t.on(u.default.TIMEUPDATE,this._onContentTimeUpdate),t.on([u.default.PLAY,c.default.AD_STARTED,c.default.AD_RESUMED],this._onPlay),t.on([u.default.PAUSE,c.default.AD_PAUSED],this._onPause),this._wasLastTickPlayingWithSound=!1,this._lastPlayingWithSoundTime=0}return o(e,[{key:"removeEventListeners",value:function(){h.debug("removing event listeners"),this._player.off(u.default.BVP_VOLUME_CHANGE,this._onVolumeChange),this._player.off(c.default.AD_PLAYBACK_PROGRESS_UPDATE,this._onAdTimeUpdate),this._player.off(u.default.TIMEUPDATE,this._onContentTimeUpdate),this._player.off([u.default.PLAY,c.default.AD_STARTED,c.default.AD_RESUMED],this._onPlay),this._player.off([u.default.PAUSE,c.default.AD_PAUSED],this._onPause)}},{key:"_onPlay",value:function(){this._isPlaying=!0}},{key:"_onPause",value:function(){this._wasLastTickPlayingWithSound=!1,this._isPlaying=!1}},{key:"_onVolumeChange",value:function(e){var t=e.data,n=t.volume,r=t.muted;this._isMuted=r||0===n}},{key:"_onAdTimeUpdate",value:function(e){var t=e.data.elapsedTime;this._handleTimeUpdate(t)}},{key:"_onContentTimeUpdate",value:function(){this._handleTimeUpdate(this._player.currentTime())}},{key:"_handleTimeUpdate",value:function(e){var t=!this._isMuted&&this._isPlaying;this._wasLastTickPlayingWithSound?t?e-this._lastPlayingWithSoundTime>=v&&(h.info("Setting autoplayAllowed flag to true"),f.default.setAutoplayAllowed(!0),this.removeEventListeners()):(this._wasLastTickPlayingWithSound=!1,this._lastPlayingWithSoundTime=0):t&&(this._wasLastTickPlayingWithSound=!0,this._lastPlayingWithSoundTime=e)}}],[{key:"init",value:function(){var t=this,n=t.options_,r=n.metadata.player_type;return n.useAutoplayBrowsersPlugin&&f.default.canAutoplayAfterAction()&&"mini"!==r?new e(t):void h.info("plugin disabled")}}]),e}();videojs.plugin("AutoplayBrowsersPlugin",_.init),n.default=_},{"../events/ad-events":16,"../events/player-events":17,"../utils/projector-utils":72,log:"log"}],79:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("../components/chromecast/BloombergChromeCastButton"),u=r(l),d=new s.default("ChromeCastPlugin"),c=function(){function e(){i(this,e)}return o(e,null,[{key:"init",value:function(){var e=this,t=e.options_,n=t.metadata.player_type;return t.live&&"standard"===n&&t.useChromeCastPlugin?void videojs.registerComponent("BloombergChromeCastButton",u.default):void d.info("plugin disabled")}}]),e}();videojs.plugin("ChromeCastPlugin",c.init),n.default=c},{"../components/chromecast/BloombergChromeCastButton":11,log:"log"}],80:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("../utils/projector-utils"),u=r(l),d=e("../components/muted-overlay/MutedOverlayComponent"),c=r(d),p=new s.default("MutedOverlayPlugin"),f=function(){function e(){i(this,e)}return o(e,null,[{key:"init",value:function(){var e=this;return u.default.isMutedOverlayEnabled(e.options_)?(p.info("plugin initialized"),videojs.registerComponent("MutedOverlayComponent",c.default),void(e.options_.MutedOverlayComponent=e.options_.MutedOverlayComponent||!0)):void p.info("plugin disabled")}}]),e}();videojs.plugin("MutedOverlayPlugin",f.init),n.default=f},{"../components/muted-overlay/MutedOverlayComponent":13,"../utils/projector-utils":72,log:"log"}],81:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("../events/player-events"),u=r(l),d=e("../utils/projector-utils"),c=r(d),p=new s.default("MutedOverlayPlugin"),f=["_onRegUIPopUpShown","_onRegUIPopUpClosed","_onDispose"],h=function(){function e(t){var n=this;i(this,e),this._player=t,this._playerPausedByRegUIPopUp=!1,f.forEach(function(e){n[e]=n[e].bind(n)}),window.addEventListener(u.default.REG_UI_POP_UP_SHOWN,this._onRegUIPopUpShown),window.addEventListener(u.default.REG_UI_POP_UP_CLOSED,this._onRegUIPopUpClosed),this._player.on(u.default.DISPOSE,this._onDispose)}return o(e,[{key:"_onRegUIPopUpShown",value:function(){c.default.isAdOrContentPlaying(this._player)&&(this._playerPausedByRegUIPopUp=!0,this._player.pause(),this._player.trigger(u.default.REG_UI_POP_UP_SHOWN))}},{key:"_onRegUIPopUpClosed",value:function(){!c.default.isAdOrContentPlaying(this._player)&&this._isPlayerPausedByRegUIPopUp()&&(this._playerPausedByRegUIPopUp=!1,this._player.trigger(u.default.REG_UI_POP_UP_CLOSED))}},{key:"_onDispose",value:function(){window.removeEventListener(u.default.REG_UI_POP_UP_SHOWN,this._onRegUIPopUpShown),window.removeEventListener(u.default.REG_UI_POP_UP_CLOSED,this._onRegUIPopUpClosed)}},{key:"_isPlayerPausedByRegUIPopUp",value:function(){return this._playerPausedByRegUIPopUp}}],[{key:"init",value:function(){var t=this,n=t.options_;return n.useRegUIPopUpPlugin?new e(t):void p.info("Reg UI pop-up plugin is disabled!")}}]),e}();videojs.plugin("RegUIPopUpPlugin",h.init),n.default=h},{"../events/player-events":17,"../utils/projector-utils":72,log:"log"}],82:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=e.el_;t.setAttribute("data-breakpoints","320 640 800");var n=new d.default(t);n.setEventParent(e)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("log"),l=r(s),u=e("../utils/resize-monitor"),d=r(u),c=new l.default("ResizePlayerPlugin"),p=function(){function e(){i(this,e)}return a(e,null,[{key:"init",value:function(){var e=this;return e.options_.use_resize_player?(c.info("monitoring player size"),void o(e)):void c.info("plugin disabled")}}]),e}();videojs.plugin("ResizePlayerPlugin",p.init),n.default=p},{"../utils/resize-monitor":74,log:"log"}],83:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("../events/player-events"),u=r(l),d=e("../events/ad-events"),c=r(d),p=e("bvp-constant"),f=e("resources"),h=r(f),v=new s.default("VideoMidrollPlugin"),y=6e4,_="bvp-progress-bar-marker",m=".vjs-progress-holder",g=60,b=function(){function e(t){i(this,e),this._player=t,this._lastAdTime=new Date(0),this._lastAdCuePointIndex=-1,this._playedAdCuePoints={},t.ready(this.initialize.bind(this))}return o(e,[{key:"initialize",value:function(){var e=this._player;p.FLASH_TECH_NAME!==e.techName_&&(this._adCuePoints=e.options_.metadata.adCuePoints||[],0!==this._adCuePoints.length&&(e.on(u.default.TIMEUPDATE,this._onTimeUpdate.bind(this)),e.on([c.default.ALL_ADS_COMPLETED,u.default.ADS_TIMEOUT_ERROR],this._setLastAdTime.bind(this)),e.on(u.default.LOADED_METADATA,this._updateProgressBarMarker.bind(this))))}},{key:"_onTimeUpdate",value:function(){if(!this._player.scrubbing()){var e=this._getCurrentAdCuePointIndex();e!==this._lastAdCuePointIndex&&(v.info("Setting last cue point index to: "+e),this._lastAdCuePointIndex=e,this._passedExemptionPeriod()&&(this._playedAdCuePoints[e]||(v.info("Triggering cue point ad @ "+this._player.currentTime()),this._player.tech_.trigger({type:u.default.HLS_CUE_OUT,data:{duration:g}}),this._playedAdCuePoints[e]=!0,this._updateProgressBarMarker())))}}},{key:"_passedExemptionPeriod",value:function(){return new Date-this._lastAdTime>=y}},{key:"_getCurrentAdCuePointIndex",value:function(){for(var e=this._player.currentTime(),t=this._adCuePoints.length-1;t>=0;t--)if(e>=this._adCuePoints[t])return t;return-1}},{key:"_setLastAdTime",value:function(){this._lastAdTime=new Date,v.info("Set last Ad time to: "+this._lastAdTime)}},{key:"_updateProgressBarMarker",value:function(){var e=this,t=this._player,n=t.el(),r=n.querySelector(m);if(!r)return void v.error("Can't find "+m+" element");var i=t.duration();if(!i)return void v.error("Can't get player duration");for(var o=n.querySelectorAll("."+_),a=0;a<o.length;a++){var s=o[a];s.parentNode.removeChild(s)}var l=this._adCuePoints.filter(function(t,n){return!e._playedAdCuePoints[n]});l.forEach(function(e){var t=e/i*100,n=videojs.createEl("div",{},{class:_,style:"left: "+t+"%;"});r.appendChild(n)})}}],[{key:"init",value:function(){var t=this,n=t.options_;return"true"!==h.default.VOD_MIDROLL_ENABLED?void v.info("plugin disabled for this environment"):n.useVideoMidrollPlugin?n.live?void v.info("plugin disabled for live stream."):(v.info("plugin initialized"),new e(t)):void v.info("plugin disabled")}}]),e}();videojs.plugin("VideoMidrollPlugin",b.init),n.default=b},{"../events/ad-events":16,"../events/player-events":17,"bvp-constant":"bvp-constant",log:"log",resources:"resources"}],84:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("../events/player-events"),u=r(l),d=e("../events/ad-events"),c=r(d),p=new s.default("VideoWatchedTimeUpdate"),f=["_startTimeCounter","_stopTimeCounter","_onTimeUpdate"],h=10,v=[u.default.PLAY,c.default.ALL_ADS_COMPLETED],y=[c.default.AD_STARTED,u.default.PAUSE,u.default.ENDED,u.default.WATCHDOG_RELOAD,u.default.HLS_BRIDGE_FATAL_ERROR],_=function(){function e(t){var n=this;i(this,e),this._player=t,this._lastBroadcastedValue=0,this._lastBroadcastedDateTime=null,this._isTrackingVideoWatchTime=!1,f.forEach(function(e){n[e]=n[e].bind(n)}),t.on(y,this._stopTimeCounter).on(v,this._startTimeCounter).on(u.default.TIMEUPDATE,this._onTimeUpdate)}return o(e,[{key:"_startTimeCounter",value:function(e){this._isTrackingVideoWatchTime||(p.info("Time tracking started by event: ",e.type),this._isTrackingVideoWatchTime=!0,this._lastBroadcastedDateTime=new Date)}},{key:"_stopTimeCounter",value:function(e){this._isTrackingVideoWatchTime&&(p.info("Time tracking stopped by event: ",e.type),this._broadcastUpdate(this._getDeltaVideoWatchedTime()),this._isTrackingVideoWatchTime=!1)}},{key:"_onTimeUpdate",value:function(){if(this._isTrackingVideoWatchTime){var e=this._getDeltaVideoWatchedTime();e>=h&&this._broadcastUpdate(e)}}},{key:"_getDeltaVideoWatchedTime",value:function(){return parseFloat((new Date-this._lastBroadcastedDateTime)/1e3)}},{key:"_broadcastUpdate",value:function(e){var t=this._lastBroadcastedValue+e;this._player.trigger({type:"videoWatchedTimeUpdate",data:{timeWatchedSinceLastUpdate:e,totalTimeWatched:t}}),p.info("Video watch time boradcast. Total time watched: "+t+", Time watched since last update: "+e),this._lastBroadcastedValue=t,this._lastBroadcastedDateTime=new Date}}],[{key:"init",value:function(){return new e(this)}}]),e}();videojs.plugin("VideoWatchedTimeUpdatePlugin",_.init),n.default=_},{"../events/ad-events":16,"../events/player-events":17,log:"log"}],85:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../../utils/projector-utils"),s=r(a),l=e("./videojs-vod-captions-helper"),u=r(l),d=e("log"),c=r(d),p=new c.default("ClosedCaptionsPlugin"),f=function(){function e(){i(this,e)}return o(e,null,[{key:"isEnabled",value:function(e){return"true"===String(e.options_.use_captions)}},{key:"shouldParseVodCaptions",value:function(e){return!e.options_.metadata.live&&!s.default.isMobile();
}},{key:"init",value:function(){var t=this;return e.isEnabled(t)?void(e.shouldParseVodCaptions(t)&&u.default.parse(t)):void p.info("plugin disabled")}}]),e}();videojs.plugin("ClosedCaptionsPlugin",f.init),n.default=f},{"../../utils/projector-utils":72,"./videojs-vod-captions-helper":86,log:"log"}],86:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../../utils/datetime-utils"),s=r(a),l=e("../../events/player-events"),u=r(l),d=e("log"),c=r(d),p=e("error-report"),f=r(p),h=new c.default("VodCaptionsHelper"),v=/<br.*?>\s*/g,y=window.VTTCue||window.TextTrackCue,_=function(){function e(){i(this,e)}return o(e,null,[{key:"onMetadataLoad",value:function(t){var n=e.getDfxpUrlFromOptions(t.options_);n&&fetch(n).then(e.handleLoadDfxpResponse.bind(this,n)).then(e.parseDfxpResponse.bind(this,t)).catch(function(e){h.warn("Fetching DFXP with url "+n+" failed",e)})}},{key:"handleLoadDfxpResponse",value:function(e,t){return 200!=t.status?void f.default.recordLoadError(h,e,"Fetching DFXP with url "+e+" failed with status "+t.status):t.text()}},{key:"parseDfxpResponse",value:function(t,n){var r=e.extractCuesFrom(n);if(r&&0!==r.length)for(var i=t.addTextTrack("captions","English","en"),o=0,a=r.length;o<a;o++){var l=r[o],u=s.default.convertToSeconds(l["@begin"]),d=s.default.convertToSeconds(l["@end"]),c=new y(u,d,l.Text);i.addCue(c)}}},{key:"getDfxpUrlFromOptions",value:function(e){return!e.metadata||!e.metadata.captions||!e.metadata.captions.length>0?null:e.metadata.captions[0].url}},{key:"extractCuesFrom",value:function(e){e=e.replace(v,"\n");try{var t=window.xml.xmlToJSON(e);return t.tt.body.div.p}catch(e){return f.default.recordGenericError(h,"Unable to parse dfxp file with error:",e),[]}}},{key:"parse",value:function(t){t.on(u.default.LOADED_METADATA,e.onMetadataLoad.bind(this,t))}}]),e}();n.default=_},{"../../events/player-events":17,"../../utils/datetime-utils":66,"error-report":"error-report",log:"log"}],87:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("bvp-constant"),s=e("./videojs-hls-bridge"),l=r(s),u=e("log"),d=r(u),c=e("error-report"),p=r(c),f=e("array-find-index"),h=r(f),v=new d.default("GeneralHlsFallbackStrategy"),y=2,_="error_max_retries",m=function(){function e(t){i(this,e),this.player=t,this.streamCycleRetries=0}return o(e,[{key:"generateStreamList",value:function(){var e=l.default.getSourceType(),t=this.player.options_.filteredStreams||[],n=this.player.options_.sources.filter(function(n){return n.type===e&&t.indexOf(n)===-1}),r=this.player.currentSrc(),i=(0,h.default)(n,function(e){return e.src===r});return i<0?(p.default.recordHLSError(v,"Could not find current source url "+r+" in original streams",n),Promise.reject(a.CURRENT_STREAM_NOT_FOUND)):(t.push(n[i]),n.splice(i,1),0==n.length&&(v.warn("Ran out of original streams. Recycling filteredStreams"),n=t,t=[],this.streamCycleRetries++),this.streamCycleRetries>=y?(p.default.recordHLSError(v,"Giving up on loading any manifest after "+this.streamCycleRetries+" attempts"),Promise.reject(_)):(this.player.options_.filteredStreams=t,Promise.resolve(n)))}},{key:"dispose",value:function(){}}]),e}();n.default=m},{"./videojs-hls-bridge":89,"array-find-index":1,"bvp-constant":"bvp-constant","error-report":"error-report",log:"log"}],88:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return e.map(function(e){return{src:e.url,type:e.type}})}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("triton-stream-provider"),l=r(s),u=e("retry-controller"),d=r(u),c=e("bvp-constant"),p=e("../../events/player-events"),f=r(p),h=e("log"),v=r(h),y=e("error-report"),_=r(y),m=new v.default("TritonHlsFallbackStrategy"),g=6e4,b="error_fetching_new_streams",E=["_fetchNewStreamList","_onTimeUpdate"],A=function(){function e(t){var n=this;i(this,e),this.previousTime=0,this.player=t,E.forEach(function(e){return n[e]=n[e].bind(n)}),this.retryController=new d.default({name:"Triton Recover",tryCallback:this._fetchNewStreamList,maxRetryDelay:g}),this.player.on(f.default.TIMEUPDATE,this._onTimeUpdate)}return a(e,[{key:"dispose",value:function(){this.player.off(f.default.TIMEUPDATE,this._onTimeUpdate),this.retryController.dispose(),this.retryController=null}},{key:"generateStreamList",value:function(){var e=this;return this._getRemainingStreams().then(function(t){return t.length>0?o(t):e.retryController.retry()})}},{key:"_onTimeUpdate",value:function(){var e=this.player.currentTime();this.previousTime!==e&&(this.previousTime=e,this.retryController.resetRetryDelay())}},{key:"_fetchNewStreamList",value:function(){m.debug("Fetching new stream list from provision API.");var e=this.player.options_,t=e.original_user_options.htmlChildId,n=e.metadata.streamProviderConfig;return l.default.fetchStreamInfo(n,t).then(function(t){return e.streams=t,e.filteredStreams=[],o(t)},function(){return Promise.reject(b)})}},{key:"_getRemainingStreams",value:function(){var e=this.player.options_,t=e.filteredStreams=e.filteredStreams||[],n=this.player.currentSrc(),r=e.streams,i=r.some(function(e){return e.url===n});if(!i)return _.default.recordHLSError(m,"Could not find current source url "+n+" in original streams",r),Promise.reject(c.CURRENT_STREAM_NOT_FOUND);t.push(n);var o=r.filter(function(e){return t.indexOf(e.url)<0});return Promise.resolve(o)}}]),e}();n.default=A},{"../../events/player-events":17,"bvp-constant":"bvp-constant","error-report":"error-report",log:"log","retry-controller":"retry-controller","triton-stream-provider":"triton-stream-provider"}],89:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("./videojs-hls-tag-parser"),d=r(u),c=e("../../events/player-events"),p=r(c),f=e("./videojs-hls-cue-handler"),h=r(f),v=e("../../events/ad-events"),y=r(v),_=e("log"),m=r(_),g=e("bvp-constant"),b=e("lodash.debounce"),E=r(b),A=videojs.getComponent("Component"),P=videojs.getTech("Tech"),w=videojs.getComponent("Html5"),S=g.MPEG_STREAM_TYPE,k=1,C=1,O=100,T=new m.default("HlsjsBridge"),j=["onMediaAttached","onManifestParsed","onLevelLoaded","onFragLoaded","onFragChanged","onError","createTextTrack","startLoad"],R={cueHandler:h.default},L=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.numNetworkErrorRetries=0,n.numMediaErrorRetries=0,n.lastSource="",n.lastBitrateReported=null,n.hasLoadedSource=!1,n.el_.tech=n,j.forEach(function(e){n[e]=n[e].bind(n)});var r=Object.assign({},R,e.hlsConfig);n.hls_=new Hls(r),n.hls_.on(Hls.Events.MEDIA_ATTACHED,n.onMediaAttached),n.hls_.on(Hls.Events.MANIFEST_PARSED,n.onManifestParsed),n.hls_.on(Hls.Events.LEVEL_LOADED,n.onLevelLoaded),n.hls_.on(Hls.Events.FRAG_CHANGED,n.onFragChanged),n.hls_.on(Hls.Events.FRAG_LOADED,n.onFragLoaded),n.hls_.on(Hls.Events.ERROR,n.onError),n.hls_.attachMedia(n.el_);var a=n.createTextTrack;return n.hls_.coreComponents&&n.hls_.coreComponents.forEach(function(e){e.createTextTrack&&(e.createTextTrack=a)}),n.src(n.options_.source.src),e.__disableDebounceForTesting||(n.dispatchHlsBridgeError=(0,E.default)(n.dispatchFatalHlsBridgeError,O)),n.on(y.default.AD_ALMOST_FINISHED,n.startLoad),n}return a(t,e),l(t,null,[{key:"isSupported",value:function(){return Hls.isSupported()}},{key:"canPlaySource",value:function(e){return!(!e||e.type!==S)&&Hls.isSupported()}},{key:"getSourceType",value:function(){return S}}]),l(t,[{key:"createTextTrack",value:function(e,t,n){return this.addTextTrack(e,"english",n)}},{key:"onMediaAttached",value:function(){this.triggerReady()}},{key:"onLevelLoaded",value:function(e,t){this.duration=t.details.live?function(){return 1/0}:w.prototype.duration,this.live=t.details.live}},{key:"onManifestParsed",value:function(){this.player_.options_.autoplay&&this.player_.play()}},{key:"onFragLoaded",value:function(e,t){var n=t.frag,r=d.default.extractCueFrom(n);r&&r.event===p.default.HLS_CUE_OUT&&this.trigger({type:p.default.HLS_CUE_OUT_LOADED,data:r})}},{key:"onFragChanged",value:function(e,t){var n=t.frag,r=d.default.extractCueFrom(n);if(r&&this.trigger({type:r.event,data:r}),this.hls_&&this.hls_.levels){var i=parseInt(this.hls_.levels[n.level].bitrate,10);i!==this.lastBitrateReported&&(this.trigger({type:p.default.BITRATE_CHANGE,newBitrate:i}),this.lastBitrateReported=i)}}},{key:"currentSrc",value:function(){return this.hls_?this.hls_.url:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"currentSrc",this).call(this)}},{key:"setSrc",value:function(e){this.lastSource=e,this.numNetworkErrorRetries=0,this.numMediaErrorRetries=0,this.hls_&&this.hls_.loadSource(e)}},{key:"pause",value:function(){this._removeAutoplayOnManifestParsedHandler(),this.live&&this.stopLoad(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"pause",this).call(this)}},{key:"stopLoad",value:function(){this.hasLoadedSource=!1,this.hls_.stopLoad()}},{key:"play",value:function(){this.startLoad(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"play",this).call(this)}},{key:"startLoad",value:function(){this.hasLoadedSource||(this.hasLoadedSource=!0,this.hls_.startLoad())}},{key:"onError",value:function(e,t){t.fatal&&this.handleFatalError(t),T.warn(t.type+" - "+t.details+". Fatal: "+t.fatal),this.broadcastHlsError(t)}},{key:"handleFatalError",value:function(e){switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:this.handleNetworkError();break;case Hls.ErrorTypes.MEDIA_ERROR:this.handleMediaError();break;default:this.dispatchFatalHlsBridgeError()}}},{key:"broadcastHlsError",value:function(e){this.trigger({type:p.default.HLS_BRIDGE_ERROR,data:e})}},{key:"handleNetworkError",value:function(){return this.numNetworkErrorRetries<k?(T.warn("Network error: retrying to load same manifest"),this.hls_.loadSource(this.lastSource),void this.numNetworkErrorRetries++):void this.dispatchFatalHlsBridgeError()}},{key:"handleMediaError",value:function(){return this.numMediaErrorRetries<C?(T.warn("Media error: attempting to get hls to recover from fatal media error"),this.hls_.recoverMediaError(),void this.numMediaErrorRetries++):void this.dispatchFatalHlsBridgeError()}},{key:"dispatchFatalHlsBridgeError",value:function(){this.trigger(p.default.HLS_BRIDGE_FATAL_ERROR)}},{key:"dispose",value:function(){this._removeAutoplayOnManifestParsedHandler(),this.hls_.off(Hls.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls_.off(Hls.Events.LEVEL_LOADED,this.onLevelLoaded),this.hls_.off(Hls.Events.ERROR,this.onError),this.hls_.destroy(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_removeAutoplayOnManifestParsedHandler",value:function(){this.hls_.off(Hls.Events.MANIFEST_PARSED,this.onManifestParsed)}}]),t}(w);A.registerComponent("Hlsjs",L),P.registerTech("Hlsjs",L),videojs.options.techOrder.push("Hlsjs"),n.default=L},{"../../events/ad-events":16,"../../events/player-events":17,"./videojs-hls-cue-handler":90,"./videojs-hls-tag-parser":91,"bvp-constant":"bvp-constant","lodash.debounce":5,log:"log"}],90:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){if(e&&e.cues&&e.cues.length>=d){var t=e.cues.length-d+1;e.cues_.splice(0,t),e.cues.setCues_(e.cues_)}}function a(){return window.vttjs?window.vttjs.VTTCue:window.VTTCue||window.TextTrackCue}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../../utils/projector-utils"),u=r(l),d=1e3,c=function(){function e(){i(this,e)}return s(e,null,[{key:"newCue",value:function(e,t,n,r){o(e);for(var i=a(),s=0;s<r.rows.length;s++){var l=r.rows[s],d=!0,c=0,p="";if(!l.isEmpty()){for(var f=0;f<l.chars.length;f++)l.chars[f].uchar.match(/\s/)&&d?c++:(p+=l.chars[f].uchar,d=!1);l.cueStartTime=t;var h=new i(t,n,p.trim());c>=16?c--:c++;var v=u.default.isFirefox();v?h.line=s+1:h.line=s>7?s-2:s+1,h.align="left",h.positionAlign="left",h.position=Math.max(0,Math.min(100,100*(c/32)+(v?50:0))),e.addCue(h)}}}}]),e}();n.default=c},{"../../utils/projector-utils":72}],91:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.split(",");return t.reduce(function(e,t){var n=t.split("="),r=o(n,2),i=r[0],a=r[1];return e[i.toLowerCase()]=a,e},{})}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=e("../../events/player-events"),s=r(a),l="EXT-X-CUE-OUT",u="EXT-X-CUE-IN",d={extractCueFrom:function(e){var t=e.tagList;if(!t)return null;for(var n=0;n<t.length;n++){var r=t[n],o=r[0]||"",a=r[1]||"";switch(o){case l:return Object.assign({event:s.default.HLS_CUE_OUT,type:l},i(a));case u:return{event:s.default.HLS_CUE_IN,type:u}}}return null}};n.default=d},{"../../events/player-events":17}],92:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=e.tech_;return t&&t.hls_?t.hls_:null}function a(e,t){s(e),l(e,t)}function s(e){e.error(S)}function l(e,t){e.trigger({type:y.default.FATAL_ERROR,error:t})}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=e("./GeneralHlsFallbackStrategy"),c=r(d),p=e("./TritonHlsFallbackStrategy"),f=r(p),h=e("bvp-constant"),v=e("../../events/player-events"),y=r(v),_=e("log"),m=r(_),g=e("error-report"),b=r(g),E=new m.default("RecoverHlsError"),A=["onPlayerReady","onHlsBridgeFatalError","onWatchdogReload"],P="error_no_hls_tech",w="error_no_hls_stream",S="The Media Player Encountered an Error, Please Reload the Web Page and Try Again",k=function(){function e(t,n){var r=this;i(this,e),this.recoveryInProgress=!1,this.player=t,this.fallbackStrategy=n,A.forEach(function(e){r[e]=r[e].bind(r)}),this.player.on(y.default.READY,this.onPlayerReady),this.player.on(y.default.WATCHDOG_RELOAD,this.onWatchdogReload)}return u(e,[{key:"onPlayerReady",value:function(){this.player.tech_.on(y.default.HLS_BRIDGE_FATAL_ERROR,this.onHlsBridgeFatalError)}},{key:"onWatchdogReload",value:function(){E.info("onWatchdogReload"),this.recoverStream()}},{key:"onHlsBridgeFatalError",value:function(){E.info("onHlsBridgeFatalError"),this.recoverStream()}},{key:"recoverStream",value:function(){var e=this,t=o(this.player);return t?this.recoveryInProgress?void E.debug("Recovery in progress. Ignoring."):(this.recoveryInProgress=!0,this.fallbackStrategy.generateStreamList().then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.recoveryInProgress=!1,n.length<=0)return Promise.reject(w);E.info("Attempting to recover streams",n);var r=!e.player.paused();t.stopLoad(),e.player.src(n),t.recoverMediaError(),t.startLoad(),r&&e.player.play()}).catch(function(t){e.recoveryInProgress=!1,a(e.player,t)})):(a(this.player,P),void b.default.recordHLSError(E,"Cannot recover from error. Can't find Hls tech on the player."))}}],[{key:"init",value:function(){var t=this;if(!t.options_.use_recover_hls)return void E.info("plugin disabled");var n=t.options_.metadata,r=void 0===n?{}:n,i=r.streamProvider===h.TRITON_PROVIDER_NAME?f.default:c.default,o=new i(t);new e(t,o),t.on(y.default.DISPOSE,function(){o.dispose()})}}]),e}();videojs.plugin("RecoverHlsError",k.init),n.default=k},{"../../events/player-events":17,"./GeneralHlsFallbackStrategy":87,"./TritonHlsFallbackStrategy":88,"bvp-constant":"bvp-constant","error-report":"error-report",log:"log"}],93:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=videojs.getComponent("Button"),u=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"buildCSSClass",value:function(){return"blvs-share-button "+s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}}]),t}(l);n.default=u},{}],94:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this;return e.options_.use_share_overlay&&o(e.options_.share_metadata)?(videojs.registerComponent("ShareOverlay",u.default),videojs.registerComponent("ShareButton",s.default),e.on(f.default.READY,function(){var t=e.getChild("ShareOverlay"),n=e.controlBar.getChild("shareButton");n.on(["click","touchstart"],function(){t.toggleOverlay.call(t),e.trigger(f.default.REQUEST_SHARE)})}),void e.on(f.default.SHARE,function(){var t=e.getChild("ShareOverlay");t.toggleOverlay()})):void y.debug("Share control disabled. use_share_overlay: "+e.options_.use_share_overlay+", metadata: ",e.options_.share_metadata)}function o(e){return!c.default.isEmptyObject(e)&&!(!e.bitly_url&&!e.canonical_url)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./videojs-share-button"),s=r(a),l=e("./videojs-share-overlay"),u=r(l),d=e("../../utils/utils"),c=r(d),p=e("../../events/player-events"),f=r(p),h=e("log"),v=r(h),y=new v.default("ShareControl");videojs.plugin("ShareControl",i),n.default=i},{"../../events/player-events":17,"../../utils/utils":76,"./videojs-share-button":93,"./videojs-share-overlay":95,log:"log"}],95:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return'<iframe src="'+e+"/iframe?id="+t+'" allowscriptaccess="always" frameborder="0"></iframe>'}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.bitly_url||e.canonical_url}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=e("../../utils/css-helpers"),p=r(c),f=e("../../events/player-events"),h=r(f),v=videojs.getComponent("Component"),y="blvs-share-overlay__line",_="blvs-share-overlay__close",m="blvs-share-overlay__title",g="blvs-share-overlay__share-link",b="vjs-hidden",E=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"createEl",value:function(){var e=this,t=document.createElement("div"),n=document.createElement("span"),r=document.createElement("input"),i="Share",o=["blvs-share-overlay",b],a="blvs-video-embed-"+this.player_.options_.id,u="blvs-video-permalink-"+this.player_.options_.id,d=this.playerOptions.metadata.live,c=this.playerOptions.metadata.title,f=t.cloneNode(!1);d&&(o.push("blvs-share-overlay__live"),c="Bloomberg TV"),p.default.addClassList(f,o);var v=t.cloneNode(!1);p.default.addClass(v,y);var E=t.cloneNode(!1),A=n.cloneNode(!1),P=document.createTextNode("x");p.default.addClass(A,"vjs-control-text"),p.default.addClass(E,_),E.addEventListener("click",this.toggleOverlay.bind(this)),f.appendChild(E);var w=t.cloneNode(!1);p.default.addClass(w,"blvs-share-overlay__share-controls"),f.appendChild(w);var S=t.cloneNode(!1),k=document.createTextNode(i);p.default.addClass(S,m);var C=n.cloneNode(!1),O=[g,g+"-facebook"];p.default.addClassList(C,O),C.addEventListener("click",this.socialShareClickHandlerFor("facebook",c));var T=n.cloneNode(!1),j=[g,g+"-twitter"];p.default.addClassList(T,j),T.addEventListener("click",this.socialShareClickHandlerFor("twitter",c));var R=n.cloneNode(!1),L=[g,g+"-linkedin"];p.default.addClassList(R,L),R.addEventListener("click",this.socialShareClickHandlerFor("linkedin",c));var D=n.cloneNode(!1),M=[g,g+"-email"];p.default.addClassList(D,M),D.addEventListener("click",this.socialShareClickHandlerFor("email",c)),w.appendChild(S),w.appendChild(v);var U=document.createElement("hr");return p.default.addClassList(U,["blvs-share-overlay__divider","blvs-hide-on-mobile"]),w.appendChild(U),d||!function(){var n=t.cloneNode(!1);p.default.addClassList(n,[y,"blvs-hide-on-mobile"]);var i=t.cloneNode(!1),o=document.createTextNode("Embed");p.default.addClassList(i,[m,"blvs-hide-on-mobile"]),w.appendChild(i),i.appendChild(o);var d=r.cloneNode(!1);p.default.addClass(d,"blvs-share-overlay__embed-input");var c=s(e.playerOptions.serverUrl,e.playerOptions.metadata.id);d.setAttribute("id",a),d.setAttribute("type","text"),d.setAttribute("readOnly",!0),d.setAttribute("size",35),d.setAttribute("value",c),d.addEventListener("click",function(){return e.player_.trigger({type:h.default.SHARE_ACTION,data:{shareType:"embed-text",shareUrl:c}})}),w.appendChild(n),n.appendChild(d);var f=l(e.playerOptions.share_metadata);if(f){var v=t.cloneNode(!1);p.default.addClassList(v,[y,"blvs-hide-on-mobile"]);var _=t.cloneNode(!1),g=document.createTextNode("Permalink");p.default.addClassList(_,[m,"blvs-hide-on-mobile"]),w.appendChild(_),_.appendChild(g);var b=r.cloneNode(!1);p.default.addClass(b,"blvs-share-overlay__embed-input"),b.setAttribute("id",u),b.setAttribute("type","text"),b.setAttribute("readOnly",!0),b.setAttribute("size",35),b.setAttribute("value",f),b.addEventListener("click",function(){return e.player_.trigger({type:h.default.SHARE_ACTION,data:{shareType:"permalink-text",shareUrl:f}})}),w.appendChild(v),v.appendChild(b),_=null,g=null,b=null,v=null}d=null,i=null,o=null,n=null,w=null}(),A.appendChild(P),E.appendChild(A),v.appendChild(C),v.appendChild(T),v.appendChild(R),v.appendChild(D),S.appendChild(k),C=null,T=null,R=null,D=null,k=null,S=null,P=null,E=null,A=null,v=null,U=null,f}},{key:"socialShareClickHandlerFor",value:function(e,t){var n=this,r=this.shareUrlFor(e,t);return function(){r.indexOf("mailto")>-1?window.location.href=r:window.open(r,e.toUpperCase(),"width=1000,height=500"),n.player_.trigger({type:h.default.SHARE_ACTION,data:{shareType:e,shareUrl:r}})}}},{key:"shareUrlFor",value:function(e,t){var n=this.playerOptions.share_metadata||{},r=encodeURI(n.bitly_url||n.canonical_url||"");if("twitter"==e){var i=n.twitter_handle?"&via="+n.twitter_handle:"";return"http://twitter.com/share?text="+t+"&url="+r+i}if("facebook"==e)return"https://www.facebook.com/sharer/sharer.php?u="+r;if("linkedin"==e){var o=n.twitter_handle?"&source="+n.twitter_handle:"";return"http://www.linkedin.com/shareArticle?mini=true&url="+r+"&title="+t+o}return"email"==e?"mailto:?subject="+t+"&body="+t+"%0D%0A"+r:void 0}},{key:"toggleOverlay",value:function(){var e=p.default.hasClass(this.el_,b);return e?(p.default.removeClass(this.el_,b),void this.player_.pause()):(p.default.addClass(this.el_,b),this.player_.trigger(h.default.DISMISS_SHARE),void this.player_.play())}},{key:"buildCSSClass",value:function(){return"blvs-share-overlay "+d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"playerOptions",get:function(){return this.player_.options_}}]),t}(v);n.default=E},{"../../events/player-events":17,"../../utils/css-helpers":65}],96:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return e?void 0:t.createdate}function a(e,t){return e?0:t.duration}function s(e){return(e.ni_codes||[]).join(",")}function l(e,t){if(e)return t.id.replace("_","-").toLowerCase();var n=t.form_type||"short-form";return"vod-"+n}function u(e,t){return e?t.form_type:t.title}Object.defineProperty(n,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("../../events/player-events"),p=r(c),f=e("../../events/ad-events"),h=r(f),v=e("../../utils/fullscreen"),y=r(v),_=e("../../lib/google-ads/ad-utils"),m=r(_),g=e("../../utils/projector-utils"),b=r(g),E=e("load-timer"),A=r(E),P=e("log"),w=r(P),S=e("error-report"),k=r(S),C=window.BVP_GTM,O=new w.default("GoogleTagManagerPlugin"),T={INITIAL:"initial",PREROLL:"preroll",MIDROLL:"midroll",CONTENT:"content"},j={ACTIVATE:"activate",CHROME_CAST_START:"chromecast-start",CHROME_CAST_STOP:"chromecast-stop"},R={"ad-preroll":T.PREROLL,"ad-midroll":T.MIDROLL},L=["_createAdEventHandler","_createContentEventHandler","_handleInitialEvent","_handleContentFirstPlay","_handleContentPause","_handleTimeUpdate","_handleTextTrackChange","_handleCaptionsChange","_handleFullScreenChange","_handleRequestShare","_handleShareAction","_handleReplayAction","_setContinuousPlayStatus","_createEngagementHandler"],D=[10,25,50,75,90,100],M=function(){function e(t){var n=this;i(this,e),this.player=t,this.isContinuousPlay=!1,this.userOptions=t.options_.original_user_options,this.htmlChildId=this.userOptions.htmlChildId,L.forEach(function(e){n[e]=n[e].bind(n)}),t.on([h.default.AD_STARTED,p.default.PLAY],this._handleInitialEvent).on(h.default.AD_STARTED,this._createAdEventHandler(C.eventActions.PLAY)).on(h.default.AD_PAUSED,this._createAdEventHandler(C.eventActions.PAUSE)).on(h.default.AD_RESUMED,this._createAdEventHandler(C.eventActions.RESUME)).on(h.default.AD_COMPLETED,this._createAdEventHandler(C.eventActions.END)).on(p.default.PAUSE,this._handleContentPause).on(p.default.ENDED,this._createContentEventHandler(C.eventActions.END)).on(p.default.CAPTIONS_CHANGE,this._handleCaptionsChange).on(p.default.FULL_SCREEN_CHANGE,this._handleFullScreenChange).on(p.default.REQUEST_SHARE,this._handleRequestShare).on(p.default.SHARE_ACTION,this._handleShareAction).on(p.default.REPLAY,this._handleReplayAction).on(p.default.CONTINUOUS_PLAY_START,this._setContinuousPlayStatus).on(p.default.TIMEUPDATE,this._handleTimeUpdate).on(p.default.MUTED_OVERLAY_CLICKED,this._createEngagementHandler(j.ACTIVATE)).on(p.default.START_CHROME_CAST,this._createEngagementHandler(j.CHROME_CAST_START)).on(p.default.STOP_CHROME_CAST,this._createEngagementHandler(j.CHROME_CAST_STOP)),t.one(p.default.PLAY,this._handleContentFirstPlay),t.ready(function(){t.textTracks().on("change",n._handleTextTrackChange),A.default.getEnabled(n.htmlChildId)&&(A.default.trackLoadComplete(n.htmlChildId,A.default.loadTypes.PLAYER_INIT,A.default.loadStatus.COMPLETE),n._trackLoadTimes())})}return d(e,[{key:"_createEngagementHandler",value:function(e){var t=this;return function(){t._trackEvent({bvpEventAction:C.eventActions.CLICK,bvpEventLabel:e})}}},{key:"_setContinuousPlayStatus",value:function(){this.isContinuousPlay=!0}},{key:"_handleContentFirstPlay",value:function(){this._trackEvent({bvpEventAction:C.eventActions.PLAY,bvpEventLabel:T.CONTENT}),this.player.on(p.default.PLAY,this._createContentEventHandler(C.eventActions.RESUME))}},{key:"_handleContentPause",value:function(){this.player.ended()||this._trackEvent({bvpEventAction:C.eventActions.PAUSE,bvpEventLabel:T.CONTENT})}},{key:"_handleTimeUpdate",value:function(){var e=this.player;if(!e.options_.live){var t=e.duration();if(t<=0)return void O.warn("Invalid video duration: "+t);var n=e.currentTime(),r=n/t*100,i=D.length;this.markersCache=this.markersCache||{};for(var o=0;o<i;o++){var a=D[o];if(r<a)return;this.markersCache[a]||(this.markersCache[a]=!0,this._trackEvent({bvpEventAction:C.eventActions.COMPLETION,bvpEventLabel:a.toString()}))}}}},{key:"_createContentEventHandler",value:function(e){
var t=this;return function(){t._trackEvent({bvpEventAction:e,bvpEventLabel:T.CONTENT})}}},{key:"_createAdEventHandler",value:function(e){var t=this;return function(n){if(!n.data)return void k.default.recordGenericError("Missing event data, cannot log action: "+e);var r=n.data;t._trackEvent({bvpEventAction:e,bvpEventLabel:R[r.type],mediaDuration:1e3*r.duration})}}},{key:"_handleInitialEvent",value:function(){this.initEventHandled||(this.initEventHandled=!0,this._trackEvent({bvpEventAction:C.eventActions.PLAY,bvpEventLabel:T.INITIAL}))}},{key:"_handleTextTrackChange",value:function(){for(var e=this.player.textTracks(),t=!1,n=0,r=e.length;n<r;n++){var i=e[n];if("showing"===i.mode&&"captions"===i.kind){t=!0;break}}this._trackCaptionEvent(t)}},{key:"_handleCaptionsChange",value:function(e){var t=e&&e.data&&e.data.enabled;this._trackCaptionEvent(t)}},{key:"_handleFullScreenChange",value:function(){var e=y.default.isInFullScreen()?"fullscreenenter":"fullscreenexit";this._trackEvent({bvpEventAction:C.eventActions.UI_ACTION,bvpEventLabel:e})}},{key:"_handleRequestShare",value:function(){this._trackEvent({bvpEventAction:C.eventActions.UI_ACTION,bvpEventLabel:"shareopen"})}},{key:"_handleShareAction",value:function(e){var t=e&&e.data&&e.data.shareUrl;this._trackEvent({bvpEventAction:C.eventActions.UI_ACTION,bvpEventLabel:"shareaction",bvpLoaderUrl:t})}},{key:"_handleReplayAction",value:function(){this._trackEvent({bvpEventAction:C.eventActions.UI_ACTION,bvpEventLabel:"replayaction"})}},{key:"_trackLoadTimes",value:function(){var e=this,t=A.default.getLoadTimes(this.htmlChildId);Object.keys(t).forEach(function(n){var r=t[n];e._trackDevEvent({bvpEventAction:C.eventActions.LOAD_START,bvpEventLabel:n,bvpAbsoluteTime:r.startTime,bvpDeltaTime:r.startDeltaTime,bvpLoaderUrl:r.url,bvpTrackGA:!0}),e._trackDevEvent({bvpEventValue:parseInt(r.duration,10),bvpEventAction:C.eventActions.LOAD_END,bvpEventLabel:n,bvpAbsoluteTime:r.endTime,bvpDeltaTime:r.endDeltaTime,bvpDuration:r.duration,bvpLoaderUrl:r.url,bvpTrackGA:!0})})}},{key:"_trackEvent",value:function(e){var t=Object.assign(this._createCommonEventData(),e);C.trackEvent(t)}},{key:"_trackDevEvent",value:function(e){var t=Object.assign(this._createCommonEventData(),e);C.trackDevEvent(t)}},{key:"_trackCaptionEvent",value:function(e){this._trackEvent({bvpEventAction:C.eventActions.UI_ACTION,bvpEventLabel:e?"captionon":"captionoff"})}},{key:"_createCommonEventData",value:function(){var e=this.player,t=e.options_,n=(t.autoplayReportingValues||{}).analytics||{},r=t.metadata,i=t.live,d=Boolean(n.autoplay).toString(),c=(this.isContinuousPlay||Boolean(n.continuousPlay)).toString(),p=this._determineStartMutedState();return{mediaTitle:u(i,r),mediaProgram:r.show_name,mediaType:l(i,r),niCodes:s(r),bmmrId:r.id,mediaDuration:a(i,r),mediaPublishedAt:o(i,r),mediaTech:e.techName_.toLowerCase(),mediaStartMuted:p,continuousPlay:c,autoplay:d}}},{key:"_determineStartMutedState",value:function(){var e=this.player,t=m.default.isAdPlaying(e)?m.default.isAdMuted(e):e.muted()||0===e.volume(),n=e.options_.start_muted,r=b.default.isAutoplayWithSoundDisabledBrowser();return t?n?"muted-bbg":r?"muted-browser":"muted-user":r?"sound-activated":"sound-default"}}],[{key:"init",value:function(){var t=this,n=t.options_;return n.use_google_tag_manager?void new e(t):void O.info("plugin disabled")}}]),e}();videojs.plugin("GoogleTagManagerPlugin",M.init),n.default=M},{"../../events/ad-events":16,"../../events/player-events":17,"../../lib/google-ads/ad-utils":30,"../../utils/fullscreen":69,"../../utils/projector-utils":72,"error-report":"error-report","load-timer":"load-timer",log:"log"}],97:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.MESSAGE=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("retry-controller"),d=r(u),c=e("../../utils/event-target"),p=r(c),f=["connect","disconnectSidebandMetadata","_onMessage"],h=6e4,v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.sbmUrl=e,n.eventSource=null,f.forEach(function(e){return n[e]=n[e].bind(n)}),n.retryController=new d.default({name:"Sideband Metadata",tryCallback:n.connect,cleanupCallback:n.disconnectSidebandMetadata,maxRetryDelay:h}),n.retryController.retry(),n}return a(t,e),s(t,[{key:"connect",value:function(){this.eventSource=this._createEventSource(this.sbmUrl),this.eventSource.addEventListener("open",this.retryController.resetRetryDelay),this.eventSource.addEventListener("error",this.retryController.retry),this.eventSource.addEventListener("message",this._onMessage)}},{key:"disconnectSidebandMetadata",value:function(){this.eventSource&&(this.eventSource.close(),this.eventSource.removeEventListener("open",this.retryController.resetRetryDelay),this.eventSource.removeEventListener("error",this.retryController.retry),this.eventSource.removeEventListener("message",this._onMessage),this.eventSource=null)}},{key:"dispose",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.retryController.dispose()}},{key:"_createEventSource",value:function(e){return new EventSource(e)}},{key:"_onMessage",value:function(e){var t=JSON.parse(e.data);this.trigger(y,t)}}]),t}(p.default),y=n.MESSAGE="MESSAGE";n.default=v},{"../../utils/event-target":68,"retry-controller":"retry-controller"}],98:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.SRC_CHANGE=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("../../utils/event-target"),d=r(u),c=e("log"),p=r(c),f=new p.default("SidebandMetadataMonitor"),h=2e3,v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._checkPlayerSrc=n._checkPlayerSrc.bind(n),n.player=e,n.previousPlayerSrc=null,n.checkTimer=setInterval(n._checkPlayerSrc,h),n.initialCheckTimer=setTimeout(n._checkPlayerSrc,0),n}return a(t,e),s(t,[{key:"dispose",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.initialCheckTimer&&(clearTimeout(this.initialCheckTimer),this.initialCheckTimer=null),this.checkTimer&&(clearInterval(this.checkTimer),this.checkTimer=null)}},{key:"_checkPlayerSrc",value:function(){var e=this.player.currentSrc();this.previousPlayerSrc!==e&&(this.previousPlayerSrc=e,f.debug("New player src detected: ",e),this.trigger(y,e))}}]),t}(d.default),y=n.SRC_CHANGE="SRC_CHANGE";n.default=v},{"../../utils/event-target":68,log:"log"}],99:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return"ad"===e.name&&e.parameters&&(e.parameters.ad_vast||e.parameters.ad_vast_url||e.parameters.ad_url)}Object.defineProperty(n,"__esModule",{value:!0}),n.QUEUE_MESSAGE=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=e("../../utils/event-target"),c=r(d),p=e("log"),f=r(p),h=new f.default("SidebandMetadataQueue"),v=["enqueue","processQueue"],y=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.queue=[],v.forEach(function(t){return e[t]=e[t].bind(e)}),e}return a(t,e),l(t,[{key:"enqueue",value:function(e){s(e)&&(h.debug("Enqueue: ",e),this.queue.push(e))}},{key:"reset",value:function(){this.queue.length=0}},{key:"processQueue",value:function(e){for(var t=this.queue[0];t&&t.timestamp<=e;)this.queue.shift(),h.debug("Queue Message: ",t),this.trigger(_,t),t=this.queue[0]}},{key:"dispose",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.queue.length=0}}]),t}(c.default),_=n.QUEUE_MESSAGE="QUEUE_MESSAGE";n.default=y},{"../../utils/event-target":68,log:"log"}],100:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("bvp-constant"),u=e("../../components/triton/CompanionAdComponent"),d=r(u),c=new s.default("TritonCompanionAdPlugin"),p=function(){function e(){i(this,e)}return o(e,null,[{key:"init",value:function(){var e=this,t=e.options_.metadata,n=void 0===t?{}:t;n.streamProvider===l.TRITON_PROVIDER_NAME&&(c.debug("plugin enabled."),videojs.registerComponent("CompanionAdComponent",d.default))}}]),e}();videojs.plugin("TritonCompanionAdPlugin",p.init),n.default=p},{"../../components/triton/CompanionAdComponent":15,"bvp-constant":"bvp-constant",log:"log"}],101:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("../../events/player-events"),u=r(l),d=e("bvp-constant"),c=e("./SidebandMetadataConnection"),p=r(c),f=e("./SidebandMetadataQueue"),h=r(f),v=e("./SidebandMetadataMonitor"),y=r(v),_=new s.default("TritonSidebandMetadataPlugin"),m=500,g=["_initializeSBMSrcMonitor","_processQueue","_onSBMMessage","_connectToNewSBM"],b=function(){function e(t){var n=this;i(this,e),this.player=t,this.sbmSrcMonitorStarted=!1,this.sbmDelayTimer=null,this.sbmConnection=null,this.sbmMonitor=null,this.sbmQueue=new h.default,g.forEach(function(e){return n[e]=n[e].bind(n)}),this.sbmQueue.on(f.QUEUE_MESSAGE,this._onSBMMessage),t.on([u.default.LOADED_METADATA,u.default.PLAY],this._initializeSBMSrcMonitor),t.on(u.default.TIMEUPDATE,this._processQueue)}return o(e,[{key:"dispose",value:function(){this.sbmDelayTimer&&(clearTimeout(this.sbmDelayTimer),this.sbmDelayTimer=null),this.sbmConnection&&(this.sbmConnection.dispose(),this.sbmConnection=null),this.sbmMonitor&&(this.sbmMonitor.dispose(),this.sbmMonitor=null),this.sbmQueue&&(this.sbmQueue.dispose(),this.sbmQueue=null)}},{key:"_processQueue",value:function(){var e=1e3*this.player.currentTime();this.sbmQueue.processQueue(e)}},{key:"_onSBMMessage",value:function(e){_.debug("COMPANION_AD",e.detail),this.player.trigger({type:u.default.COMPANION_AD,data:e.detail})}},{key:"_connectToNewSBM",value:function(e){var t=this,n=this._findSBMUrlForCurrentStream(e);return n?(this._closeExistingSBMConnection(),_.debug("Connecting to new SBM: ",n),this.sbmQueue.reset(),this.sbmConnection=new p.default(n),void this.sbmConnection.on(c.MESSAGE,function(e){return t.sbmQueue.enqueue(e.detail)})):void _.warn("Can't find sbmUrl for current url: ",e)}},{key:"_closeExistingSBMConnection",value:function(){this.sbmConnection&&(this.sbmConnection.dispose(),this.sbmConnection=null)}},{key:"_initializeSBMSrcMonitor",value:function(){var e=this;this.sbmSrcMonitorStarted||(this.sbmSrcMonitorStarted=!0,this.sbmDelayTimer=setTimeout(function(){e.sbmDelayTimer=null,e.sbmMonitor=new y.default(e.player),e.sbmMonitor.on(v.SRC_CHANGE,function(t){return e._connectToNewSBM(t.detail)})},m))}},{key:"_findSBMUrlForCurrentStream",value:function(e){for(var t=this.player.options_.streams,n=0;n<t.length;n++){var r=t[n];if(r.url===e)return r.sbmUrl}}}],[{key:"init",value:function(){var t=this,n=t.options_.metadata,r=void 0===n?{}:n;if(r.streamProvider===d.TRITON_PROVIDER_NAME){_.debug("plugin enabled.");var i=new e(t);t.on(u.default.DISPOSE,function(){i.dispose()})}}}]),e}();videojs.plugin("TritonSidebandMetadataPlugin",b.init),n.default=b},{"../../events/player-events":17,"./SidebandMetadataConnection":97,"./SidebandMetadataMonitor":98,"./SidebandMetadataQueue":99,"bvp-constant":"bvp-constant",log:"log"}],102:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){function e(e){var t=e.screenX,i=e.screenY;t===a&&i===s||(a=t,s=i,n.userActive(!0)),r()}function t(){u||n.userActive(!1)}var n=this;if(!n.options_.use_activity_out)return void c.info("plugin disabled");var r=(0,l.default)(t.bind(n),p),i=e.bind(n),o=n.reportUserActivity.bind(n),a=null,s=null,u=!1;n.on(d.default.MUTED_OVERLAY_SHOW,function(){return n.blockControls=!0}),n.on(d.default.MUTED_OVERLAY_CLICKED,function(){return n.blockControls=!1}),n.listenForUserActivity_=function(){var e=n.$(_);n.on(h,function(t){n.blockControls||(n.on(f,i),u=t.target!==e&&e.contains(t.target),r())}),n.on(v,function(){n.off(f,i),n.userActive(!1),u=!1}),n.on(y,r),n.on("mousedown",o),n.on("mouseup",o),n.on("keydown",o),n.on("keyup",o)}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("log"),a=r(o),s=e("lodash.debounce"),l=r(s),u=e("../events/player-events"),d=r(u),c=new a.default("ActivityOverridePlugin"),p=5e3,f="mousemove",h="mouseover",v="mouseleave",y="play",_=".vjs-control-bar";videojs.plugin("ActivityOverridePlugin",i),n.default=i},{"../events/player-events":17,"lodash.debounce":5,log:"log"}],103:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return"string"==typeof e&&0===e.indexOf("javascript:")}function a(e){var t=e.indexOf("("),n=t!==-1?e.slice(11,t).trim():null;if(n&&"function"==typeof window[n])return function(){try{return window[n]()}catch(e){_.default.recordGenericError(m,"Unable to execute page level tags:",e)}}}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("../events/ad-events"),u=r(l),d=e("../events/player-events"),c=r(d),p=e("../utils/projector-utils"),f=r(p),h=e("log"),v=r(h),y=e("error-report"),_=r(y),m=new v.default("ComscoreStreamSensePlugin"),g="3005059",b="6961552",E=0,A="embed",P=1,w=6e5,S=60,k=750,C=1e3,O="share",T={bb_pub_d:"bb_pub_d",bss_ni_codes:"ni_codes",c5:"c5",ns_st_ci:"id",ns_st_ct:!0,ns_st_dt:"createdate",ns_st_ep:"title",ns_st_li:"live",ns_st_pr:"show_name",ns_st_ty:"form_type"},j=function(){function e(){i(this,e)}return s(e,null,[{key:"ns_st_dt",value:function(e,t){return e[t]?e[t]:e.live===P?"N/A":void 0}},{key:"bss_ni_codes",value:function(e,t){if(e[t])return e[t].reduce(function(e,t,n){return""+e+(n>0?" ":"")+t},"")}},{key:"ns_st_ct",value:function(e){return this.isInAd?this.isLive?"va21":"va11":this.isLive?"vc13":"short-form"===e.form_type?"vc11":"vc12"}}]),e}(),R=["dispose","onAdClip","onAdCompleted","onAdLoading","onAdPaused","onAdPlayError","onAdResumed","onAdStarted","onAdTimeout","onBuffer","onContentChange","onDurationChange","onEnded","onError","onFullScreenChange","onPause","onPlay","onRetry","onShare","onShareAction","onTrackInfo","onVolumeChange"],L=function(){function e(t,n,r){var o=this;i(this,e),this.autoplayValues=n.autoplayReportingValues.comscore,this.clipDuration=0,this.clips={},this.clipsCount=0,this.currentClipId=null,this.initialClipId=null,this.isAsync=Boolean(n.ns_async),this.isInAd=!1,this.isLive=!1,this.player=r,this.playlistContentType=null,this.playlistDuration=0,this.playlistIndex=0,this.playlistTitle=null,this.lastRecordedTime=0,R.forEach(function(e){o[e]=o[e].bind(o)});var a=this.getBaseLabels(t,n),s=("https:"===window.location.protocol?"https://s":"http://")+"b.scorecardresearch.com/p?c1=2&c2="+("mini"===n.playerType?b:g);this.streamSense=new ns_.StreamSense(a,s),this.isAsync||this.initializePlaylist(),this.streamSense.setPauseOnBufferingInterval(0),this.streamSense.setKeepAliveInterval(w),this.startPositionPoll()}return s(e,[{key:"addDuration",value:function(e){e>0&&(this.playlistDuration+=e,this.streamSense.getPlaylist().setLabel("ns_st_ca",this.playlistDuration))}},{key:"getBaseLabels",value:function(e,t){var n=this.getDataFromClipMetadata(t.metadata),r=f.default.getFlashVersion();if(Object.assign(n,{bss_flash:r,bss_iframe:window!==window.top?P:E,c6:"*null",c7:window.location.href,c8:document.title,ns_st_mp:"BPlayer",ns_st_mv:t.metadata.version,ns_st_pu:"Bloomberg"},e),e.title&&(this.playlistTitle=e.title,delete n.title),e.page_level_tags)if(delete n.page_level_tags,o(e.page_level_tags)){var i=a(e.page_level_tags);i&&Object.assign(n,i())}else Object.assign(n,e.page_level_tags);return n.bss_auto_play=this.autoplayValues.bss_auto_play,n.bss_cont_play=this.autoplayValues.bss_cont_play,n}},{key:"getDataFromClipMetadata",value:function(e){var t=this;if(!e)return{};var n={};return this.isLive=Boolean(e.live),e.form_type!==this.playlistContentType&&(this.playlistContentType=e.form_type,this.streamSense&&this.streamSense.getPlaylist().setLabel("bss_vid_type",this.playlistContentType)),e.title&&(this.isInAd||this.playlistTitle||(this.playlistTitle=e.title,this.streamSense&&this.streamSense.getPlaylist().setLabel("ns_st_pl",e.title))),e.duration&&!this.streamSense&&(this.playlistDuration=parseInt(e.duration,10),this.initialClipId=e.id),Object.keys(T).forEach(function(r){var i=T[r];if(j[r]){var o=j[r].call(t,e,i);return void(void 0!==o&&(n[r]=o))}var a=e[i];void 0!==a&&(n[r]=a)}),n}},{key:"getPosition",value:function(){if(this.isLive)return 0;try{return Math.round(this.player.currentTime()*C)}catch(e){return this.lastRecordedTime}}},{key:"getDuration",value:function(){return this.isLive?0:this.player.duration()}},{key:"getFullScreen",value:function(){return this.player.isFullscreen()?"full":"norm"}},{key:"startPositionPoll",value:function(){var e=this;this.pollIntervalId=setInterval(function(){e.lastRecordedTime=e.getPosition()},k)}},{key:"stopPositionPoll",value:function(){clearInterval(this.pollIntervalId),this.pollIntervalId=null}},{key:"shareNotify",value:function(e,t,n){var r=this.streamSense.getPlaylist().getLabel("ns_st_pl")||window.location.href;this.streamSense.customNotify({social_network:e,social_url:r,social_action:t,social_position:"video-controlbar"},n)}},{key:"isUserAction",value:function(){return this.player.userActive()}},{key:"initializePlaylist",value:function(){var e={};e.ns_st_pl=this.playlistTitle||"",e.ns_st_ca=this.playlistDuration||0,e.bss_vid_type=this.playlistContentType||"",e.bss_pl_num=this.playlistIndex,this.streamSense.setPlaylist(e)}},{key:"toggleHeartbeat",value:function(){this.streamSense.setHeartbeatIntervals([{playingtime:6e4,interval:this.isInAd?1e9:1e4},{playingtime:null,interval:this.isInAd?1e9:1e6}])}},{key:"onAdCompleted",value:function(){this.isInAd=!1,this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:P},this.getPosition())}},{key:"onAdPaused",value:function(){var e=this.isUserAction()?P:E;this.streamSense.notify(ns_.StreamSense.PlayerEvents.PAUSE,{bss_user_action:e},this.getPosition())}},{key:"onAdResumed",value:function(){var e=this.isUserAction()?P:E;this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,{bss_user_action:e},this.getPosition())}},{key:"onAdStarted",value:function(){var e=this.isUserAction()?P:E;this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,{bss_user_action:e},this.getPosition())}},{key:"onAdClip",value:function(e){if(e.data){var t=void 0,n="none";this.currentClipId=e.data.clip.content_id,this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{},this.getPosition()),this.isInAd=e.data.type&&0===e.data.type.indexOf("ad-"),this.isInAd?(this.clipDuration=e.data.duration*C,this.currentClipId||(this.currentClipId="ad_clip_"+this.clipsCount)):this.clipDuration=this.getDuration(),e.data.url&&(n=e.data.url),this.clips[this.currentClipId]?(this.clips[this.currentClipId].part++,t=this.clips[this.currentClipId]):(this.currentClipId!==this.initialClipId&&this.addDuration(this.clipDuration),this.clipsCount++,this.streamSense.getPlaylist().setLabel("ns_st_cp",this.clipsCount),t=this.getDataFromClipMetadata(e.data.metadata),t.ns_st_cu=n,t.clip_num=this.clipsCount,t.part=1,this.clips[this.currentClipId]=t),this.isInAd?(this.isLive&&(t.ns_st_li=P),t.ns_st_ad=P,t.ns_st_ty=e.data.type.substring(3)):t.bss_precision=E,t.ns_st_cn=this.clips[this.currentClipId].clip_num,t.ns_st_ci=this.currentClipId,t.ns_st_cl=this.clipDuration,t.ns_st_pn=this.clips[this.currentClipId].part,t.ns_st_tp=E,t.ns_st_cs=this.player.width()+"x"+this.player.height(),t.bss_stream_url=n,t.bss_tech_name=this.player.techName_,this.streamSense.setClip(t)}}},{key:"onAdLoading",value:function(){0===this.clipsCount&&this.streamSense.notify(ns_.StreamSense.PlayerEvents.BUFFER,{},this.getPosition())}},{key:"onAdPlayError",value:function(){var e=arguments[1]||"",t={bss_aderror:"adsplayerror",ns_st_adtype:e};this.streamSense.customNotify(t,this.getPosition())}},{key:"onAdTimeout",value:function(e){var t=e&&e.data&&e.data.originalEvent,n=t&&t.type||"",r=void 0;switch(n){case u.default.MAX_RETRIES_REACHED:r="adsloadtimeout";break;case u.default.AD_PLAYBACK_TIMED_OUT:r="adsplaytimeout";break;case u.default.AD_LOAD_TIMED_OUT:r="adsloadtimeout"}var i={bss_aderror:r,ns_st_adtype:n};this.streamSense.customNotify(i,this.getPosition())}},{key:"onBuffer",value:function(){this.streamSense.notify(ns_.StreamSense.PlayerEvents.BUFFER,{},this.getPosition())}},{key:"onVolumeChange",value:function(){var e=this.player.muted(),t=e?0:this.player.volume();this.streamSense.setLabel("ns_st_vo",t)}},{key:"onContentChange",value:function(e){e.data&&(this.playlistIndex++,this.playlistTitle="",this.playlistDuration=0,this.playlistContentType="",e.data.title&&(this.playlistTitle=e.data.title),e.data.duration&&(this.playlistDuration=parseInt(e.data.duration)),e.data.form_type&&(this.playlistContentType=e.data.form_type),this.initializePlaylist())}},{key:"onDurationChange",value:function(){var e=this.getDuration();this.clipDuration||this.isInAd&&!(this.isInAd&&e<=S)||(this.clipDuration=e*C,this.currentClipId!==this.initialClipId&&this.addDuration(this.clipDuration),this.streamSense.getClip().setLabel("ns_st_cl",this.clipDuration))}},{key:"onEnded",value:function(){this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:P},this.getPosition())}},{key:"onError",value:function(){this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:P,ns_st_er:"Error"},this.getPosition())}},{key:"onFullScreenChange",value:function(){var e=this.getFullScreen();this.streamSense.setLabel("ns_st_ws",e),this.streamSense.customNotify({ns_st_ev:"wstate"},this.getPosition())}},{key:"onPause",value:function(){var e=this.isUserAction()?P:E;this.toggleHeartbeat(),this.streamSense.notify(ns_.StreamSense.PlayerEvents.PAUSE,{bss_user_action:e},this.getPosition())}},{key:"onPlay",value:function(){var e=this.isUserAction()?P:E;this.toggleHeartbeat(this.streamSense),this.streamSense.notify(ns_.StreamSense.PlayerEvents.PLAY,{bss_user_action:e},this.getPosition())}},{key:"onRetry",value:function(e){if(!this.isInAd){var t=e.data&&e.data.url?e.data.url:"none";this.streamSense.getClip().setLabel("bss_stream_url",t),this.streamSense.customNotify({bss_stream_url:t},this.getPosition())}}},{key:"onShare",value:function(){this.shareNotify("share-menu","share",this.getPosition())}},{key:"onShareAction",value:function(e){var t=e.data.shareType;if(t){var n=this.getPosition();return"embed-copy"===t||"embed-text"===t?void this.shareNotify(t,A,n):void this.shareNotify(t,O,n)}}},{key:"onTrackInfo",value:function(e){this.isAsync&&this.initializePlaylist(),e.data&&e.data.referrer&&(this.streamSense.setLabel("c9",e.data.referrer),this.streamSense.notify("c9",e.data.referrer))}},{key:"dispose",value:function(){this.stopPositionPoll(),this.streamSense.notify(ns_.StreamSense.PlayerEvents.END,{ns_st_pe:P},this.getPosition()),this.streamSense.setClip(null),this.streamSense=null,this.player=null}}],[{key:"init",value:function(t){var n=this,r=n.options_;if(!r.use_comscore||!ns_)return void m.info("plugin disabled");var i=new e(t,r,n);n.on(u.default.AD_COMPLETED,i.onAdCompleted),n.on(u.default.AD_PAUSED,i.onAdPaused),n.on(u.default.AD_RESUMED,i.onAdResumed),n.on(u.default.AD_STARTED,i.onAdStarted),n.on(u.default.CLIP,i.onAdClip),n.on(c.default.AD_LOADING,i.onAdLoading),n.on(c.default.ADS_PLAY_ERROR,i.onAdPlayError),n.on(c.default.ADS_TIMEOUT_ERROR,i.onAdTimeout),n.on(c.default.BUFFER,i.onBuffer),n.on(c.default.VOLUME_CHANGE,i.onVolumeChange),n.on(c.default.CONTENT_CHANGE,i.onContentChange),n.on(c.default.DURATION_CHANGE,i.onDurationChange),n.on(c.default.ENDED,i.onEnded),n.on(c.default.ERROR,i.onError),n.on(c.default.FULL_SCREEN_CHANGE,i.onFullScreenChange),n.on(c.default.PAUSE,i.onPause),n.on(c.default.PLAY,i.onPlay),n.on(c.default.RETRY,i.onRetry),n.on(c.default.SHARE,i.onShare),n.on(c.default.SHARE_ACTION,i.onShareAction),n.on(c.default.TRACK_INFO,i.onTrackInfo),n.on(c.default.DISPOSE,function(){i.dispose(),i=null})}}]),e}();videojs.plugin("ComscoreStreamSensePlugin",L.init),n.default=L},{"../events/ad-events":16,"../events/player-events":17,"../utils/projector-utils":72,"error-report":"error-report",log:"log"}],104:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("log"),s=r(a),l=e("../events/player-events"),u=r(l),d=e("../components/fence/FenceComponent"),c=r(d),p=new s.default("FencePlugin"),f=["_onSubscribe","_onRender","_checkSubscriptionStatusChange","_onPlay","_start","_onDispose"],h=function(){function e(t,n){var r=this;i(this,e),this.player=t,this.fence=n,this._isBBGSubscriber=!1,f.forEach(function(e){r[e]=r[e].bind(r)}),t.ready(function(){n.ready(function(){r._start()})})}return o(e,[{key:"_start",value:function(){if(this.fence.addEventListener&&(this.fence.addEventListener("onRender",this._onRender),this.fence.addEventListener("onSubscribe",this._onSubscribe),this.fence.addEventListener("onStoreChange",this._checkSubscriptionStatusChange),this.player.on(u.default.PLAY,this._onPlay),this.player.on(u.default.DISPOSE,this._onDispose),this._isPauseTriggeredByFence=!1),this.fence.enableRender){var e=this.player.getChild("FenceComponent");this.fence.enableRender({liveSubscribeRendererId:e.selector})}this._checkSubscriptionStatusChange()}},{key:"_onRender",value:function(e){e&&e.detail&&e.detail.showLivePageWall&&(this._isPauseTriggeredByFence=!0,this.player.trigger(u.default.PAY_WALL_PAUSE))}},{key:"_onSubscribe",value:function(e){e&&e.detail&&this.fence.isBBGSubscriber&&this.player.paused()&&this._isPauseTriggeredByFence&&this.player.trigger(u.default.PAY_WALL_PLAY)}},{key:"_checkSubscriptionStatusChange",value:function(){var e=!!this.fence.isBBGSubscriber;this._isBBGSubscriber!=e&&(this._isBBGSubscriber=e,this.player.trigger({type:u.default.SUBSCRIBER_STATUS_CHANGE,data:{isBBGSubscriber:e}}))}},{key:"_onPlay",value:function(){this._isPauseTriggeredByFence=!1}},{key:"_onDispose",value:function(){this.fence.removeEventListener("onRender",this._onRender),this.fence.removeEventListener("onSubscribe",this._onSubscribe),this.fence.removeEventListener("onStoreChange",this._checkSubscriptionStatusChange)}}],[{key:"init",value:function(){var t=this;if(!t.options_.enableFence)return void p.info("plugin disabled");var n=window._fence;return n&&n.ready?(videojs.registerComponent("FenceComponent",c.default),new e(t,n)):void p.info("no fence library available on page")}}]),e}();videojs.plugin("FencePlugin",h.init),n.default=h},{"../components/fence/FenceComponent":12,"../events/player-events":17,log:"log"}],105:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this;return e.options_.use_moat?void e.on(s.default.AD_LOADED,o):void h.info("plugin disabled")}function o(e){var t=e.data,n=void 0===t?{}:t;if(!window.initMoatTracking)return void f.default.recordGenericError(h,"Cannot track ads: missing window.initMoatTracking");var r={partnerCode:v,viewMode:n.viewMode,slicer1:document.location.href,zMoatCP:"{"+decodeURIComponent(n.custParams)+"}",zMoatAT:n.adType,zMoatST:n.isLive?"live":"vod"},i=u.default.get("session_id")||null;i&&(r.zMoatKI=i),h.info("Moat Ad tracking: ",r),window.initMoatTracking(n.adsManager,r,n.adContainer)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("../events/ad-events"),s=r(a),l=e("../utils/cookies"),u=r(l),d=e("log"),c=r(d),p=e("error-report"),f=r(p),h=new c.default("MoatAdViewabilityPlugin"),v="bloombergjsvideo915507035426";videojs.plugin("MoatAdViewabilityPlugin",i),
i.__PARTNER_CODE=v,n.default=i},{"../events/ad-events":16,"../utils/cookies":64,"error-report":"error-report",log:"log"}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return[e.ni_codes,e.keywords,e.peoples].reduce(function(e,t){return t?e.concat(t):e},[])}function a(e){var t=new Date(e);return t.getTime()}function s(e,t){if(t&&t.length>0){var n=t.some(function(e){return _.indexOf(e)>=0});if(n)return"Digital Originals"}return e}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("../events/ad-events"),d=r(u),c=e("../events/player-events"),p=r(c),f=e("log"),h=r(f),v=new h.default("ParselyPlugin"),y=["_trackPlay","_trackPause"],_=["VIDUSDIGI","VIDASDIGI","VIDUKDIGI"],m=function(){function e(t,n){var r=this;i(this,e),this.player=t,this.originalBaseUrl="",this.parsely=n,y.forEach(function(e){r[e]=r[e].bind(r)}),this.player.on([d.default.AD_STARTED,d.default.AD_RESUMED,p.default.PLAY],this._trackPlay).on([p.default.ENDED,p.default.PAUSE,p.default.DISPOSE,d.default.AD_PAUSED],this._trackPause)}return l(e,[{key:"_trackPlay",value:function(){if(this.parsely.videoPlaying=!0,this.parsely.video){this.originalBaseUrl=this.originalBaseUrl||this._getParselyOverrideUrl()||this._getPageLocation();var e=this._playerMetaData(),t=this._getParselyMetadata(e);this.parsely.video.trackPlay(e.id,t,this._getBaseUrl())}}},{key:"_getParselyMetadata",value:function(e){return{title:e.title,section:s(e.show_name,e.ni_codes),tags:o(e),image_url:e.poster,pub_date_tmsp:a(e.createdate)}}},{key:"_trackPause",value:function(e){if(this.parsely.videoPlaying=!1,this.parsely.video){var t=this._playerMetaData(),n=this._getParselyMetadata(t);this.parsely.video.trackPause(t.id,n,this._getBaseUrl()),e&&e.type===p.default.ENDED&&this.parsely.video.reset(t.id)}}},{key:"_playerMetaData",value:function(){return this.player.options_.metadata}},{key:"_getBaseUrl",value:function(){return this._isPrimaryVideo()?this.originalBaseUrl:""}},{key:"_isPrimaryVideo",value:function(){var e=this.player.options_,t=void 0===e.playlistIndex||0===e.playlistIndex;return t}},{key:"_getParselyOverrideUrl",value:function(){var e=this.player.options_,t=e.original_user_options;return t.parselyPageUrl}},{key:"_getPageLocation",value:function(){return window.location.href}}],[{key:"init",value:function(){var t=this;return t.options_.live?void v.info("Cannot track: tracking disabled for live player"):window.PARSELY?t.options_.use_parsely?void new e(t,window.PARSELY):void v.info("plugin disabled"):void v.info("Cannot track: missing window.PARSELY")}}]),e}();videojs.plugin("ParselyPlugin",m.init),n.default=m},{"../events/ad-events":16,"../events/player-events":17,log:"log"}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=this;return e.options_.use_persist_listeners?(e.on(l.default.VOLUME_CHANGE,function(){a.default.set("volume",e.volume())}),void e.on(l.default.READY,function(){var t=a.default.get("volume");void 0!==t&&e.volume(parseFloat(t))})):void c.info("plugin disabled")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/persist-controls"),a=r(o),s=e("../events/player-events"),l=r(s),u=e("log"),d=r(u),c=new d.default("PersistListeners");videojs.plugin("PersistListeners",i),n.default=i},{"../events/player-events":17,"../utils/persist-controls":71,log:"log"}],108:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=this;return e.options_.use_playback_outro?void videojs.registerComponent("PlaybackOutro",E):void m.info("plugin disabled")}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=e("../events/player-events"),c=r(d),p=e("../lib/google-ads/ad-utils"),f=r(p),h=e("../utils/projector-utils"),v=r(h),y=e("log"),_=r(y),m=new _.default("PlaybackOutroComponent"),g=videojs.getComponent("Component"),b=["onFinishedPlaying","onStartedPlaying","onReplayClick"],E=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.disabled=!1,r.hide(),b.forEach(function(e){r[e]=r[e].bind(r)}),e.on(c.default.ENDED,r.onFinishedPlaying),e.on(c.default.PLAY,r.onStartedPlaying);var a=e.options_.title||n.message;return r.setMessage(a),r.on(r.el(),"click",r.onReplayClick),r}return a(t,e),l(t,[{key:"createEl",value:function(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-playback-outro",innerHTML:'<div class="bvp-playback-outro__message"></div>\n        <input type="button" class="bvp-playback-outro__replay-button" aria-live="polite"/>'})}},{key:"setMessage",value:function(e){e&&(this.$(".bvp-playback-outro__message").textContent=e)}},{key:"onFinishedPlaying",value:function(){this.disabled||this.show()}},{key:"onStartedPlaying",value:function(){this.disabled||this.hide()}},{key:"onReplayClick",value:function(){var e=this.player_.options_,t=e.plugins.GoogleAdsPlugin,n=!v.default.forcedToPlayFlash(e)&&f.default.canDisplayAds(t)&&f.default.hasPreroll(t);return this.player_.trigger(c.default.REPLAY),n?(this.hide(),void this.player_.trigger(c.default.PLAY_PREROLL)):void this.player_.play()}},{key:"disable",value:function(){this.disabled=!0}},{key:"enable",value:function(){this.disabled=!1}}]),t}(g);videojs.plugin("PlaybackOutroPlugin",s),n.default=E},{"../events/player-events":17,"../lib/google-ads/ad-utils":30,"../utils/projector-utils":72,log:"log"}],109:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../utils/projector-utils"),s=r(a),l=e("../events/player-events"),u=r(l),d=e("log"),c=r(d),p=new c.default("PosterPlugin"),f="blvs-poster-as-slate",h=["onPlayerReady","onPlayerEnded"],v=function(){function e(t){var n=this;i(this,e),this.player=t,this.autoplay=t.options_.original_user_options.autoplay,this.posterUrl=t.options_.posterUrl,this.showPosterSlate=t.options_.poster_as_slate,this.hasLoadedPoster=!1,h.forEach(function(e){n[e]=n[e].bind(n)}),t.on(u.default.READY,this.onPlayerReady),t.on(u.default.ENDED,this.onPlayerEnded)}return o(e,[{key:"onPlayerReady",value:function(){return this.showPosterSlate?(s.default.isMobile()||this.player.addClass(f),void this.loadPoster()):void(this.autoplay||this.loadPoster())}},{key:"onPlayerEnded",value:function(){this.loadPoster(),this.player.hasStarted(!1)}},{key:"loadPoster",value:function(){this.hasLoadedPoster||(s.default.isMobile()?this.player.el_.setAttribute("poster",this.posterUrl):this.player.poster(this.posterUrl),this.hasLoadedPoster=!0)}}],[{key:"init",value:function(){var t=this;return t.options_.use_poster_slate?s.default.forcedToPlayFlash(t.options_)?void p.info("Not enabled for Flash tech"):void new e(t):void p.info("plugin disabled")}}]),e}();videojs.plugin("PosterPlugin",v.init),n.default=v},{"../events/player-events":17,"../utils/projector-utils":72,log:"log"}],110:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=this;if(!e.options_.use_smooth_scrub)return void p.info("plugin disabled");var t=e.currentTime.bind(e);e.currentTime=function(n){var r=t(n);return void 0!==n&&(e.cache_.currentTime=n),r},videojs.registerComponent("SeekBar",h)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=e("log"),c=r(d),p=new c.default("SmoothScrubbingPlugin"),f=videojs.getComponent("SeekBar"),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"handleMouseMove",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleMouseMove",this).call(this,e),this.player_.trigger("timeupdate")}}]),t}(f);videojs.plugin("SmoothScrubbingPlugin",s),n.default=s},{log:"log"}],111:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=this;if(!t.options_.use_stream_watchdog)return void v.info("plugin disabled");var n=new _(t,e);t.on(l.default.READY,function(){t.tech_&&n.start()})}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("../events/player-events"),l=r(s),u=e("../utils/VisibilityMonitor"),d=r(u),c=e("log"),p=r(c),f=e("bvp-constant"),h=["startCountdown","stopCountdown","onTimeUpdate","onSeekEnd","reloadPlayer","dispose"],v=new p.default("StreamWatchdog"),y="seeked",_=function(){function e(t,n){var r=this;i(this,e),this.countdownId=null,this.isLive=Boolean(t.options_.original_user_options.live),this.options=n,this.pastTime=null,this.player=t,this.timeout=this.isLive?this.options.liveStreamTimeout:this.options.vodStreamTimeout,h.forEach(function(e){r[e]=r[e].bind(r)})}return a(e,[{key:"start",value:function(){f.FLASH_TECH_NAME!==this.player.techName_&&(d.default.isPageVisible()&&this.player.on(l.default.PLAY,this.startCountdown),this.player.on(l.default.TIMEUPDATE,this.onTimeUpdate),this.player.on(l.default.DISPOSE,this.dispose),this.player.on([l.default.ENDED,l.default.PAUSE,l.default.ERROR],this.stopCountdown),this.videoTag=this.player.tech_.el(),this.videoTag.addEventListener(y,this.onSeekEnd))}},{key:"onTimeUpdate",value:function(){var e=this.player.currentTime(),t=this.player.paused(),n=this.player.seeking(),r=this.player.scrubbing();t||n||r||e&&this.pastTime!==e&&(this.pastTime=e,this.startCountdown())}},{key:"onSeekEnd",value:function(){this.pastTime=null}},{key:"reloadPlayer",value:function(){if(this.player.techName_!==f.CHROMECAST_TECH_NAME){v.warn("Stream playback stalled, triggering a reload request"),this.stopCountdown();var e={type:"watchdog-reload",details:"Playback stalled for "+this.timeout+"s"};this.player.trigger({type:l.default.WATCHDOG_RELOAD,data:e})}}},{key:"startCountdown",value:function(){window.clearTimeout(this.countdownId),this.countdownId=setTimeout(this.reloadPlayer,this.timeout)}},{key:"stopCountdown",value:function(){window.clearTimeout(this.countdownId)}},{key:"dispose",value:function(){this.stopCountdown(),this.videoTag.removeEventListener(y,this.onSeekEnd),this.player=this.options=this.videoTag=null}}]),e}();videojs.plugin("StreamWatchdogPlugin",o),n.default=_},{"../events/player-events":17,"../utils/VisibilityMonitor":62,"bvp-constant":"bvp-constant",log:"log"}],112:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("../events/player-events"),d=r(u),c=e("../events/ad-events"),p=r(c),f=e("log"),h=r(f),v=new h.default("TitleBarComponent"),y=videojs.getComponent("Component"),_=["onAdCompleted","onAdLoaded","onFinishedPlaying","onPause","onPlay","onUserActive","onUserInactive"],m="bvp-title-bar__visible",g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return _.forEach(function(e){n[e]=n[e].bind(n)}),n.isAdPlaying=!1,n.isEmpty=!e.options_.title,n.isActive=!1,n.setTitle(e.options_.title),e.on([p.default.AD_COMPLETED,d.default.ADS_TIMEOUT_ERROR],n.onAdCompleted).on(p.default.AD_LOADED,n.onAdLoaded).on(d.default.ENDED,n.onFinishedPlaying).on(d.default.PAUSE,n.onPause).on(d.default.PLAY,n.onPlay).on(d.default.USER_ACTIVE,n.onUserActive).on(d.default.USER_INACTIVE,n.onUserInactive),n}return a(t,e),s(t,[{key:"createEl",value:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"bvp-title-bar",innerHTML:'<div class="bvp-title-bar__text"></div>'})}},{key:"setTitle",value:function(e){this.$(".bvp-title-bar__text").textContent=e}},{key:"show",value:function(){this.addClass(m)}},{key:"hide",value:function(){this.removeClass(m)}},{key:"onAdLoaded",value:function(){this.isAdPlaying=!0,this.hide()}},{key:"onAdCompleted",value:function(){this.isAdPlaying=!1}},{key:"onPause",value:function(){this.isEmpty||this.player_.ended()||this.show()}},{key:"onPlay",value:function(){this.isEmpty||this.isActive||this.hide()}},{key:"onUserActive",value:function(){this.isActive=!0,this.isEmpty||this.player_.ended()||this.isAdPlaying||this.show()}},{key:"onUserInactive",value:function(){this.isActive=!1,this.player_.paused()||this.hide()}},{key:"onFinishedPlaying",value:function(){this.hide()}}],[{key:"init",value:function(){var e=this;return e.options_.use_title_bar?void videojs.registerComponent("TitleBar",t):void v.info("plugin disabled")}}]),t}(y);videojs.plugin("TitleBarPlugin",g.init),n.default=g},{"../events/ad-events":16,"../events/player-events":17,log:"log"}],113:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){var e=this;return e.options_.use_bvp_volume_button?void videojs.registerComponent("VolumeMenuButton",h):void p.info("plugin disabled")}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},d=e("log"),c=r(d),p=new c.default("VolumeMenuButton"),f=videojs.getComponent("VolumeMenuButton"),h=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.menuContent.on("mouseleave",r.handleMouseLeave.bind(r)),r}return a(t,e),l(t,[{key:"handleMouseLeave",value:function(){this.el_.blur()}},{key:"handleClick",value:function(){0==this.player_.volume()&&this.player_.volume(1),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleClick",this).call(this)}}]),t}(f);videojs.plugin("OverrideVideojsVolumeButton",s),n.default=h},{log:"log"}],114:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return{enableAnalytics:!0,isLive:e,title:t,duration:h(n)}}function a(e,t){var n=t?new Date(t):null,r=n?n.getFullYear():"";return{content_id:e,year:r}}function s(e,t,n){var r=Object.assign({},e.original_user_options.analyticsParams,{param1:g.version,param2:Boolean(e.original_user_options.autoplay).toString(),param3:d(e.metadata.bb_pub_d),param4:c(e.metadata),param5:p(e.metadata),param6:f(),param7:t,param8:n,param9:v()});return r}function l(e){var t="";return e.metadata.title&&(t+=e.metadata.title),t}function u(e,t){return e?void 0:t.createdate}function d(e){var t=e?new Date(e):new Date;return E.default.formatForReporting(t)}function c(e){return e.live?"long-form":e.form_type?e.form_type:"short-form"}function p(e){return e.show_name?e.show_name:"N/A"}function f(){var e=window.location;return""+e.host+e.pathname}function h(e){var t=e.metadata.duration;return t?Math.floor(+t/1e3):0}function v(){var e=window._fence;return e?e.isBBGSubscriber?U.SUBSCRIBED:U.UNSUBSCRIBED:U.UNKNOWN}Object.defineProperty(n,"__esModule",{value:!0});var y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=e("log"),m=r(_),g=e("bvp-shims"),b=e("../../utils/datetime-utils"),E=r(b),A=e("../../events/ad-events"),P=r(A),w=e("../../events/player-events"),S=r(w),k=e("./youbora-adnalyzer"),C=r(k),O=e("../../utils/projector-utils"),T=r(O),j=e("resources"),R=r(j),L=new m.default("Youbora"),D=["_onReady","_onPlay","_onSubscriberStatusChange","_onAdRequested","_onFatalError"],M={accountCode:R.default.YOUBORA_ACCOUNT||"bloombergdev",parseHLS:!0,httpSecure:!1},U={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed",UNKNOWN:"unknown"},I=function(){function e(t){var n=this;return i(this,e),t.options_.use_youbora?(this.player=t,this.adnalyzer=null,this.options=this.player.options_,this.isLive=Boolean(+this.options.metadata.live),!T.default.isHlsSupported()||T.default.forcedToPlayFlash(this.options)?void L.warn("Plugin not enabled for non-Html5 techs."):(D.forEach(function(e){n[e]&&(n[e]=n[e].bind(n))}),this.options.log_debug&&($YB.debugLevel=5),void this._addListeners())):void L.info("plugin disabled")}return y(e,[{key:"_addListeners",value:function(){this.player.on(S.default.READY,this._onReady).on(S.default.PLAY,this._onPlay).on(S.default.SUBSCRIBER_STATUS_CHANGE,this._onSubscriberStatusChange).on([P.default.AD_REQUESTED,P.default.AD_STARTED],this._onAdRequested).on(S.default.FATAL_ERROR,this._onFatalError)}},{key:"_initYouboraLibrary",value:function(){var e=l(this.options),t=this.options.metadata.id,n=u(this.isLive,this.options.metadata),r=this.player.currentSrc(),i=Object.assign({},M,{media:o(this.isLive,e,this.options),properties:a(t,n),extraParams:s(this.options,t,r)});this.player.youbora(i)}},{key:"_onReady",value:function(){this._initYouboraLibrary(),this.isLive&&(this.player.youboraplugin.seekedHandler=this.player.youboraplugin.bufferedHandler,this.player.youboraplugin.seekingHandler=function(){}),this.adnalyzer=new C.default(this.player.youboraplugin,this.player)}},{key:"_onPlay",value:function(){this.player&&this.player.youboraplugin&&(this.player.youboraplugin.playHandler(),this._sendChangedEntity("param8",this.player.currentSrc()))}},{key:"_onSubscriberStatusChange",value:function(e){var t=e.data,n=void 0===t?{}:t,r=n.isBBGSubscriber?U.SUBSCRIBED:U.UNSUBSCRIBED;this._sendChangedEntity("param9",r)}},{key:"_sendChangedEntity",value:function(e,t){this.player&&this.player.youboraplugin&&this.player.youboraplugin.viewManager&&this.player.youboraplugin.viewManager.sendChangedEntity&&this.player.youboraplugin.viewManager.sendChangedEntity(e,t)}},{key:"_onAdRequested",value:function(){this.player&&this.player.youboraplugin&&this.player.youboraplugin.playHandler()}},{key:"_onFatalError",value:function(e){this.player&&this.player.youboraplugin&&this.player.youboraplugin.errorHandler("1234",e.error)}}],[{key:"init",value:function(){var t=this;new e(t)}}]),e}();videojs.plugin("YouboraIntegration",I.init),n.default=I},{"../../events/ad-events":16,"../../events/player-events":17,"../../utils/datetime-utils":66,"../../utils/projector-utils":72,"./youbora-adnalyzer":115,"bvp-shims":"bvp-shims",log:"log",resources:"resources"}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var l,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=e("../../events/ad-events"),c=r(d),p=e("../../events/player-events"),f=r(p),h=e("bvp-shims"),v=e("bvp-constant"),y=e("log"),_=r(y),m=new _.default("YouboraAdnalyzer"),g="5.3.0-IMA",b="bb-custom-"+h.version,E=[f.default.ADS_TIMEOUT_ERROR,c.default.ALL_ADS_COMPLETED,c.default.AD_COMPLETED],A=(l={},s(l,v.AD_TYPES.PREROLL,!0),s(l,v.AD_TYPES.MIDROLL,!0),l),P=["_onAdLoaded","_onAdStarted","_onAdPaused","_onAdResumed","_onAdCompleted","_onAllAdsCompleted","_onAdSkipped","_onAdPlaybackProgress"],w=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return P.forEach(function(e){r[e]&&(r[e]=r[e].bind(r))}),r.adnalyzerVersion=g,r.player=n,e.adnalyzer=r,r.duration=0,r.title="",r.inAd=!1,r.adRequested=!1,r.adElapsedTime=0,r.adMediaUrl=null,r.startMonitoring(e,r.player),r.enableAdBufferMonitor(),r.player.on(c.default.AD_LOADED,r._onAdLoaded).on(c.default.AD_STARTED,r._onAdStarted).on(c.default.AD_PAUSED,r._onAdPaused).on(c.default.AD_RESUMED,r._onAdResumed).on(E,r._onAllAdsCompleted).on(c.default.SKIPPED,r._onAdSkipped).on(c.default.AD_PLAYBACK_PROGRESS_UPDATE,r._onAdPlaybackProgress),r}return a(t,e),u(t,[{key:"getAdDuration",value:function(){return this.duration}},{key:"getAdTitle",value:function(){return this.title}},{key:"getAdResource",value:function(){return this.adMediaUrl}},{key:"getAdPlayhead",value:function(){return this.adElapsedTime}},{key:"getAdPlayerVersion",value:function(){return b}},{key:"_onAdLoaded",value:function(e){this._handlesAdType(e)&&(this.duration=e.data.duration,this.title=e.data.title,this.adMediaUrl=e.data.mediaUrl)}},{key:"_onAdStarted",value:function(e){this._handlesAdType(e)&&(this.inAd=!0,this.adRequested||this._handleAdRequest(),this.joinAdHandler(),m.info("AdStarted"))}},{key:"_handleAdRequest",value:function(){this.adRequested=!0,this.adElapsedTime=0,this.playAdHandler()}},{key:"_onAdPaused",value:function(e){this._handlesAdType(e)&&(this.pauseAdHandler(),m.info("AdPaused"))}},{key:"_onAdResumed",value:function(e){this._handlesAdType(e)&&(this.resumeAdHandler(),m.info("AdResumed"))}},{key:"_onAllAdsCompleted",value:function(e){this._handlesAdType(e)&&this.inAd&&(this.endedAdHandler(),this.adRequested=!1,this.duration=0,this.title="",this.inAd=!1,m.info("AllAdsCompleted"))}},{key:"_onAdSkipped",value:function(e){this._handlesAdType(e)&&(this.skipAdHandler(),m.info("AdSkipped"))}},{key:"_onAdPlaybackProgress",value:function(e){this._handlesAdType(e)&&(this.adElapsedTime=e.data.elapsedTime)}},{key:"_handlesAdType",value:function(e){return!(!e||!e.data)&&!!A[e.data.adType]}}]),t}($YB.adnalyzers.Generic);n.default=w},{"../../events/ad-events":16,"../../events/player-events":17,"bvp-constant":"bvp-constant","bvp-shims":"bvp-shims",log:"log"}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=e("../utils/event-target"),d=r(u),c=e("../utils/video-tag-generator"),p=r(c),f=function(e){function t(e,n){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.element=e,r.settings=n,r.tagGenerator=new p.default(n),!e)throw new Error("View element is not provided");return r}return a(t,e),s(t,[{key:"preRender",value:function(){throw new Error("Required method preRender is not implemented.")}},{key:"render",value:function(){this.trigger(t.ON_BEFORE_RENDER);var e=this,n=this.settings.dataSetup,r=this.dispose.bind(this),i=this.tagGenerator.generateVideoTag(),o=i.id;if(!this.preRender(i))return void this.trigger(t.ON_ERROR,{error:new Error("Failed to pre-render video element")});var a=void 0;n.id=o;try{a=window.videojs(o,n)}catch(e){return this.element=null,void this.trigger(t.ON_ERROR,{error:e})}return a.ready(function(){e.element=null,e.trigger(t.ON_RENDER,{player:this})}),a.on("dispose",r),a}},{key:"dispose",value:function(){this.element=this.settings=this.tagGenerator=null,this.trigger(t.ON_DISPOSE),l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeAllEventListeners",this).call(this)}}]),t}(d.default);Object.defineProperties(f,{ON_BEFORE_RENDER:{value:"beforeRender"},ON_RENDER:{value:"render"},ON_DISPOSE:{value:"dispose"},ON_ERROR:{value:"error"}}),n.default=f},{"../utils/event-target":68,"../utils/video-tag-generator":77}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./View"),u=r(l),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"preRender",value:function(e){return this.element.innerHTML="",this.element.appendChild(e),!0}}]),t}(u.default);n.default=d},{"./View":116}],118:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=e("./View"),u=r(l),d="Missing parent node. Cannot attach the video player",c=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));
}return a(t,e),s(t,[{key:"preRender",value:function(e){var t=this.element.parentNode;return t?(t.replaceChild(e,this.element),!0):(this.trigger(u.default.ON_ERROR,{error:new Error(d)}),!1)}}]),t}(u.default);n.default=c},{"./View":116}],119:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("../js/utils/query-string"),s=r(a),l=function(){function e(t){i(this,e),this.params=s.default.parseQueryString(t)}return o(e,[{key:"get",value:function(e){if(this.has(e))return Array.isArray(this.params[e])?this.params[e][0]:this.params[e]}},{key:"getAll",value:function(e){return this.has(e)?Array.isArray(this.params[e])?this.params[e]:[this.params[e]]:[]}},{key:"has",value:function(e){return this.params.hasOwnProperty(e)}}]),e}();n.default=l},{"../js/utils/query-string":73}]},{},[10]);
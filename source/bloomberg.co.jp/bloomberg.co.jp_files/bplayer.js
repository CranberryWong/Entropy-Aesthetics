require=function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";t.exports=function(e,t,r){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,r);if("function"!=typeof t)throw new TypeError("predicate must be a function");var n=Object(e),o=n.length;if(0===o)return-1;for(var i=0;i<o;i++)if(t.call(r,n[i],i,n))return i;return-1}},{}],2:[function(e,t,r){"use strict";function n(e){o(e),this.options=e}function o(e){var t;if(!e)throw new Error("options is required.");for(var r=0;r<l.length;r++)if(t=l[r],!e.hasOwnProperty(t))throw new Error("options."+t+" is required.");if(e.percentage>100||e.percentage<0)throw new Error("options.percentage range should be from 0 to 100.");if(0===e.buckets.length)throw new Error("options.buckets should have at least one bucket.")}function i(e){return new Date>e}function a(e,t){return u.parse(e.get(t))}function s(e,t){var r=u.random().toValue();e.set(t,r)}var u=e("./TestValue"),l=["name","expires","percentage","buckets","storage"],c="abt-";n.prototype={options:null,initialize:function(){var e,t=this.options.storage,r=this.getTestName();return i(this.options.expires)?void t.del(r):(e=a(t,r))?void t.set(r,e.toValue()):void s(t,r)},isBucketed:function(){var e=a(this.options.storage,this.getTestName());return!!e},getBucket:function(){var e=a(this.options.storage,this.getTestName());return e?e.getBucket(this.options.percentage,this.options.buckets):null},setBucket:function(e){var t=u.generateValueInBucket(this.options.percentage,this.options.buckets,e);this.options.storage.set(this.getTestName(),t.toValue())},forceOutOfBuckets:function(){var e=u.generateValueOutOfBuckets(this.options.percentage);this.options.storage.set(this.getTestName(),e.toValue())},getTestName:function(){return c+this.options.name}},t.exports=n},{"./TestValue":5}],3:[function(e,t,r){"use strict";function n(e){e&&(this.abTests=o(e))}function o(e){for(var t,r,n,o=Object.keys(e),u={},l=0;l<o.length;l++)n=o[l],t=e[n],r=new a(t.storageType||s,t),u[n]=new i({name:n,expires:t.expires,percentage:t.percentage,buckets:t.buckets,storage:r});return u}var i=e("./ABTest"),a=e("./Storage"),s="localStorage";n.prototype={abTests:null,initialize:function(){for(var e=Object.keys(this.abTests),t=0;t<e.length;t++)this.abTests[e[t]].initialize()},getABTest:function(e){return this.abTests[e]}},t.exports=n},{"./ABTest":2,"./Storage":4}],4:[function(e,t,r){"use strict";function n(e,t){if(this.options=t||{},this.storage=s[e],this.isCookieStorage="cookie"===e,!this.storage)throw new Error("Invalid storageType")}function o(e){return e.path||"/"}function i(e){return e.domain||window.location.hostname}function a(){return new Date((new Date).getTime()+u)}var s={cookie:e("./storage/Cookie"),localStorage:e("./storage/LocalStorage")},u=2592e6;n.prototype={options:null,storage:null,isCookieStorage:null,get:function(e){return this.storage.get(e)},set:function(e,t){return this.isCookieStorage?void this.storage.set(e,t,a(),o(this.options),i(this.options)):void this.storage.set(e,t)},del:function(e){return this.isCookieStorage?void this.storage.del(e,o(this.options),i(this.options)):void this.storage.del(e)}},t.exports=n},{"./storage/Cookie":6,"./storage/LocalStorage":7}],5:[function(e,t,r){"use strict";function n(e,t){this.scopedPercentageValue=e,this.scopedBucketValue=t}function o(e){return Math.floor(Math.random()*e)}function i(e,t,r){return e>=t&&e<r}function a(e,t){var r=100*e/l;return r<t}function s(e,t){var r=Math.floor(e*t.length/c);return t[r]}var u="|",l=1e3,c=1e3;n.prototype={scopedPercentageValue:null,scopedBucketValue:null,getBucket:function(e,t){return a(this.scopedPercentageValue,e)?s(this.scopedBucketValue,t):null},toValue:function(){return this.scopedPercentageValue+u+this.scopedBucketValue}},n.generateValueInBucket=function(e,t,r){var o,i=Math.floor(e*l/100),a=t.indexOf(r);if(a<0)throw new Error("bucket value: "+r+" not found in buckets");return i=i>=0?i-1:i,o=Math.floor((a+1)*c/t.length),o=o>=0?o-1:o,new n(i,o)},n.generateValueOutOfBuckets=function(e){var t;if(e>=100)throw new Error("You can't force user out of bucket when percentage >= 100.");return t=l-1,new n(t,1)},n.random=function(){return new n(o(l),o(c))},n.parse=function(e){var t,r,o;return e?(t=e.split(u),r=parseInt(t[0],10),o=parseInt(t[1],10),isNaN(r)||isNaN(o)?null:i(r,0,l)&&i(o,0,c)?new n(r,o):null):null},t.exports=n},{}],6:[function(e,t,r){"use strict";function n(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}var o={get:function(e){var t=document.cookie.match("(^|;) ?"+n(e)+"=([^;$]*)");return t?t[2]:null},set:function(e,t,r,n,o){var i=r?"; expires="+r.toGMTString():"",a=n?"; path="+n:"; path=/",s=o?"; domain="+o:"";document.cookie=e+"="+t+i+a+s},del:function(e,t,r){this.set(e,"",new Date(-1),t,r)}};t.exports=o},{}],7:[function(e,t,r){"use strict";function n(){try{return o in window&&window[o]}catch(e){return null}}var o="localStorage",i={get:function(e){var t=n();return t?t.getItem(e):null},set:function(e,t){var r=n();r&&r.setItem(e,t)},del:function(e){var t=n();t&&t.removeItem(e)}};t.exports=i},{}],8:[function(e,t,r){"use strict";"undefined"!=typeof window&&e("whatwg-fetch")},{"whatwg-fetch":9}],9:[function(e,t,r){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader,r=a(t);return t.readAsArrayBuffer(e),r}function u(e){var t=new FileReader,r=a(t);return t.readAsText(e),r}function l(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(_.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(_.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(_.arrayBuffer&&_.blob&&g(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!m(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var r=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function y(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var _={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(_.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},m=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];this.map[e]=o?o+","+n:n},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=r(n)},o.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},_.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];v.redirect=function(e,t){if(E.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=p,e.Response=v,e.fetch=function(e,t){return new Promise(function(r,n){var o=new p(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;r(new v(t,e))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&_.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],10:[function(e,t,r){"use strict";var n=e("core-js/library/fn/object/assign");Object.assign=Object.assign?Object.assign:n},{"core-js/library/fn/object/assign":13}],11:[function(e,t,r){"use strict";if("undefined"!=typeof window){var n=e("core-js/library/es6/promise");window.Promise=window.Promise?window.Promise:n}},{"core-js/library/es6/promise":12}],12:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/_core").Promise},{"../modules/_core":21,"../modules/es6.object.to-string":77,"../modules/es6.promise":78,"../modules/es6.string.iterator":79,"../modules/web.dom.iterable":80}],13:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":21,"../../modules/es6.object.assign":76}],14:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],15:[function(e,t,r){t.exports=function(){}},{}],16:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],17:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":38}],18:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,r,a){var s,u=n(t),l=o(u.length),c=i(a,l);if(e&&r!=r){for(;l>c;)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},{"./_to-index":66,"./_to-iobject":68,"./_to-length":69}],19:[function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":20,"./_wks":73}],20:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],21:[function(e,t,r){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],22:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":14}],23:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],24:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":28}],25:[function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,i=n(o)&&n(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":30,"./_is-object":38}],26:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],27:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_ctx"),a=e("./_hide"),s="prototype",u=function(e,t,r){var l,c,f,d=e&u.F,p=e&u.G,h=e&u.S,y=e&u.P,v=e&u.B,_=e&u.W,b=p?o:o[t]||(o[t]={}),g=b[s],m=p?n:h?n[t]:(n[t]||{})[s];p&&(r=t);for(l in r)c=!d&&m&&void 0!==m[l],c&&l in b||(f=c?m[l]:r[l],b[l]=p&&"function"!=typeof m[l]?r[l]:v&&c?i(f,n):_&&m[l]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):y&&"function"==typeof f?i(Function.call,f):f,y&&((b.virtual||(b.virtual={}))[l]=f,e&u.R&&g&&!g[l]&&a(g,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":21,"./_ctx":22,"./_global":30,"./_hide":32}],28:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],29:[function(e,t,r){var n=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),u=e("./core.get-iterator-method"),l={},c={},r=t.exports=function(e,t,r,f,d){var p,h,y,v,_=d?function(){return e}:u(e),b=n(r,f,t?2:1),g=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(i(_)){for(p=s(e.length);p>g;g++)if(v=t?b(a(h=e[g])[0],h[1]):b(e[g]),v===l||v===c)return v}else for(y=_.call(e);!(h=y.next()).done;)if(v=o(y,b,h.value,t),v===l||v===c)return v};r.BREAK=l,r.RETURN=c},{"./_an-object":17,"./_ctx":22,"./_is-array-iter":37,"./_iter-call":39,"./_to-length":69,"./core.get-iterator-method":74}],30:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],31:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],32:[function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":24,"./_object-dp":49,"./_property-desc":56}],33:[function(e,t,r){t.exports=e("./_global").document&&document.documentElement},{"./_global":30}],34:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":24,"./_dom-create":25,"./_fails":28}],35:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],36:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":20}],37:[function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},{"./_iterators":44,"./_wks":73}],38:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],39:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},{"./_an-object":17}],40:[function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},{"./_hide":32,"./_object-create":48,"./_property-desc":56,"./_set-to-string-tag":60,"./_wks":73}],41:[function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_has"),u=e("./_iterators"),l=e("./_iter-create"),c=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",y="keys",v="values",_=function(){return this};t.exports=function(e,t,r,b,g,m,w){l(r,t,b);var E,O,S,P=function(e){if(!p&&e in I)return I[e];switch(e){case y:return function(){return new r(this,e)};case v:return function(){return new r(this,e)}}return function(){return new r(this,e)}},k=t+" Iterator",A=g==v,T=!1,I=e.prototype,j=I[d]||I[h]||g&&I[g],R=j||P(g),x=g?A?P("entries"):R:void 0,C="Array"==t?I.entries||j:j;if(C&&(S=f(C.call(new e)),S!==Object.prototype&&(c(S,k,!0),n||s(S,d)||a(S,d,_))),A&&j&&j.name!==v&&(T=!0,R=function(){return j.call(this)}),n&&!w||!p&&!T&&I[d]||a(I,d,R),u[t]=R,u[k]=_,g)if(E={values:A?R:P(v),keys:m?R:P(y),entries:x},w)for(O in E)O in I||i(I,O,E[O]);else o(o.P+o.F*(p||T),t,E);return E}},{"./_export":27,"./_has":31,"./_hide":32,"./_iter-create":40,"./_iterators":44,"./_library":45,"./_object-gpo":52,"./_redefine":58,"./_set-to-string-tag":60,"./_wks":73}],42:[function(e,t,r){var n=e("./_wks")("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},{"./_wks":73}],43:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],44:[function(e,t,r){t.exports={}},{}],45:[function(e,t,r){t.exports=!0},{}],46:[function(e,t,r){var n=e("./_global"),o=e("./_task").set,i=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==e("./_cof")(a);t.exports=function(){var e,t,r,l=function(){var n,o;for(u&&(n=a.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(l)};else if(i){var c=!0,f=document.createTextNode("");new i(l).observe(f,{characterData:!0}),r=function(){f.data=c=!c}}else if(s&&s.resolve){var d=s.resolve();r=function(){d.then(l)}}else r=function(){o.call(n,l)};return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},{"./_cof":20,"./_global":30,"./_task":65}],47:[function(e,t,r){"use strict";var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie"),a=e("./_to-object"),s=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=a(e),u=arguments.length,l=1,c=o.f,f=i.f;u>l;)for(var d,p=s(arguments[l++]),h=c?n(p).concat(c(p)):n(p),y=h.length,v=0;y>v;)f.call(p,d=h[v++])&&(r[d]=p[d]);return r}:u},{"./_fails":28,"./_iobject":36,"./_object-gops":51,"./_object-keys":54,"./_object-pie":55,"./_to-object":70}],48:[function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},u="prototype",l=function(){var t,r=e("./_dom-create")("iframe"),n=i.length,o="<",a=">";for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write(o+"script"+a+"document.F=Object"+o+"/script"+a),t.close(),l=t.F;n--;)delete l[u][i[n]];return l()};t.exports=Object.create||function(e,t){var r;return null!==e?(s[u]=n(e),r=new s,s[u]=null,r[a]=e):r=l(),void 0===t?r:o(r,t)}},{"./_an-object":17,"./_dom-create":25,"./_enum-bug-keys":26,"./_html":33,"./_object-dps":50,"./_shared-key":61}],49:[function(e,t,r){var n=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),a=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":17,"./_descriptors":24,"./_ie8-dom-define":34,"./_to-primitive":71}],50:[function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},{"./_an-object":17,"./_descriptors":24,"./_object-dp":49,"./_object-keys":54}],51:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],52:[function(e,t,r){var n=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":31,"./_shared-key":61,"./_to-object":70}],53:[function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=o(e),u=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~i(l,r)||l.push(r));return l}},{"./_array-includes":18,"./_has":31,"./_shared-key":61,"./_to-iobject":68}],54:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":26,"./_object-keys-internal":53}],55:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],56:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],57:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},{"./_hide":32}],58:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":32}],59:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_core"),i=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":21,"./_descriptors":24,"./_global":30,"./_object-dp":49,"./_wks":73}],60:[function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./_has":31,"./_object-dp":49,"./_wks":73}],61:[function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":62,"./_uid":72}],62:[function(e,t,r){var n=e("./_global"),o="__core-js_shared__",i=n[o]||(n[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":30}],63:[function(e,t,r){var n=e("./_an-object"),o=e("./_a-function"),i=e("./_wks")("species");t.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},{"./_a-function":14,"./_an-object":17,"./_wks":73}],64:[function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),l=s.length;return u<0||u>=l?e?"":void 0:(i=s.charCodeAt(u),i<55296||i>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},{"./_defined":23,"./_to-integer":67}],65:[function(e,t,r){var n,o,i,a=e("./_ctx"),s=e("./_invoke"),u=e("./_html"),l=e("./_dom-create"),c=e("./_global"),f=c.process,d=c.setImmediate,p=c.clearImmediate,h=c.MessageChannel,y=0,v={},_="onreadystatechange",b=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},g=function(e){b.call(e.data)};d&&p||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return v[++y]=function(){s("function"==typeof e?e:Function(e),t)},n(y),y},p=function(e){delete v[e]},"process"==e("./_cof")(f)?n=function(e){f.nextTick(a(b,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=g,n=a(i.postMessage,i,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",g,!1)):n=_ in l("script")?function(e){u.appendChild(l("script"))[_]=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),t.exports={set:d,clear:p}},{"./_cof":20,"./_ctx":22,"./_dom-create":25,"./_global":30,"./_html":33,"./_invoke":35}],66:[function(e,t,r){var n=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":67}],67:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],68:[function(e,t,r){var n=e("./_iobject"),o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":23,"./_iobject":36}],69:[function(e,t,r){var n=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":67}],70:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":23}],71:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":38}],72:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],73:[function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i,s=t.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))};s.store=n},{"./_global":30,"./_shared":62,"./_uid":72}],74:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},{"./_classof":19,"./_core":21,"./_iterators":44,"./_wks":73}],75:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":15,"./_iter-define":41,"./_iter-step":43,"./_iterators":44,"./_to-iobject":68}],76:[function(e,t,r){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":27,"./_object-assign":47}],77:[function(e,t,r){},{}],78:[function(e,t,r){"use strict";var n,o,i,a=e("./_library"),s=e("./_global"),u=e("./_ctx"),l=e("./_classof"),c=e("./_export"),f=e("./_is-object"),d=e("./_a-function"),p=e("./_an-instance"),h=e("./_for-of"),y=e("./_species-constructor"),v=e("./_task").set,_=e("./_microtask")(),b="Promise",g=s.TypeError,m=s.process,w=s[b],m=s.process,E="process"==l(m),O=function(){},S=!!function(){try{var t=w.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(O,O)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(O)instanceof r}catch(e){}}(),P=function(e,t){return e===t||e===w&&t===i},k=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},A=function(e){return P(w,e)?new T(e):new o(e)},T=o=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw g("Bad Promise constructor");t=e,r=n}),this.resolve=d(t),this.reject=d(r)},I=function(e){try{e()}catch(e){return{error:e}}},j=function(e,t){if(!e._n){e._n=!0;var r=e._c;_(function(){for(var n=e._v,o=1==e._s,i=0,a=function(t){var r,i,a=o?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{a?(o||(2==e._h&&C(e),e._h=1),a===!0?r=n:(l&&l.enter(),r=a(n),l&&l.exit()),r===t.promise?u(g("Promise-chain cycle")):(i=k(r))?i.call(r,s,u):s(r)):u(n)}catch(e){u(e)}};r.length>i;)a(r[i++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){v.call(s,function(){var t,r,n,o=e._v;if(x(e)&&(t=I(function(){E?m.emit("unhandledRejection",o,e):(r=s.onunhandledrejection)?r({promise:e,reason:o}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=E||x(e)?2:1),e._a=void 0,t)throw t.error})},x=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!x(t.promise))return!1;
return!0},C=function(e){v.call(s,function(){var t;E?m.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},L=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw g("Promise can't be resolved itself");(t=k(e))?_(function(){var n={_w:r,_d:!1};try{t.call(e,u(L,n,1),u(D,n,1))}catch(e){D.call(n,e)}}):(r._v=e,r._s=1,j(r,!1))}catch(e){D.call({_w:r,_d:!1},e)}}};S||(w=function(e){p(this,w,b,"_h"),d(e),n.call(this);try{e(u(L,this,1),u(D,this,1))}catch(e){D.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=e("./_redefine-all")(w.prototype,{then:function(e,t){var r=A(y(this,w));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=E?m.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&j(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),T=function(){var e=new n;this.promise=e,this.resolve=u(L,e,1),this.reject=u(D,e,1)}),c(c.G+c.W+c.F*!S,{Promise:w}),e("./_set-to-string-tag")(w,b),e("./_set-species")(b),i=e("./_core")[b],c(c.S+c.F*!S,b,{reject:function(e){var t=A(this),r=t.reject;return r(e),t.promise}}),c(c.S+c.F*(a||!S),b,{resolve:function(e){if(e instanceof w&&P(e.constructor,this))return e;var t=A(this),r=t.resolve;return r(e),t.promise}}),c(c.S+c.F*!(S&&e("./_iter-detect")(function(e){w.all(e).catch(O)})),b,{all:function(e){var t=this,r=A(t),n=r.resolve,o=r.reject,i=I(function(){var r=[],i=0,a=1;h(e,!1,function(e){var s=i++,u=!1;r.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--a||n(r))},o)}),--a||n(r)});return i&&o(i.error),r.promise},race:function(e){var t=this,r=A(t),n=r.reject,o=I(function(){h(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o&&n(o.error),r.promise}})},{"./_a-function":14,"./_an-instance":16,"./_classof":19,"./_core":21,"./_ctx":22,"./_export":27,"./_for-of":29,"./_global":30,"./_is-object":38,"./_iter-detect":42,"./_library":45,"./_microtask":46,"./_redefine-all":57,"./_set-species":59,"./_set-to-string-tag":60,"./_species-constructor":63,"./_task":65,"./_wks":73}],79:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":41,"./_string-at":64}],80:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),o=e("./_hide"),i=e("./_iterators"),a=e("./_wks")("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var l=s[u],c=n[l],f=c&&c.prototype;f&&!f[a]&&o(f,a,l),i[l]=i.Array}},{"./_global":30,"./_hide":32,"./_iterators":44,"./_wks":73,"./es6.array.iterator":75}],81:[function(e,t,r){"use strict";var n,o=e("es5-ext/object/assign"),i=e("es5-ext/object/normalize-options"),a=e("es5-ext/object/is-callable"),s=e("es5-ext/string/#/contains");n=t.exports=function(e,t){var r,n,a,u,l;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(r=a=!0,n=!1):(r=s.call(e,"c"),n=s.call(e,"e"),a=s.call(e,"w")),l={value:t,configurable:r,enumerable:n,writable:a},u?o(i(u),l):l},n.gs=function(e,t,r){var n,u,l,c;return"string"!=typeof e?(l=r,r=t,t=e,e=null):l=arguments[3],null==t?t=void 0:a(t)?null==r?r=void 0:a(r)||(l=r,r=void 0):(l=t,t=r=void 0),null==e?(n=!0,u=!1):(n=s.call(e,"c"),u=s.call(e,"e")),c={get:t,set:r,configurable:n,enumerable:u},l?o(i(l),c):c}},{"es5-ext/object/assign":83,"es5-ext/object/is-callable":86,"es5-ext/object/normalize-options":90,"es5-ext/string/#/contains":92}],82:[function(e,t,r){"use strict";t.exports=new Function("return this")()},{}],83:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":84,"./shim":85}],84:[function(e,t,r){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],85:[function(e,t,r){"use strict";var n=e("../keys"),o=e("../valid-value"),i=Math.max;t.exports=function(e,t){var r,a,s,u=i(arguments.length,2);for(e=Object(o(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},a=1;a<u;++a)t=arguments[a],n(t).forEach(s);if(void 0!==r)throw r;return e}},{"../keys":87,"../valid-value":91}],86:[function(e,t,r){"use strict";t.exports=function(e){return"function"==typeof e}},{}],87:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":88,"./shim":89}],88:[function(e,t,r){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],89:[function(e,t,r){"use strict";var n=Object.keys;t.exports=function(e){return n(null==e?e:Object(e))}},{}],90:[function(e,t,r){"use strict";var n=Array.prototype.forEach,o=Object.create,i=function(e,t){var r;for(r in e)t[r]=e[r]};t.exports=function(e){var t=o(null);return n.call(arguments,function(e){null!=e&&i(Object(e),t)}),t}},{}],91:[function(e,t,r){"use strict";t.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},{}],92:[function(e,t,r){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":93,"./shim":94}],93:[function(e,t,r){"use strict";var n="razdwatrzy";t.exports=function(){return"function"==typeof n.contains&&(n.contains("dwa")===!0&&n.contains("foo")===!1)}},{}],94:[function(e,t,r){"use strict";var n=String.prototype.indexOf;t.exports=function(e){return n.call(this,e,arguments[1])>-1}},{}],95:[function(e,t,r){"use strict";function n(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var r=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(void 0!==o&&null!==o)for(var i=Object.keys(Object(o)),a=0,s=i.length;a<s;a++){var u=i[a],l=Object.getOwnPropertyDescriptor(o,u);void 0!==l&&l.enumerable&&(r[u]=o[u])}}return r}function o(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}t.exports={assign:n,polyfill:o}},{}],96:[function(e,t,r){(function(n,o){!function(e,n){"object"==typeof r&&"undefined"!=typeof t?t.exports=n():"function"==typeof define&&define.amd?define(n):e.ES6Promise=n()}(this,function(){"use strict";function t(e){return"function"==typeof e||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function i(e){W=e}function a(e){$=e}function s(){return function(){return n.nextTick(d)}}function u(){return"undefined"!=typeof Q?function(){Q(d)}:f()}function l(){var e=0,t=new Z(d),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<K;e+=2){var t=re[e],r=re[e+1];t(r),re[e]=void 0,re[e+1]=void 0}K=0}function p(){try{var t=e,r=t("vertx");return Q=r.runOnLoop||r.runOnContext,u()}catch(e){return f()}}function h(e,t){var r=arguments,n=this,o=new this.constructor(v);void 0===o[oe]&&L(o);var i=n._state;return i?!function(){var e=r[i-1];$(function(){return x(i,o,e,n._result)})}():T(n,o,e,t),o}function y(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(v);return S(r,e),r}function v(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function g(e){try{return e.then}catch(e){return ue.error=e,ue}}function m(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function w(e,t,r){$(function(e){var n=!1,o=m(r,t,function(r){n||(n=!0,t!==r?S(e,r):k(e,r))},function(t){n||(n=!0,A(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&o&&(n=!0,A(e,o))},e)}function E(e,t){t._state===ae?k(e,t._result):t._state===se?A(e,t._result):T(t,void 0,function(t){return S(e,t)},function(t){return A(e,t)})}function O(e,t,n){t.constructor===e.constructor&&n===h&&t.constructor.resolve===y?E(e,t):n===ue?A(e,ue.error):void 0===n?k(e,t):r(n)?w(e,t,n):k(e,t)}function S(e,r){e===r?A(e,_()):t(r)?O(e,r,g(r)):k(e,r)}function P(e){e._onerror&&e._onerror(e._result),I(e)}function k(e,t){e._state===ie&&(e._result=t,e._state=ae,0!==e._subscribers.length&&$(I,e))}function A(e,t){e._state===ie&&(e._state=se,e._result=t,$(P,e))}function T(e,t,r,n){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+ae]=r,o[i+se]=n,0===i&&e._state&&$(I,e)}function I(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)n=t[a],o=t[a+r],n?x(r,n,o,i):o(i);e._subscribers.length=0}}function j(){this.error=null}function R(e,t){try{return e(t)}catch(e){return le.error=e,le}}function x(e,t,n,o){var i=r(n),a=void 0,s=void 0,u=void 0,l=void 0;if(i){if(a=R(n,o),a===le?(l=!0,s=a.error,a=null):u=!0,t===a)return void A(t,b())}else a=o,u=!0;t._state!==ie||(i&&u?S(t,a):l?A(t,s):e===ae?k(t,a):e===se&&A(t,a))}function C(e,t){try{t(function(t){S(e,t)},function(t){A(e,t)})}catch(t){A(e,t)}}function D(){return ce++}function L(e){e[oe]=ce++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[oe]||L(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&k(this.promise,this._result))):A(this.promise,N())}function N(){return new Error("Array Methods must be provided an Array")}function U(e){return new M(this,e).promise}function B(e){var t=this;return new t(Y(e)?function(r,n){for(var o=e.length,i=0;i<o;i++)t.resolve(e[i]).then(r,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function V(e){var t=this,r=new t(v);return A(r,e),r}function F(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function H(e){this[oe]=D(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&F(),this instanceof H?C(this,e):G())}function q(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=H}var z=void 0;z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=z,K=0,Q=void 0,W=void 0,$=function(e,t){re[K]=e,re[K+1]=t,K+=2,2===K&&(W?W(d):ne())},J="undefined"!=typeof window?window:void 0,X=J||{},Z=X.MutationObserver||X.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof n&&"[object process]"==={}.toString.call(n),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,re=new Array(1e3),ne=void 0;ne=ee?s():Z?l():te?c():void 0===J&&"function"==typeof e?p():f();var oe=Math.random().toString(36).substring(16),ie=void 0,ae=1,se=2,ue=new j,le=new j,ce=0;return M.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===ie&&r<e;r++)this._eachEntry(t[r],r)},M.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===y){var o=g(e);if(o===h&&e._state!==ie)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(r===H){var i=new r(v);O(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},M.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===ie&&(this._remaining--,e===se?A(n,r):this._result[t]=r),0===this._remaining&&k(n,this._result)},M.prototype._willSettleAt=function(e,t){var r=this;T(e,void 0,function(e){return r._settledAt(ae,t,e)},function(e){return r._settledAt(se,t,e)})},H.all=U,H.race=B,H.resolve=y,H.reject=V,H._setScheduler=i,H._setAsap=a,H._asap=$,H.prototype={constructor:H,then:h,catch:function(e){return this.then(null,e)}},H.polyfill=q,H.Promise=H,H})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:110}],97:[function(e,t,r){"use strict";e("./is-implemented")()||Object.defineProperty(e("es5-ext/global"),"Symbol",{value:e("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":98,"./polyfill":100,"es5-ext/global":82}],98:[function(e,t,r){"use strict";var n={object:!0,symbol:!0};t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&(!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag])}},{}],99:[function(e,t,r){"use strict";t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},{}],100:[function(e,t,r){"use strict";var n,o,i,a,s=e("d"),u=e("./validate-symbol"),l=Object.create,c=Object.defineProperties,f=Object.defineProperty,d=Object.prototype,p=l(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),a=!0}catch(e){}}var h=function(){var e=l(null);return function(t){for(var r,n,o=0;e[t+(o||"")];)++o;return t+=o||"",e[t]=!0,r="@@"+t,f(d,r,s.gs(null,function(e){n||(n=!0,f(this,r,s(e)),n=!1)})),r}}();i=function(e){if(this instanceof i)throw new TypeError("TypeError: Symbol is not a constructor");return o(e)},t.exports=o=function e(t){var r;if(this instanceof e)throw new TypeError("TypeError: Symbol is not a constructor");return a?n(t):(r=l(i.prototype),t=void 0===t?"":String(t),c(r,{__description__:s("",t),__name__:s("",h(t))}))},c(o,{for:s(function(e){return p[e]?p[e]:p[e]=o(String(e))}),keyFor:s(function(e){var t;u(e);for(t in p)if(p[t]===e)return t}),hasInstance:s("",n&&n.hasInstance||o("hasInstance")),isConcatSpreadable:s("",n&&n.isConcatSpreadable||o("isConcatSpreadable")),iterator:s("",n&&n.iterator||o("iterator")),match:s("",n&&n.match||o("match")),replace:s("",n&&n.replace||o("replace")),search:s("",n&&n.search||o("search")),species:s("",n&&n.species||o("species")),split:s("",n&&n.split||o("split")),toPrimitive:s("",n&&n.toPrimitive||o("toPrimitive")),toStringTag:s("",n&&n.toStringTag||o("toStringTag")),unscopables:s("",n&&n.unscopables||o("unscopables"))}),c(i.prototype,{constructor:s(o),toString:s("",function(){return this.__name__})}),c(o.prototype,{toString:s(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:s(function(){return u(this)})}),f(o.prototype,o.toPrimitive,s("",function(){var e=u(this);return"symbol"==typeof e?e:e.toString()})),f(o.prototype,o.toStringTag,s("c","Symbol")),f(i.prototype,o.toStringTag,s("c",o.prototype[o.toStringTag])),f(i.prototype,o.toPrimitive,s("c",o.prototype[o.toPrimitive]))},{"./validate-symbol":101,d:81}],101:[function(e,t,r){"use strict";var n=e("./is-symbol");t.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":99}],102:[function(e,t,r){"use strict";var n=/[|\\{}()[\]^$+*?.]/g;t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(n,"\\$&")}},{}],103:[function(e,t,r){(function(e){function n(e,t){return e.set(t[0],t[1]),e}function o(e,t){return e.add(t),e}function i(e,t){for(var r=-1,n=e?e.length:0;++r<n&&t(e[r],r,e)!==!1;);return e}function a(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function s(e,t,r,n){var o=-1,i=e?e.length:0;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function u(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function l(e,t){return null==e?void 0:e[t]}function c(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function f(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function d(e,t){return function(r){return e(t(r))}}function p(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function h(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function y(){this.__data__=Bt?Bt(null):{}}function v(e){return this.has(e)&&delete this.__data__[e]}function _(e){var t=this.__data__;if(Bt){var r=t[e];return r===Ie?void 0:r}return wt.call(t,e)?t[e]:void 0}function b(e){var t=this.__data__;return Bt?void 0!==t[e]:wt.call(t,e)}function g(e,t){var r=this.__data__;return r[e]=Bt&&void 0===t?Ie:t,this}function m(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function w(){this.__data__=[]}function E(e){var t=this.__data__,r=V(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():jt.call(t,r,1),!0}function O(e){var t=this.__data__,r=V(t,e);return r<0?void 0:t[r][1]}function S(e){return V(this.__data__,e)>-1}function P(e,t){var r=this.__data__,n=V(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}function k(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function A(){this.__data__={hash:new h,map:new(Lt||m),string:new h}}function T(e){return ae(this,e).delete(e)}function I(e){return ae(this,e).get(e)}function j(e){return ae(this,e).has(e)}function R(e,t){return ae(this,e).set(e,t),this}function x(e){this.__data__=new m(e)}function C(){this.__data__=new m}function D(e){return this.__data__.delete(e)}function L(e){return this.__data__.get(e)}function M(e){return this.__data__.has(e)}function N(e,t){var r=this.__data__;if(r instanceof m){var n=r.__data__;if(!Lt||n.length<Te-1)return n.push([e,t]),this;r=this.__data__=new k(n)}return r.set(e,t),this}function U(e,t){var r=Wt(e)||be(e)?u(e.length,String):[],n=r.length,o=!!n;for(var i in e)!t&&!wt.call(e,i)||o&&("length"==i||fe(i,n))||r.push(i);return r}function B(e,t,r){var n=e[t];wt.call(e,t)&&_e(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function V(e,t){for(var r=e.length;r--;)if(_e(e[r][0],t))return r;return-1}function F(e,t){return e&&ne(t,Pe(t),e)}function G(e,t,r,n,o,a,s){var u;if(n&&(u=a?n(e,o,a,s):n(e)),void 0!==u)return u;if(!Oe(e))return e;var l=Wt(e);if(l){if(u=ue(e),!t)return re(e,u)}else{var f=Qt(e),d=f==Me||f==Ne;if($t(e))return Q(e,t);if(f==Ve||f==Re||d&&!a){if(c(e))return a?e:{};if(u=le(d?{}:e),!t)return oe(e,F(u,e))}else{if(!ut[f])return a?e:{};u=ce(e,f,G,t)}}s||(s=new x);var p=s.get(e);if(p)return p;if(s.set(e,u),!l)var h=r?ie(e):Pe(e);return i(h||e,function(o,i){h&&(i=o,o=e[i]),B(u,i,G(o,t,r,n,i,e,s))}),u}function H(e){return Oe(e)?Tt(e):{}}function q(e,t,r){var n=t(e);return Wt(e)?n:a(n,r(e))}function z(e){return Et.call(e)}function Y(e){if(!Oe(e)||pe(e))return!1;var t=we(e)||c(e)?Ot:at;return t.test(ye(e))}function K(e){if(!he(e))return Ct(e);var t=[];for(var r in Object(e))wt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Q(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}function W(e){var t=new e.constructor(e.byteLength);return new kt(t).set(new kt(e)),t}function $(e,t){var r=t?W(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function J(e,t,r){var o=t?r(f(e),!0):f(e);return s(o,n,new e.constructor)}function X(e){var t=new e.constructor(e.source,it.exec(e));return t.lastIndex=e.lastIndex,t}function Z(e,t,r){var n=t?r(p(e),!0):p(e);return s(n,o,new e.constructor)}function ee(e){return Yt?Object(Yt.call(e)):{}}function te(e,t){var r=t?W(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function re(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function ne(e,t,r,n){r||(r={});for(var o=-1,i=t.length;++o<i;){var a=t[o],s=n?n(r[a],e[a],a,r,e):void 0;B(r,a,void 0===s?e[a]:s)}return r}function oe(e,t){return ne(e,Kt(e),t)}function ie(e){return q(e,Pe,Kt)}function ae(e,t){var r=e.__data__;return de(t)?r["string"==typeof t?"string":"hash"]:r.map}function se(e,t){var r=l(e,t);return Y(r)?r:void 0}function ue(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&wt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function le(e){return"function"!=typeof e.constructor||he(e)?{}:H(At(e))}function ce(e,t,r,n){var o=e.constructor;switch(t){case Ke:return W(e);case Ce:case De:return new o(+e);case Qe:return $(e,n);case We:case $e:case Je:case Xe:case Ze:case et:case tt:case rt:case nt:return te(e,n);case Ue:return J(e,n,r);case Be:case qe:return new o(e);case Ge:return X(e);case He:return Z(e,n,r);case ze:return ee(e)}}function fe(e,t){return t=null==t?je:t,!!t&&("number"==typeof e||st.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function pe(e){return!!gt&&gt in e}function he(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||_t;return e===r}function ye(e){if(null!=e){try{return mt.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ve(e){return G(e,!0,!0)}function _e(e,t){return e===t||e!==e&&t!==t}function be(e){return me(e)&&wt.call(e,"callee")&&(!It.call(e,"callee")||Et.call(e)==Re)}function ge(e){return null!=e&&Ee(e.length)&&!we(e)}function me(e){return Se(e)&&ge(e)}function we(e){var t=Oe(e)?Et.call(e):"";return t==Me||t==Ne}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=je}function Oe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Se(e){return!!e&&"object"==typeof e}function Pe(e){return ge(e)?U(e):K(e)}function ke(){return[]}function Ae(){return!1}var Te=200,Ie="__lodash_hash_undefined__",je=9007199254740991,Re="[object Arguments]",xe="[object Array]",Ce="[object Boolean]",De="[object Date]",Le="[object Error]",Me="[object Function]",Ne="[object GeneratorFunction]",Ue="[object Map]",Be="[object Number]",Ve="[object Object]",Fe="[object Promise]",Ge="[object RegExp]",He="[object Set]",qe="[object String]",ze="[object Symbol]",Ye="[object WeakMap]",Ke="[object ArrayBuffer]",Qe="[object DataView]",We="[object Float32Array]",$e="[object Float64Array]",Je="[object Int8Array]",Xe="[object Int16Array]",Ze="[object Int32Array]",et="[object Uint8Array]",tt="[object Uint8ClampedArray]",rt="[object Uint16Array]",nt="[object Uint32Array]",ot=/[\\^$.*+?()[\]{}|]/g,it=/\w*$/,at=/^\[object .+?Constructor\]$/,st=/^(?:0|[1-9]\d*)$/,ut={};ut[Re]=ut[xe]=ut[Ke]=ut[Qe]=ut[Ce]=ut[De]=ut[We]=ut[$e]=ut[Je]=ut[Xe]=ut[Ze]=ut[Ue]=ut[Be]=ut[Ve]=ut[Ge]=ut[He]=ut[qe]=ut[ze]=ut[et]=ut[tt]=ut[rt]=ut[nt]=!0,ut[Le]=ut[Me]=ut[Ye]=!1;var lt="object"==typeof e&&e&&e.Object===Object&&e,ct="object"==typeof self&&self&&self.Object===Object&&self,ft=lt||ct||Function("return this")(),dt="object"==typeof r&&r&&!r.nodeType&&r,pt=dt&&"object"==typeof t&&t&&!t.nodeType&&t,ht=pt&&pt.exports===dt,yt=Array.prototype,vt=Function.prototype,_t=Object.prototype,bt=ft["__core-js_shared__"],gt=function(){var e=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),mt=vt.toString,wt=_t.hasOwnProperty,Et=_t.toString,Ot=RegExp("^"+mt.call(wt).replace(ot,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=ht?ft.Buffer:void 0,Pt=ft.Symbol,kt=ft.Uint8Array,At=d(Object.getPrototypeOf,Object),Tt=Object.create,It=_t.propertyIsEnumerable,jt=yt.splice,Rt=Object.getOwnPropertySymbols,xt=St?St.isBuffer:void 0,Ct=d(Object.keys,Object),Dt=se(ft,"DataView"),Lt=se(ft,"Map"),Mt=se(ft,"Promise"),Nt=se(ft,"Set"),Ut=se(ft,"WeakMap"),Bt=se(Object,"create"),Vt=ye(Dt),Ft=ye(Lt),Gt=ye(Mt),Ht=ye(Nt),qt=ye(Ut),zt=Pt?Pt.prototype:void 0,Yt=zt?zt.valueOf:void 0;h.prototype.clear=y,h.prototype.delete=v,h.prototype.get=_,h.prototype.has=b,h.prototype.set=g,m.prototype.clear=w,m.prototype.delete=E,m.prototype.get=O,m.prototype.has=S,m.prototype.set=P,k.prototype.clear=A,k.prototype.delete=T,k.prototype.get=I,k.prototype.has=j,k.prototype.set=R,x.prototype.clear=C,x.prototype.delete=D,x.prototype.get=L,x.prototype.has=M,x.prototype.set=N;var Kt=Rt?d(Rt,Object):ke,Qt=z;(Dt&&Qt(new Dt(new ArrayBuffer(1)))!=Qe||Lt&&Qt(new Lt)!=Ue||Mt&&Qt(Mt.resolve())!=Fe||Nt&&Qt(new Nt)!=He||Ut&&Qt(new Ut)!=Ye)&&(Qt=function(e){var t=Et.call(e),r=t==Ve?e.constructor:void 0,n=r?ye(r):void 0;if(n)switch(n){case Vt:return Qe;case Ft:return Ue;case Gt:return Fe;case Ht:return He;case qt:return Ye}return t});var Wt=Array.isArray,$t=xt||Ae;t.exports=ve}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],104:[function(e,t,r){"use strict";function n(){var e=s(c);return o(e)?{fun:!1,pad:!1}:{fun:!i(e),pad:!a(e)}}function o(e){var t=u(s(l),"expressed,eu");return!u(e,"permit")&&t}function i(e){return u(e,"permit")&&!u(e,"2")}function a(e){return u(e,"permit")&&!u(e,"3")}function s(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;$]*)");return t?t[2]:""}function u(e,t){return e.indexOf(t)!==-1}Object.defineProperty(r,"__esModule",{value:!0});var l="notice_behavior",c="cmapi_cookie_privacy";r.default={getConsentInfo:n,funAllowed:function(){return n().fun},padAllowed:function(){return n().pad}},t.exports=r.default},{}],105:[function(e,t,r){"use strict";function n(){var e=a.get(c);if(e){var t=e.split("|"),r=parseInt(t[1],10),n=(new Date).getTime()>r;return{expired:n,geoInfo:JSON.parse(t[0])}}return null}function o(e){var t=new Date,r=i(t,s).getTime(),n=JSON.stringify(e)+"|"+r,o=window.location.hostname,l=i(t,u);a.set(c,n,l,"/",o)}function i(e,t){return new Date(e.getTime()+t*l)}var a=e("./util/Cookie"),s=7,u=365,l=864e5,c="bb_geo_info",f={setGeoInfo:o,getGeoInfo:n};t.exports=f},{"./util/Cookie":107}],106:[function(e,t,r){"use strict";function n(){try{new window.CustomEvent("test")}catch(t){var e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r};e.prototype=window.Event.prototype,window.CustomEvent=e}}function o(){n()}function i(){return window._geoIpInfo?void console.log("Geo IP client is already intialized."):void(new o).getGeoInfo()}e("bb.polyfills/promise"),e("bb.polyfills/fetch");var a=e("./GeoCache"),s={country:"US",region:"US"},u="https://location.bloomberg.com/query",l=2e3,c=3e3;o.prototype={getGeoInfo:function(){if(window._geoIpInfo)return Promise.resolve(window._geoIpInfo);var e=a.getGeoInfo(),t=this;return e?(e.expired&&setTimeout(function(){t._queryGeoIpService().then(function(e){a.setGeoInfo(e)}).catch(function(){console.log("GeoIP cache refresh failed.")})},c),t._dispatchGeoIpReadyEvent(e.geoInfo),Promise.resolve(e.geoInfo)):t._queryGeoIpService().then(function(e){return a.setGeoInfo(e),t._dispatchGeoIpReadyEvent(e),e}).catch(function(){return t._dispatchGeoIpReadyEvent(s),s})},_queryGeoIpService:function(){return new Promise(function(e,t){fetch(u).then(function(e){return e.ok?e.json():void t(new Error("Error while fetching geo-IP URL"))}).then(function(r){return r?void e({country:r.country,region:r.trackingRegion}):void t(new Error("Empty data from service."))}).catch(function(){t(new Error("Error response from service."))}),setTimeout(function(){t(new Error("Timeout"))},l)})},_dispatchGeoIpReadyEvent:function(e){var t=new window.CustomEvent("geo-ip-ready",{detail:e});window._geoIpInfo=e,window.dispatchEvent(t)}},"interactive"===document.readyState||"complete"===document.readyState?i():document.addEventListener("DOMContentLoaded",i),t.exports=o},{"./GeoCache":105,"bb.polyfills/fetch":8,"bb.polyfills/promise":11}],107:[function(e,t,r){"use strict";function n(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;$]*)");return t?t[2]:null}function o(e,t,r,n,o){var i=r?"; expires="+r.toGMTString():"",a=n?"; path="+n:"; path=/",s=o?"; domain="+o:"";document.cookie=e+"="+t+i+a+s}var i={get:n,set:o};t.exports=i},{}],108:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();e("bb.polyfills/promise"),e("bb.polyfills/object/assign"),e("bb.polyfills/fetch");var a=e("ms.geoip"),s=e("ms.consent"),u=e("./UserInfo"),l="https://personalization.bloomberg.com",c=5e3,f="user/recommendations",d="popular/resources",p="user/history",h=6e4,y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.url=t.url||l,this.sites=t.sites||[],this.timeout=t.timeout||c,this.userInfo=new u,this.geoIp=new a}return i(e,[{key:"getRecommended",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.includedSites||(r.includedSites=this.sites);var n=this.url+"/"+f+"/"+e;return Promise.all([this._getGeoInfo("recommended"),this._getUserInfo("recommended")]).then(function(e){var i=o(e,2),a=i[0],s=i[1],u=(new Date).getTimezoneOffset()*h,l=Object.assign({},a,s,{timezoneOffset:u},r);return t._requestResources(n,l)})}},{key:"getUserHistory",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.includedSites||(t.includedSites=this.sites);var r=this.url+"/"+p;return this._getUserInfo("user history").then(function(n){if(!Object.keys(n).length)return[];var o=Object.assign({},n,t);return e._requestResources(r,o)})}},{key:"getPopular",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.includedSites||(t.includedSites=this.sites);var r=this.url+"/"+d;return this._getGeoInfo("popular").then(function(n){var o=Object.assign({},n,t);return e._requestResources(r,o)})}},{key:"_getUserInfo",value:function(e){return s.funAllowed()?this.userInfo.getUserInfo().catch(function(t){return console.log("user info will be left out of "+e+" call due to error: "+t),{}}):Promise.resolve({})}},{key:"_getGeoInfo",value:function(e){return this.geoIp.getGeoInfo().catch(function(t){return console.log("geo info will be left out of "+e+" call due to error: "+t),{}})}},{key:"_formatParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter(function(t){var r=e[t],n=Array.isArray(r)&&!r.length,o=void 0===r||null===r||""===r;return!(n||o)}).map(function(t){var r=e[t],n=encodeURIComponent(t),o=encodeURIComponent(Array.isArray(r)?r.join(";"):r);return n+"="+o}).join("&")}},{key:"_requestResources",value:function(e,t){var r=this,n=e+"?"+this._formatParams(t);return new Promise(function(e,t){fetch(n).then(function(r){var o=r.status;return o>=400?void t("Bad status fetching "+n+". Status: "+o):void e(r.json())}).catch(function(e){t("Error fetching "+n+". Error: "+e)}),setTimeout(function(){t("Request timed out: "+n)},r.timeout)})}}]),e}();t.exports=y},{"./UserInfo":109,"bb.polyfills/fetch":8,"bb.polyfills/object/assign":10,"bb.polyfills/promise":11,"ms.consent":104,"ms.geoip":106}],109:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){
return r&&e(t.prototype,r),n&&e(t,n),t}}();e("bb.polyfills/promise");var i="reg-user-info-ready",a="session_id",s="session_key",u="agent_id",l="_breg-uid",c=5e3,f=function(){function e(){n(this,e),this._userInfo=null}return o(e,[{key:"getUserInfo",value:function(){var e=this;return this._userInfo=window._regUserInfo||this._getUserInfoFromCookies(),this._userInfo?Promise.resolve(this._formatUserInfo(this._userInfo)):new Promise(function(t){var r=function r(n){var o=n.detail;window.removeEventListener(i,r),e._userInfo=o,t(e._formatUserInfo(e._userInfo))};window.addEventListener(i,r),setTimeout(function(){window.removeEventListener(i,r),e._userInfo=e._getUserInfoFromCookies(!0),t(e._formatUserInfo(e._userInfo))},c)})}},{key:"_getUserInfoFromCookies",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._getCookieValue(a),r=this._getCookieValue(s),n=this._getCookieValue(u),o=this._getCookieValue(l);return t&&r&&n&&o||e?{sessionId:t,sessionKey:r,agentId:n,userId:o}:null}},{key:"_getCookieValue",value:function(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;$]*)");return t?t[2]:null}},{key:"_formatUserInfo",value:function(e){var t=e.sessionId,r=e.sessionKey,n=e.agentId,o=e.userId,i={};return t&&(i.session_id=t),r&&(i.session_key=r),n&&(i.agent_id=n),o&&(i.breg=o),i}}]),e}();t.exports=f},{"bb.polyfills/promise":11}],110:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(f===setTimeout)return setTimeout(e,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function s(){v&&h&&(v=!1,h.length?y=h.concat(y):_=-1,y.length&&u())}function u(){if(!v){var e=i(s);v=!0;for(var t=y.length;t;){for(h=y,y=[];++_<t;)h&&h[_].run();_=-1,t=y.length}h=null,v=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var f,d,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(e){f=n}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(e){d=o}}();var h,y=[],v=!1,_=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];y.push(new l(e,t)),1!==y.length||v||i(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],111:[function(e,t,r){function n(e,t){var r=t||0,n=o;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}for(var o=[],i=0;i<256;++i)o[i]=(i+256).toString(16).substr(1);t.exports=n},{}],112:[function(e,t,r){(function(e){var r,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var o=new Uint8Array(16);r=function(){return n.getRandomValues(o),o}}if(!r){var i=new Array(16);r=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],113:[function(e,t,r){function n(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||o)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[n+s]=a[s];return t||i(a)}var o=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=n},{"./lib/bytesToUuid":111,"./lib/rng":112}],114:[function(e,t,r){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function n(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return _.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function s(e){var t=new FileReader,r=a(t);return t.readAsArrayBuffer(e),r}function u(e){var t=new FileReader,r=a(t);return t.readAsText(e),r}function l(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(_.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(_.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(_.arrayBuffer&&_.blob&&g(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!_.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!m(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function p(e,t){t=t||{};var r=t.body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function y(e){var t=new o;return e.split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}}),t}function v(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var _={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(_.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},m=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,n){e=t(e),n=r(n);var o=this.map[e];this.map[e]=o?o+","+n:n},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,n){this.map[t(e)]=r(n)},o.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),n(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),n(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),n(e)},_.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];v.redirect=function(e,t){if(E.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=p,e.Response=v,e.fetch=function(e,t){return new Promise(function(r,n){var o=new p(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:y(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;r(new v(t,e))},i.onerror=function(){n(new TypeError("Network request failed"))},i.ontimeout=function(){n(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&_.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],115:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return o.main(e,t,r)}function i(e){u(e),l(e)}function a(e,t){t.on(h.default.DISPOSE,s.bind(null,e)),T[e]=t}function s(e){T[e]=null}function u(e){P.initGTM(e.use_google_tag_manager,e.google_tag_manager_data_layer_id)}function l(e){if(!e.log_debug){var t=new URL(window.location),r=m.default.parseQueryString(t.search);e.log_debug=r&&"true"===r[A]}var n=e.log_debug?S.default.getLogLevels().TRACE:S.default.getLogLevels().ERROR;k.setMinLogLevel(n)}e("./lib/gtm-controller"),e("./legacy/globalize");var c=e("bvp-shims"),f=e("./facade/facade-player"),d=n(f),p=e("./events/player-events"),h=n(p),y=e("./events/playlist-events"),v=n(y),_=e("./lib/playlist/playlist-player"),b=n(_),g=e("./utils/query-string"),m=n(g),w=e("./strategy/StrategyTypes"),E=n(w),O=e("log"),S=n(O),P=window.BVP_GTM,k=new S.default("BPlayer"),A="bvp_log_debug",T={};Object.defineProperties(o,{VERSION:{value:c.version},events:{value:Object.freeze({PlayerEvents:h.default,PlaylistEvents:v.default})}}),Object.assign(o,{main:function(e,t,r){if(!arguments.length)return void(console&&console.error&&console.error("Attempted to initialize player without arguments"));i(t);var n=new d.default(t,r,E.default.SCRIPT,e);return a(t.htmlChildId,n),n},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];i(t),t.containerElement=e;var n=new d.default(t,r,E.default.EMBED);return a(t.htmlChildId,n),n},createPlaylistPlayer:function(e,t,r){var n="[object Array]"===Object.prototype.toString.call(t)?t[0]:t;i(n),n.containerElement=e;var o=new b.default(e,t,r);return a(n.htmlChildId,o),o},getPlayer:function(e){return T[e]}}),setTimeout(function(){var e=new CustomEvent("BPlayerLoaded",{detail:{bplayer:o,version:c.version},bubbles:!0});document.dispatchEvent(e)}),window.BPlayer=window.BPlayer||o,t.exports=o},{"./events/player-events":117,"./events/playlist-events":118,"./facade/facade-player":120,"./legacy/globalize":121,"./lib/gtm-controller":122,"./lib/playlist/playlist-player":124,"./strategy/StrategyTypes":130,"./utils/query-string":139,"bvp-shims":"bvp-shims",log:"log"}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={AD_ALMOST_FINISHED:"AD_ALMOST_FINISHED",AD_CLICKED:"AD_CLICKED",AD_COMPLETED:"AD_COMPLETED",AD_LOAD_ERROR:"AD_LOAD_ERROR",AD_LOAD_TIMED_OUT:"AD_LOAD_TIMED_OUT",AD_LOADING:"AD_LOADING",AD_LOADED:"AD_LOADED",AD_PAUSED:"AD_PAUSED",AD_PLAY_ERROR:"AD_PLAY_ERROR",AD_PLAYBACK_PROGRESS_UPDATE:"AD_PLAYBACK_PROGRESS_UPDATE",AD_PLAYBACK_TIMED_OUT:"AD_PLAYBACK_TIMED_OUT",AD_REQUESTED:"AD_REQUESTED",AD_RESUMED:"AD_RESUMED",AD_STARTED:"AD_STARTED",ADS_FAILURE:"ADS_FAILURE",ADS_READY:"ADS_READY",ALL_ADS_COMPLETED:"ALL_ADS_COMPLETED",CLIP:"clip",CONTENT_PAUSE_REQUESTED:"CONTENT_PAUSE_REQUESTED",CONTENT_RESUME_REQUESTED:"CONTENT_RESUME_REQUESTED",DURATION_CHANGE:"DURATION_CHANGE",MAX_RETRIES_REACHED:"MAX_RETRIES_REACHED",PAUSED:"PAUSED",REQUEST_AD_PAUSE:"REQUEST_AD_PAUSE",REQUEST_AD_PLAY:"REQUEST_AD_PLAY",RESUMED:"RESUMED",STARTED:"STARTED",SKIPPED:"SKIPPED",SKIP_STATE_CHANGED:"SKIP_STATE_CHANGED"};r.default=n},{}],117:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={AD_LOADING:"adloading",ADS_LOAD_ERROR:"adsloaderror",ADS_LOAD_TIMEOUT:"adsloadtimeout",ADS_PLAY_ERROR:"adsplayerror",ADS_PLAY_TIMEOUT:"adsplaytimeout",ADS_TIMEOUT_ERROR:"adstimeouterror",BITRATE_CHANGE:"bitrateChange",BUFFER:"buffer",CAPTIONS_CHANGE:"captionschange",CONTENT_CHANGE:"contentchange",DISMISS_SHARE:"dismissShare",DISPOSE:"dispose",DURATION_CHANGE:"durationchange",ENDED:"ended",ERROR:"error",FATAL_ERROR:"fatalError",FULL_SCREEN_CHANGE:"fullscreenchange",HLS_BRIDGE_ERROR:"hlsBridgeError",HLS_BRIDGE_FATAL_ERROR:"hlsBridgeFatalError",HLS_CUE_IN:"hlsCueIn",HLS_CUE_OUT:"hlsCueOut",HLS_CUE_OUT_LOADED:"hlsCueOutLoaded",LOADED_METADATA:"loadedmetadata",LOADED_METADATA_SHIM:"loadedmetadata_shim",PAUSE:"pause",PLAY:"play",PLAY_PREROLL:"playPreroll",PREPARED_MIDROLL:"preparemidroll",READY:"ready",REQUEST_SHARE:"requestShare",RETRY:"retry",SEEK_START:"seekStart",SHARE:"share",SHARE_ACTION:"share_action",START_MIDROLL:"startmidroll",TIMEUPDATE:"timeupdate",TRACK_INFO:"track-info",USER_ACTIVE:"useractive",USER_INACTIVE:"userinactive",VOLUME_CHANGE:"volumechange",WATCHDOG_RELOAD:"watchdogreload",BVP_VOLUME_CHANGE:"bvp_volumechange",CONTINUOUS_PLAY_START:"continuousPlayStart",COMPANION_AD:"companionAd",VIDEO_CHANGE:"videoChange",REPLAY:"replay",MUTED_OVERLAY_SHOW:"mutedOverlayShow",MUTED_OVERLAY_CLICKED:"mutedOverlayClicked",PAY_WALL_PLAY:"payWallPlay",PAY_WALL_PAUSE:"payWallPause",SUBSCRIBER_STATUS_CHANGE:"subscriberStatusChange",REG_UI_POP_UP_SHOWN:"reg-ui-show-pop-up",REG_UI_POP_UP_CLOSED:"reg-ui-close-pop-up",START_CHROME_CAST:"startChromeCast",STOP_CHROME_CAST:"stopChromeCast"};r.default=n},{}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={ALL_ITEMS_PLAYED:"ALL_ITEMS_PLAYED",ITEM_LOAD:"ITEM_LOAD",ITEM_PRELOAD:"ITEM_PRELOAD",ITEM_UNLOAD:"ITEM_UNLOAD",RESIZE:"resize",SLIDE_CLICK:"SLIDE_CLICK",STARTED:"STARTED",TRANSITION_CANCEL:"TRANSITION_CANCEL",TRANSITION_END:"TRANSITION_END",TRANSITION_SKIP:"TRANSITION_SKIP",RESUME:"RESUME"};r.default=n},{}],119:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"https:"===location.protocol&&h.default.isDev?e.replace(":"+h.default.localPort,":"+(h.default.localPort+1)):e}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("../utils/style-injector"),u=n(s),l=e("script-injector"),c=n(l),f=e("load-timer"),d=n(f),p=e("resources"),h=n(p),y=e("log"),v=n(y),_=e("error-report"),b=n(_),g=c.default.getInstance(),m=new v.default("DependencyLoader"),w="//imasdk.googleapis.com/js/sdkloader/ima3.js",E=function(){function e(){o(this,e),this.loader=null,this.deferQueue=[]}return a(e,[{key:"loadDependencies",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.loader?this.loader.then(t).catch(function(e){return b.default.recordGenericError(m,e)}):(this.loader=this._loadAppDependencies().then(function(){return e._loadAppBundle()}).then(t).then(function(t){return e.loader=null,e.executeDeferredInstructions(),t}).catch(function(e){return b.default.recordGenericError(m,e)}),this.loader)}},{key:"deferExecution",value:function(e,t){this.deferQueue.push({method:e,args:t})}},{key:"executeDeferredInstructions",value:function(){var e=this;this.deferQueue&&(this.deferQueue.forEach(function(t){e[t.method].apply(e,t.args)}),this.deferQueue.length=0)}},{key:"dispose",value:function(){this.loader=this.deferQueue=null}},{key:"_loadAppDependencies",value:function(){return Promise.all([u.default.inject(i(h.default.APP_CSS),this._getHtmlChildId()),g.inject(w,this._getHtmlChildId(),d.default.loadTypes.IMA_SDK),g.inject(i(h.default.VENDOR_BUNDLE),this._getHtmlChildId(),d.default.loadTypes.VENDOR_BUNDLE)])}},{key:"_loadAppBundle",value:function(){return g.inject(i(h.default.APP_BUNDLE),this._getHtmlChildId(),d.default.loadTypes.APP_BUNDLE)}},{key:"_getHtmlChildId",value:function(){}}]),e}();r.default=E},{"../utils/style-injector":141,"error-report":"error-report","load-timer":"load-timer",log:"log",resources:"resources","script-injector":"script-injector"}],120:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r){switch(e){case p.default.SCRIPT:return new window.BPlayer.ScriptTagStrategy(t,r);case p.default.EMBED:return new window.BPlayer.EmbedStrategy(t,r);default:O.default.recordGenericError(k,"Unexpected strategy "+e)}}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("./dependency-loader"),f=n(c),d=e("../strategy/StrategyTypes"),p=n(d),h=e("../utils/VisibilityMonitor"),y=n(h),v=e("../events/player-events"),_=n(v),b=e("../events/ad-events"),g=n(b),m=e("log"),w=n(m),E=e("error-report"),O=n(E),S=e("load-timer"),P=n(S),k=new w.default("FacadePlayer"),A=["getId","getPlaylistIndex","getHtmlChildId","setAutoplay","isAutoplay","trackInfo"],T=function(e){function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.callbacks=r,s.bvp=null,s.player=null,s.strategy=n,s.userOptions=e,s.htmlChildId=s.userOptions&&s.userOptions.htmlChildId,s.assetDetails=a,s.play=s.play.bind(s),s.visibilityMonitor=new y.default,s.on([_.default.PLAY,g.default.AD_STARTED],function(){s.playerStartedPlaying=!0}),A.forEach(function(e){var t=s;s[e]=function(){return t.bvp?t.bvp[e].apply(t.bvp,arguments):void k.warn("Unable to call "+e+" on "+t.htmlChildId+". Please wait until after ready callback has been executed")}}),P.default.setEnabled(s.htmlChildId,!1),P.default.trackLoadStart(s.htmlChildId,P.default.loadTypes.PLAYER_INIT),s.setup(),s}return a(t,e),u(t,[{key:"ready",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.setup().then(function(t){return e(t),t})}},{key:"play",value:function(){return this.playerStartedPlaying||y.default.isPageVisible()?void(this.bvp?this.bvp.play():this.deferExecution("play",arguments)):void this._registerPlayOnPageActiveEvent()}},{key:"pause",value:function(){this._unregisterPlayOnPageActiveEvent(),this.bvp?this.bvp.pause():this.deferExecution("pause",arguments)}},{key:"on",value:function(){return this.bvp?this.bvp.on.apply(this.bvp,arguments):this.deferExecution("on",arguments),this}},{key:"off",value:function(){return this.bvp?this.bvp.off.apply(this.bvp,arguments):this.deferExecution("off",arguments),this}},{key:"trigger",value:function(){return this.bvp?this.bvp.trigger.apply(this.bvp,arguments):this.deferExecution("trigger",arguments),this}},{key:"setup",value:function(){var e=this;return this.loadDependencies(function(){return e.bvp?e.bvp.ready().then(function(t){return e.player=t,t}):y.default.isPageVisible()?e._createPlayer():new Promise(function(t){e.visibilityMonitor.one(h.EVENTS.VISIBLE,function(){return t(e._createPlayer())})})})}},{key:"dispose",value:function(){this.visibilityMonitor&&(this.visibilityMonitor.dispose(),this.visibilityMonitor=null),this.bvp&&(this.bvp.dispose(),this.bvp=null),this.player=this.userOptions=this.callbacks=this.assetDetails=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_createPlayer",value:function(){var e=this,t=s(this.strategy,this.userOptions,this.assetDetails);return this.bvp=new window.BPlayer.BloombergVideoPlayer(this.userOptions,this.callbacks,t),this.bvp.ready().then(function(t){return e.player=t,t})}},{key:"_registerPlayOnPageActiveEvent",value:function(){this._unregisterPlayOnPageActiveEvent(),this.visibilityMonitor.one(h.EVENTS.VISIBLE,this.play)}},{key:"_unregisterPlayOnPageActiveEvent",value:function(){this.visibilityMonitor.off(h.EVENTS.VISIBLE,this.play)}},{key:"_getHtmlChildId",value:function(){return this.htmlChildId}}]),t}(f.default);r.default=T},{"../events/ad-events":116,"../events/player-events":117,"../strategy/StrategyTypes":130,"../utils/VisibilityMonitor":131,"./dependency-loader":119,"error-report":"error-report","load-timer":"load-timer",log:"log"}],121:[function(e,t,r){"use strict";!function(){function e(){for(var e,t=document.scripts,r=[],n=t.length-1;0<=n;n--){e=t[n];var o=(e.text||e.textContent).trim();e.src&&e.src.match(/bplayer.js/)&&Boolean(o)&&r.push(e)}return r}function t(){var t=e();t.length&&(console&&console.warn&&console.warn("[BPlayer]","You are using deprecated BPlayer initialization, please update!"),t.forEach(function(e){var t=(e.text||e.textContent).trim(),n=new Function("window","container","bmmrAsset","\n          window.containerElement = container;\n          window.bmmrAsset = bmmrAsset;\n\n          "+t);n(r,e,window.bplayerAsset)}))}var r={BPlayer:function(e,t,r){var n=this.bmmrAsset||e;t.containerElement=this.containerElement,window.BPlayer(n,t,r)}};window.BPlayer?t():window.addEventListener("BPlayerLoaded",t)}()},{}],122:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../utils/utils"),s=n(a),u=e("log"),l=n(u),c=e("bvp-shims"),f=new l.default("GoogleTagManager"),d="video",p="video-eng",h="bvpTrackVideo",y="bplayer",v="dataLayer",_=/trackError|record\w*Error|getReducedCallstack|^Error$|promiseReactionJob|native code/,b=/\s*at\s*/,g={PLAY:"play",END:"end",PAUSE:"pause",RESUME:"resume",COMPLETION:"completion",UI_ACTION:"uiaction",LOAD_START:"loadstart",LOAD_END:"loadend",ERROR:"error",CLICK:"click"},m={GENERIC:"generic",LOAD:"load",HLS:"hls",AD:"ad"},w={bvpEventCategory:d,event:h,mediaPlayer:y+"-"+c.version,bvpEventValue:0},E=void 0,O=!1,S=function(){function e(){o(this,e)}return i(e,null,[{key:"initGTM",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(O=Boolean(e),!O)return void f.info("GoogleTagManager tracking disabled");var r=t||v;E=window[r],E||(f.error("GTM data layer not found: "+r),O=!1)}},{key:"trackError",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.trackDevEvent({bvpEventAction:g.ERROR,bvpEventLabel:e,bvpErrorDetails:t,bvpCallstack:this._getReducedCallstack(),bvpLoaderUrl:r})}},{key:"trackDevEvent",value:function(e){var t=Object.assign({},{bvpEventCategory:p},e);this.trackEvent(t)}},{key:"trackEvent",value:function(e){if(O){var t=Object.assign({},w,this._getExperimentInfo(),e),r=s.default.filterEmptyValues(t);E.push(r)}}},{key:"_getExperimentInfo",value:function(){}},{key:"_getReducedCallstack",value:function(){var e=(new Error).stack;if(!e)return null;var t=e.split(/\r?\n/),r=t.reduce(function(e,t){return _.test(t)||e.push(t.replace(b,"")),e},[]);return r.join("\n")}}]),e}();Object.defineProperties(S,{eventActions:{value:g},errorTypes:{value:m}}),window.BVP_GTM=window.BVP_GTM||S,r.default=S},{"../utils/utils":142,"bvp-shims":"bvp-shims",log:"log"}],123:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("../../utils/css-helpers"),c=n(l),f=e("../../utils/fullscreen"),d=n(f),p=e("../../utils/event-target"),h=n(p),y=e("../../events/player-events"),v=n(y),_=e("log"),b=n(_),g=e("error-report"),m=n(g),w=new b.default("BaseView"),E="bvp-hidden",O=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.el_=e.createEl(),e.childViews_=[],e.isFullScreen=!1,e}return a(t,e),s(t,[{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=document.createElement(e);return c.default.addClass(o,t),c.default.css(o,n),Object.keys(r).reduce(function(e,t){var n=r[t];return void 0!==e[t]?e[t]=n:e.setAttribute(t,n),e},o),o}},{key:"appendView",value:function(e,r){if(!(e instanceof t))return void m.default.recordGenericError(w,"Cannot append view. Invalid view object:",e);this.childViews_.push(e);var n=(r?this.find(r):this.el_)||this.el_;n.appendChild(e.el())}},{key:"addClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el_;c.default.addClass(t,e)}},{key:"removeClass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el_;c.default.removeClass(t,e)}},{key:"find",value:function(e){return this.el_.querySelector(e)}},{key:"findAll",value:function(e){return this.el_.querySelectorAll(e)}},{key:"css",value:function(e){c.default.css(this.el_,e)}},{key:"el",value:function(){return this.el_}},{key:"hide",value:function(){this.addClass(E)}},{key:"show",value:function(){this.removeClass(E)}},{key:"requestFullScreen",value:function(){void 0===this.fullScreenObserverIndex&&(this.fullScreenObserverIndex=t.addFullScreenObserver(this)),d.default.requestFullScreen(this.el_)}},{key:"exitFullScreen",value:function(){void 0===this.fullScreenObserverIndex&&(this.fullScreenObserverIndex=t.addFullScreenObserver(this)),d.default.exitFullScreen()}},{key:"dispose",value:function(){this.el_=null,this.childViews_.forEach(function(e){return e.dispose()}),this.childViews_=null,void 0!==this.fullScreenObserverIndex&&t.removeFullScreenObserver(this.fullScreenObserverIndex),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}],[{key:"addFullScreenObserver",value:function(e){if(d.default.isSupported())return t.fullScreenObserversCount++,t.fullScreenObservers||(t.fullScreenObservers=[],document.addEventListener(d.default.fullscreenchange,t.onFullScreenChange)),t.fullScreenObservers.push(e)-1}},{key:"removeFullScreenObserver",value:function(e){if(void 0!=e&&d.default.isSupported())return t.fullScreenObserversCount--,t.fullScreenObserversCount<=0?(document.removeEventListener(d.default.fullscreenchange,t.onFullScreenChange),t.fullScreenObservers=null,void(t.fullScreenObserversCount=0)):void(t.fullScreenObservers[e]=null)}},{key:"onFullScreenChange",value:function(){if(t.fullScreenObservers){for(var e=d.default.getFullScreenElement(),r=d.default.isInFullScreen(),n=[],o=0,i=t.fullScreenObservers.length;o<i;o++){var a=t.fullScreenObservers[o];a&&(e!==a.el_&&e||(a.isFullScreen=r,a.trigger(v.default.FULL_SCREEN_CHANGE,{fullscreen:r})),a.fullScreenObserverIndex=n.push(a)-1)}t.fullScreenObservers=n}}}]),t}(h.default);Object.defineProperties(O,{fullScreenObservers:{value:null,writable:!0},fullScreenObserversCount:{value:0,writable:!0}}),r.default=O},{"../../events/player-events":117,"../../utils/css-helpers":134,"../../utils/event-target":136,"../../utils/fullscreen":137,"error-report":"error-report",log:"log"}],124:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e
}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e&&e.hasOwnProperty($)&&e[$].disable(),e}function u(e){return e&&e.hasOwnProperty($)&&e[$].enable(),e}function l(){return"bvp_playlist_"+Date.now()}function c(e,t){var r=t();this.removeEventListener(te,r),e()}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({},e,{htmlChildId:l()},t)}function d(e){e&&e.TitleBar&&e.TitleBar.show()}function p(e,t,r){for(var n=[],o=Math.min(e.length,r),i=0;i<o;i++){var a=(t+i)%e.length,s=e[a];n.push(s)}return n}Object.defineProperty(r,"__esModule",{value:!0});var h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},v=e("../../events/ad-events"),_=n(v),b=e("../../utils/fullscreen"),g=n(b),m=e("../../utils/event-target"),w=n(m),E=e("../../facade/facade-player"),O=n(E),S=e("../../events/player-events"),P=n(S),k=e("../../events/playlist-events"),A=n(k),T=e("./playlist-view"),I=n(T),j=e("./transition-view"),R=n(j),x=e("./up-next-view"),C=n(x),D=e("../../services/personalization-service"),L=n(D),M=e("../../strategy/StrategyTypes"),N=n(M),U=e("../../utils/projector-utils"),B=n(U),V=e("../projector-settings-js/poster-size"),F=n(V),G=e("log"),H=n(G),q=e("error-report"),z=n(q),Y=new H.default("PlaylistPlayer"),K=2,Q=function(){},W={loadSuggestions:!0,preloadThreshold:10,repeat:!1,startFrom:0,onReady:Q,onError:Q,transitionDuration:5e3},$="PlaybackOutro",J=["getSuggestions","onCancelTransition","onFullScreenChange","onSlideClick","onResumeRequest","onTimeUpdate","onVideoEnd","onVideoPause","onVideoPlay","toggleFullScreen"],X=".bvp-playlist-slide",Z="bvp-playlist-slide__preload",ee="next-slide-transition",te="transitionend",re="bvp-playlist-player--last",ne=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.options=Object.assign({},W,n),a.bmmrIds={},a.currentItem=a.options.startFrom,a.currentId=null,a.currentPlayer=null,a.mayLoadSuggestions=!1,a.personalizationService=new L.default(n.recommendationOptions),a.playlist=[],a.playlistItems=a.playlist.length,a.playlistView=new I.default,a.preloadingNext=!1,a.preloadItem=null,a.preloadPlayer=null,a.transitionView=new R.default(n.transitionDuration),a.upNextView=new C.default,a.containerElement=e,a.playlistView.setEventParent(a),a.transitionView.setEventParent(a),a.upNextView.setEventParent(a),J.forEach(function(e){a[e]=a[e].bind(a)}),a.add(r),a.hasRecommendations=a.playlistItems>=2,a.mayLoadSuggestions=a.options.loadSuggestions&&1===a.playlistItems,a.transitionView.hide(),a.transitionView.on(A.default.TRANSITION_END,a.playNext.bind(a,!0)).on(A.default.TRANSITION_SKIP,a.playNext.bind(a,!1)).on(A.default.TRANSITION_CANCEL,a.onCancelTransition),a.upNextView.hide(),a.upNextView.on(A.default.SLIDE_CLICK,a.onSlideClick),a.upNextView.on(A.default.RESUME,a.onResumeRequest),a.playlistView.appendView(a.upNextView,".bvp-playlist-player__container"),a.playlistView.appendView(a.transitionView,".bvp-playlist-player__container"),a.playlistView.on(P.default.FULL_SCREEN_CHANGE,a.onFullScreenChange),a.transitionView.el().style.visibility="hidden",a.upNextView.el().style.visibility="hidden";var s=a.playlistView.findAll(X);return a.primarySlide=s[0],a.preloadSlide=s[1],a.containerElement.appendChild(a.playlistView.el()),a.startPlayback(),a}return a(t,e),h(t,[{key:"resetPlaylist",value:function(e){this.playlist=[],this.bmmrIds={},this.playlistItems=0,this.currentItem=-1;for(var t=this.getCurrentId(),r=0;r<e.length;r++){var n=e[r];if(t===n.id){this.currentItem=r;break}}this.currentItem===-1&&(e.unshift(this.currentPlayer.userOptions),this.currentItem=0),this.add(e),this.hasRecommendations=e.length>1,this.upNextView.preloadPosters(this.playlist)}},{key:"add",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Array.isArray(t)?t:[t];r.forEach(function(t){t.id&&!e.bmmrIds[t.id]&&(e.playlist.push(t),t.playlistIndex=e.playlist.length-1,e.bmmrIds[t.id]=1)}),this.playlistItems=this.playlist.length}},{key:"loadVideo",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f(this.playlist[e],{containerElement:this.primarySlide,height:this.options.height,width:this.options.width});return this.trigger(A.default.ITEM_LOAD,{index:e}),this.currentItem=e,this.currentPlayer=this._createPlayer(n),this.currentId=n.id,this._attachLastVideoState(),r&&this.currentPlayer.trigger(P.default.CONTINUOUS_PLAY_START),this.currentPlayer.ready().then(s).then(function(e){return e&&(t.transitionView.el().style.visibility="",t.upNextView.el().style.visibility="",t.setTechStyle(e.techName_),g.default.isSupported()&&(e.requestFullscreen=t.toggleFullScreen,e.isFullscreen_=t.playlistView.isFullScreen),e.on(P.default.ENDED,t.onVideoEnd).on(P.default.TIMEUPDATE,t.onTimeUpdate).on(P.default.PAUSE,t.onVideoPause).on([P.default.PLAY,_.default.AD_STARTED],t.onVideoPlay)),e})}},{key:"preloadNext",value:function(){var e=this,t=this.getNextIndex();if(this.preloadingNext=!0,void 0===t)return void u(this.currentPlayer.player);Y.warn("Preloading next item:",t),this.preloadItem=t;var r=f(this.playlist[t],{containerElement:this.preloadSlide,autoplay:!1,height:this.options.height,preload:"auto",width:this.options.width});return this.trigger(A.default.ITEM_PRELOAD,{index:t}),this.preloadPlayer=this._createPlayer(r),this.preloadPlayer.ready().then(s).then(function(t){return t&&g.default.isSupported()&&(t.requestFullscreen=e.toggleFullScreen,t.isFullscreen_=e.playlistView.isFullScreen),t}).catch(function(e){return z.default.recordGenericError(Y,"Unable to preload video",e)})}},{key:"unloadVideo",value:function(){this.trigger(A.default.ITEM_UNLOAD,{index:this.currentItem}),this.preloadingNext=!1,this.upNextView.hide();try{this.currentPlayer.dispose()}catch(e){z.default.recordGenericError(Y,"Failed to dispose a playlist item:",e)}}},{key:"play",value:function(){this.currentPlayer&&this.currentPlayer.play()}},{key:"pause",value:function(){this.currentPlayer&&this.currentPlayer.pause()}},{key:"replay",value:function(){this.playlistItems&&(this.unloadVideo(),this.currentItem=0,this.currentId=null,this.startPlayback())}},{key:"ready",value:function(e){if(this.currentPlayer)return this.currentPlayer.ready(e)}},{key:"playIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;e=+e,this.playlistItems&&e>=0&&e<this.playlistItems&&this._forcePlayIndex(e)}},{key:"playId",value:function(e){for(var t,r=0;r<this.playlistItems;r++)if(t=this.playlist[r],t.id===e){this.playIndex(r);break}}},{key:"getCurrentId",value:function(){return this.currentId}},{key:"setAutoplay",value:function(e){e.autoplay=!0}},{key:"startPlayback",value:function(){var e=this;return this.playlistItems?this.loadVideo(this.currentItem).then(function(t){return e.trigger(A.default.STARTED),e.options.onReady(t),t}).then(this.getSuggestions).catch(function(t){e.options.onError(t),z.default.recordGenericError(Y,"Failed to start playback:",t)}):Promise.reject()}},{key:"getCurrentPlayer",value:function(){return this.currentPlayer}},{key:"getNextIndex",value:function(){var e=this.currentItem+1,t=this.playlistItems;return e>=t?this.options.repeat?0:void 0:e}},{key:"getNextItems",value:function(e){var t=this.getNextIndex();return this.options.repeat?p(this.playlist,t,e):this.playlist.slice(t,t+e)}},{key:"getPrevIndex",value:function(){var e=this.currentItem-1,t=0;return e<t?this.options.repeat?this.playlistItems-1:void 0:e}},{key:"getSuggestions",value:function(e){var t=this;if(this.mayLoadSuggestions){var r=this.playlist[0],n=e.options_.metadata.compressedID,o="Video|"+n,i={exclude:o,currentResource:o};return this.personalizationService.getRecommendations(i,r).then(function(e){return t.hasRecommendations=Boolean(e.length),t.add(e),t.upNextView.preloadPosters(t.playlist),e})}return Promise.resolve(this.playlist)}},{key:"transitionToPreloadSlide",value:function(){var e=this;return new Promise(function(t){var r=void 0!==e.preloadSlide.style.transition;if(!r)return void t();var n=c.bind(e.preloadSlide,t,function(){return n});e.preloadSlide.addEventListener(te,n),e.playlistView.addClass(ee)})}},{key:"trigger",value:function(e,r){this.currentPlayer&&!A.default[e]&&e!==P.default.PAUSE&&e!==P.default.PLAY&&this.currentPlayer.trigger(e,r),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"trigger",this).call(this,e,r)}},{key:"playNext",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.transitionView.hide(),this.preloadPlayer)return this.currentId=this.preloadPlayer.userOptions.id,this.preloadPlayer.ready().then(function(){e.trigger(P.default.VIDEO_CHANGE,{newVideoIndex:e.preloadPlayer.getPlaylistIndex()}),e.preloadPlayer.setAutoplay(!0),t&&e.preloadPlayer.trigger(P.default.CONTINUOUS_PLAY_START),e.preloadPlayer.play(),e.transitionToPreloadSlide().then(function(){e.unloadVideo(),e.swapSlides(),e.playlistView.removeClass(ee),e.currentPlayer.on(P.default.ENDED,e.onVideoEnd).on(P.default.TIMEUPDATE,e.onTimeUpdate).on(P.default.PAUSE,e.onVideoPause).on([P.default.PLAY,_.default.AD_STARTED],e.onVideoPlay)})});var r=this.getNextIndex();return void 0===r?void this.onEndOfPlaylist():void this._forcePlayIndex(r,t)}},{key:"playPrevious",value:function(){var e=this.getPrevIndex();return void 0===e?void Y.warn("Reached the beginning of the playlist"):void this._forcePlayIndex(e)}},{key:"swapSlides",value:function(){this.playlistView.removeClass(Z,this.preloadSlide),this.playlistView.addClass(Z,this.primarySlide);var e=this.primarySlide,t=this.preloadSlide;this.primarySlide=t,this.preloadSlide=e,this.currentPlayer=this.preloadPlayer,this.currentItem=this.preloadItem,this.currentId=this.preloadPlayer.userOptions.id,this.currentPlayer.player&&(this.currentPlayer.player.isFullscreen_=this.playlistView.isFullScreen),this.preloadPlayer=this.preloadItem=e=t=null}},{key:"setTechStyle",value:function(e){var t=B.default.isMobile()?"-mobile":"";this.playlistView.addClass(("vjs-tech-"+e+t).toLowerCase())}},{key:"toggleFullScreen",value:function(){this.playlistView.isFullScreen?this.playlistView.exitFullScreen():this.playlistView.requestFullScreen()}},{key:"onFullScreenChange",value:function(e){this.currentPlayer.player.isFullscreen_=e.detail.fullscreen,this.currentPlayer.player.trigger(P.default.FULL_SCREEN_CHANGE)}},{key:"onEndOfPlaylist",value:function(){Y.warn("End of playlist reached"),this.trigger(A.default.ALL_ITEMS_PLAYED)}},{key:"onVideoEnd",value:function(e){var t=this;if(e.target!==document){if(this.preloadingNext=!1,!this.hasRecommendations&&!this.options.repeat)return void this.onEndOfPlaylist();this.preloadPlayer&&this.preloadPlayer.ready().then(function(e){return e?(t.transitionView.setTitle(e.options_.title),t.transitionView.setPoster(e.options_.posterUrl),void t.transitionView.setId(e.options_.original_user_options.id)):void z.default.recordGenericError(Y,"Unable to get preload player")});var r=this.getNextIndex();if(void 0!==r){var n=this.playlist[r],o=this.currentPlayer.player,i=F.default.closestImage(o.currentWidth(),o.currentHeight(),n.poster);this.transitionView.setTitle(n.title),this.transitionView.setPoster(i),this.transitionView.setId(n.id)}this.transitionView.show()}}},{key:"onTimeUpdate",value:function(){var e=this.currentPlayer.player.currentTime(),t=this.currentPlayer.player.duration(),r=t-e,n=r&&r<this.options.preloadThreshold;!n||this.preloadingNext||this.currentPlayer.player.ended()||this.preloadNext()}},{key:"onVideoPause",value:function(){if(!this.currentPlayer.player.ended()){var e=this.getNextItems(K);this.hasRecommendations=Boolean(e.length),this.hasRecommendations&&(this.upNextView.createSlidesFor(e),this.upNextView.show()),this.trigger(P.default.PAUSE,{player:this.currentPlayer.player})}}},{key:"onVideoPlay",value:function(){this.hasRecommendations&&this.upNextView.hide(),this.trigger(P.default.PLAY,{player:this.currentPlayer.player})}},{key:"onCancelTransition",value:function(){d(this.currentPlayer.player),this.transitionView.hide(),this.upNextView.show()}},{key:"onSlideClick",value:function(e){var t=e.detail.id;this.playId(t)}},{key:"onResumeRequest",value:function(){this.currentPlayer.play()}},{key:"dispose",value:function(){this.unloadVideo(),this.removeAllEventListeners(),this.playlistView.dispose(),this.currentPlayer=this.preloadPlayer=this.options=this.playlist=null,this.playlistView=this.upNextView=this.transitionView=this.primarySlide=this.preloadSlide=null,this.containerElement.innerHTML="",y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_forcePlayIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trigger(P.default.VIDEO_CHANGE,{newVideoIndex:e}),this.unloadVideo();var r=this.playlist[e];this.setAutoplay(r),this.loadVideo(e,t)}},{key:"_attachLastVideoState",value:function(){var e=void 0===this.getNextIndex();e?this.playlistView.addClass(re):this.playlistView.removeClass(re)}},{key:"_createPlayer",value:function(e){return this.currentPlayer&&this._updateCorrelator(),new O.default(e,null,N.default.EMBED)}},{key:"_updateCorrelator",value:function(){var e=window,t=e.googletag;t&&t.cmd&&t.cmd.push&&t.cmd.push(function(){t.pubads().updateCorrelator()})}}]),t}(w.default);r.default=ne},{"../../events/ad-events":116,"../../events/player-events":117,"../../events/playlist-events":118,"../../facade/facade-player":120,"../../services/personalization-service":129,"../../strategy/StrategyTypes":130,"../../utils/event-target":136,"../../utils/fullscreen":137,"../../utils/projector-utils":138,"../projector-settings-js/poster-size":128,"./playlist-view":125,"./transition-view":126,"./up-next-view":127,"error-report":"error-report",log:"log"}],125:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("./base-view"),c=n(l),f=e("../../utils/resize-monitor"),d=n(f),p=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.resizeMonitor=new d.default(e.el_),e.resizeMonitor.setEventParent(e),e}return a(t,e),s(t,[{key:"createEl",value:function(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div","bvp-playlist-player",{"data-breakpoints":"320 640 800",innerHTML:'\n    <div class="bvp-playlist-player__container">\n       <div class="bvp-playlist-slide"></div>\n       <div class="bvp-playlist-slide bvp-playlist-slide__preload"></div>\n    </div>\n    '})}},{key:"dispose",value:function(){this.resizeMonitor.dispose(),this.resizeMonitor=null,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(c.default);r.default=p},{"../../utils/resize-monitor":140,"./base-view":123}],126:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("./base-view"),c=n(l),f=e("../../events/playlist-events"),d=n(f),p=["onTransitionEnd","onCancel","onPlay"],h=5e3,y="click",v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return p.forEach(function(e){r[e]=r[e].bind(r)}),r.animationDuration=e,r.animationTimerId=null,r.title=r.find(".bvp-playback-transition__title"),r.countdown=r.find(".autoplay-countdown"),r.cancelButton=r.find(".bvp-playback-transition__cancel"),r.playButton=r.find(".bvp-playback-transition__countdown"),r.cancelButton.addEventListener(y,r.onCancel),r.playButton.addEventListener(y,r.onPlay),r}return a(t,e),s(t,[{key:"createEl",value:function(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div","bvp-playback-transition",{innerHTML:'\n        <div class="bvp-playback-transition__container">\n            <div class="bvp-playback-transition__title"></div>\n            <div class="bvp-playback-transition__buttons">\n                <div class="bvp-playback-transition__countdown" role="button">\n                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 97 97">\n                      <circle class="autoplay-countdown" fill="none" stroke="#fff" stroke-width="4" transform="translate(48.5 48.5)rotate(-90)translate(-48.5 -48.5)" cx="48.5" cy="48.5" r="46" />\n                      <path d="M37 34.5V62.5l25-13.1Z" fill="#fff"/>\n                  </svg>\n                </div>\n                <button class="bvp-playback-transition__cancel"></button>\n            </div>\n        </div>\n        '.trim()})}},{key:"animateTransition",value:function(){var e=this,t=this.el_.getElementsByClassName("autoplay-countdown")[0];t.style["animation-duration"]=Math.floor(this.animationDuration/1e3)+"s",this.animationTimerId=setTimeout(function(){e.onTransitionEnd()},this.animationDuration)}},{key:"cancelTransition",value:function(){window.clearTimeout(this.animationTimerId),this.animationTimerId=null}},{key:"show",value:function(){this.animateTransition(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"setTitle",value:function(e){this.title.textContent=e}},{key:"setPoster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.css({"background-image":"url("+e+")"})}},{key:"setId",value:function(e){this.id=e}},{key:"onCancel",value:function(){this.cancelTransition(),this.trigger(d.default.TRANSITION_CANCEL,{id:this.id})}},{key:"onPlay",value:function(){this.cancelTransition(),this.trigger(d.default.TRANSITION_SKIP,{id:this.id})}},{key:"onTransitionEnd",value:function(){this.trigger(d.default.TRANSITION_END,{id:this.id})}},{key:"dispose",value:function(){this.cancelTransition(),this.cancelButton.removeEventListener(y,this.onCancel),this.playButton.removeEventListener(y,this.onPlay),this.title=this.countdown=this.cancelButton=this.playButton=null,u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(c.default);r.default=v},{"../../events/playlist-events":118,"./base-view":123}],127:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},c=e("./base-view"),f=n(c),d=e("../../utils/css-helpers"),p=n(d),h=e("../../utils/datetime-utils"),y=n(h),v=e("../../events/playlist-events"),_=n(v),b=e("../projector-settings-js/poster-size"),g=n(b),m="bvp-up-next__slide",w="bvp-up-next__slide-title",E="data-bmmr-id",O="data-playlist-index",S="click",P=2,k=function(e){function t(){i(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSlideClick=e.onSlideClick.bind(e),e.container=e.find(".bvp-up-next__container"),e.el_.addEventListener(S,e.onSlideClick),e}return s(t,e),u(t,[{key:"createEl",value:function(){return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div","bvp-up-next",{innerHTML:'\n                <div class="bvp-up-next__resume"></div>\n                <div class="bvp-up-next__container"></div>\n            '})}},{key:"clearSlides",value:function(){this.container.innerHTML=""}},{key:"createSlide",value:function(e){var r,n=e.duration?y.default.formatSeconds(e.duration/1e3):"";return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",m,(r={innerHTML:'\n                <span class="bvp-up-next__slide-duration">'+n+'</span>\n                <span class="bvp-up-next__slide-title">'+(e.title||"")+"</span>\n            "},o(r,E,e.id),o(r,O,e.playlistIndex),r),{"background-image":"url('"+this._getSmallPosterUrl(e.poster)+"')"})}},{key:"createSlidesFor",value:function(e){var t=this,r=e.slice(0,2);this.clearSlides(),r.forEach(function(e){var r=t.createSlide(e);t.container.appendChild(r)})}},{key:"preloadPosters",value:function(e){for(var r=Math.min(e.length,P),n=0;n<r;n++){var o=e[n],i=this._getSmallPosterUrl(o.poster);if(!i)return;var a=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"link",null,{rel:"prefetch",href:i});this.container.appendChild(a)}}},{key:"onSlideClick",value:function(e){var t=void 0,r=void 0;return p.default.hasClass(e.target,m)?(t=e.target.getAttribute(E),r=e.target.getAttribute(O),void this.trigger(_.default.SLIDE_CLICK,{id:t,playlistIndex:r})):p.default.hasClass(e.target,w)?(t=e.target.parentElement.getAttribute(E),r=e.target.getAttribute(O),void this.trigger(_.default.SLIDE_CLICK,{id:t,playlistIndex:r})):void this.trigger(_.default.RESUME)}},{key:"dispose",value:function(){this.el_.removeEventListener(S,this.onSlideClick),this.container.removeEventListener(S,this.onSlideClick),this.container=null,l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_getSmallPosterUrl",value:function(e){return g.default.closestImage(1,1,e)}}]),t}(f.default);r.default=k},{"../../events/playlist-events":118,"../../utils/css-helpers":134,"../../utils/datetime-utils":135,"../projector-settings-js/poster-size":128,"./base-view":123}],128:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("log"),s=n(a),u=e("array-find-index"),l=n(u),c=new s.default("PosterSize"),f=[{width:320,height:180},{width:640,height:360},{width:960,height:540}],d=/(.*)-1x-1\.(.*)/,p=.5625,h=function(){function e(){o(this,e)}return i(e,null,[{key:"isTemplateImage",value:function(e){return d.test(e)}},{key:"closestImage",value:function(t,r,n){if(!e.isTemplateImage(n))return c.warn("Cannot resize: Invalid template image",n),n;if(t=parseFloat(t),r=parseFloat(r),t<=0)return c.warn("Cannot resize: Invalid container size",t,r),n;r<=0&&(r=t*p);var o=(0,l.default)(f,function(e){return e.width>=t&&e.height>=r});o===-1&&(o=f.length-1);var i=f[o];return n.replace(d,"$1"+i.width+"x"+i.height+".$2")}}]),e}();r.default=h},{"array-find-index":1,log:"log"}],129:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("resources"),s=n(a),u=e("log"),l=n(u),c=e("error-report"),f=n(c),d=e("ms.personalization"),p=n(d),h=e("../utils/cookies"),y=n(h),v=new l.default("PersonalizationService"),_="meta",b="exp_pref",g={backfillFacets:"Video|All",decayCoefficient:1,inactivePeriod:2592e6,limit:10,maxAge:6048e5,rescorers:"random;tpx","rescorers.tpx.minimumScore":.1,"rescorers.random.minimumScore":.1,resourceTypes:"Video",thumbnailRequired:!0},m={autoplay:!0,techOrder:["html5","flash"]},w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this.client=new p.default({url:s.default.PERSONALIZATION_API}),this.options=Object.assign({},g,t);var r=y.default.get(b);r&&(this.options[b]=r)}return i(e,[{key:"getRecommendations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},this.options,t);return this.client.getRecommended(_,n).then(function(t){return e.formatRecommendations(t,r)}).catch(function(e){return f.default.recordGenericError(v,"Error fetching personalization data:",e)})}}],[{key:"formatRecommendations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return e.map(function(e){return Object.assign({},t,{title:e.headline,poster:e.thumbnailUrl,id:e.assetID,share_metadata:{canonical_url:e.url}})})}}]),e}();r.default=w},{"../utils/cookies":133,"error-report":"error-report",log:"log","ms.personalization":108,resources:"resources"}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={EMBED:"embed",SCRIPT:"script"};r.default=n},{}],131:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0}),r.EVENTS=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("./event-target"),c=n(l),f={VISIBLE:"VISIBLE",INVISIBLE:"INVISIBLE"},d={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"},p=void 0,h=void 0,y=!1;for(var v in d)if("undefined"!=typeof document[v]){p=v,h=d[v],y=!0;break}var _=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return t._isVisibilityAPISupported()&&(e._onVisibilityChange=e._onVisibilityChange.bind(e),document.addEventListener(h,e._onVisibilityChange)),e}return a(t,e),s(t,[{key:"dispose",value:function(){t._isVisibilityAPISupported()&&document.removeEventListener(h,this._onVisibilityChange),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"_onVisibilityChange",value:function(){var e=t.isPageVisible()?f.VISIBLE:f.INVISIBLE;this.trigger(e)}}],[{key:"isPageVisible",value:function(){return!document[p]}},{key:"_isVisibilityAPISupported",value:function(){return y}}]),t}(c.default);r.EVENTS=f,r.default=_},{"./event-target":136}],132:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return s.default.isDate(e)&&!isNaN(e.getTime())}function i(e){e=e||u;var t=new Date;if(t.setTime(t.getTime()+e),t&&!o(t))throw new Error("Invalid expires parameter");return t}Object.defineProperty(r,"__esModule",{value:!0});var a=e("./utils"),s=n(a),u=7776e6,l={stringInGMT:function(e){var t=i(e);return t.toGMTString()},totalMilliseconds:function(e){var t=i(e);return t.getTime()}};r.default=l},{"./utils":142}],133:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),
Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("escape-string-regexp"),s=n(a),u=e("./cookie-expiration-date"),l=n(u),c="/",f=!1,d="",p=function(){function e(){o(this,e)}return i(e,[{key:"get",value:function(e){var t=new RegExp("[; ]"+(0,s.default)(e)+"=([^\\s;]*)"),r=document.cookie.match(t);return e&&r?decodeURI(r[1]):void 0}},{key:"set",value:function(e,t,r,n){var o=this.getCookieOptions(n||{});t=r?encodeURIComponent(t):t,document.cookie=this.generateCookieString(e,t,o)}},{key:"remove",value:function(e,t){var r=this.getCookieOptions(t||{});r.expires=new Date(-1).toGMTString(),this.set(e,"",!1,r)}},{key:"generateCookieString",value:function(e,t,r){var n=e+"="+t;return n+=";path="+r.path,n+=";domain="+r.domain,n+=r.expires?";expires="+r.expires:"",n+=r.secure?";secure":""}},{key:"getCookieOptions",value:function(e){e=e||{};var t=e&&e.expires?e.expires:null;return{path:e&&e.path?e.path:c,domain:d,expires:l.default.stringInGMT(t),secure:void 0!==e.secure?e.secure:f}}}]),e}();r.default=new p},{"./cookie-expiration-date":132,"escape-string-regexp":102}],134:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=e.length,n=0;n<r;n++)if(t===e[n])return n;return-1}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./utils"),u=n(s),l=/\s+/,c=" ",f=["-webkit-","-moz-","-ms-","-o-"],d=function(){function e(){o(this,e)}return a(e,null,[{key:"addClass",value:function(e,t){if(!e||!t)return this;if(e.classList)return e.classList.add(t),this;var r=e.className?e.className.trim().split(l):[];return i(r,t)!==-1?this:(e.className=r.concat([t]).join(c),this)}},{key:"addClassList",value:function(t,r){return u.default.isArray(r)&&r.forEach(function(r){e.addClass(t,r)}),this}},{key:"removeClass",value:function(e,t){if(!e)return this;if(e.classList)return e.classList.remove(t),this;var r=e.className?e.className.trim().split(l):[],n=i(r,t);return n===-1?this:(r.splice(n,1),e.className=r.join(c),this)}},{key:"hasClass",value:function(e,t){if(e){if(e.classList)return e.classList.contains(t);var r=e.className.trim().split(l);return i(r,t)!==-1}}},{key:"css",value:function(e,t){if("string"==typeof t)return void(e.style.cssText=t);var r=Object.keys(t).map(function(e){var r=e.toLowerCase(),n=t[e];return r+": "+n+";"}).join("");r&&(e.style.cssText=r)}},{key:"computedStylesFor",value:function(e){return document.defaultView.getComputedStyle(e,"")}},{key:"transform",value:function(e,t){if(e){var r="transform";if(!(r in e.style))for(var n,o=0,i=f.length;o<i&&(n=f[o],r=n+r,!(r in e.style));o++);e.style[r]=t}}}]),e}();r.default=d},{"./utils":142}],135:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=3600,a=60,s=["January","February","March","April","May","June","July","August","September","October","November","December"],u=function(){function e(){n(this,e)}return o(e,null,[{key:"convertToSeconds",value:function(e){if(!e)return null;var t=e.split(":");if(t.length<3)return null;var r=parseInt(t[0],10),n=parseInt(t[1],10),o=parseFloat(t[2]);return r*i+n*a+o}},{key:"formatSeconds",value:function(e){var t=Math.round(e),r=0;t>=60&&(r=Math.floor(t/60),t%=60);var n=""+(r?r:"0"),o=""+(t<10?"0"+t:t);return n+":"+o}},{key:"formatForReporting",value:function(e){if(!e)return"";var t=e.getDate(),r=e.getMonth(),n=e.getFullYear();return s[r]+" "+t+", "+n}}]),e}();r.default=u},{}],136:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){e&&t.bubbles&&!t.defaultPrevented&&(t.originalTarget||Object.defineProperty(t,"originalTarget",{value:r}),e.dispatchEvent(t))}function i(e,t){return a(e)&&t&&"function"==typeof t}function a(e){return e&&"string"==typeof e}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=/\s*,\s*/g,l=Symbol("listeners"),c=Symbol("parent"),f=function(){function e(){n(this,e),this[l]={},this[c]=null}return s(e,[{key:"addEventListener",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(e,t)&&(this[l][e]||(this[l][e]=[]),this[l][e].push({callback:t,deRegister:r}))}},{key:"removeEventListener",value:function(e,t){if(i(e,t)){var r=this[l][e];if(r){if(!t)return void(r.length=0);for(var n=0,o=r.length;n<o;n++)if(r[n].callback===t)return r.splice(n,1),this.removeEventListener(e,t)}}}},{key:"removeAllEventListeners",value:function(){var e=this;this[l]&&Object.keys(this[l]).forEach(function(t){e[l][t].length=0})}},{key:"dispatchEvent",value:function(e){var t=this;if(this[l]){var r=e.type;if(this[l].hasOwnProperty(r)){var n=this[l][r],i=[];this._overrideEventTarget(e);for(var a=0,s=n.length;a<s;a++){var u=n[a].callback,f=n[a].deRegister;u.call(this,e),f&&i.push(u)}i.forEach(function(e){return t.removeEventListener(r,e)})}o(this[c],e,this)}}},{key:"setEventParent",value:function(t){t instanceof e&&(this[c]=t)}},{key:"on",value:function(e,t){var r=this;if(!i(e,t))return this;var n=e.split(u);return n.forEach(function(e){r.addEventListener(e,t)}),this}},{key:"one",value:function(e,t){var r=this;if(!i(e,t))return this;var n=e.split(u);return n.forEach(function(e){r.addEventListener(e,t,!0)}),this}},{key:"off",value:function(e,t){var r=this;if(!i(e,t))return this;var n=e.split(u);return n.forEach(function(e){r.removeEventListener(e,t)}),this}},{key:"trigger",value:function(e,t){if(!a(e))return this;var r=new CustomEvent(e,{detail:t,bubbles:!0,originalTarget:this,target:this});return this.dispatchEvent(r),this}},{key:"dispose",value:function(){this.removeAllEventListeners(),this[l]=null,this[c]=null}},{key:"_overrideEventTarget",value:function(e){Object.defineProperty(e,"target",{value:this,configurable:!0})}}]),e}();r.default=f},{}],137:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return void 0!==document.fullscreenEnabled?"default":void 0!==document.webkitFullscreenEnabled?"webkit":void 0!==document.mozFullScreenEnabled?"moz":void 0!==document.msFullscreenEnabled?"ms":void 0}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a={webkit:{element:"webkitFullscreenElement",enabled:"webkitFullscreenEnabled",exit:"webkitExitFullscreen",onchange:"webkitfullscreenchange",onerror:"webkitfullscreenerror",request:"webkitRequestFullscreen",status:"webkitIsFullScreen"},moz:{element:"mozFullScreenElement",enabled:"mozFullScreenEnabled",exit:"mozCancelFullScreen",onchange:"mozfullscreenchange",onerror:"mozfullscreenerror",request:"mozRequestFullScreen",status:"mozFullScreen"},ms:{element:"msFullscreenElement",enabled:"msFullscreenEnabled",exit:"msExitFullscreen",onchange:"MSfullscreenchange",onerror:"MSfullscreenerror",request:"msRequestFullscreen",status:"msFullscreen"},default:{element:"fullscreenElement",enabled:"fullscreenEnabled",exit:"exitFullscreen",onchange:"fullscreenchange",onerror:"fullscreenerror",request:"requestFullscreen",status:"fullscreen"}},s=o(),u=void 0!==s,l=function(){function e(){n(this,e)}return i(e,null,[{key:"requestFullScreen",value:function(e){if(u){var t=a[s].request;e[t]()}}},{key:"exitFullScreen",value:function(){if(u){var e=a[s].exit;this._getDocumentProperty(e)()}}},{key:"isEnabled",value:function(){if(!u)return!1;var e=a[s].enabled;return this._getDocumentProperty(e)}},{key:"isSupported",value:function(){return u}},{key:"isInFullScreen",value:function(){if(u){var e=a[s].status;return this._getDocumentProperty(e)}}},{key:"getFullScreenElement",value:function(){if(u){var e=a[s].element;return this._getDocumentProperty(e)}}},{key:"getVendorPrefix",value:function(){return s}},{key:"_getDocumentProperty",value:function(e){return document[e]}}]),e}();Object.assign(l,{vendorMap:a,fullscreenchange:u&&a[s].onchange,fullscreenerror:u&&a[s].onerror}),r.default=l},{}],138:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var r=e.major,n=e.minor,o=e.patch,i=t.major,a=t.minor,s=t.patch;return r>i||r===i&&(n>a||n===a&&o>=s)}function i(e){if(!S.isAutoplayDisabledBrowser()&&!e.start_muted)return!1;var t=e.metadata.player_type;return"mini"!==t&&"radio"!==t}function a(e){try{return new ActiveXObject(e)}catch(e){return!1}}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u="$version",l=/Firefox\//,c=/CriOS/,f="mini",d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,p=/[\d]+/g,h="ShockwaveFlash.ShockwaveFlash",y="ShockwaveFlash.ShockwaveFlash.6",v="ShockwaveFlash.ShockwaveFlash.7",_="Shockwave Flash",b="Shockwave Flash 2.0",g="application/x-shockwave-flash",m="",w=/version\/(\d+)(\.(\d+))?(\.(\d+))?/i,E=/Chrome\/(\d+)(\.(\d+))?(\.(\d+))?/,O=!1,S=function(){function e(){n(this,e)}return s(e,null,[{key:"forcedToPlayFlash",value:function(t){var r=t&&Array.isArray(t.techOrder)&&t.techOrder[0];return!(e.isMobile()||!r||"flash"!==r)&&Boolean(e.getFlashVersion())}},{key:"getFlashVersion",value:function(){var t=void 0;return navigator.plugins&&navigator.plugins.length?(t=navigator.plugins[_])?e.parseFlashVersion(t.description):(t=navigator.plugins[b],t?"2.0.0.11":m):navigator.mimeTypes&&navigator.mimeTypes.length?(t=navigator.mimeTypes[g],t&&t.enabledPlugin?e.parseFlashVersion(t.enabledPlugin.description):m):(t=a(v))?e.parseFlashVersion(t.GetVariable(u)):a(y)?"6.0.21":(t=a(h))?e.parseFlashVersion(t.GetVariable(u)):m}},{key:"isContentAllowedToAutoplay",value:function(t){return!e.isAutoplayDisabledBrowser()||e.isMutedOverlayShowing(t)}},{key:"shouldStartMuted",value:function(t){return e.isMutedOverlayShowing(t)}},{key:"isMutedOverlayShowing",value:function(t){return e.isMutedOverlayEnabled(t)&&t.original_user_options.autoplay}},{key:"isMutedOverlayEnabled",value:function(e){return e.useMutedOverlayPlugin&&i(e)}},{key:"isActionRequiredToPlayAd",value:function(t){return!t&&e.isAutoplayDisabledBrowser()}},{key:"isHlsSupported",value:function(){return!!e.isMobile()||Hls.isSupported()}},{key:"isMiniPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.playerType===f}},{key:"isMobile",value:function(){return d.test(this.userAgent())}},{key:"isSafariDesktop",value:function(){var e=this.userAgent().toLocaleLowerCase();return e.indexOf("safari")!==-1&&e.indexOf("chrome")===-1}},{key:"isChrome64OrAbove",value:function(){var e=this.getBrowserVersion(this.userAgent(),E);return o(e,{major:64,minor:0,patch:0})}},{key:"isSafariDesktop11",value:function(){if(!this.isSafariDesktop())return!1;var e=this.getBrowserVersion(this.userAgent(),w);return 11===e.major&&0===e.minor&&0===e.patch}},{key:"isSafariDesktop11Above",value:function(){if(!this.isSafariDesktop())return!1;var e=this.getBrowserVersion(this.userAgent(),w);return o(e,{major:11,minor:0,patch:1})}},{key:"isSafariDesktop11OrAbove",value:function(){return this.isSafariDesktop11()||this.isSafariDesktop11Above()}},{key:"canAutoplayAfterAction",value:function(){return this.isSafariDesktop11Above()||this.isChrome64OrAbove()}},{key:"isAutoplayDisabledBrowser",value:function(){return!this.getAutoplayAllowed()&&this.isAutoplayWithSoundDisabledBrowser()}},{key:"isAutoplayWithSoundDisabledBrowser",value:function(){return this.isSafariDesktop11OrAbove()||this.isMobile()||this.isChrome64OrAbove()}},{key:"needDirectUserActionToPlay",value:function(){return!this.getAutoplayAllowed()&&(this.isSafariDesktop11()||this.isMobile())}},{key:"setAutoplayAllowed",value:function(e){O=e}},{key:"getAutoplayAllowed",value:function(){return O}},{key:"isFirefox",value:function(){return l.test(this.userAgent())}},{key:"isChromeIos",value:function(){return c.test(navigator.userAgent)}},{key:"parseFlashVersion",value:function(e){return e=e.match(p),e.slice(0,3).join(".")}},{key:"userAgent",value:function(){return navigator.userAgent}},{key:"getBrowserVersion",value:function(e,t){var r=t.exec(e);return r?{major:parseInt(r[1],10)||0,minor:parseInt(r[3],10)||0,patch:parseInt(r[5],10)||0}:{major:0,minor:0,patch:0}}},{key:"isAdOrContentPlaying",value:function(e){var t=e.AdController;return t&&t.adUnit?t.isPlaying():!e.paused()}}]),e}();r.default=S},{}],139:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=/([^?=&]+)(=([^&]*))?/g,a=function(){function e(){n(this,e)}return o(e,null,[{key:"toQueryString",value:function(e){return Object.keys(e).reduce(function(t,r,n){return""+t+(n>0?"&":"")+encodeURIComponent(r)+"="+encodeURIComponent(e[r])},"")}},{key:"parseQueryString",value:function(e){if(!e||"string"!=typeof e)return{};var t={};return e.replace(i,function(e,r,n,o){var i=decodeURIComponent(r),a=void 0!==o?decodeURIComponent(o).replace("+"," "):void 0;return t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(a):void(t[i]=[t[i],a]):void(t[i]=a)}),Object.freeze(t)}}]),e}();r.default=a},{}],140:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(n)},l=e("./event-target"),c=n(l),f=e("log"),d=n(f),p=new d.default("ResizeMonitor"),h=/\d+/g,y="data-breakpoints",v=["onResize","monitor"],_="resize",b=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.el_=e,r.monitorId_=null,v.forEach(function(e){r[e]=r[e].bind(r)}),r.width=null,r.wBreakpoints_=[],r.setupBreakpoints(),r.monitor(),r}return a(t,e),s(t,[{key:"setupBreakpoints",value:function(){var e=this.el_.getAttribute(y);if(e){var t=e.match(h)||[];t=t.map(function(e){return parseFloat(e)}),this.wBreakpoints_=this.wBreakpoints_.concat(t).sort()}}},{key:"getMinWidth",value:function(e){for(var t=this.wBreakpoints_.length-1;0<=t;t--){var r=this.wBreakpoints_[t];if(e>=r)return r}return 0}},{key:"monitor",value:function(){var e=this;this.monitorId_=window.requestAnimationFrame(function(){var t=e.el_.clientWidth;if(e.width!==t){var r=e.getMinWidth(t);e.width=t,e.el_.setAttribute("min-width",r),e.onResize()}e.monitor()})}},{key:"stopMonitoring",value:function(){window.cancelAnimationFrame(this.monitorId_),this.monitorId_=null}},{key:"onResize",value:function(){try{var e=this.el_.getBoundingClientRect();this.trigger(_,{dimensions:e})}catch(e){p.error("Unable to calculate element bounds")}}},{key:"dispose",value:function(){this.el_=this.width=this.wBreakpoints_=null,this.stopMonitoring(),u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(c.default);r.default=b},{"./event-target":136,log:"log"}],141:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){var e=document.createElement("link");return e.setAttribute("data-version",a.version),e.setAttribute("id",h),e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e}function i(){return Boolean(document.getElementById(h))}Object.defineProperty(r,"__esModule",{value:!0});var a=e("bvp-shims"),s=e("log"),u=n(s),l=e("load-timer"),c=n(l),f=e("error-report"),d=n(f),p=new u.default("StyleInjector"),h="_bvpStyle",y="Link could not be loaded",v="error",_="complete",b={inject:function(e,t){var r=document.getElementsByTagName("head")[0];return i()?Promise.resolve():new Promise(function(n,i){c.default.trackLoadStart(t,c.default.loadTypes.CSS_FILE,e);var a=o();void 0!==a.onreadystatechange?a.onreadystatechange=function(){if(_===this.readyState){var r="hidden"===this.currentStyle.visibility;r?(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.COMPLETE),n()):(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.ERROR),d.default.recordLoadError(p,e,"Error loading "+e),i(y)),a.onreadystatechange=a=null}}:a.onload=a.onerror=function(r){v===r.type?(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.ERROR),d.default.recordLoadError(p,e,"Could not load style "+e),i(y)):(c.default.trackLoadComplete(t,c.default.loadTypes.CSS_FILE,c.default.loadStatus.COMPLETE),n()),a.onload=a.onerror=a=null},a.href=e,r.appendChild(a)})}};r.default=b},{"bvp-shims":"bvp-shims","error-report":"error-report","load-timer":"load-timer",log:"log"}],142:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return Object.prototype.toString.call(e)}Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("lodash.clonedeep"),l=n(u),c="object",f="[object Object]",d="[object Array]",p="[object String]",h="[object Date]",y=function(){function e(){o(this,e)}return s(e,null,[{key:"isArray",value:function(e){return i(e)===d}},{key:"isObject",value:function(e){return e&&("undefined"==typeof e?"undefined":a(e))===c}},{key:"isPlainObject",value:function(e){return i(e)===f}},{key:"isString",value:function(e){return i(e)===p}},{key:"isDate",value:function(e){return i(e)===h}},{key:"isEmptyObject",value:function(t){if(!e.isPlainObject(t))return!0;for(var r in t)if(t.hasOwnProperty(r))return!1;return!0}},{key:"deepMerge",value:function(e,t){if(!e)return JSON.parse(JSON.stringify(t));if(!t)return JSON.parse(JSON.stringify(e));var r=(0,l.default)(e);e.streams&&(r.streams=e.streams);for(var n in t)t.hasOwnProperty(n)&&(n in r&&"object"===a(r[n])?r[n]=this.deepMerge(r[n],t[n]):r[n]=t[n]);return r}},{key:"filterEmptyValues",value:function(t){return e.isPlainObject(t)?Object.keys(t).reduce(function(r,n){var o=t[n];return e.isString(o)?""!==o.trim()&&(r[n]=o):"boolean"==typeof o||"number"==typeof o?r[n]=o:o&&(r[n]=o),r},{}):t}}]),e}();r.default=y},{"lodash.clonedeep":103}],143:[function(e,t,r){"use strict";!function(){return"function"!=typeof Array.isArray&&void(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}()},{}],144:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){if("function"==typeof window.CustomEvent)return!1;var e=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0};n(this,e);var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),o};e.prototype=window.Event.prototype,window.CustomEvent=e}()},{}],145:[function(e,t,r){"use strict";e("./symbol"),e("./array/is-array"),e("./object/assign"),e("./promise"),e("whatwg-fetch"),e("./request-animation-frame"),e("./custom-event"),e("./url")},{"./array/is-array":143,"./custom-event":144,"./object/assign":146,"./promise":147,"./request-animation-frame":148,"./symbol":149,"./url":151,"whatwg-fetch":114}],146:[function(e,t,r){"use strict";e("es6-object-assign").polyfill()},{"es6-object-assign":95}],147:[function(e,t,r){"use strict";e("es6-promise").polyfill()},{"es6-promise":96}],148:[function(e,t,r){"use strict";!function(){for(var e=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[t[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var r=(new Date).getTime(),n=Math.max(0,16-(r-e)),o=window.setTimeout(function(){t(r+n)},n);return e=r+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},{}],149:[function(e,t,r){"use strict";e("es6-symbol/implement")},{"es6-symbol/implement":97}],150:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("../js/utils/query-string"),s=n(a),u=function(){function e(t){o(this,e),this.params=s.default.parseQueryString(t)}return i(e,[{key:"get",value:function(e){if(this.has(e))return Array.isArray(this.params[e])?this.params[e][0]:this.params[e]}},{key:"getAll",value:function(e){return this.has(e)?Array.isArray(this.params[e])?this.params[e]:[this.params[e]]:[]}},{key:"has",value:function(e){return this.params.hasOwnProperty(e)}}]),e}();r.default=u},{"../js/utils/query-string":139}],151:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=e("./url-search-params"),a=n(i);!function(){if("function"==typeof window.URL&&window.URL.length>0)return!1;var e=function e(t){o(this,e);var r=document.createElement("a");r.href=t;var n=r,i=n.protocol,s=n.hostname,u=n.port,l=n.pathname,c=n.search,f=n.hash,d=n.host;return r=null,Object.freeze({protocol:i,hostname:s,port:u,pathname:l,search:c,hash:f,host:d,searchParams:new a.default(c)})};window.URL&&window.URL.createObjectURL&&(e.createObjectURL=window.URL.createObjectURL),window.URL&&window.URL.revokeObjectURL&&(e.revokeObjectURL=window.URL.revokeObjectURL),window.URL=e}()},{"./url-search-params":150}],"bvp-constant":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.TRITON_PROVIDER_NAME="TRITON",r.MPEG_STREAM_TYPE="application/x-mpegURL",r.CURRENT_STREAM_NOT_FOUND="error_current_stream_not_found",r.FLASH_TECH_NAME="Flash",r.CHROMECAST_TECH_NAME="Chromecast",r.REGEX_FOR_KRUX=/(ksg)=(\w+)/,r.AD_TYPES={PREROLL:"preroll",MIDROLL:"midroll"}},{}],"bvp-experiment":[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("bb.experiment"),o=new n({});r.default=o},{"bb.experiment":3}],"bvp-shims":[function(e,t,r){"use strict";t.exports={version:"v0.11.115",assetRoot:"cdn.gotraffic.net/projector/v0.11.115",latestRoot:"cdn.gotraffic.net/projector/latest"}},{}],"error-report":[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return e.reduce(function(e,t){return e+" "+i(t)},"").trim()}function i(e){return e&&e.message?e.message:String(e)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=window.BVP_GTM,u=function(){function e(){n(this,e)}return a(e,null,[{key:"recordGenericError",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=o(r);e.error.apply(e,r),s.trackError(s.errorTypes.GENERIC,e.label+": "+i)}},{key:"recordHLSError",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=o(r);e.error.apply(e,r),s.trackError(s.errorTypes.HLS,e.label+": "+i)}},{key:"recordLoadError",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var a=o(n);e.error.apply(e,n),s.trackError(s.errorTypes.LOAD,e.label+": "+a,t)}},{key:"recordAdError",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var a=o(n);e.error.apply(e,n),s.trackError(s.errorTypes.AD,e.label+": "+a,t)}}]),e}();r.default=u},{}],"load-timer":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){y={},v={},_={}}function a(e){return v[e]}Object.defineProperty(r,"__esModule",{value:!0}),r.getInitTime=r.reset=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("log"),l=n(u),c=e("error-report"),f=n(c),d=new l.default("LoadTimer"),p={PLAYER_INIT:"playerinit",APP_BUNDLE:"appbundle",VENDOR_BUNDLE:"vendorbundle",TRITON_ID_SYNC:"tritonidsync",TRITON_PROVISION_API:"tritonprovisionapi",CSS_FILE:"cssfile",IMA_SDK:"imasdk",CONFIG:"config",CEDEXIS:"cedexis",PRE_ROLL:"preroll",BMMR:"bmmr",LOTAME:"lotame"},h={COMPLETE:"COMPLETE",ERROR:"ERROR",INVALID_COMPLETE:"INVALID_COMPLETE",INVALID_ERROR:"INVALID_ERROR"},y={},v={},_={},b=function(){function e(){o(this,e)}return s(e,null,[{key:"setEnabled",value:function(e,t){_[e]=t}},{key:"getEnabled",value:function(e){return!!_[e]}},{key:"trackLoadStart",value:function(e,t,r){if(_[e]){var n=Date.now();if(t===p.PLAYER_INIT&&(y[e]&&f.default.recordGenericError(d,"Attempting to track a second load for "+e+" after a load for this player has already been tracked"),y[e]={},v[e]=n),y[e]||(f.default.recordGenericError(d,"Attempting to track a "+t+" start for "+e+" before an init time has been set"),y[e]={},v[e]=n),y[e][t]){var o=y[e][t].loadStatus?"Attempting to track load start for "+t+" on "+e+" after the load has completed":"Attempting to track load start for "+t+" on "+e+" after a load start exists";return void f.default.recordGenericError(d,o)}y[e][t]={startDeltaTime:n-v[e],startTime:n,url:r}}}},{key:"trackLoadComplete",value:function(e,t,r){if(_[e]){y[e]&&y[e][t]||(f.default.recordGenericError(d,"Attempting to complete "+t+" on "+e+" which has not been started"),y[e]||(y[e]={}),y[e][t]={startDeltaTime:0,startTime:v[e],url:"unknown"},r=r==h.COMPLETE?h.INVALID_COMPLETE:h.INVALID_ERROR),y[e][t].loadStatus&&f.default.recordGenericError(d,"Attempting to complete "+t+" on "+e+" which has already been completed");var n=Date.now();Object.assign(y[e][t],{endDeltaTime:n-v[e],duration:n-y[e][t].startTime,endTime:n,loadStatus:r})}}},{key:"getLoadTimes",value:function(e){return y[e]}}]),e}();Object.defineProperties(b,{loadTypes:{value:p},loadStatus:{value:h}}),r.default=b,r.reset=i,r.getInitTime=a},{"error-report":"error-report",log:"log"}],log:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i={1:"error",2:"warn",3:"info",4:"debug",5:"trace"},a=0,s=Symbol("log"),u=Symbol("lastLogLevel"),l={getConsole:function(){return console}},c={TRACE:5,DEBUG:4,INFO:3,WARN:2,ERROR:1},f={LOG_LEVELS:c,minLogLevel:0,useTimestamp:!1,reporter:l},d=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),!t)throw new Error("Logger label must be set");this.label=t,this.logConfig=Object.assign(f,r),this[u]=this.logConfig.minLogLevel}return o(e,[{key:s,value:function(e,t){if(e<=this.logConfig.minLogLevel){var r=this.logConfig.reporter.getConsole(),n=r[i[e]]||r.log,o=["[BVP] "+this.label+":"];this.logConfig.useTimestamp&&o.push(Date.now()),n.apply(r,o.concat(Array.prototype.slice.call(t)))}}},{key:"setMinLogLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.logConfig.minLogLevel=e}},{key:"enable",value:function(){this.setMinLogLevel(this[u])}},{key:"disable",value:function(){this[u]=this.logConfig.minLogLevel,this.setMinLogLevel(a)}},{key:"trace",value:function(){this[s](c.TRACE,arguments)}},{key:"debug",value:function(){this[s](c.DEBUG,arguments)}},{key:"info",value:function(){this[s](c.INFO,arguments)}},{key:"warn",value:function(){this[s](c.WARN,arguments)}},{key:"error",value:function(){this[s](c.ERROR,arguments)}}],[{key:"getLogLevels",value:function(){return c}}]),e}();r.default=d},{}],resources:[function(e,t,r){"use strict";t.exports={APP_BUNDLE:"//cdn.gotraffic.net/projector/v0.11.115/app.js",VENDOR_BUNDLE:"//cdn.gotraffic.net/projector/v0.11.115/vendor.js",APP_CSS:"//cdn.gotraffic.net/projector/v0.11.115/bvp.css",CONFIG_OVERWRITES:"//cdn.gotraffic.net/projector/latest/assets/config/config.min.json?v=1",SWF_FILE_NAME_INSIGHTS:"//cdn.gotraffic.net/projector/v0.11.115/BloombergInsightsPlayer.swf",SKIN_FILE_NAME:"//cdn.gotraffic.net/projector/v0.11.115/skin.png",BUFFERING_ANIMATION_FILE_NAME:"//cdn.gotraffic.net/projector/v0.11.115/assets/images/loading_spinner.gif",PERSONALIZATION_API:"https://personalization.bloomberg.com",TRITON_TAG:"ttag=device%3Aweb",YOUBORA_ACCOUNT:"bloomberg",GEOIP_API:"//location.bloomberg.com/public/query",TRIGR_API:"//www.bloomberg.com/trigrservice",VOD_MIDROLL_ENABLED:"true"}},{}],"retry-controller":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("log"),s=n(a),u=1e3,l=2e3,c=new s.default("RetryController"),f=["retry","resetRetryDelay","dispose"],d=function(){function e(t){var r=this,n=t.name,i=t.tryCallback,a=t.cleanupCallback,s=t.maxRetryDelay;o(this,e),this.name=n,this.tryCallback=i,this.cleanupCallback=a,this.maxRetryDelay=s,this.retryDelay=0,this.retryTimer=null,f.forEach(function(e){return r[e]=r[e].bind(r)})}return i(e,[{key:"resetRetryDelay",value:function(){this.retryDelay<u+l||(c.debug(this.name+" resetting retry interval"),this.retryDelay=this._getInitialRetryDelay())}},{key:"shouldRetry",value:function(){return this.retryDelay<=this.maxRetryDelay}},{key:"retry",value:function(){var e=this;if(!this.shouldRetry()){var t="("+this.name+") retry maxRetryDelay ("+this.maxRetryDelay+") reached. Giving up. "+this.retryDelay;return c.debug(t),Promise.reject(t)}return this._cleanup(),new Promise(function(t){e.retryTimer=setTimeout(function(){c.debug("("+e.name+") retrying..."),e.retryTimer=null,t(e.tryCallback())},e.retryDelay),c.debug("("+e.name+") retrying in "+e.retryDelay+"ms"),e.retryDelay=e.retryDelay>0?2*e.retryDelay:e._getInitialRetryDelay()})}},{key:"dispose",value:function(){this._cleanup()}},{key:"_cleanup",value:function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null),this.cleanupCallback&&this.cleanupCallback()}},{key:"_getInitialRetryDelay",value:function(){return Math.random()*l+u}}]),e}();r.default=d},{log:"log"}],"script-injector":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("load-timer"),s=n(a),u=e("log"),l=n(u),c=e("error-report"),f=n(c),d=Array.prototype.slice,p="error",h="loaded",y=new l.default("ScriptInjector"),v=/^http(.*)$/,_=void 0,b=function(){function e(){o(this,e),this.requestQueue={},this.documentScripts=e.getDocumentScripts()}return i(e,[{key:"isLoaded",value:function(t){var r=e.generateScriptKey(t);return Boolean(this.documentScripts[r])}},{key:"isRequested",value:function(t){var r=e.generateScriptKey(t);return Boolean(this.requestQueue[r])}},{key:"inject",value:function(t,r,n){var o=this,i=e.generateScriptKey(t),a=document.querySelector("body");return this.isRequested(t)?this.requestQueue[i]:this.isLoaded(t)?Promise.resolve():(this.requestQueue[i]=e.injectScript(t,a,r,n).then(function(){o.documentScripts[i]=!0,o.requestQueue[i]=null}),this.requestQueue[i])}}],[{key:"getInstance",value:function(){return _||(_=new e),_}},{key:"getDocumentScripts",value:function(){return d.call(document.scripts).reduce(function(t,r){if(r.src){var n=e.generateScriptKey(r.src);t.hasOwnProperty(n)&&y.warn("Duplicate script found: "+r.src),t[r.src]=!0}return t},{})}},{key:"generateScriptKey",value:function(e){v.test(e)||(e=location.protocol+e);var t=new URL(e),r=t.pathname.split("/").slice(-1)[0];return t.host+":"+r}},{key:"injectScript",value:function(e,t,r,n){var o=document.createElement("script");return o.src=e,o.async=!0,new Promise(function(i,a){s.default.trackLoadStart(r,n,e),void 0!==o.onreadystatechange?o.onreadystatechange=function(){h===this.readyState&&(s.default.trackLoadComplete(r,n,s.default.loadStatus.COMPLETE),i(),o.onreadystatechange=o=null)}:o.onload=o.onerror=function(u){return u.type===p?(s.default.trackLoadComplete(r,n,s.default.loadStatus.ERROR),f.default.recordLoadError(y,e,"Script could not be loaded",u),a("Script could not be loaded: "+e),t.removeChild(o),void(o.onload=o.onerror=o=null)):(s.default.trackLoadComplete(r,n,s.default.loadStatus.COMPLETE),i(e),void(o.onload=o.onerror=o=null))},t.appendChild(o)})}}]),e}();r.default=b},{"error-report":"error-report","load-timer":"load-timer",log:"log"}],"triton-stream-provider":[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("script-injector"),s=n(a),u=e("uuid/v4"),l=n(u),c=e("retry-controller"),f=n(c),d=e("bvp-constant"),p=e("load-timer"),h=n(p),y=e("error-report"),v=n(y),_=e("log"),b=n(_),g=e("resources"),m=n(g),w=new b.default("TritonStreamProvider"),E=s.default.getInstance(),O="https://playerservices.live.streamtheworld.com/api/idsync.js",S="https://playerservices.streamtheworld.com/api/livestream",P={mode:"cors",credentials:"same-origin",cache:"no-cache"},k=3e4,A=function(){function e(){o(this,e)}return i(e,null,[{key:"syncAndFetchStreamInfo",value:function(e,t){var r=this,n=e.apiVersion,o=e.mount,i=e.stationId;return this._syncIds(i,t).then(function(){return r.fetchStreamInfo({apiVersion:n,mount:o},t)})}},{key:"fetchStreamInfo",value:function(e,t){var r=this,n=e.apiVersion,o=e.mount,i=S+"?transports=hls&version="+n+"&mount="+o;return new Promise(function(e,n){var a=new f.default({name:"Provision Request",tryCallback:function(){r._fetchStreamMetadata(i,o,t).then(function(t){a.dispose(),e(t)},function(e){return a.shouldRetry()?void a.retry():(w.debug("Maximum retry delay reached. Giving up."),a.dispose(),n(e))})},maxRetryDelay:k});a.retry()})}},{key:"_fetchStreamMetadata",value:function(e,t,r){var n=this;return h.default.trackLoadStart(r,h.default.loadTypes.TRITON_PROVISION_API,e),fetch(e,P).then(function(e){if(!e.ok)throw new Error("Bad response from Triton provision API: "+e.status);return h.default.trackLoadComplete(r,h.default.loadTypes.TRITON_PROVISION_API,h.default.loadStatus.COMPLETE),e.text().then(function(e){var r=window.xml.xmlToJSON(e);return n._buildStreamInfo(r,t)})}).catch(function(t){throw v.default.recordLoadError(w,e,"Unable to load:",t),h.default.trackLoadComplete(r,h.default.loadTypes.TRITON_PROVISION_API,h.default.loadStatus.ERROR),t})}},{key:"_generateSidebandMetadataId",value:function(){return(0,l.default)()}},{key:"_syncIds",value:function(e,t){return E.inject(O+"?stationId="+e,t,h.default.loadTypes.TRITON_ID_SYNC)}},{key:"_buildStreamInfo",value:function(e,t){var r=this,n=e.live_stream_config.mountpoints.mountpoint,o=n.transports.transport["@mountSuffix"],i=n.metadata["sse-sideband"]["@metadataSuffix"],a=n.servers.server.map(function(e){return e.ip.Text}),s=m.default.TRITON_TAG?"&"+m.default.TRITON_TAG:"",u=a.map(function(e){var n=r._generateSidebandMetadataId();return{url:"https://"+e+"/"+t+o+"?sbmid="+n+s,sbmUrl:"https://"+e+"/"+t+i+"?sbmid="+n,type:d.MPEG_STREAM_TYPE}});return u}}]),e}();r.default=A},{"bvp-constant":"bvp-constant","error-report":"error-report","load-timer":"load-timer",log:"log",resources:"resources","retry-controller":"retry-controller","script-injector":"script-injector","uuid/v4":113}]},{},[145,115]);
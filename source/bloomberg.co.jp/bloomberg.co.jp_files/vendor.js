!function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,r){},{}],2:[function(e,t,r){!function(e){"use strict";function t(e,t,n,i,o){this._internal=new r(e,t,n,i,o)}function r(e,t,r,n,i){this.onStartCallback=t,this.onProgressCallback=r,this.onFinishCallback=n,this.thisArg=i,this.xhr=e,this.state=0,this.charOffset=0,this.offset=0,this.url="",this.withCredentials=!1,this.timeout=0}function n(){this._data={}}function i(){this._listeners=new n}function o(e){d(function(){throw e},0)}function a(e){this.type=e,this.target=void 0}function s(e,t){a.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}function u(e,t){i.call(this),this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url="",this.readyState=_,this.withCredentials=!1,this._internal=new l(this,e,t)}function l(e,r,n){this.url=r.toString(),this.readyState=_,this.withCredentials=y&&void 0!=n&&Boolean(n.withCredentials),this.es=e,this.initialRetry=R(1e3,0),this.heartbeatTimeout=R(45e3,0),this.lastEventId="",this.retry=this.initialRetry,this.wasActivity=!1;var i=void 0!=n&&void 0!=n.Transport?n.Transport:v,o=new i;this.transport=new t(o,this.onStart,this.onProgress,this.onFinish,this),this.timeout=0,this.currentState=m,this.dataBuffer=[],this.lastEventIdBuffer="",this.eventTypeBuffer="",this.state=w,this.fieldStart=0,this.valueStart=0,this.es.url=this.url,this.es.readyState=this.readyState,this.es.withCredentials=this.withCredentials,this.onTimeout()}function c(){this.CONNECTING=_,this.OPEN=b,this.CLOSED=T}var d=e.setTimeout,f=e.clearTimeout,h=function(){};t.prototype.open=function(e,t){this._internal.open(e,t)},t.prototype.cancel=function(){this._internal.cancel()},r.prototype.onStart=function(){if(1===this.state){this.state=2;var e=0,t="",r=void 0;if("contentType"in this.xhr)e=200,t="OK",r=this.xhr.contentType;else try{e=this.xhr.status,t=this.xhr.statusText,r=this.xhr.getResponseHeader("Content-Type")}catch(n){e=0,t="",r=void 0}void 0==r&&(r=""),this.onStartCallback.call(this.thisArg,e,t,r)}},r.prototype.onProgress=function(){if(this.onStart(),2===this.state||3===this.state){this.state=3;var e="";try{e=this.xhr.responseText}catch(e){}for(var t=this.charOffset,r=e.length,n=this.offset;n<r;n+=1){var i=e.charCodeAt(n);i!=="\n".charCodeAt(0)&&i!=="\r".charCodeAt(0)||(this.charOffset=n+1)}this.offset=r;var o=e.slice(t,this.charOffset);this.onProgressCallback.call(this.thisArg,o)}},r.prototype.onFinish=function(){this.onProgress(),3===this.state&&(this.state=4,0!==this.timeout&&(f(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg))},r.prototype.onReadyStateChange=function(){void 0!=this.xhr&&(4===this.xhr.readyState?0===this.xhr.status?this.onFinish():this.onFinish():3===this.xhr.readyState?this.onProgress():2===this.xhr.readyState)},r.prototype.onTimeout2=function(){this.timeout=0;var t=/^data\:([^,]*?)(base64)?,([\S]*)$/.exec(this.url),r=t[1],n="base64"===t[2]?e.atob(t[3]):decodeURIComponent(t[3]);1===this.state&&(this.state=2,this.onStartCallback.call(this.thisArg,200,"OK",r)),2!==this.state&&3!==this.state||(this.state=3,this.onProgressCallback.call(this.thisArg,n)),3===this.state&&(this.state=4,this.onFinishCallback.call(this.thisArg))},r.prototype.onTimeout1=function(){this.timeout=0,this.open(this.url,this.withCredentials)},r.prototype.onTimeout0=function(){var e=this;this.timeout=d(function(){e.onTimeout0()},500),3===this.xhr.readyState&&this.onProgress()},r.prototype.handleEvent=function(e){"load"===e.type?this.onFinish():"error"===e.type?this.onFinish():"abort"===e.type?this.onFinish():"progress"===e.type?this.onProgress():"readystatechange"===e.type&&this.onReadyStateChange()},r.prototype.open=function(t,r){this.cancel(),this.url=t,this.withCredentials=r,this.state=1,this.charOffset=0,this.offset=0;var n=this,i=/^data\:([^,]*?)(?:;base64)?,[\S]*$/.exec(t);if(void 0!=i)return void(this.timeout=d(function(){n.onTimeout2()},0));if((!("ontimeout"in this.xhr)||"sendAsBinary"in this.xhr||"mozAnon"in this.xhr)&&void 0!=e.document&&void 0!=e.document.readyState&&"complete"!==e.document.readyState)return void(this.timeout=d(function(){n.onTimeout1()},4));this.xhr.onload=function(e){n.handleEvent({type:"load"})},this.xhr.onerror=function(){n.handleEvent({type:"error"})},this.xhr.onabort=function(){n.handleEvent({type:"abort"})},this.xhr.onprogress=function(){n.handleEvent({type:"progress"})},this.xhr.onreadystatechange=function(){n.handleEvent({type:"readystatechange"})},this.xhr.open("GET",t,!0),this.xhr.withCredentials=r,this.xhr.responseType="text","setRequestHeader"in this.xhr&&this.xhr.setRequestHeader("Accept","text/event-stream");try{this.xhr.send(void 0)}catch(e){throw e}"readyState"in this.xhr&&void 0!=e.opera&&(this.timeout=d(function(){n.onTimeout0()},0))},r.prototype.cancel=function(){0!==this.state&&4!==this.state&&(this.state=4,this.xhr.onload=h,this.xhr.onerror=h,this.xhr.onabort=h,this.xhr.onprogress=h,this.xhr.onreadystatechange=h,this.xhr.abort(),0!==this.timeout&&(f(this.timeout),this.timeout=0),this.onFinishCallback.call(this.thisArg)),this.state=0},n.prototype.get=function(e){return this._data[e+"~"]},n.prototype.set=function(e,t){this._data[e+"~"]=t},n.prototype.delete=function(e){delete this._data[e+"~"]},i.prototype.dispatchEvent=function(e){e.target=this;var t=e.type.toString(),r=this._listeners,n=r.get(t);if(void 0!=n)for(var i=n.length,a=void 0,s=0;s<i;s+=1){a=n[s];try{"function"==typeof a.handleEvent?a.handleEvent(e):a.call(this,e)}catch(e){o(e)}}},i.prototype.addEventListener=function(e,t){e=e.toString();var r=this._listeners,n=r.get(e);void 0==n&&(n=[],r.set(e,n));for(var i=n.length;i>=0;i-=1)if(n[i]===t)return;n.push(t)},i.prototype.removeEventListener=function(e,t){e=e.toString();var r=this._listeners,n=r.get(e);if(void 0!=n){for(var i=n.length,o=[],a=0;a<i;a+=1)n[a]!==t&&o.push(n[a]);0===o.length?r.delete(e):r.set(e,o)}},s.prototype=a.prototype;var p=e.XMLHttpRequest,g=e.XDomainRequest,y=void 0!=p&&void 0!=(new p).withCredentials,v=y||void 0!=p&&void 0==g?p:g,m=-1,_=0,b=1,T=2,E=3,w=4,k=5,S=6,A=7,C=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,P=1e3,O=18e6,R=function(e,t){var r=e;return r!==r&&(r=t),r<P?P:r>O?O:r},x=function(e,t,r){try{"function"==typeof t&&t.call(e,r)}catch(e){o(e)}};l.prototype.onStart=function(e,t,r){if(this.currentState===_)if(void 0==r&&(r=""),200===e&&C.test(r)){this.currentState=b,this.wasActivity=!0,this.retry=this.initialRetry,this.readyState=b,this.es.readyState=b;var n=new a("open");this.es.dispatchEvent(n),x(this.es,this.es.onopen,n)}else if(0!==e){var i="";i=200!==e?"EventSource's response has a status "+e+" "+t.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+r.replace(/\s+/g," ")+". Aborting the connection.",o(new Error(i)),this.close();var n=new a("error");this.es.dispatchEvent(n),x(this.es,this.es.onerror,n)}},l.prototype.onProgress=function(e){if(this.currentState===b){var t=e.length;0!==t&&(this.wasActivity=!0);for(var r=0;r<t;r+=1){var n=e.charCodeAt(r);if(this.state===E&&n==="\n".charCodeAt(0))this.state=w;else if(this.state===E&&(this.state=w),n==="\r".charCodeAt(0)||n==="\n".charCodeAt(0)){if(this.state!==w){this.state===k&&(this.valueStart=r+1);var i=e.slice(this.fieldStart,this.valueStart-1),o=e.slice(this.valueStart+(this.valueStart<r&&e.charCodeAt(this.valueStart)===" ".charCodeAt(0)?1:0),r);if("data"===i)this.dataBuffer.push(o);else if("id"===i)this.lastEventIdBuffer=o;else if("event"===i)this.eventTypeBuffer=o;else if("retry"===i)this.initialRetry=R(Number(o),this.initialRetry),this.retry=this.initialRetry;else if("heartbeatTimeout"===i&&(this.heartbeatTimeout=R(Number(o),this.heartbeatTimeout),0!==this.timeout)){f(this.timeout);var a=this;this.timeout=d(function(){a.onTimeout()},this.heartbeatTimeout)}}if(this.state===w){if(0!==this.dataBuffer.length){this.lastEventId=this.lastEventIdBuffer,""===this.eventTypeBuffer&&(this.eventTypeBuffer="message");var u=new s(this.eventTypeBuffer,{data:this.dataBuffer.join("\n"),lastEventId:this.lastEventIdBuffer});if(this.es.dispatchEvent(u),"message"===this.eventTypeBuffer&&x(this.es,this.es.onmessage,u),this.currentState===T)return}this.dataBuffer.length=0,this.eventTypeBuffer=""}this.state=n==="\r".charCodeAt(0)?E:w}else this.state===w&&(this.fieldStart=r,this.state=k),this.state===k?n===":".charCodeAt(0)&&(this.valueStart=r+1,this.state=S):this.state===S&&(this.state=A)}}},l.prototype.onFinish=function(){if(this.currentState===b||this.currentState===_){this.currentState=m,0!==this.timeout&&(f(this.timeout),this.timeout=0),this.retry>16*this.initialRetry&&(this.retry=16*this.initialRetry),this.retry>O&&(this.retry=O);var e=this;this.timeout=d(function(){e.onTimeout()},this.retry),this.retry=2*this.retry+1,this.readyState=_,this.es.readyState=_;var t=new a("error");this.es.dispatchEvent(t),x(this.es,this.es.onerror,t)}},l.prototype.onTimeout=function(){if(this.timeout=0,this.currentState===m){this.wasActivity=!1;var e=this;this.timeout=d(function(){e.onTimeout()},this.heartbeatTimeout),this.currentState=_,this.dataBuffer.length=0,this.eventTypeBuffer="",this.lastEventIdBuffer=this.lastEventId,this.fieldStart=0,this.valueStart=0,this.state=w;var t=this.url.slice(0,5);t="data:"!==t&&"blob:"!==t?this.url+((this.url.indexOf("?",0)===-1?"?":"&")+"lastEventId="+encodeURIComponent(this.lastEventId)+"&r="+(Math.random()+1).toString().slice(2)):this.url;try{this.transport.open(t,this.withCredentials)}catch(e){throw this.close(),e}}else if(this.wasActivity){this.wasActivity=!1;var e=this;this.timeout=d(function(){e.onTimeout()},this.heartbeatTimeout)}else o(new Error("No activity within "+this.heartbeatTimeout+" milliseconds. Reconnecting.")),this.transport.cancel()},l.prototype.close=function(){this.currentState=T,this.transport.cancel(),0!==this.timeout&&(f(this.timeout),this.timeout=0),this.readyState=T,this.es.readyState=T},c.prototype=i.prototype,u.prototype=new c,u.prototype.close=function(){this._internal.close()},c.call(u),y&&(u.prototype.withCredentials=void 0);var j=function(){return void 0!=e.EventSource&&"withCredentials"in e.EventSource.prototype};void 0!=v&&(void 0==e.EventSource||y&&!j())&&(e.NativeEventSource=e.EventSource,e.EventSource=u)}("undefined"!=typeof window?window:this)},{}],3:[function(e,t,r){function n(e,t,r){if(!s(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===u.call(e)?i(e,t,r):"string"==typeof e?o(e,t,r):a(e,t,r)}function i(e,t,r){for(var n=0,i=e.length;n<i;n++)l.call(e,n)&&t.call(r,e[n],n,e)}function o(e,t,r){for(var n=0,i=e.length;n<i;n++)t.call(r,e.charAt(n),n,e)}function a(e,t,r){for(var n in e)l.call(e,n)&&t.call(r,e[n],n,e)}var s=e("is-function");t.exports=n;var u=Object.prototype.toString,l=Object.prototype.hasOwnProperty},{"is-function":7}],4:[function(e,t,r){(function(r){var n="undefined"!=typeof r?r:"undefined"!=typeof window?window:{},i=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var o=n["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":1}],5:[function(e,t,r){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,r){(function(n){!function(e){if("object"==typeof r&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:this,i.Hls=e()}}(function(){var t;return function t(r,n,i){function o(s,u){if(!n[s]){if(!r[s]){var l="function"==typeof e&&e;if(!u&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};r[s][0].call(d.exports,function(e){var t=r[s][1][e];return o(t?t:e)},d,d.exports,t,r,n,i)}return n[s].exports}for(var a="function"==typeof e&&e,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,o,u,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(a(r))for(o=Array.prototype.slice.call(arguments,1),l=r.slice(),n=l.length,u=0;u<n;u++)l[u].apply(this,o);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=o;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,r,n){!function(e){var i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,u={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),t=t.trim(),!t){if(!r.alwaysNormalize)return e;var n=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return n.path=u.normalizePath(n.path),u.buildURLFromParts(n)}var i=this.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=u.normalizePath(i.path),u.buildURLFromParts(i)):t;var a=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=o.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var l={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(l.netLoc=a.netLoc,"/"!==i.path[0]))if(i.path){var c=a.path,d=c.substring(0,c.lastIndexOf("/")+1)+i.path;l.path=u.normalizePath(d)}else l.path=a.path,i.params||(l.params=a.params,i.query||(l.query=a.query));return null===l.path&&(l.path=r.alwaysNormalize?u.normalizePath(i.path):i.path),u.buildURLFromParts(l)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};"object"==typeof n&&"object"==typeof r?r.exports=u:"function"==typeof t&&t.amd?t([],function(){return u}):"object"==typeof n?n.URLToolkit=u:e.URLToolkit=u}(this)},{}],3:[function(e,t,r){var n=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){function r(e){y[e]=!0;for(var t in i[e][1]){var n=i[e][1][t];y[n]||r(n)}}for(var s,u=Object.keys(o),l=0,c=u.length;l<c;l++){var d=u[l],f=o[d].exports;if(f===e||f&&f.default===e){s=d;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},l=0,c=u.length;l<c;l++){var d=u[l];h[d]=d}i[s]=[Function(["require","module","exports"],"("+e+")(self)"),h]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[s]=s,i[p]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),g];var y={};r(p);var v="("+n+")({"+Object.keys(y).map(function(e){return a(e)+":["+i[e][0]+","+a(i[e][1])+"]"}).join(",")+"},{},["+a(p)+"])",m=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([v],{type:"text/javascript"});if(t&&t.bare)return _;var b=m.createObjectURL(_),T=new Worker(b);return T.objectURL=b,T}},{}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.hlsDefaultConfig=void 0;var i=e(5),o=n(i),a=e(8),s=n(a),u=e(9),l=n(u),c=e(10),d=n(c),f=e(58),h=n(f),p=e(7),g=n(p),y=e(6),v=n(y),m=e(50),_=n(m),b=e(16),T=n(b),E=e(15),w=n(E),k=e(14),S=n(k);r.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:h.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:o.default,bufferController:s.default,capLevelController:l.default,fpsController:d.default,audioStreamController:v.default,audioTrackController:g.default,subtitleStreamController:S.default,subtitleTrackController:w.default,timelineController:T.default,cueHandler:_.default,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{10:10,14:14,15:15,16:16,5:5,50:50,58:58,6:6,7:7,8:8,9:9}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=e(37),h=n(f),p=e(33),g=e(53),y=e(51),v=n(y),m=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING,l.default.FRAG_LOADED,l.default.FRAG_BUFFERED,l.default.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.onCheck=r._abandonRulesCheck.bind(r),r}return a(t,e),s(t,[{key:"destroy",value:function(){this.clearTimer(),d.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var r=this.hls,n=e.frag.level,i=r.levels[n].details.live,o=r.config,a=void 0,s=void 0;i?(a=o.abrEwmaFastLive,s=o.abrEwmaSlowLive):(a=o.abrEwmaFastVoD,s=o.abrEwmaSlowVoD),this._bwEstimator=new v.default(r,s,a,o.abrEwmaDefaultEstimate)}this.fragCurrent=t}}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,n=r.loader,i=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return g.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var o=n.stats;if(t&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var a=performance.now()-o.trequest,s=Math.abs(t.playbackRate);if(a>500*r.duration/s){var u=e.levels,c=Math.max(1,o.bw?o.bw/8:1e3*o.loaded/a),d=u[r.level],f=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,p=o.total?o.total:Math.max(o.loaded,Math.round(r.duration*f/8)),y=t.currentTime,v=(p-o.loaded)/c,m=(h.default.bufferInfo(t,y,e.config.maxBufferHole).end-y)/s;if(m<2*r.duration/s&&v>m){var _=void 0,b=void 0;for(b=r.level-1;b>i;b--){var T=u[b].realBitrate?Math.max(u[b].realBitrate,u[b].bitrate):u[b].bitrate;if(_=r.duration*T/(6.4*c),_<m)break}_<v&&(g.logger.warn("loading too slow, abort fragment loading and switch to level "+b+":fragLoadedDelay["+b+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+_.toFixed(1)+"<"+v.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=b,this._bwEstimator.sample(a,o.loaded),n.abort(),this.clearTimer(),e.trigger(l.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:o}))}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,i=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:i},r.realBitrate=Math.round(8*n/i)}if(e.frag.bitrateTest){var o=e.stats;o.tparsed=o.tbuffered=o.tload,this.onFragBuffered(e)}}}},{key:"onFragBuffered",value:function(e){var t=e.stats,r=e.frag;if(!(t.aborted===!0||1!==r.loadCounter||"main"!==r.type||isNaN(r.sn)||r.bitrateTest&&t.tload!==t.tbuffered)){var n=t.tparsed-t.trequest;g.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}}},{key:"onError",value:function(e){switch(e.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}}},{key:"clearTimer",value:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},{key:"_findBestLevel",value:function(e,t,r,n,i,o,a,s,u){for(var l=i;l>=n;l--){var c=u[l],d=c.details,f=d?d.totalduration/d.fragments.length:t,h=!!d&&d.live,p=void 0;p=l<=e?a*r:s*r;var y=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,v=y*f/p;if(g.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(p)+"/"+y+"/"+f+"/"+o+"/"+v),p>y&&(!v||h&&!this.bitrateTestDelay||v<o))return l}return-1}},{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(e===-1||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return e!==-1&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,o=e.media,a=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,l=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,c=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,d=(h.default.bufferInfo(o,u,n.maxBufferHole).end-u)/l,f=this._findBestLevel(a,s,c,i,t,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(f>=0)return f;g.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,y=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(0===d){var m=this.bitrateTestDelay;if(m){var _=s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay;p=_-m,g.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),y=v=1}}return f=this._findBestLevel(a,s,c,i,t,d+p,y,v,r),Math.max(f,0)}}]),t}(d.default);r.default=m},{33:33,34:34,35:35,37:37,51:51,53:53}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(48),l=n(u),c=e(37),d=n(c),f=e(25),h=n(f),p=e(35),g=n(p),y=e(34),v=n(y),m=e(38),_=n(m),b=e(54),T=n(b),E=e(33),w=e(53),k={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},S=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHING,g.default.AUDIO_TRACKS_UPDATED,g.default.AUDIO_TRACK_SWITCHING,g.default.AUDIO_TRACK_LOADED,g.default.KEY_LOADED,g.default.FRAG_LOADED,g.default.FRAG_PARSING_INIT_SEGMENT,g.default.FRAG_PARSING_DATA,g.default.FRAG_PARSED,g.default.ERROR,g.default.BUFFER_CREATED,g.default.BUFFER_APPENDED,g.default.BUFFER_FLUSHED,g.default.INIT_PTS_FOUND));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=k.STOPPED,r.ontick=r.tick.bind(r),r.initPTS=[],r.waitingFragment=null,r}return a(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),v.default.prototype.destroy.call(this),this.state=k.STOPPED}},{key:"onInitPtsFound",value:function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,w.logger.log("InitPTS for cc:"+r+" found from video track:"+n),this.state===k.WAITING_INIT_PTS&&(w.logger.log("sending pending audio frag to demuxer"),this.state=k.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null))}},{key:"startLoad",value:function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&e===-1?(w.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=k.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=k.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=k.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=k.STOPPED}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){var e,t,r,n=this.hls,i=n.config;switch(this.state){case k.ERROR:case k.PAUSED:case k.BUFFER_FLUSHING:break;case k.STARTING:this.state=k.WAITING_TRACK,this.loadedmetadata=!1;break;case k.IDLE:var o=this.tracks;if(!o)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;e=this.loadedmetadata?this.media.currentTime:this.nextLoadPosition;var a=this.mediaBuffer?this.mediaBuffer:this.media,s=d.default.bufferInfo(a,e,i.maxBufferHole),u=s.len,c=s.end,f=this.fragPrevious,h=i.maxMaxBufferLength,p=this.audioSwitch,y=this.trackId;if((u<h||p)&&y<o.length){if(r=o[y].details,"undefined"==typeof r){this.state=k.WAITING_TRACK;break}if(!p&&!r.live&&f&&f.sn===r.endSN&&(!this.media.seeking||this.media.duration-c<f.duration/2)){this.hls.trigger(g.default.BUFFER_EOS,{type:"audio"}),this.state=k.ENDED;break}var v=r.fragments,m=v.length,_=v[0].start,b=v[m-1].start+v[m-1].duration,T=void 0;if(p)if(r.live&&!r.PTSKnown)w.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),c=0;else if(c=e,r.PTSKnown&&e<_){if(!(s.end>_||s.nextStart))return;w.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=_+.05;
}if(r.initSegment&&!r.initSegment.data)T=r.initSegment;else if(c<=_){if(T=v[0],r.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var S=s.nextStart?s.nextStart:_;return w.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(S+.05)),void(this.media.currentTime=S+.05)}}else{var A=void 0,C=i.maxFragLookUpTolerance,P=f?v[f.sn-v[0].sn+1]:void 0,O=function(e){var t=Math.min(C,e.duration);return e.start+e.duration-t<=c?1:e.start-t>c&&e.start?-1:0};c<b?(c>b-C&&(C=0),A=P&&!O(P)?P:l.default.search(v,O)):A=v[m-1],A&&(T=A,_=A.start,f&&T.level===f.level&&T.sn===f.sn&&(T.sn<r.endSN?(T=v[T.sn+1-r.startSN],w.logger.log("SN just loaded, load next one: "+T.sn)):T=null))}if(T)if(T.decryptdata&&null!=T.decryptdata.uri&&null==T.decryptdata.key)w.logger.log("Loading key for "+T.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+y),this.state=k.KEY_LOADING,n.trigger(g.default.KEY_LOADING,{frag:T});else{if(w.logger.log("Loading "+T.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+y+", currentTime:"+e+",bufferEnd:"+c.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,T.loadCounter){T.loadCounter++;var R=i.fragLoadingLoopThreshold;if(T.loadCounter>R&&Math.abs(this.fragLoadIdx-T.loadIdx)<R)return void n.trigger(g.default.ERROR,{type:E.ErrorTypes.MEDIA_ERROR,details:E.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:T})}else T.loadCounter=1;T.loadIdx=this.fragLoadIdx,this.fragCurrent=T,this.startFragRequested=!0,isNaN(T.sn)||(this.nextLoadPosition=T.start+T.duration),n.trigger(g.default.FRAG_LOADING,{frag:T}),this.state=k.FRAG_LOADING}}break;case k.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=k.IDLE);break;case k.FRAG_LOADING_WAITING_RETRY:var x=performance.now(),j=this.retryDate;a=this.media;var I=a&&a.seeking;(!j||x>=j||I)&&(w.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=k.IDLE);break;case k.WAITING_INIT_PTS:case k.STOPPED:case k.FRAG_LOADING:case k.PARSING:case k.PARSED:case k.ENDED:}}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(w.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){this.state===k.ENDED&&(this.state=k.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()}},{key:"onMediaEnded",value:function(){this.startPosition=this.lastCurrentTime=0}},{key:"onAudioTracksUpdated",value:function(e){w.logger.log("audio tracks updated"),this.tracks=e.audioTracks}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url;this.trackId=e.id,this.state=k.IDLE,this.fragCurrent=null,this.state=k.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=k.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()}},{key:"onAudioTrackLoaded",value:function(e){var t=e.details,r=e.id,n=this.tracks[r],i=t.totalduration,o=0;if(w.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var a=n.details;a&&t.fragments.length>0?(_.default.mergeDetails(a,t),o=t.fragments[0].start,t.PTSKnown?w.logger.log("live audio playlist sliding:"+o.toFixed(3)):w.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,w.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,!this.startFragRequested){if(this.startPosition===-1){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(w.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===k.WAITING_TRACK&&(this.state=k.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===k.KEY_LOADING&&(this.state=k.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===k.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,o=i.totalduration,a=t.level,s=t.sn,u=t.cc,l=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",c=this.stats=e.stats;if("initSegment"===s)this.state=k.IDLE,c.tparsed=c.tbuffered=performance.now(),i.initSegment.data=e.payload,this.hls.trigger(g.default.FRAG_BUFFERED,{stats:c,frag:t,id:"audio"}),this.tick();else{this.state=k.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new h.default(this.hls,"audio"));var d=this.initPTS[u],f=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==d){this.pendingBuffering=!0,w.logger.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a);var p=!1;this.demuxer.push(e.payload,f,l,null,t,o,p,d)}else w.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+a),this.waitingFragment=e,this.state=k.WAITING_INIT_PTS}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===k.PARSING){var n=e.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec="mp4a.40.2",i.id=e.id,this.hls.trigger(g.default.BUFFER_CODECS,n),w.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(g.default.BUFFER_APPENDING,a))}this.tick()}}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&n.sn===r.sn&&n.level===r.level&&this.state===k.PARSING){var i=this.trackId,o=this.tracks[i],a=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),w.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),_.default.updateFragPTSDTS(o.details,r,e.startPTS,e.endPTS);var s=this.audioSwitch,u=this.media,l=!1;if(s&&u)if(u.readyState){var c=u.currentTime;w.logger.log("switching audio track : currentTime:"+c),c>=e.startPTS&&(w.logger.log("switching audio track : flushing all audio"),this.state=k.BUFFER_FLUSHING,a.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),l=!0,this.audioSwitch=!1,a.trigger(g.default.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,a.trigger(g.default.AUDIO_TRACK_SWITCHED,{id:i});var d=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&d.push({type:e.type,data:t,parent:"audio",content:"data"})}),!l&&d.length&&(d.forEach(function(e){t.state===k.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(g.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===k.PARSING&&(this.stats.tparsed=performance.now(),this.state=k.PARSED,this._checkAppendedParsed())}},{key:"onBufferCreated",value:function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)}},{key:"onBufferAppended",value:function(e){if("audio"===e.parent){var t=this.state;t!==k.PARSING&&t!==k.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==k.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),r.trigger(g.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;w.logger.log("audio buffered : "+T.default.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(g.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=k.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case E.ErrorDetails.FRAG_LOAD_ERROR:case E.ErrorDetails.FRAG_LOAD_TIMEOUT:if(!e.fatal){var r=this.fragLoadError;r?r++:r=1;var n=this.config;if(r<=n.fragLoadingMaxRetry){this.fragLoadError=r,t.loadCounter=0;var i=Math.min(Math.pow(2,r-1)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);w.logger.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=k.FRAG_LOADING_WAITING_RETRY}else w.logger.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=k.ERROR}break;case E.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case E.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case E.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case E.ErrorDetails.KEY_LOAD_ERROR:case E.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==k.ERROR&&(this.state=e.fatal?k.ERROR:k.IDLE,w.logger.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case E.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===k.PARSING||this.state===k.PARSED)){var o=this.mediaBuffer,a=this.media.currentTime,s=o&&d.default.isBuffered(o,a)&&d.default.isBuffered(o,a+.5);if(s){var u=this.config;u.maxMaxBufferLength>=u.maxBufferLength&&(u.maxMaxBufferLength/=2,w.logger.warn("audio:reduce max buffer length to "+u.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*u.fragLoadingLoopThreshold),this.state=k.IDLE}else w.logger.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=k.BUFFER_FLUSHING,this.hls.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}}},{key:"onBufferFlushed",value:function(){var e=this,t=this.pendingData;t&&t.length?(w.logger.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(g.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=k.PARSED):(this.state=k.IDLE,this.fragPrevious=null,this.tick())}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,w.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(v.default);r.default=S},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,53:53,54:54}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=e(53),h=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADING,l.default.MANIFEST_LOADED,l.default.AUDIO_TRACK_LOADED));return r.ticks=0,r.ontick=r.tick.bind(r),r}return a(t,e),s(t,[{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){this.updateTrack(this.trackId)}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,r=e.audioTracks||[],n=!1;this.tracks=r,this.hls.trigger(l.default.AUDIO_TRACKS_UPDATED,{audioTracks:r});var i=0;r.forEach(function(e){return e.default?(t.audioTrack=i,void(n=!0)):void i++}),n===!1&&r.length&&(f.logger.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)}},{key:"onAudioTrackLoaded",value:function(e){e.id<this.tracks.length&&(f.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setAudioTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,f.logger.log("switching to audioTrack "+e);var t=this.tracks[e],r=this.hls,n=t.type,i=t.url,o={id:e,type:n,url:i};r.trigger(l.default.AUDIO_TRACK_SWITCH,o),r.trigger(l.default.AUDIO_TRACK_SWITCHING,o);var a=t.details;!i||void 0!==a&&a.live!==!0||(f.logger.log("(re)loading playlist for audioTrack "+e),r.trigger(l.default.AUDIO_TRACK_LOADING,{url:i,id:e}))}}},{key:"updateTrack",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,f.logger.log("updating audioTrack "+e);var t=this.tracks[e],r=t.url,n=t.details;!r||void 0!==n&&n.live!==!0||(f.logger.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(l.default.AUDIO_TRACK_LOADING,{url:r,id:e}))}}},{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),t}(d.default);r.default=h},{34:34,35:35,53:53}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=e(53),h=e(33),p=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING,l.default.MEDIA_DETACHING,l.default.MANIFEST_PARSED,l.default.BUFFER_RESET,l.default.BUFFER_APPENDING,l.default.BUFFER_CODECS,l.default.BUFFER_EOS,l.default.BUFFER_FLUSHING,l.default.LEVEL_PTS_UPDATED,l.default.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return a(t,e),s(t,[{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",value:function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio,i=Math.abs(n.timestampOffset-e.start);if(i>.1){var o=n.updating;try{n.abort()}catch(e){o=!0,f.logger.warn("can not abort audio buffer: "+e)}o?this.audioTimestampOffset=e.start:(f.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}}},{key:"onManifestParsed",value:function(e){var t=e.audio,r=e.video,n=0;e.altAudio&&(t||r)&&(n=(t?1:0)+(r?1:0),f.logger.log(n+" sourceBuffer(s) expected")),this.sourceBufferNb=n}},{key:"onMediaAttaching",value:function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(r)}}},{key:"onMediaDetaching",value:function(){f.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){f.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(l.default.MEDIA_DETACHED)}},{key:"onMediaSourceOpen",value:function(){f.logger.log("media source opened"),this.hls.trigger(l.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()}},{key:"checkPendingTracks",value:function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())}},{key:"onMediaSourceClose",value:function(){f.logger.log("media source closed")}},{key:"onMediaSourceEnded",value:function(){f.logger.log("media source ended")}},{key:"onSBUpdateEnd",value:function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;f.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce(function(e,r){return r.parent===t?e+1:e},0);this.hls.trigger(l.default.BUFFER_APPENDED,{parent:t,pending:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()}},{key:"onSBUpdateError",value:function(e){f.logger.error("sourceBuffer error:",e),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferReset",value:function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}},{key:"onBufferCodecs",value:function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var r=this.mediaSource;r&&"open"===r.readyState&&this.checkPendingTracks()}}},{key:"createSourceBuffers",value:function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var n in e)if(!t[n]){var i=e[n],o=i.levelCodec||i.codec,a=i.container+";codecs="+o;f.logger.log("creating sourceBuffer("+a+")");try{var s=t[n]=r.addSourceBuffer(a);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[n]={codec:o,container:i.container},i.buffer=s}catch(e){f.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:a})}}this.hls.trigger(l.default.BUFFER_CREATED,{tracks:e})}},{key:"onBufferAppending",value:function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())}},{key:"onBufferAppendFail",value:function(e){f.logger.error("sourceBuffer error:",e.event),this.hls.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})}},{key:"onBufferEos",value:function(e){var t=this.sourceBuffer,r=e.type;for(var n in t)r&&n!==r||t[n].ended||(t[n].ended=!0,f.logger.log(n+" sourceBuffer now EOS"));this.checkEos()}},{key:"checkEos",value:function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var r in e){var n=e[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}f.logger.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){f.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}},{key:"onBufferFlushing",value:function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()}},{key:"onLevelUpdated",value:function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())}},{key:"updateMediaElementDuration",value:function(){var e=this.media,t=this.mediaSource,r=this.sourceBuffer,n=this._levelDuration;if(null!==n&&e&&t&&r&&0!==e.readyState&&"open"===t.readyState){for(var i in r)if(r[i].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var o=e.duration;(n>this._msDuration&&n>o||o===1/0||isNaN(o))&&(f.logger.log("Updating mediasource duration to "+n.toFixed(3)),this._msDuration=t.duration=n)}}},{key:"doFlush",value:function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){f.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(l.default.BUFFER_FLUSHED)}}},{key:"doAppending",value:function(){var e=this.hls,t=this.sourceBuffer,r=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void f.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var n=r.shift();try{var i=n.type,o=t[i];o?o.updating?r.unshift(n):(o.ended=!1,this.parent=n.parent,o.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){f.logger.error("error while trying to append buffer:"+t.message),r.unshift(n);var a={type:h.ErrorTypes.MEDIA_ERROR,parent:n.parent};if(22===t.code)return this.segments=[],a.details=h.ErrorDetails.BUFFER_FULL_ERROR,a.fatal=!1,void e.trigger(l.default.ERROR,a);if(this.appendError?this.appendError++:this.appendError=1,a.details=h.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return f.logger.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),r=[],a.fatal=!0,void e.trigger(l.default.ERROR,a);a.fatal=!1,e.trigger(l.default.ERROR,a)}}}}},{key:"flushBuffer",value:function(e,t,r){var n,i,o,a,s,u,l=this.sourceBuffer;if(Object.keys(l).length){if(f.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var c in l)if(!r||c===r){if(n=l[c],n.ended=!1,n.updating)return f.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<n.buffered.length;i++)if(o=n.buffered.start(i),a=n.buffered.end(i),navigator.userAgent.toLowerCase().indexOf("firefox")!==-1&&t===Number.POSITIVE_INFINITY?(s=e,u=t):(s=Math.max(o,e),u=Math.min(a,t)),Math.min(u,a)-s>.5)return this.flushBufferCounter++,f.logger.log("flush "+c+" ["+s+","+u+"], of ["+o+","+a+"], pos:"+this.media.currentTime),n.remove(s,u),!1}catch(e){f.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else f.logger.warn("abort flushing too many retries");f.logger.log("buffer flushed")}return!0}}]),t}(d.default);r.default=p},{33:33,34:34,35:35,53:53}],9:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FPS_DROP_LEVEL_CAPPING,l.default.MEDIA_ATTACHING,l.default.MANIFEST_PARSED))}return a(t,e),s(t,[{key:"destroy",value:function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))}},{key:"onFpsDropLevelCapping",value:function(e){this.restrictedLevels||(this.restrictedLevels=[]),this.isLevelRestricted(e.droppedLevel)||this.restrictedLevels.push(e.droppedLevel)}},{key:"onMediaAttaching",value:function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null}},{key:"onManifestParsed",value:function(e){var t=this.hls;t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}},{key:"detectPlayerSize",value:function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}},{key:"getMaxLevel",value:function(e){var t=0,r=void 0,n=void 0,i=this.mediaWidth,o=this.mediaHeight,a=0,s=0;for(r=0;r<=e&&(n=this.levels[r],!this.isLevelRestricted(r))&&(t=r,a=n.width,s=n.height,!(i<=a||o<=s));r++);return t}},{key:"isLevelRestricted",value:function(e){return!(!this.restrictedLevels||this.restrictedLevels.indexOf(e)===-1)}},{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}},{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=this.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=this.contentScaleFactor),e}}]),t}(d.default);r.default=f},{34:34,35:35}],10:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=e(53),h=function(e){function t(e){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHING))}return a(t,e),s(t,[{key:"destroy",value:function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1}},{key:"onMediaAttaching",value:function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){var r=this.video=e.media instanceof HTMLVideoElement?e.media:null;"function"==typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}}},{key:"checkFPS",value:function(e,t,r){var n=performance.now();if(t){if(this.lastTime){var i=n-this.lastTime,o=r-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*o/i,u=this.hls;if(u.trigger(l.default.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),s>0&&o>u.config.fpsDroppedMonitoringThreshold*a){var c=u.currentLevel;f.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c-=1,u.trigger(l.default.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,u.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}},{key:"checkFPSInterval",value:function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}]),t}(d.default);r.default=h},{34:34,35:35,53:53}],11:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MEDIA_ATTACHED,l.default.MEDIA_DETACHING,l.default.FRAG_PARSING_METADATA));return r.id3Track=void 0,r.media=void 0,r}return a(t,e),s(t,[{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){this.media=e.media,this.media&&(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");
}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onFragParsingMetadata",value:function(e){var t=e.frag,r=e.samples,n=t.start,i=t.start+t.duration;n===i&&(i+=1e-4);for(var o=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<r.length;a++){var s=this.parseID3Frame(r[a].data),u=this.decodeID3Frame(s);if(u){var l=new o(n,i,"");l.value=u,this.id3Track.addCue(l)}}}},{key:"parseID3Frame",value:function(e){if(!(e.length<21)&&73===e[0]&&68===e[1]&&51===e[2]){var t=String.fromCharCode(e[10],e[11],e[12],e[13]);return e=e.subarray(20),{type:t,data:e}}}},{key:"decodeID3Frame",value:function(e){return"TXXX"===e.type?this.decodeTxxxFrame(e):"PRIV"===e.type?this.decodePrivFrame(e):"T"===e.type[0]?this.decodeTextFrame(e):void 0}},{key:"decodeTxxxFrame",value:function(e){if(!(e.size<2)&&3===e.data[0]){var t=1,r=this.utf8ArrayToStr(e.data.subarray(t));t+=r.length+1;var n=this.utf8ArrayToStr(e.data.subarray(t));return{key:"TXXX",description:r,data:n}}}},{key:"decodeTextFrame",value:function(e){if(!(e.size<2)&&3===e.data[0]){var t=e.data.subarray(1);return{key:e.type,data:this.utf8ArrayToStr(t)}}}},{key:"decodePrivFrame",value:function(e){if(!(e.size<2)){var t=this.utf8ArrayToStr(e.data),r=e.data.subarray(t.length+1);return{key:"PRIV",info:t,data:r.buffer}}}},{key:"utf8ArrayToStr",value:function(e){for(var t=void 0,r=void 0,n="",i=0,o=e.length;i<o;){var a=e[i++];switch(a>>4){case 0:return n;case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(a);break;case 12:case 13:t=e[i++],n+=String.fromCharCode((31&a)<<6|63&t);break;case 14:t=e[i++],r=e[i++],n+=String.fromCharCode((15&a)<<12|(63&t)<<6|(63&r)<<0)}}return n}}]),t}(d.default);r.default=f},{34:34,35:35}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=e(53),h=e(33),p=e(37),g=n(p),y=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.MANIFEST_LOADED,l.default.LEVEL_LOADED,l.default.FRAG_LOADED,l.default.ERROR));return r.ontick=r.tick.bind(r),r._manualLevel=-1,r}return a(t,e),s(t,[{key:"destroy",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._manualLevel=-1}},{key:"startLoad",value:function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,r=[],n=[],i={},o=!1,a=!1,s=this.hls,u=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),c=function(e,t){return MediaSource.isTypeSupported(e+"/mp4;codecs="+t)};if(e.levels.forEach(function(e){e.videoCodec&&(o=!0),u&&e.audioCodec&&e.audioCodec.indexOf("mp4a.40.34")!==-1&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(a=!0);var t=i[e.bitrate];void 0===t?(i[e.bitrate]=r.length,e.url=[e.url],e.urlId=0,r.push(e)):r[t].url.push(e.url)}),o&&a?r.forEach(function(e){e.videoCodec&&n.push(e)}):n=r,n=n.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||c("audio",t))&&(!r||c("video",r))}),n.length){t=n[0].bitrate,n.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=n;for(var d=0;d<n.length;d++)if(n[d].bitrate===t){this._firstLevel=d,f.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}s.trigger(l.default.MANIFEST_PARSED,{levels:n,firstLevel:this._firstLevel,stats:e.stats,audio:a,video:o,altAudio:e.audioTracks.length>0})}else s.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:s.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",value:function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.timer&&(clearTimeout(this.timer),this.timer=null),this._level!==e){f.logger.log("switching to level "+e),this._level=e;var n=t[e];n.level=e,r.trigger(l.default.LEVEL_SWITCH,n),r.trigger(l.default.LEVEL_SWITCHING,n)}var i=t[e],o=i.details;if(!o||o.live===!0){var a=i.urlId;r.trigger(l.default.LEVEL_LOADING,{url:i.url[a],level:e,id:a})}}else r.trigger(l.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})}},{key:"onError",value:function(e){if(!e.fatal){var t=e.details,r=this.hls,n=void 0,i=void 0,o=!1;switch(t){case h.ErrorDetails.FRAG_LOAD_ERROR:case h.ErrorDetails.FRAG_LOAD_TIMEOUT:case h.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case h.ErrorDetails.KEY_LOAD_ERROR:case h.ErrorDetails.KEY_LOAD_TIMEOUT:n=e.frag.level;break;case h.ErrorDetails.LEVEL_LOAD_ERROR:case h.ErrorDetails.LEVEL_LOAD_TIMEOUT:n=e.context.level,o=!0;break;case h.ErrorDetails.REMUX_ALLOC_ERROR:n=e.level}if(void 0!==n){i=this._levels[n],i.loadError?i.loadError++:i.loadError=1;var a=i.url.length;if(a>1&&i.loadError<a)i.urlId=(i.urlId+1)%a,i.details=void 0,f.logger.warn("level controller,"+t+" for level "+n+": switching to redundant stream id "+i.urlId);else{var s=this._manualLevel===-1&&n;if(s)f.logger.warn("level controller,"+t+": switch-down for next fragment"),r.nextAutoLevel=Math.max(0,n-1);else if(i&&i.details&&i.details.live)f.logger.warn("level controller,"+t+" on live stream, discard"),o&&(this._level=void 0);else if(t===h.ErrorDetails.LEVEL_LOAD_ERROR||t===h.ErrorDetails.LEVEL_LOAD_TIMEOUT){var u=r.media,l=u&&g.default.isBuffered(u,u.currentTime)&&g.default.isBuffered(u,u.currentTime+.5);if(l){var c=r.config.levelLoadingRetryDelay;f.logger.warn("level controller,"+t+", but media buffered, retry in "+c+"ms"),this.timer=setTimeout(this.ontick,c),e.levelRetry=!0}else f.logger.error("cannot recover "+t+" error"),this._level=void 0,this.timer&&(clearTimeout(this.timer),this.timer=null),e.fatal=!0}}}}}},{key:"onFragLoaded",value:function(e){var t=e.frag;if(t&&"main"===t.type){var r=this._levels[t.level];r&&(r.loadError=0)}}},{key:"onLevelLoaded",value:function(e){var t=e.level;if(t===this._level){var r=this._levels[t];r.loadError=0;var n=e.details;if(n.live){var i=1e3*(n.averagetargetduration?n.averagetargetduration:n.targetduration),o=r.details;o&&n.endSN===o.endSN&&(i/=2,f.logger.log("same live playlist, reload twice faster")),i-=performance.now()-e.stats.trequest,i=Math.max(1e3,Math.round(i)),f.logger.log("live playlist, reload in "+i+" ms"),this.timer=setTimeout(this.ontick,i)}else this.timer=null}}},{key:"tick",value:function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var r=t.urlId;this.hls.trigger(l.default.LEVEL_LOADING,{url:t.url[r],level:e,id:r})}}}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),e!==-1&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return this._manualLevel!==-1?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,this._manualLevel===-1&&(this.hls.nextAutoLevel=e)}}]),t}(d.default);r.default=y},{33:33,34:34,35:35,37:37,53:53}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(48),l=n(u),c=e(37),d=n(c),f=e(25),h=n(f),p=e(35),g=n(p),y=e(34),v=n(y),m=e(38),_=n(m),b=e(54),T=n(b),E=e(33),w=e(53),k={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},S=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g.default.MEDIA_ATTACHED,g.default.MEDIA_DETACHING,g.default.MANIFEST_LOADING,g.default.MANIFEST_PARSED,g.default.LEVEL_LOADED,g.default.KEY_LOADED,g.default.FRAG_LOADED,g.default.FRAG_LOAD_EMERGENCY_ABORTED,g.default.FRAG_PARSING_INIT_SEGMENT,g.default.FRAG_PARSING_DATA,g.default.FRAG_PARSED,g.default.ERROR,g.default.AUDIO_TRACK_SWITCHING,g.default.AUDIO_TRACK_SWITCHED,g.default.BUFFER_CREATED,g.default.BUFFER_APPENDED,g.default.BUFFER_FLUSHED));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=k.STOPPED,r.ontick=r.tick.bind(r),r}return a(t,e),s(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),v.default.prototype.destroy.call(this),this.state=k.STOPPED}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;n===-1&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&e===-1&&(w.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=k.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=k.STOPPED}},{key:"stopLoad",value:function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=k.STOPPED,this.forceStartLoad=!1}},{key:"tick",value:function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)}},{key:"doTick",value:function(){switch(this.state){case k.ERROR:break;case k.BUFFER_FLUSHING:this.fragLoadError=0;break;case k.IDLE:this._doTickIdle();break;case k.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=k.IDLE);break;case k.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(w.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=k.IDLE);break;case k.ERROR:case k.STOPPED:case k.FRAG_LOADING:case k.PARSING:case k.PARSED:case k.ENDED:}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0===this.levelLastLoaded||r||!this.startFragRequested&&t.startFragPrefetch){var n=void 0;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,o=this.levels[i];if(o){var a=o.bitrate,s=void 0;s=a?Math.max(8*t.maxBufferSize/a,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var u=d.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),l=u.len;if(!(l>=s)){w.logger.trace("buffer length of "+l.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var c=o.details;if("undefined"==typeof c||c.live&&this.levelLastLoaded!==i)return void(this.state=k.WAITING_LEVEL);var f=this.fragPrevious;if(!c.live&&f&&f.sn===c.endSN){var h=Math.min(r.duration,f.start+f.duration);if(h-Math.max(u.end,f.start)<=Math.max(.2,f.duration)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(g.default.BUFFER_EOS,p),void(this.state=k.ENDED)}}this._fetchPayloadOrEos(n,u,c)}}}}},{key:"_fetchPayloadOrEos",value:function(e,t,r){var n=this.fragPrevious,i=this.level,o=r.fragments,a=o.length;if(0!==a){var s=o[0].start,u=o[a-1].start+o[a-1].duration,l=t.end,c=void 0;if(r.initSegment&&!r.initSegment.data)c=r.initSegment;else if(r.live){var d=this.config.initialLiveManifestSize;if(a<d)return void w.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+d);if(c=this._ensureFragmentAtLivePoint(r,l,s,u,n,o,a),null===c)return}else l<s&&(c=o[0]);c||(c=this._findFragment(s,n,a,o,l,u,r)),c&&this._loadFragmentOrKey(c,i,r,e,l)}}},{key:"_ensureFragmentAtLivePoint",value:function(e,t,r,n,i,o,a){var s=this.hls.config,u=this.media,l=void 0,c=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-s.maxFragLookUpTolerance,n-c)){var d=this.liveSyncPosition=this.computeLivePosition(r,e);w.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+d.toFixed(3)),t=d,u&&u.readyState&&u.duration>d&&(u.currentTime=d)}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i){var f=i.sn+1;f>=e.startSN&&f<=e.endSN&&(l=o[f-e.startSN],w.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=o[Math.min(a-1,Math.round(a/2))],w.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l}},{key:"_findFragment",value:function(e,t,r,n,i,o,a){var s=this.hls.config,u=void 0,c=void 0,d=s.maxFragLookUpTolerance,f=t?n[t.sn-n[0].sn+1]:void 0,h=function(e){var t=Math.min(d,e.duration);return e.start+e.duration-t<=i?1:e.start-t>i&&e.start?-1:0};if(i<o?(i>o-d&&(d=0),c=f&&!h(f)?f:l.default.search(n,h)):c=n[r-1],c){u=c;var p=u.sn-a.startSN,g=t&&u.level===t.level,y=n[p-1],v=n[p+1];if(t&&u.sn===t.sn)if(g&&!u.backtracked)if(u.sn<a.endSN){var m=t.deltaPTS;m&&m>s.maxBufferHole&&t.dropped&&p?(u=y,w.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(u=v,w.logger.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(v&&v.backtracked?(w.logger.warn("Already backtracked from fragment "+v.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+v.sn),u=v):(w.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,y?(y.loadCounter&&y.loadCounter--,u=y,u.backtracked=!0):u=null))}return u}},{key:"_loadFragmentOrKey",value:function(e,t,r,n,i){var o=this.hls,a=o.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(w.logger.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+n.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var s=a.fragLoadingLoopThreshold;if(e.loadCounter>s&&Math.abs(this.fragLoadIdx-e.loadIdx)<s)return void o.trigger(g.default.ERROR,{type:E.ErrorTypes.MEDIA_ERROR,details:E.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=o.autoLevelEnabled,e.bitrateTest=this.bitrateTest,o.trigger(g.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new h.default(o,"main")),void(this.state=k.FRAG_LOADING)}w.logger.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=k.KEY_LOADING,o.trigger(g.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",value:function(e){return l.default.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})}},{key:"followingBufferedFrag",value:function(e){return e?this.getBufferedFrag(e.endPTS+.5):null}},{key:"_checkFragmentChanged",value:function(){var e,t,r=this.media;if(r&&r.readyState&&r.seeking===!1&&(t=r.currentTime,t>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),d.default.isBuffered(r,t)?e=this.getBufferedFrag(t):d.default.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(g.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(g.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}}},{key:"immediateLevelSwitch",value:function(){if(w.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}},{key:"immediateLevelSwitchEnd",value:function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,d.default.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t=void 0,r=void 0,n=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,r=this.getBufferedFrag(e.currentTime),r&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],a=this.fragLastKbps;t=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if(n=this.getBufferedFrag(e.currentTime+t),n&&(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.startPTS,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",value:function(e,t){this.state=k.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(g.default.BUFFER_FLUSHING,r)}},{key:"onMediaAttached",value:function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition)}},{key:"onMediaDetaching",value:function(){var e=this.media;e&&e.ended&&(w.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;isNaN(t)||w.logger.log("media seeking to "+t.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:e,i=d.default.bufferInfo(n,t,this.config.maxBufferHole);if(this.state===k.FRAG_LOADING){var o=this.fragCurrent;if(0===i.len&&o){var a=r.maxFragLookUpTolerance,s=o.start-a,u=o.start+o.duration+a;t<s||t>u?(o.loader&&(w.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=k.IDLE):w.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===k.ENDED&&(0===i.len&&(this.fragPrevious=0),this.state=k.IDLE);e&&(this.lastCurrentTime=t),this.state!==k.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",value:function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||w.logger.log("media seeked to "+t.toFixed(3)),this.tick()}},{key:"onMediaEnded",value:function(){w.logger.log("media ended"),this.startPosition=this.lastCurrentTime=0}},{key:"onManifestLoading",value:function(){w.logger.log("trigger BUFFER_RESET"),this.hls.trigger(g.default.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0}},{key:"onManifestParsed",value:function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){t=e.audioCodec,t&&(t.indexOf("mp4a.40.2")!==-1&&(r=!0),t.indexOf("mp4a.40.5")!==-1&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&w.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)}},{key:"onLevelLoaded",value:function(e){var t=e.details,r=e.level,n=this.levels[r],i=t.totalduration,o=0;if(w.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),this.levelLastLoaded=r,t.live){var a=n.details;a&&t.fragments.length>0?(_.default.mergeDetails(a,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,a),t.PTSKnown?w.logger.log("live playlist sliding:"+o.toFixed(3)):w.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,w.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,this.hls.trigger(g.default.LEVEL_UPDATED,{details:t,level:r}),this.startFragRequested===!1){if(this.startPosition===-1||this.lastCurrentTime===-1){var s=t.startTimeOffset;isNaN(s)?t.live?(this.startPosition=this.computeLivePosition(o,t),w.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(s<0&&(w.logger.log("negative start time offset "+s+", count from end of last fragment"),s=o+i+s),w.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===k.WAITING_LEVEL&&(this.state=k.IDLE),this.tick()}},{key:"onKeyLoaded",value:function(){this.state===k.KEY_LOADING&&(this.state=k.IDLE,this.tick())}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===k.FRAG_LOADING&&t&&"main"===r.type&&r.level===t.level&&r.sn===t.sn){var n=e.stats,i=this.levels[t.level],o=i.details;if(w.logger.log("Loaded  "+t.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=n,r.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=k.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(g.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=k.IDLE,n.tparsed=n.tbuffered=performance.now(),o.initSegment.data=e.payload,this.hls.trigger(g.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else{this.state=k.PARSING;var a=o.totalduration,s=t.level,u=t.sn,l=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(w.logger.log("swapping playlist audio codec"),void 0===l&&(l=this.lastAudioCodec),l&&(l=l.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,w.logger.log("Parsing "+u+" of ["+o.startSN+" ,"+o.endSN+"],level "+s+", cc "+t.cc);var c=this.demuxer;c||(c=this.demuxer=new h.default(this.hls,"main"));var d=this.media,f=d&&d.seeking,p=!f&&(o.PTSKnown||!o.live),y=o.initSegment?o.initSegment.data:[];c.push(e.payload,y,l,i.videoCodec,t,a,p,void 0)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",value:function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===k.PARSING){var n,i,o=e.tracks;if(o.audio&&this.altAudio&&delete o.audio,i=o.audio){var a=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(w.logger.log("swapping playlist audio codec"),a=a.indexOf("mp4a.40.5")!==-1?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==i.metadata.channelCount&&s.indexOf("firefox")===-1&&(a="mp4a.40.5"),s.indexOf("android")!==-1&&"audio/mpeg"!==i.container&&(a="mp4a.40.2",w.logger.log("Android: force audio codec to "+a)),i.levelCodec=a,i.id=e.id}i=o.video,i&&(i.levelCodec=this.levels[this.level].videoCodec,i.id=e.id),this.hls.trigger(g.default.BUFFER_CODECS,o);for(n in o){i=o[n],w.logger.log("main track:"+n+",container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var u=i.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(g.default.BUFFER_APPENDING,{type:n,data:u,parent:"main",content:"initSegment"}))}this.tick()}}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===k.PARSING){var i=this.levels[this.level],o=r;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),w.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped){if(!o.backtracked)return w.logger.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=k.IDLE,this.fragPrevious=o,void this.tick();w.logger.warn("Already backtracked on this fragment, appending with the gap")}else o.backtracked=!1;var a=_.default.updateFragPTSDTS(i.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),s=this.hls;s.trigger(g.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:a,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(r){r&&r.length&&t.state===k.PARSING&&(t.appended=!0,t.pendingBuffering=!0,s.trigger(g.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))}),this.tick()}}},{key:"onFragParsed",value:function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===k.PARSING&&(this.stats.tparsed=performance.now(),this.state=k.PARSED,this._checkAppendedParsed())}},{key:"onAudioTrackSwitching",value:function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){w.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(w.logger.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=k.IDLE}var i=this.hls;i.trigger(g.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(g.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}}},{key:"onAudioTrackSwitched",value:function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(w.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()}},{key:"onBufferCreated",value:function(e){var t=e.tracks,r=void 0,n=void 0,i=!1;for(var o in t){var a=t[o];"main"===a.id?(n=o,r=a,"video"===o&&(this.videoBuffer=t[o].buffer)):i=!0}i&&r?(w.logger.log("alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}},{key:"onBufferAppended",value:function(e){if("main"===e.parent){var t=this.state;t!==k.PARSING&&t!==k.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==k.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;w.logger.log("main buffered : "+T.default.toString(t.buffered));var r=this._bufferedFrags.filter(function(e){return d.default.isBuffered(t,(e.startPTS+e.endPTS)/2)});r.push(e),this._bufferedFrags=r.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(g.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=k.IDLE}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=this.media,n=r&&d.default.isBuffered(r,r.currentTime)&&d.default.isBuffered(r,r.currentTime+.5);switch(e.details){case E.ErrorDetails.FRAG_LOAD_ERROR:case E.ErrorDetails.FRAG_LOAD_TIMEOUT:case E.ErrorDetails.KEY_LOAD_ERROR:case E.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var o=this.config;if(i<=o.fragLoadingMaxRetry||n||t.autoLevel&&t.level){this.fragLoadError=i,t.loadCounter=0;var a=Math.min(Math.pow(2,i-1)*o.fragLoadingRetryDelay,o.fragLoadingMaxRetryTimeout);w.logger.warn("mediaController: frag loading failed, retry in "+a+" ms"),this.retryDate=performance.now()+a,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=k.FRAG_LOADING_WAITING_RETRY}else w.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=k.ERROR}break;case E.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(n?(this._reduceMaxBufferLength(t.duration),this.state=k.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=k.ERROR));break;case E.ErrorDetails.LEVEL_LOAD_ERROR:case E.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==k.ERROR&&(e.fatal?(this.state=k.ERROR,w.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==k.WAITING_LEVEL||(this.state=k.IDLE));break;case E.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==k.PARSING&&this.state!==k.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=k.IDLE):(w.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",value:function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,w.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)}},{key:"_checkBuffer",value:function(){var e=this.media;if(e&&e.readyState){var t=e.currentTime,r=this.mediaBuffer?this.mediaBuffer:e,n=r.buffered;if(!this.loadedmetadata&&n.length){this.loadedmetadata=!0;var i=e.seeking?t:this.startPosition,o=d.default.isBuffered(r,i);t===i&&o||(w.logger.log("target start position:"+i),o||(i=n.start(0),w.logger.log("target start position not buffered, seek to buffered.start(0) "+i)),w.logger.log("adjust currentTime from "+t+" to "+i),e.currentTime=i)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{
var a=d.default.bufferInfo(e,t,0),s=!(e.paused||e.ended||0===e.buffered.length),u=.5,l=t!==this.lastCurrentTime,c=this.config;if(l)this.stallReported&&(w.logger.warn("playback not stuck anymore @"+t+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(s){var f=performance.now(),h=this.hls;if(this.stalled){var p=f-this.stalled,y=a.len,v=this.nudgeRetry||0;if(y<=u&&p>1e3*c.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,w.logger.warn("playback stalling in low buffer @"+t),h.trigger(g.default.ERROR,{type:E.ErrorTypes.MEDIA_ERROR,details:E.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:y}));var m=a.nextStart,_=m-t;if(m&&_<c.maxSeekHole&&_>0){this.nudgeRetry=++v;var b=v*c.nudgeOffset;w.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+m+" + nudge "+b),e.currentTime=m+b,this.stalled=void 0,h.trigger(g.default.ERROR,{type:E.ErrorTypes.MEDIA_ERROR,details:E.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:m+b-t})}}else if(y>u&&p>1e3*c.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,w.logger.warn("playback stalling in high buffer @"+t),h.trigger(g.default.ERROR,{type:E.ErrorTypes.MEDIA_ERROR,details:E.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:y})),this.stalled=void 0,this.nudgeRetry=++v,v<c.nudgeMaxRetry){var T=e.currentTime,k=T+v*c.nudgeOffset;w.logger.log("adjust currentTime from "+T+" to "+k),e.currentTime=k,h.trigger(g.default.ERROR,{type:E.ErrorTypes.MEDIA_ERROR,details:E.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else w.logger.error("still stuck in high buffer @"+t+" after "+c.nudgeMaxRetry+", raise fatal error"),h.trigger(g.default.ERROR,{type:E.ErrorTypes.MEDIA_ERROR,details:E.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=f,this.stallReported=!1}}}}},{key:"onFragLoadEmergencyAborted",value:function(){this.state=k.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return d.default.isBuffered(e,(t.startPTS+t.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=k.IDLE,this.fragPrevious=null}},{key:"swapAudioCodec",value:function(){this.audioCodecSwap=!this.audioCodecSwap}},{key:"computeLivePosition",value:function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)}},{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,w.logger.log("main stream:"+t+"->"+e),this.hls.trigger(g.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(v.default);r.default=S},{25:25,33:33,34:34,35:35,37:37,38:38,48:48,53:53,54:54}],14:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=e(53),h=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.ERROR,l.default.SUBTITLE_TRACKS_UPDATED,l.default.SUBTITLE_TRACK_SWITCH,l.default.SUBTITLE_TRACK_LOADED,l.default.SUBTITLE_FRAG_PROCESSED));return r.config=e.config,r.vttFragSNsProcessed={},r.vttFragQueues=void 0,r.currentlyProcessing=null,r.currentTrackId=-1,r}return a(t,e),s(t,[{key:"destroy",value:function(){d.default.prototype.destroy.call(this)}},{key:"clearVttFragQueues",value:function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})}},{key:"nextFrag",value:function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(l.default.FRAG_LOADING,{frag:e})}}},{key:"onSubtitleFragProcessed",value:function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()}},{key:"onError",value:function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())}},{key:"onSubtitleTracksUpdated",value:function(e){var t=this;f.logger.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})}},{key:"onSubtitleTrackSwitch",value:function(e){this.currentTrackId=e.id,this.clearVttFragQueues()}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this.vttFragSNsProcessed[e.id],r=this.vttFragQueues[e.id],n=this.currentlyProcessing?this.currentlyProcessing.sn:-1,i=function(e){return t.indexOf(e.sn)>-1},o=function(e){return r.some(function(t){return t.sn===e.sn})};e.details.fragments.forEach(function(t){i(t)||t.sn===n||o(t)||(t.trackId=e.id,r.push(t))}),this.nextFrag()}}]),t}(d.default);r.default=h},{34:34,35:35,53:53}],15:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){for(var t=[],r=0;r<e.length;r++)"subtitles"===e[r].kind&&t.push(e[r]);return t}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e(35),c=n(l),d=e(34),f=n(d),h=e(53),p=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,c.default.MEDIA_ATTACHED,c.default.MEDIA_DETACHING,c.default.MANIFEST_LOADING,c.default.MANIFEST_LOADED,c.default.SUBTITLE_TRACK_LOADED));return r.tracks=[],r.trackId=-1,r.media=void 0,r}return a(t,e),u(t,[{key:"destroy",value:function(){f.default.prototype.destroy.call(this)}},{key:"onMediaAttached",value:function(e){var t=this;this.media=e.media,this.media&&this.media.textTracks.addEventListener("change",function(){if(t.media){for(var e=-1,r=s(t.media.textTracks),n=0;n<r.length;n++)"showing"===r[n].mode&&(e=n);t.subtitleTrack=e}})}},{key:"onMediaDetaching",value:function(){this.media=void 0}},{key:"onManifestLoading",value:function(){this.tracks=[],this.trackId=-1}},{key:"onManifestLoaded",value:function(e){var t=this,r=e.subtitles||[],n=!1;this.tracks=r,this.trackId=-1,this.hls.trigger(c.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(t.subtitleTrack=e.id,n=!0)})}},{key:"onTick",value:function(){var e=this.trackId,t=this.tracks[e];if(t){var r=t.details;void 0!==r&&r.live!==!0||(h.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(c.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"onSubtitleTrackLoaded",value:function(e){var t=this;e.id<this.tracks.length&&(h.logger.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))}},{key:"setSubtitleTrackInternal",value:function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,h.logger.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(c.default.SUBTITLE_TRACK_SWITCH,{id:e});var r=t.details;void 0!==r&&r.live!==!0||(h.logger.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(c.default.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}}},{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(f.default);r.default=p},{34:34,35:35,53:53}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function u(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function l(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=e(35),f=n(d),h=e(34),p=n(h),g=e(49),y=n(g),v=e(57),m=n(v),_=e(53),b=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f.default.MEDIA_ATTACHING,f.default.MEDIA_DETACHING,f.default.FRAG_PARSING_USERDATA,f.default.MANIFEST_LOADING,f.default.MANIFEST_LOADED,f.default.FRAG_LOADED,f.default.LEVEL_SWITCHING,f.default.INIT_PTS_FOUND));if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=void 0,r.cueRanges=[],r.config.enableCEA708Captions){var n=r,a=function(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)},u={newCue:function(e,t,r){if(!n.textTrack1){var i=n.getExistingTrack("1");if(i)n.textTrack1=i,s(n.textTrack1),a(n.textTrack1,n.media);else{var o=n.createTextTrack("captions",n.config.captionsTextTrack1Label,n.config.captionsTextTrack1LanguageCode);o&&(o.textTrack1=!0,n.textTrack1=o)}}n.addCues("textTrack1",e,t,r)}},l={newCue:function(e,t,r){if(!n.textTrack2){var i=n.getExistingTrack("2");if(i)n.textTrack2=i,s(n.textTrack2),a(n.textTrack2,n.media);else{var o=n.createTextTrack("captions",n.config.captionsTextTrack2Label,n.config.captionsTextTrack1LanguageCode);o&&(o.textTrack2=!0,n.textTrack2=o)}}n.addCues("textTrack2",e,t,r)}};r.cea608Parser=new y.default(0,u,l)}return r}return a(t,e),c(t,[{key:"addCues",value:function(e,t,r,n){for(var i=this.cueRanges,o=!1,a=i.length;a--;){var s=i[a],u=l(s[0],s[1],t,r);if(u>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],r),o=!0,u/(r-t)>.5))return}o||i.push([t,r]),this.Cues.newCue(this[e],t,r,n)}},{key:"onInitPtsFound",value:function(e){var t=this;"undefined"==typeof this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])}},{key:"getExistingTrack",value:function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r],i="textTrack"+e;if(n[i]===!0)return n}return null}},{key:"createTextTrack",value:function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)}},{key:"destroy",value:function(){p.default.prototype.destroy.call(this)}},{key:"onMediaAttaching",value:function(e){this.media=e.media}},{key:"onMediaDetaching",value:function(){s(this.textTrack1),s(this.textTrack2)}},{key:"onManifestLoading",value:function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)s(t[r])}}},{key:"onManifestLoaded",value:function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,n){var i=void 0;if(n<r.length){var o=r[n];u(o,e)&&(i=o)}i||(i=t.createTextTrack("subtitles",e.name,e.lang)),i.mode=e.default?"showing":"hidden",t.textTracks.push(i)})}}},{key:"onLevelSwitching",value:function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions}},{key:"onFragLoaded",value:function(e){var t=e.frag,r=e.payload;if("main"===t.type){var n=t.sn;if(n!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=n}else if("subtitle"===t.type)if(r.byteLength){if("undefined"==typeof this.initPTS)return void this.unparsedVttFrags.push(e);var o=this.vttCCs;o[t.cc]||(o[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var a=this.textTracks,s=this.hls;m.default.parse(r,this.initPTS,o,t.cc,function(e){var r=a[t.trackId];e.forEach(function(e){r.cues.getCueById(e.id)||r.addCue(e)}),s.trigger(f.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){_.logger.log("Failed to parse VTT cue: "+e),s.trigger(f.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})}else this.hls.trigger(f.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})}},{key:"onFragParsingUserdata",value:function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}}},{key:"extractCea608Data",value:function(e){for(var t,r,n,i,o,a=31&e[0],s=2,u=[],l=0;l<a;l++)t=e[s++],r=127&e[s++],n=127&e[s++],i=0!==(4&t),o=3&t,0===r&&0===n||i&&0===o&&(u.push(r),u.push(n));return u}}]),t}(p.default);r.default=b},{34:34,35:35,49:49,53:53,57:57}],17:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r){n(this,e),this.subtle=t,this.aesIV=r}return i(e,[{key:"decrypt",value:function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}]),e}();r.default=o},{}],18:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return i(e,[{key:"uint8ArrayToUint32Array_",value:function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r}},{key:"initTable",value:function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],a=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,g=0;for(g=0;g<256;g++)g<128?f[g]=g<<1:f[g]=g<<1^283;for(g=0;g<256;g++){var y=p^p<<1^p<<2^p<<3^p<<4;y=y>>>8^255&y^99,e[h]=y,t[y]=h;var v=f[h],m=f[v],_=f[m],b=257*f[y]^16843008*y;n[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,o[h]=b<<8|b>>>24,a[h]=b,b=16843009*_^65537*m^257*v^16843008*h,u[y]=b<<24|b>>>8,l[y]=b<<16|b>>>16,c[y]=b<<8|b>>>24,d[y]=b,h?(h=v^f[f[f[_^v]]],p^=f[f[p]]):h=p=1}}},{key:"expandKey",value:function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o=this.ksRows=4*(i+6+1),a=void 0,s=void 0,u=this.keySchedule=new Uint32Array(o),l=this.invKeySchedule=new Uint32Array(o),c=this.sBox,d=this.rcon,f=this.invSubMix,h=f[0],p=f[1],g=f[2],y=f[3],v=void 0,m=void 0;for(a=0;a<o;a++)a<i?v=u[a]=t[a]:(m=v,a%i===0?(m=m<<8|m>>>24,m=c[m>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m],m^=d[a/i|0]<<24):i>6&&a%i===4&&(m=c[m>>>24]<<24|c[m>>>16&255]<<16|c[m>>>8&255]<<8|c[255&m]),u[a]=v=(u[a-i]^m)>>>0);for(s=0;s<o;s++)a=o-s,m=3&s?u[a]:u[a-4],s<4||a<=4?l[s]=m:l[s]=h[c[m>>>24]]^p[c[m>>>16&255]]^g[c[m>>>8&255]]^y[c[255&m]],l[s]=l[s]>>>0}}},{key:"networkToHostOrderSwap",value:function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}},{key:"decrypt",value:function(e,t,r){for(var n,i,o=this.keySize+6,a=this.invKeySchedule,s=this.invSBox,u=this.invSubMix,l=u[0],c=u[1],d=u[2],f=u[3],h=this.uint8ArrayToUint32Array_(r),p=h[0],g=h[1],y=h[2],v=h[3],m=new Int32Array(e),_=new Int32Array(m.length),b=void 0,T=void 0,E=void 0,w=void 0,k=void 0,S=void 0,A=void 0,C=void 0,P=void 0,O=void 0,R=void 0,x=void 0,j=this.networkToHostOrderSwap;t<m.length;){for(P=j(m[t]),O=j(m[t+1]),R=j(m[t+2]),x=j(m[t+3]),k=P^a[0],S=x^a[1],A=R^a[2],C=O^a[3],n=4,i=1;i<o;i++)b=l[k>>>24]^c[S>>16&255]^d[A>>8&255]^f[255&C]^a[n],T=l[S>>>24]^c[A>>16&255]^d[C>>8&255]^f[255&k]^a[n+1],E=l[A>>>24]^c[C>>16&255]^d[k>>8&255]^f[255&S]^a[n+2],w=l[C>>>24]^c[k>>16&255]^d[S>>8&255]^f[255&A]^a[n+3],k=b,S=T,A=E,C=w,n+=4;b=s[k>>>24]<<24^s[S>>16&255]<<16^s[A>>8&255]<<8^s[255&C]^a[n],T=s[S>>>24]<<24^s[A>>16&255]<<16^s[C>>8&255]<<8^s[255&k]^a[n+1],E=s[A>>>24]<<24^s[C>>16&255]<<16^s[k>>8&255]<<8^s[255&S]^a[n+2],w=s[C>>>24]<<24^s[k>>16&255]<<16^s[S>>8&255]<<8^s[255&A]^a[n+3],n+=3,_[t]=j(b^p),_[t+1]=j(w^g),_[t+2]=j(E^y),_[t+3]=j(T^v),p=P,g=O,y=R,v=x,t+=4}return _.buffer}},{key:"destroy",value:function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0}}]),e}();r.default=o},{}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(17),s=n(a),u=e(20),l=n(u),c=e(18),d=n(c),f=e(33),h=e(53),p=function(){function e(t,r){i(this,e),this.observer=t,this.config=r,this.logEnabled=!0;try{var n=crypto?crypto:self.crypto;this.subtle=n.subtle||n.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return o(e,[{key:"isSync",value:function(){return this.disableWebCrypto&&this.config.enableSoftwareAES}},{key:"decrypt",value:function(e,t,r,n){var i=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(h.logger.log("JS AES decrypt"),this.logEnabled=!1);var o=this.decryptor;o||(this.decryptor=o=new d.default),o.expandKey(t),n(o.decrypt(e,0,r))}else{this.logEnabled&&(h.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var a=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new l.default(a,t)),this.fastAesKey.expandKey().then(function(o){var u=new s.default(a,r);u.decrypt(e,o).catch(function(o){i.onWebCryptoError(o,e,t,r,n)}).then(function(e){n(e)})}).catch(function(o){i.onWebCryptoError(o,e,t,r,n)})}}},{key:"onWebCryptoError",value:function(e,t,r,n,i){this.config.enableSoftwareAES?(h.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(h.logger.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))}},{key:"destroy",value:function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)}}]),e}();r.default=p},{17:17,18:18,20:20,33:33,53:53}],20:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r){n(this,e),this.subtle=t,this.key=r}return i(e,[{key:"expandKey",value:function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}]),e}();r.default=o},{}],21:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(22),s=n(a),u=e(53),l=e(27),c=n(l),d=function(){function e(t,r,n){i(this,e),this.observer=t,this.config=n,this.remuxer=r}return o(e,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var i,o,a,l,d,f,h,p,g,y,v=new c.default(e),m=90*v.timeStamp;for(i=this._audioTrack,f=v.length,g=e.length;f<g-1&&(255!==e[f]||240!==(246&e[f+1]));f++);for(i.samplerate||(o=s.default.getAudioConfig(this.observer,e,f,i.manifestCodec),i.config=o.config,i.samplerate=o.samplerate,i.channelCount=o.channelCount,i.codec=o.codec,u.logger.log("parsed codec:"+i.codec+",rate:"+o.samplerate+",nb channel:"+o.channelCount)),d=0,l=9216e4/i.samplerate;f+5<g&&(h=1&e[f+1]?7:9,a=(3&e[f+3])<<11|e[f+4]<<3|(224&e[f+5])>>>5,a-=h,a>0&&f+h+a<=g);)for(p=m+d*l,y={unit:e.subarray(f+h,f+h+a),pts:p,dts:p},i.samples.push(y),i.len+=a,f+=a+h,d++;f<g-1&&(255!==e[f]||240!==(246&e[f+1]));f++);this.remuxer.remux(i,{samples:[]},{samples:[{pts:m,dts:m,data:v.payload}],inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=new c.default(e);if(n.hasTimeStamp)for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(255===e[t]&&240===(246&e[t+1]))return!0;return!1}}]),e}();r.default=d},{22:22,27:27,53:53}],22:[function(e,t,r){"use strict";var n=e(53),i=e(33),o={getAudioConfig:function(e,t,r,o){var a,s,u,l,c,d=navigator.userAgent.toLowerCase(),f=o,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return a=((192&t[r+2])>>>6)+1,s=(60&t[r+2])>>>2,s>h.length-1?void e.trigger(Event.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s}):(l=(1&t[r+2])<<2,l|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+o+",ADTS data:type:"+a+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+l),/firefox/i.test(d)?s>=6?(a=5,c=new Array(4),u=s-3):(a=2,c=new Array(2),u=s):d.indexOf("android")!==-1?(a=2,c=new Array(2),u=s):(a=5,c=new Array(4),o&&(o.indexOf("mp4a.40.29")!==-1||o.indexOf("mp4a.40.5")!==-1)||!o&&s>=6?u=s-3:((o&&o.indexOf("mp4a.40.2")!==-1&&s>=6&&1===l||!o&&1===l)&&(a=2,c=new Array(2)),u=s)),c[0]=a<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=l<<3,5===a&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[s],channelCount:l,codec:"mp4a.40."+a,manifestCodec:f})}};t.exports=o},{33:33,53:53}],23:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(35),s=n(a),u=e(33),l=e(19),c=n(l),d=e(21),f=n(d),h=e(29),p=n(h),g=e(32),y=n(g),v=e(28),m=n(v),_=e(45),b=n(_),T=e(46),E=n(T),w=function(){function e(t,r,n,o){i(this,e),this.observer=t,this.typeSupported=r,this.config=n,this.vendor=o}return o(e,[{key:"destroy",value:function(){var e=this.demuxer;e&&e.destroy()}},{key:"push",value:function(e,t,r,n,i,o,a,u,l,d,f,h){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var p=this.decrypter;null==p&&(p=this.decrypter=new c.default(this.observer,this.config));var g,y=this;try{g=performance.now()}catch(e){g=Date.now()}p.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var c;try{c=performance.now()}catch(e){c=Date.now()}y.observer.trigger(s.default.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:c}}),y.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,i,o,a,u,l,d,f,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),n,i,o,a,u,l,d,f,h)}},{key:"pushDecrypted",value:function(e,t,r,n,i,o,a,l,c,d,h,g){var v=this.demuxer;if(!v||a&&!this.probe(e)){var _=this.observer,T=this.typeSupported,w=this.config,k=[{demux:y.default,remux:b.default},{demux:m.default,remux:b.default},{demux:f.default,remux:b.default},{demux:p.default,remux:E.default}];for(var S in k){var A=k[S],C=A.demux.probe;if(C(e)){var P=this.remuxer=new A.remux(_,w,T,this.vendor);v=new A.demux(_,P,w,T),this.probe=C;break}}if(!v)return void _.trigger(s.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:u.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=v}var O=this.remuxer;(a||l)&&(v.resetInitSegment(r,n,i,d),O.resetInitSegment()),a&&(v.resetTimeStamp(),O.resetTimeStamp(g)),"function"==typeof v.setDecryptData&&v.setDecryptData(t),v.append(e,o,c,h)}}]),e}();r.default=w},{19:19,21:21,28:28,29:29,32:32,33:33,35:35,45:45,46:46}],24:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e(23),o=n(i),a=e(35),s=n(a),u=e(53),l=e(1),c=n(l),d=function(e){var t=new c.default;t.trigger=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",function(n){var i=n.data;switch(i.cmd){case"init":var a=JSON.parse(i.config);e.demuxer=new o.default(t,i.typeSupported,a,i.vendor);try{(0,u.enableLogs)(a.debug===!0)}catch(e){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":e.demuxer.push(i.data,i.decryptdata,i.initSegment,i.audioCodec,i.videoCodec,i.timeOffset,i.discontinuity,i.trackSwitch,i.contiguous,i.duration,i.accurateTimeOffset,i.defaultInitPTS)}}),t.on(s.default.FRAG_DECRYPTED,r),t.on(s.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(s.default.FRAG_PARSED,r),t.on(s.default.ERROR,r),t.on(s.default.FRAG_PARSING_METADATA,r),t.on(s.default.FRAG_PARSING_USERDATA,r),t.on(s.default.INIT_PTS_FOUND,r),t.on(s.default.FRAG_PARSING_DATA,function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)})};r.default=d},{1:1,23:23,35:35,53:53}],25:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(35),s=n(a),u=e(23),l=n(u),c=e(24),d=n(c),f=e(53),h=e(33),p=e(1),g=n(p),y=function(){function t(r,n){i(this,t),this.hls=r,this.id=n;var o=this.observer=new g.default,a=r.config;o.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];o.emit.apply(o,[e,e].concat(r))},o.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];o.removeListener.apply(o,[e].concat(r))};var u=function(e,t){t=t||{},t.frag=this.frag,t.id=this.id,r.trigger(e,t)}.bind(this);o.on(s.default.FRAG_DECRYPTED,u),o.on(s.default.FRAG_PARSING_INIT_SEGMENT,u),o.on(s.default.FRAG_PARSING_DATA,u),o.on(s.default.FRAG_PARSED,u),o.on(s.default.ERROR,u),o.on(s.default.FRAG_PARSING_METADATA,u),o.on(s.default.FRAG_PARSING_USERDATA,u),o.on(s.default.INIT_PTS_FOUND,u);var c={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},p=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){f.logger.log("demuxing in webworker");var y=void 0;try{var v=e(3);y=this.w=v(d.default),this.onwmsg=this.onWorkerMessage.bind(this),y.addEventListener("message",this.onwmsg),y.onerror=function(e){r.trigger(s.default.ERROR,{type:h.ErrorTypes.OTHER_ERROR,details:h.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},y.postMessage({cmd:"init",typeSupported:c,vendor:p,id:n,config:JSON.stringify(a)})}catch(e){f.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),y&&URL.revokeObjectURL(y.objectURL),this.demuxer=new l.default(o,c,a,p),this.w=void 0}}else this.demuxer=new l.default(o,c,a,p)}return o(t,[{key:"destroy",value:function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)}},{key:"push",value:function(e,t,r,n,i,o,a,s){var u=this.w,l=isNaN(i.startDTS)?i.start:i.startDTS,c=i.decryptdata,d=this.frag,h=!(d&&i.cc===d.cc),p=!(d&&i.level===d.level),g=d&&i.sn===d.sn+1,y=!p&&g;
if(h&&f.logger.log(this.id+":discontinuity detected"),p&&f.logger.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:c,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:l,discontinuity:h,trackSwitch:p,contiguous:y,duration:o,accurateTimeOffset:a,defaultInitPTS:s},[e]);else{var v=this.demuxer;v&&v.push(e,c,t,r,n,l,h,p,y,o,a,s)}}},{key:"onWorkerMessage",value:function(e){var t=e.data,r=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case s.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}}]),t}();r.default=y},{1:1,23:23,24:24,3:3,33:33,35:35,53:53}],26:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(53),a=function(){function e(t){n(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return i(e,[{key:"loadWord",value:function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}},{key:"skipBits",value:function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}},{key:"readBits",value:function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&o.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return 1===this.readBits(1)}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}},{key:"skipScalingList",value:function(e){var t,r,n=8,i=8;for(t=0;t<e;t++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i}},{key:"readSPS",value:function(){var e,t,r,n,i,o,a,s,u,l=0,c=0,d=0,f=0,h=this.readUByte.bind(this),p=this.readBits.bind(this),g=this.readUEG.bind(this),y=this.readBoolean.bind(this),v=this.skipBits.bind(this),m=this.skipEG.bind(this),_=this.skipUEG.bind(this),b=this.skipScalingList.bind(this);if(h(),e=h(),t=p(5),v(3),r=h(),_(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var T=g();if(3===T&&v(1),_(),_(),v(1),y())for(s=3!==T?8:12,u=0;u<s;u++)y()&&b(u<6?16:64)}_();var E=g();if(0===E)g();else if(1===E)for(v(1),m(),m(),n=g(),u=0;u<n;u++)m();_(),v(1),i=g(),o=g(),a=p(1),0===a&&v(1),v(1),y()&&(l=g(),c=g(),d=g(),f=g());var w=[1,1];if(y()&&y()){var k=h();switch(k){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[h()<<8|h(),h()<<8|h()]}}return{width:Math.ceil(16*(i+1)-2*l-2*c),height:(2-a)*(o+1)*16-(a?2:4)*(d+f),pixelRatio:w}}},{key:"readSliceType",value:function(){return this.readUByte(),this.readUEG(),this.readUEG()}}]),e}();r.default=a},{53:53}],27:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(53),a=function(){function e(t){n(this,e),this._hasTimeStamp=!1,this._length=0;for(var r,i,a,s,u,l,c,d,f=0;;)if(c=this.readUTF(t,f,3),f+=3,"ID3"===c)f+=3,r=127&t[f++],i=127&t[f++],a=127&t[f++],s=127&t[f++],u=(r<<21)+(i<<14)+(a<<7)+s,l=f+u,this._parseID3Frames(t,f,l),f=l;else{if("3DI"!==c)return f-=3,d=f,void(d&&(this.hasTimeStamp||o.logger.warn("ID3 tag found, but no timestamp"),this._length=d,this._payload=t.subarray(0,d)));f+=7,o.logger.log("3DI footer found, end: "+f)}}return i(e,[{key:"readUTF",value:function(e,t,r){var n="",i=t,o=t+r;do n+=String.fromCharCode(e[i++]);while(i<o);return n}},{key:"_parseID3Frames",value:function(e,t,r){for(var n,i,a,s,u;t+8<=r;)switch(n=this.readUTF(e,t,4),t+=4,i=e[t++]<<24+e[t++]<<16+e[t++]<<8+e[t++],s=e[t++]<<8+e[t++],a=t,n){case"PRIV":if("com.apple.streaming.transportStreamTimestamp"===this.readUTF(e,t,44)){t+=44,t+=4;var l=1&e[t++];this._hasTimeStamp=!0,u=((e[t++]<<23)+(e[t++]<<15)+(e[t++]<<7)+e[t++])/45,l&&(u+=47721858.84),u=Math.round(u),o.logger.trace("ID3 timestamp found: "+u),this._timeStamp=u}}}},{key:"hasTimeStamp",get:function(){return this._hasTimeStamp}},{key:"timeStamp",get:function(){return this._timeStamp}},{key:"length",get:function(){return this._length}},{key:"payload",get:function(){return this._payload}}]),e}();r.default=a},{53:53}],28:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(27),s=n(a),u=e(30),l=n(u),c=function(){function e(t,r,n){i(this,e),this.observer=t,this.config=n,this.remuxer=r}return o(e,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var i,o,a=new s.default(e),u=90*a.timeStamp,c=a.length;for(i=c,o=e.length;i<o-1&&(255!==e[i]||224!==(224&e[i+1])||0===(6&e[i+1]));i++);l.default.parse(this._audioTrack,e,a.length,u),this.remuxer.remux(this._audioTrack,{samples:[]},{samples:[{pts:u,dts:u,data:a.payload}],inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=new s.default(e);if(n.hasTimeStamp)for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1]))return!0;return!1}}]),e}();r.default=c},{27:27,30:30}],29:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(35),s=n(a),u=function(){function e(t,r){i(this,e),this.observer=t,this.remuxer=r}return o(e,[{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(t,r,n,i){var o=this.initData=e.parseInitSegment(t),a={};o.audio&&(a.audio={container:"audio/mp4",codec:r,initSegment:t}),o.video&&(a.video={container:"video/mp4",codec:n,initSegment:t}),this.observer.trigger(s.default.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}},{key:"append",value:function(t,r,n,i){var o=this.initData,a=e.startDTS(o,t);this.remuxer.remux(o.audio,o.video,null,null,a,n,i,t)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(t){if(t.length>=8){var r=e.bin2str(t.subarray(4,8));return["moof","ftyp","styp"].indexOf(r)>=0}return!1}},{key:"bin2str",value:function(e){return String.fromCharCode.apply(null,e)}},{key:"readUint32",value:function(e,t){var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r}},{key:"findBox",value:function(t,r){var n,i,o,a,s,u=[];if(!r.length)return null;for(n=0;n<t.byteLength;)i=e.readUint32(t,n),o=e.bin2str(t.subarray(n+4,n+8)),a=i>1?n+i:t.byteLength,o===r[0]&&(1===r.length?u.push(t.subarray(n+8,a)):(s=e.findBox(t.subarray(n+8,a),r.slice(1)),s.length&&(u=u.concat(s)))),n=a;return u}},{key:"parseInitSegment",value:function(t){var r=[],n=e.findBox(t,["moov","trak"]);return n.forEach(function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var i=n[0],o=0===i?12:20,a=e.readUint32(n,o),s=e.findBox(t,["mdia","mdhd"])[0];if(s){i=s[0],o=0===i?12:20;var u=e.readUint32(s,o),l=e.findBox(t,["mdia","hdlr"])[0];if(l){var c=e.bin2str(l.subarray(8,12)),d={soun:"audio",vide:"video"}[c];d&&(r[a]={timescale:u,type:d},r[d]={timescale:u,id:a})}}}}),r}},{key:"startDTS",value:function(t,r){var n,i,o;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return e.findBox(r,["tfhd"]).map(function(n){var i,o,a;return i=e.readUint32(n,4),o=t[i].timescale||9e4,a=e.findBox(r,["tfdt"]).map(function(t){var r,n;return r=t[0],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n})[0],a=a||1/0,a/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0}}]),e}();r.default=u},{35:35}],30:[function(e,t,r){"use strict";var n=e(53),i={onFrame:function(e,t,r,n,i,o,a){var s=10368e4/n,u=a+o*s;e.config=[],e.channelCount=i,e.samplerate=n,e.samples.push({unit:t,pts:u,dts:u}),e.len+=t.length},onNoise:function(e){n.logger.warn("mpeg audio has noise: "+e.length+" bytes")},parseFrames:function(e,t,r,n,i,o){var a=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],s=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];if(r+2>n)return-1;if(255===t[r]||224===(224&t[r+1])){if(r+24>n)return-1;var u=t[r+1]>>3&3,l=t[r+1]>>1&3,c=t[r+2]>>4&15,d=t[r+2]>>2&3,f=!!(2&t[r+2]);if(1!==u&&0!==c&&15!==c&&3!==d){var h=3===u?3-l:3===l?3:4,p=1e3*a[14*h+c-1],g=3===u?0:2===u?1:2,y=s[3*g+d],v=f?1:0,m=t[r+3]>>6===3?1:2,_=3===l?(3===u?12:6)*p/y+v<<2:(3===u?144:72)*p/y+v|0;return r+_>n?-1:(this.onFrame(e,t.subarray(r,r+_),p,y,m,i,o),_)}}for(var b=r+2;b<n;){if(255===t[b-1]&&224===(224&t[b]))return this.onNoise(t.subarray(r,b-1)),b-r-1;b++}return-1},parse:function(e,t,r,n){for(var i,o=t.length,a=0;r<o&&(i=this.parseFrames(e,t,r,o,a++,n))>0;)r+=i}};t.exports=i},{53:53}],31:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(19),s=n(a),u=function(){function e(t,r,n,o){i(this,e),this.decryptdata=n,this.discardEPB=o,this.decrypter=new s.default(t,r)}return o(e,[{key:"decryptBuffer",value:function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)}},{key:"decryptAacSample",value:function(e,t,r,n){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),n||s.decryptAacSamples(e,t+1,r)})}},{key:"decryptAacSamples",value:function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}}},{key:"getAvcEncryptedData",value:function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r}},{key:"getAvcDecryptedUnit",value:function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e}},{key:"decryptAvcSample",value:function(e,t,r,n,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),u=this;this.decryptBuffer(s.buffer,function(s){i.data=u.getAvcDecryptedUnit(a,s),o||u.decryptAvcSamples(e,t,r+1,n)})}},{key:"decryptAvcSamples",value:function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var o=i[r];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,o,a),!a)return}}}}}]),e}();r.default=u},{19:19}],32:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(22),s=n(a),u=e(30),l=n(u),c=e(35),d=n(c),f=e(26),h=n(f),p=e(31),g=n(p),y=e(53),v=e(33),m=function(){function e(t,r,n,o){i(this,e),this.observer=t,this.config=n,this.typeSupported=o,this.remuxer=r,this.sampleAes=null}return o(e,[{key:"setDecryptData",value:function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new g.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null}},{key:"resetInitSegment",value:function(e,t,r,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:n,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=r,this._duration=n}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var i,o,a,s,u,l,c=e.length,f=!1;this.contiguous=r;var h=this.pmtParsed,p=this._avcTrack,g=this._audioTrack,m=this._id3Track,_=p.id,b=g.id,T=m.id,E=this._pmtId,w=p.pesData,k=g.pesData,S=m.pesData,A=this._parsePAT,C=this._parsePMT,P=this._parsePES,O=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),x=this._parseMPEGPES.bind(this),j=this._parseID3PES.bind(this);for(c-=c%188,i=0;i<c;i+=188)if(71===e[i]){if(o=!!(64&e[i+1]),a=((31&e[i+1])<<8)+e[i+2],s=(48&e[i+3])>>4,s>1){if(u=i+5+e[i+4],u===i+188)continue}else u=i+4;switch(a){case _:o&&(w&&(l=P(w))&&O(l,!1),w={data:[],size:0}),w&&(w.data.push(e.subarray(u,i+188)),w.size+=i+188-u);break;case b:o&&(k&&(l=P(k))&&(g.isAAC?R(l):x(l)),k={data:[],size:0}),k&&(k.data.push(e.subarray(u,i+188)),k.size+=i+188-u);break;case T:o&&(S&&(l=P(S))&&j(l),S={data:[],size:0}),S&&(S.data.push(e.subarray(u,i+188)),S.size+=i+188-u);break;case 0:o&&(u+=e[u]+1),E=this._pmtId=A(e,u);break;case E:o&&(u+=e[u]+1);var I=C(e,u,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);_=I.avc,_>0&&(p.id=_),b=I.audio,b>0&&(g.id=b,g.isAAC=I.isAAC),T=I.id3,T>0&&(m.id=T),f&&!h&&(y.logger.log("reparse from beginning"),f=!1,i=-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:f=!0}}else this.observer.trigger(d.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(l=P(w))?(O(l,!0),p.pesData=null):p.pesData=w,k&&(l=P(k))?(g.isAAC?R(l):x(l),g.pesData=null):(k&&k.size&&y.logger.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=k),S&&(l=P(S))?(j(l),m.pesData=null):m.pesData=S,null==this.sampleAes?this.remuxer.remux(g,p,m,this._txtTrack,t,r,n):this.decryptAndRemux(g,p,m,this._txtTrack,t,r,n)}},{key:"decryptAndRemux",value:function(e,t,r,n,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,n,i,o,a)})}else this.decryptAndRemuxAvc(e,t,r,n,i,o,a)}},{key:"decryptAndRemuxAvc",value:function(e,t,r,n,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,n,i,o,a)})}else this.remuxer.remux(e,t,r,n,i,o,a)}},{key:"destroy",value:function(){this._initPTS=this._initDTS=void 0,this._duration=0}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t,r,n){var i,o,a,s,u={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&e[t+1])<<8|e[t+2],o=t+3+i-4,a=(15&e[t+10])<<8|e[t+11],t+=12+a;t<o;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){y.logger.log("unkown stream type:"+e[t]);break}case 15:u.audio===-1&&(u.audio=s);break;case 21:u.id3===-1&&(u.id3=s);break;case 219:if(!n){y.logger.log("unkown stream type:"+e[t]);break}case 27:u.avc===-1&&(u.avc=s);break;case 3:case 4:r?u.audio===-1&&(u.audio=s,u.isAAC=!1):y.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:y.logger.warn("HEVC stream type found, not supported for now");break;default:y.logger.log("unkown stream type:"+e[t])}t+=((15&e[t+3])<<8|e[t+4])+5}return u}},{key:"_parsePES",value:function(e){var t,r,n,i,o,a,s,u,l,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(t=d[0],n=(t[0]<<16)+(t[1]<<8)+t[2],1===n){if(i=(t[4]<<8)+t[5],i&&i>e.size-6)return null;r=t[7],192&r&&(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,s>4294967295&&(s-=8589934592),64&r?(u=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,u>4294967295&&(u-=8589934592),s-u>54e5&&(y.logger.warn(Math.round((s-u)/9e4)+"s delta between PTS and DTS, align them"),s=u)):u=s),o=t[8],l=o+9,e.size-=l,a=new Uint8Array(e.size);for(var h=0,p=d.length;h<p;h++){t=d[h];var g=t.byteLength;if(l){if(l>g){l-=g;continue}t=t.subarray(l),g-=l,l=0}a.set(t,c),c+=g}return i&&(i-=o+3),{data:a,pts:s,dts:u,len:i}}return null}},{key:"pushAccesUnit",value:function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||e.key===!0||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&y.logger.log(e.pts+"/"+e.dts+":"+e.debug)}},{key:"_parseAVCPES",value:function(e,t){var r,n,i,o=this,a=this._avcTrack,s=this._parseAVCNALu(e.data),u=!1,l=this.avcSample;e.data=null,s.forEach(function(t){switch(t.type){case 1:n=!0,u&&l&&(l.debug+="NDR "),l.frame=!0;var s=t.data;if(s.length>4){var c=new h.default(s).readSliceType();2!==c&&4!==c&&7!==c&&9!==c||(l.key=!0)}break;case 5:n=!0,l||(l=o.avcSample=o._createAVCSample(!0,e.pts,e.dts,"")),u&&(l.debug+="IDR "),l.key=!0,l.frame=!0;break;case 6:n=!0,u&&l&&(l.debug+="SEI "),r=new h.default(o.discardEPB(t.data)),r.readUByte();for(var d=0,f=0,p=!1,g=0;!p&&r.bytesAvailable>1;){d=0;do g=r.readUByte(),d+=g;while(255===g);f=0;do g=r.readUByte(),f+=g;while(255===g);if(4===d&&0!==r.bytesAvailable){p=!0;var y=r.readUByte();if(181===y){var v=r.readUShort();if(49===v){var m=r.readUInt();if(1195456820===m){var _=r.readUByte();if(3===_){var b=r.readUByte(),T=r.readUByte(),E=31&b,w=[b,T];for(i=0;i<E;i++)w.push(r.readUByte()),w.push(r.readUByte()),w.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:w})}}}}}else if(f<r.bytesAvailable)for(i=0;i<f;i++)r.readUByte()}break;case 7:if(n=!0,u&&l&&(l.debug+="SPS "),!a.sps){r=new h.default(t.data);var k=r.readSPS();a.width=k.width,a.height=k.height,a.pixelRatio=k.pixelRatio,a.sps=[t.data],a.duration=o._duration;var S=t.data.subarray(1,4),A="avc1.";for(i=0;i<3;i++){var C=S[i].toString(16);C.length<2&&(C="0"+C),A+=C}a.codec=A}break;case 8:n=!0,u&&l&&(l.debug+="PPS "),a.pps||(a.pps=[t.data]);break;case 9:n=!1,l&&o.pushAccesUnit(l,a),l=o.avcSample=o._createAVCSample(!1,e.pts,e.dts,u?"AUD ":"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}if(l&&n){var P=l.units;P.push(t)}}),t&&l&&(this.pushAccesUnit(l,a),this.avcSample=null)}},{key:"_createAVCSample",value:function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}}},{key:"_insertSampleInOrder",value:function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)}},{key:"_getLastNalUnit",value:function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var r=this._avcTrack,n=r.samples;e=n[n.length-1]}if(e){var i=e.units;t=i[i.length-1]}return t}},{key:"_parseAVCNALu",value:function(e){var t,r,n,i,o,a=0,s=e.byteLength,u=this._avcTrack,l=u.naluState||0,c=l,d=[],f=-1;for(l===-1&&(f=0,o=31&e[0],l=0,a=1);a<s;)if(t=e[a++],l)if(1!==l)if(t)if(1===t){if(f>=0)n={data:e.subarray(f,a-l-1),type:o},d.push(n);else{var h=this._getLastNalUnit();if(h&&(c&&a<=4-c&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-c)),r=a-l-1,r>0)){var p=new Uint8Array(h.data.byteLength+r);p.set(h.data,0),p.set(e.subarray(0,r),h.data.byteLength),h.data=p}}a<s?(i=31&e[a],f=a,o=i,l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(f>=0&&l>=0&&(n={data:e.subarray(f,s),type:o,state:l},d.push(n)),0===d.length){var g=this._getLastNalUnit();if(g){var y=new Uint8Array(g.data.byteLength+e.byteLength);y.set(g.data,0),y.set(e,g.data.byteLength),g.data=y}}return u.naluState=l,d}},{key:"discardEPB",value:function(e){for(var t,r,n=e.byteLength,i=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=e[a];return r}},{key:"_parseAACPES",value:function(e){var t,r,n,i,o,a,u,l,c,f=this._audioTrack,h=e.data,p=e.pts,g=0,m=this.aacOverFlow,_=this.aacLastPTS;if(m){var b=new Uint8Array(m.byteLength+h.byteLength);b.set(m,0),b.set(h,m.byteLength),h=b}for(o=g,l=h.length;o<l-1&&(255!==h[o]||240!==(240&h[o+1]));o++);if(o){var T,E;if(o<l-1?(T="AAC PES did not start with ADTS header,offset:"+o,E=!1):(T="no ADTS header found in AAC PES",E=!0),y.logger.warn("parsing error:"+T),this.observer.trigger(d.default.ERROR,{type:v.ErrorTypes.MEDIA_ERROR,details:v.ErrorDetails.FRAG_PARSING_ERROR,fatal:E,reason:T}),E)return}if(!f.samplerate){var w=this.audioCodec;t=s.default.getAudioConfig(this.observer,h,o,w),f.config=t.config,f.samplerate=t.samplerate,f.channelCount=t.channelCount,f.codec=t.codec,f.manifestCodec=t.manifestCodec,y.logger.log("parsed codec:"+f.codec+",rate:"+t.samplerate+",nb channel:"+t.channelCount)}if(i=0,n=9216e4/f.samplerate,m&&_){var k=_+n;Math.abs(k-p)>1&&(y.logger.log("AAC: align PTS for overlapping frames by "+Math.round((k-p)/90)),p=k)}for(;o+5<l&&(a=1&h[o+1]?7:9,r=(3&h[o+3])<<11|h[o+4]<<3|(224&h[o+5])>>>5,r-=a,r>0&&o+a+r<=l);)for(u=p+i*n,c={unit:h.subarray(o+a,o+a+r),pts:u,dts:u},f.samples.push(c),f.len+=r,o+=r+a,i++;o<l-1&&(255!==h[o]||240!==(240&h[o+1]));o++);m=o<l?h.subarray(o,l):null,this.aacOverFlow=m,this.aacLastPTS=u}},{key:"_parseMPEGPES",value:function(e){l.default.parse(this._audioTrack,e.data,0,e.pts)}},{key:"_parseID3PES",value:function(e){this._id3Track.samples.push(e)}}],[{key:"probe",value:function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]}}]),e}();r.default=m},{22:22,26:26,30:30,31:31,33:33,35:35,53:53}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e(53),u=e(33),l=e(35),c=n(l),d=function(){function e(t){i(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}return a(e,[{key:"destroy",value:function(){this.unregisterListeners()}},{key:"isEventHandler",value:function(){return"object"===o(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent}},{key:"registerListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)}.bind(this))}},{key:"unregisterListeners",value:function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)}.bind(this))}},{key:"onEvent",value:function(e,t){this.onEventGeneric(e,t)}},{key:"onEventGeneric",value:function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){s.logger.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(c.default.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}}}]),e}();r.default=d},{33:33,35:35,53:53}],35:[function(e,t,r){"use strict";t.exports={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},{}],36:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,null,[{key:"getSilentFrame",value:function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),e}();r.default=o},{}],37:[function(e,t,r){"use strict";var n={isBuffered:function(e,t){if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0;return!1},bufferInfo:function(e,t,r){if(e){var n,i=e.buffered,o=[];for(n=0;n<i.length;n++)o.push({start:i.start(n),end:i.end(n)});return this.bufferedInfo(o,t,r)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,r){var n,i,o,a,s,u=[];for(e.sort(function(e,t){var r=e.start-t.start;return r?r:t.end-e.end}),s=0;s<e.length;s++){
var l=u.length;if(l){var c=u[l-1].end;e[s].start-c<r?e[s].end>c&&(u[l-1].end=e[s].end):u.push(e[s])}else u.push(e[s])}for(s=0,n=0,i=o=t;s<u.length;s++){var d=u[s].start,f=u[s].end;if(t+r>=d&&t<f)i=d,o=f,n=o-t;else if(t+r<d){a=d;break}}return{len:n,start:i,end:o,nextStart:a}}};t.exports=n},{}],38:[function(e,t,r){"use strict";var n=e(53),i={mergeDetails:function(e,t){var r,o=Math.max(e.startSN,t.startSN)-t.startSN,a=Math.min(e.endSN,t.endSN)-t.startSN,s=t.startSN-e.startSN,u=e.fragments,l=t.fragments,c=0;if(a<o)return void(t.PTSKnown=!1);for(var d=o;d<=a;d++){var f=u[s+d],h=l[d];h&&f&&(c=f.cc-h.cc,isNaN(f.startPTS)||(h.start=h.startPTS=f.startPTS,h.endPTS=f.endPTS,h.duration=f.duration,h.backtracked=f.backtracked,h.dropped=f.dropped,r=h))}if(c)for(n.logger.log("discontinuity sliding from playlist, take drift into account"),d=0;d<l.length;d++)l[d].cc+=c;if(r)i.updateFragPTSDTS(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(s>=0&&s<u.length){var p=u[s].start;for(d=0;d<l.length;d++)l[d].start+=p}t.PTSKnown=e.PTSKnown},updateFragPTSDTS:function(e,t,r,n,o,a){if(!isNaN(t.startPTS)){var s=Math.abs(t.startPTS-r);isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),r=Math.min(r,t.startPTS),n=Math.max(n,t.endPTS),o=Math.min(o,t.startDTS),a=Math.max(a,t.endDTS)}var u=r-t.start;t.start=t.startPTS=r,t.endPTS=n,t.startDTS=o,t.endDTS=a,t.duration=n-r;var l=t.sn;if(!e||l<e.startSN||l>e.endSN)return 0;var c,d,f;for(c=l-e.startSN,d=e.fragments,t=d[c],f=c;f>0;f--)i.updatePTS(d,f,f-1);for(f=c;f<d.length-1;f++)i.updatePTS(d,f,f+1);return e.PTSKnown=!0,u},updatePTS:function(e,t,r){var i=e[t],o=e[r],a=o.startPTS;isNaN(a)?r>t?o.start=i.start+i.duration:o.start=Math.max(i.start-o.duration,0):r>t?(i.duration=a-i.start,i.duration<0&&n.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(o.duration=i.start-a,o.duration<0&&n.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!"))}};t.exports=i},{53:53}],39:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(2),s=n(a),u=e(35),l=n(u),c=e(33),d=e(43),f=n(d),h=e(41),p=n(h),g=e(42),y=n(g),v=e(13),m=n(v),_=e(12),b=n(_),T=e(11),E=n(T),w=e(53),k=e(1),S=n(k),A=e(4),C=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e);var n=e.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in n)o in r||(r[o]=n[o]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');(0,w.enableLogs)(r.debug),this.config=r,this._autoLevelCapping=-1;var a=this.observer=new S.default;a.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];a.emit.apply(a,[e,e].concat(r))},a.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];a.removeListener.apply(a,[e].concat(r))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a);var s=this.abrController=new r.abrController(this),u=new r.bufferController(this),l=new r.capLevelController(this),c=new r.fpsController(this),d=new f.default(this),h=new p.default(this),g=new y.default(this),v=new E.default(this),_=this.levelController=new b.default(this),T=this.streamController=new m.default(this),k=[_,T],A=r.audioStreamController;A&&k.push(new A(this)),this.networkControllers=k;var C=[d,h,g,s,u,l,c,v];if(A=r.audioTrackController){var P=new A(this);this.audioTrackController=P,C.push(P)}if(A=r.subtitleTrackController){var O=new A(this);this.subtitleTrackController=O,C.push(O)}[r.subtitleStreamController,r.timelineController].forEach(function(e){e&&C.push(new e(t))}),this.coreComponents=C}return o(e,null,[{key:"isSupported",value:function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return r&&n}},{key:"version",get:function(){return"0.7.9"}},{key:"Events",get:function(){return l.default}},{key:"ErrorTypes",get:function(){return c.ErrorTypes}},{key:"ErrorDetails",get:function(){return c.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:A.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}]),o(e,[{key:"destroy",value:function(){w.logger.log("destroy"),this.trigger(l.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1}},{key:"attachMedia",value:function(e){w.logger.log("attachMedia"),this.media=e,this.trigger(l.default.MEDIA_ATTACHING,{media:e})}},{key:"detachMedia",value:function(){w.logger.log("detachMedia"),this.trigger(l.default.MEDIA_DETACHING),this.media=null}},{key:"loadSource",value:function(e){e=s.default.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),w.logger.log("loadSource:"+e),this.url=e,this.trigger(l.default.MANIFEST_LOADING,{url:e})}},{key:"startLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;w.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})}},{key:"stopLoad",value:function(){w.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})}},{key:"swapAudioCodec",value:function(){w.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}},{key:"recoverMediaError",value:function(){w.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){w.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){w.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){w.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){w.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){w.logger.log("set startLevel:"+e);var t=this;e!==-1&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){w.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this,t=e.levels,r=e.config.minAutoBitrate,n=t?t.length:0,i=0;i<n;i++){var o=t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate;if(o>r)return i}return 0}},{key:"maxAutoLevel",get:function(){var e=this,t=e.levels,r=e.autoLevelCapping,n=void 0;return n=r===-1&&t&&t.length?t.length-1:r}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}();r.default=C},{1:1,11:11,12:12,13:13,2:2,33:33,35:35,4:4,41:41,42:42,43:43,53:53}],40:[function(e,t,r){"use strict";t.exports=e(39).default},{39:39}],41:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=e(33),h=e(53),p=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.FRAG_LOADING));return r.loaders={},r}return a(t,e),s(t,[{key:"destroy",value:function(){var e=this.loaders;for(var t in e){var r=e[t];r&&r.destroy()}this.loaders={},d.default.prototype.destroy.call(this)}},{key:"onFragLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],i=this.hls.config;t.loaded=0,n&&(h.logger.warn("abort previous fragment loader for type:"+r),n.abort()),n=this.loaders[r]=t.loader="undefined"!=typeof i.fLoader?new i.fLoader(i):new i.loader(i);var o=void 0,a=void 0,s=void 0;o={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var u=t.byteRangeStartOffset,l=t.byteRangeEndOffset;isNaN(u)||isNaN(l)||(o.rangeStart=u,o.rangeEnd=l),a={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(o,a,s)}},{key:"loadsuccess",value:function(e,t,r){var n=e.data,i=r.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(l.default.FRAG_LOADED,{payload:n,frag:i,stats:t})}},{key:"loaderror",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag})}},{key:"loadprogress",value:function(e,t,r){var n=t.frag;n.loaded=e.loaded,this.hls.trigger(l.default.FRAG_LOAD_PROGRESS,{frag:n,stats:e})}}]),t}(d.default);r.default=p},{33:33,34:34,35:35,53:53}],42:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(35),l=n(u),c=e(34),d=n(c),f=e(33),h=e(53),p=function(e){function t(e){i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,l.default.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return a(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},d.default.prototype.destroy.call(this)}},{key:"onKeyLoading",value:function(e){var t=e.frag,r=t.type,n=this.loaders[r],i=t.decryptdata,o=i.uri;if(o!==this.decrypturl||null===this.decryptkey){var a=this.hls.config;n&&(h.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new a.loader(a),this.decrypturl=o,this.decryptkey=null;var s=void 0,u=void 0,c=void 0;s={url:o,frag:t,responseType:"arraybuffer"},u={timeout:a.fragLoadingTimeOut,maxRetry:a.fragLoadingMaxRetry,retryDelay:a.fragLoadingRetryDelay,maxRetryDelay:a.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,u,c)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(l.default.KEY_LOADED,{frag:t}))}},{key:"loadsuccess",value:function(e,t,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(l.default.KEY_LOADED,{frag:n})}},{key:"loaderror",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})}},{key:"loadtimeout",value:function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(l.default.ERROR,{type:f.ErrorTypes.NETWORK_ERROR,details:f.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})}}]),t}(d.default);r.default=p},{33:33,34:34,35:35,53:53}],43:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e(2),l=n(u),c=e(35),d=n(c),f=e(34),h=n(f),p=e(33),g=e(47),y=n(g),v=e(53),m=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,_=/#EXT-X-MEDIA:(.*)/g,b=/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*))?|(?!#)(\S.+)|#EXT-X-BYTERANGE: *(.+)|#EXT-X-PROGRAM-DATE-TIME:(.+)|#.*/g,T=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,E=function(){function e(){a(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return s(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=l.default.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),w=function(){function e(){a(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return s(e,[{key:"createInitializationVector",value:function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}},{key:"fragmentDecryptdataFromLevelkey",value:function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&(r=new E,r.method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r}},{key:"cloneObj",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=l.default.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r?r:0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),k=function(e){function t(e){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,d.default.MANIFEST_LOADING,d.default.LEVEL_LOADING,d.default.AUDIO_TRACK_LOADING,d.default.SUBTITLE_TRACK_LOADING));return r.loaders={},r}return o(t,e),s(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},h.default.prototype.destroy.call(this)}},{key:"onManifestLoading",value:function(e){this.load(e.url,{type:"manifest"})}},{key:"onLevelLoading",value:function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",value:function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})}},{key:"load",value:function(e,t){var r=this.loaders[t.type];if(r){var n=r.context;if(n&&n.url===e)return void v.logger.trace("playlist request ongoing");v.logger.warn("abort previous loader for type:"+t.type),r.abort()}var i=this.hls.config,o=void 0,a=void 0,s=void 0,u=void 0;"manifest"===t.type?(o=i.manifestLoadingMaxRetry,a=i.manifestLoadingTimeOut,s=i.manifestLoadingRetryDelay,u=i.manifestLoadingMaxRetryTimeout):(o=i.levelLoadingMaxRetry,a=i.levelLoadingTimeOut,s=i.levelLoadingRetryDelay,u=i.levelLoadingMaxRetryTimeout,v.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),r=this.loaders[t.type]=t.loader="undefined"!=typeof i.pLoader?new i.pLoader(i):new i.loader(i),t.url=e,t.responseType="";var l=void 0,c=void 0;l={timeout:a,maxRetry:o,retryDelay:s,maxRetryDelay:u},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,l,c)}},{key:"resolve",value:function(e,t){return l.default.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}},{key:"parseMasterPlaylist",value:function(e,t){var r=[],n=void 0;for(m.lastIndex=0;null!=(n=m.exec(e));){var i={},o=i.attrs=new y.default(n[1]);i.url=this.resolve(n[2],t);var a=o.decimalResolution("RESOLUTION");a&&(i.width=a.width,i.height=a.height),i.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),i.name=o.NAME;var s=o.CODECS;if(s){s=s.split(/[ ,]+/);for(var u=0;u<s.length;u++){var l=s[u];l.indexOf("avc1")!==-1?i.videoCodec=this.avc1toavcoti(l):i.audioCodec=l}}r.push(i)}return r}},{key:"parseMasterPlaylistMedia",value:function(e,t,r){var n=void 0,i=[],o=0;for(_.lastIndex=0;null!=(n=_.exec(e));){var a={},s=new y.default(n[1]);s.TYPE===r&&(a.groupId=s["GROUP-ID"],a.name=s.NAME,a.type=r,a.default="YES"===s.DEFAULT,a.autoselect="YES"===s.AUTOSELECT,a.forced="YES"===s.FORCED,s.URI&&(a.url=this.resolve(s.URI,t)),a.lang=s.LANGUAGE,a.name||(a.name=a.lang),a.id=o++,i.push(a))}return i}},{key:"avc1toavcoti",value:function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t}},{key:"parseLevelPlaylist",value:function(e,t,r,n){var i,o,a=0,s=0,u={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},l=new E,c=0,d=null,f=new w;for(b.lastIndex=0;null!==(i=b.exec(e));){var h=i[1];if(h){f.duration=parseFloat(h);var p=(" "+i[2]).slice(1);f.title=p?p:null,f.tagList.push(p?["INF",h,p]:["INF",h])}else if(i[3]){if(!isNaN(f.duration)){var g=a++;f.type=n,f.start=s,f.levelkey=l,f.sn=g,f.level=r,f.cc=c,f.baseurl=t,f.relurl=(" "+i[3]).slice(1),u.fragments.push(f),d=f,s+=f.duration,f=new w}}else if(i[4]){if(f.rawByteRange=(" "+i[4]).slice(1),d){var m=d.byteRangeEndOffset;m&&(f.lastByteRangeEndOffset=m)}}else if(i[5])f.rawProgramDateTime=(" "+i[5]).slice(1),f.tagList.push(["PROGRAM-DATE-TIME",f.rawProgramDateTime]);else{for(i=i[0].match(T),o=1;o<i.length&&void 0===i[o];o++);var _=(" "+i[o+1]).slice(1),k=(" "+i[o+2]).slice(1);switch(i[o]){case"#":f.tagList.push(k?[_,k]:[_]);break;case"PLAYLIST-TYPE":u.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":a=u.startSN=parseInt(_);break;case"TARGETDURATION":u.targetduration=parseFloat(_);break;case"VERSION":u.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":c++,f.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(_);break;case"KEY":var S=_,A=new y.default(S),C=A.enumeratedString("METHOD"),P=A.URI,O=A.hexadecimalInteger("IV");C&&(l=new E,P&&["AES-128","SAMPLE-AES"].indexOf(C)>=0&&(l.method=C,l.baseuri=t,l.reluri=P,l.key=null,l.iv=O));break;case"START":var R=_,x=new y.default(R),j=x.decimalFloatingPoint("TIME-OFFSET");isNaN(j)||(u.startTimeOffset=j);break;case"MAP":var I=new y.default(_);f.relurl=I.URI,f.rawByteRange=I.BYTERANGE,f.baseurl=t,f.level=r,f.type=n,f.sn="initSegment",u.initSegment=f,f=new w;break;default:v.logger.warn("line parsed but not handled: "+i)}}}return f=d,f&&!f.relurl&&(u.fragments.pop(),s-=f.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=a-1,u}},{key:"loadsuccess",value:function(e,t,r){var n=e.data,i=e.url,o=r.type,a=r.id,s=r.level,u=this.hls;if(this.loaders[o]=void 0,void 0!==i&&0!==i.indexOf("data:")||(i=r.url),t.tload=performance.now(),0===n.indexOf("#EXTM3U"))if(n.indexOf("#EXTINF:")>0){var l="audioTrack"!==o&&"subtitleTrack"!==o,c=isNaN(s)?isNaN(a)?0:a:s,f=this.parseLevelPlaylist(n,i,c,"audioTrack"===o?"audio":"subtitleTrack"===o?"subtitle":"main");f.tload=t.tload,"manifest"===o&&u.trigger(d.default.MANIFEST_LOADED,{levels:[{url:i,details:f}],audioTracks:[],url:i,stats:t}),t.tparsed=performance.now(),f.targetduration?l?u.trigger(d.default.LEVEL_LOADED,{details:f,level:s||0,id:a||0,stats:t}):"audioTrack"===o?u.trigger(d.default.AUDIO_TRACK_LOADED,{details:f,id:a,stats:t}):"subtitleTrack"===o&&u.trigger(d.default.SUBTITLE_TRACK_LOADED,{details:f,id:a,stats:t}):u.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"invalid targetduration"})}else{var h=this.parseMasterPlaylist(n,i);if(h.length){var g=this.parseMasterPlaylistMedia(n,i,"AUDIO"),y=this.parseMasterPlaylistMedia(n,i,"SUBTITLES");if(g.length){var m=!1;g.forEach(function(e){e.url||(m=!0)}),m===!1&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(v.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main"}))}u.trigger(d.default.MANIFEST_LOADED,{levels:h,audioTracks:g,subtitles:y,url:i,stats:t})}else u.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no level found in manifest"})}else u.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:p.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:i,reason:"no EXTM3U delimiter"})}},{key:"loaderror",value:function(e,t){var r,n,i=t.loader;switch(t.type){case"manifest":r=p.ErrorDetails.MANIFEST_LOAD_ERROR,n=!0;break;case"level":r=p.ErrorDetails.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":r=p.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,n=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:i.url,loader:i,response:e,context:t})}},{key:"loadtimeout",value:function(e,t){var r,n,i=t.loader;switch(t.type){case"manifest":r=p.ErrorDetails.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":r=p.ErrorDetails.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":r=p.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}i&&(i.abort(),this.loaders[t.type]=void 0),this.hls.trigger(d.default.ERROR,{type:p.ErrorTypes.NETWORK_ERROR,details:r,fatal:n,url:i.url,loader:i,context:t})}}]),t}(h.default);r.default=k},{2:2,33:33,34:34,35:35,47:47,53:53}],44:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=Math.pow(2,32)-1,a=function(){function e(){n(this,e)}return i(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),u=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,u,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))}},{key:"box",value:function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;i--;)n+=r[i].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<o;i++)t.set(r[i],n),n+=r[i].byteLength;return t}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,r){r*=t;var n=Math.floor(r/(o+1)),i=Math.floor(r%(o+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))}},{key:"moov",value:function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))}},{key:"mvhd",value:function(t,r){r*=t;var n=Math.floor(r/(o+1)),i=Math.floor(r%(o+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,i>>24,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)}},{key:"sdtp",value:function(t){var r,n,i=t.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,o)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var r,n,i,o=[],a=[];for(r=0;r<t.sps.length;r++)n=t.sps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)n=t.pps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),u=t.width,l=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,u>>8&255,255&u,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var r=t.id,n=t.duration*t.timescale,i=t.width,a=t.height,s=Math.floor(n/(o+1)),u=Math.floor(n%(o+1));
return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,u>>24,u>>16&255,u>>8&255,255&u,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,255&i,0,0,a>>8&255,255&a,0,0]))}},{key:"traf",value:function(t,r){var n=e.sdtp(t),i=t.id,a=Math.floor(r/(o+1)),s=Math.floor(r%(o+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,n.length+16+20+8+16+8+8),n)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,r){var n,i,o,a,s,u,l=t.samples||[],c=l.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=l[n],o=i.duration,a=i.size,s=i.flags,u=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*n);return e.box(e.types.trun,f)}},{key:"initSegment",value:function(t){e.types||e.init();var r,n=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+n.byteLength),r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r}}]),e}();r.default=a},{}],45:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(36),s=n(a),u=e(35),l=n(u),c=e(53),d=e(44),f=n(d),h=e(33),p=1e4,g=function(){function e(t,r,n,o){i(this,e),this.observer=t,this.config=r,this.typeSupported=n;var a=navigator.userAgent;this.isSafari=o&&o.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}return o(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(e){this._initPTS=this._initDTS=e}},{key:"resetInitSegment",value:function(){this.ISGenerated=!1}},{key:"remux",value:function(e,t,r,n,i,o,a){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated)if(e.samples.length){e.timescale||(c.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var s=this.remuxAudio(e,i,o,a);if(t.samples.length){var u=void 0;s&&(u=s.endPTS-s.startPTS),t.timescale||(c.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,i,o,u,a)}}else{var d=void 0;t.samples.length&&(d=this.remuxVideo(t,i,o,a)),d&&e.codec&&this.remuxEmptyAudio(e,i,o,d)}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(l.default.FRAG_PARSED)}},{key:"generateIS",value:function(e,t,r){var n,i,o=this.observer,a=e.samples,s=t.samples,u=this.typeSupported,d="audio/mp4",p={},g={tracks:p},y=void 0===this._initPTS;if(y&&(n=i=1/0),e.config&&a.length&&(e.timescale=e.samplerate,c.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(u.mpeg?(d="audio/mpeg",e.codec=""):u.mp3&&(e.codec="mp3")),p.audio={container:d,codec:e.codec,initSegment:!e.isAAC&&u.mpeg?new Uint8Array:f.default.initSegment([e]),metadata:{channelCount:e.channelCount}},y&&(n=i=a[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&s.length){var v=t.inputTimeScale;t.timescale=v,p.video={container:"video/mp4",codec:t.codec,initSegment:f.default.initSegment([t]),metadata:{width:t.width,height:t.height}},y&&(n=Math.min(n,s[0].pts-v*r),i=Math.min(i,s[0].dts-v*r),this.observer.trigger(l.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(p).length?(o.trigger(l.default.FRAG_PARSING_INIT_SEGMENT,g),this.ISGenerated=!0,y&&(this._initPTS=n,this._initDTS=i)):o.trigger(l.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})}},{key:"remuxVideo",value:function(e,t,r,n,i){var o,a,s,u,d,p,g,y,v=8,m=e.timescale,_=e.samples,b=[],T=_.length,E=this._PTSNormalize,w=this._initDTS,k=this.nextAvcDts,S=this.isSafari;S&&(r|=_.length&&k&&(i&&Math.abs(t-k/m)<.1||Math.abs(_[0].pts-k-w)<m/5)),r||(k=t*m),_.forEach(function(e){e.pts=E(e.pts-w,k),e.dts=E(e.dts-w,k)}),_.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r?r:n?n:e.id-t.id});var A=_.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(A<0){c.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(A/90)+" ms to overcome this issue");for(var C=0;C<_.length;C++)_[C].dts+=A}var P=_[0];d=Math.max(P.dts,0),u=Math.max(P.pts,0);var O=Math.round((d-k)/90);r&&O&&(O>1?c.logger.log("AVC:"+O+" ms hole between fragments detected,filling it"):O<-1&&c.logger.log("AVC:"+-O+" ms overlapping between fragments detected"),d=k,_[0].dts=d,u=Math.max(u-O,k),_[0].pts=u,c.logger.log("Video/PTS/DTS adjusted: "+Math.round(u/90)+"/"+Math.round(d/90)+",delta:"+O+" ms")),p=d,P=_[_.length-1],y=Math.max(P.dts,0),g=Math.max(P.pts,0,y),S&&(o=Math.round((y-d)/(_.length-1)));for(var R=0,x=0,j=0;j<T;j++){for(var I=_[j],L=I.units,D=L.length,M=0,N=0;N<D;N++)M+=L[N].data.length;x+=M,R+=D,I.length=M,S?I.dts=d+j*o:I.dts=Math.max(I.dts,d),I.pts=Math.max(I.pts,I.dts)}var F=x+4*R+8;try{a=new Uint8Array(F)}catch(e){return void this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var B=new DataView(a.buffer);B.setUint32(0,F),a.set(f.default.types.mdat,4);for(var U=0;U<T;U++){for(var G=_[U],V=G.units,H=0,q=void 0,z=0,W=V.length;z<W;z++){var K=V[z],X=K.data,Y=K.data.byteLength;B.setUint32(v,Y),v+=4,a.set(X,v),v+=Y,H+=4+Y}if(S)q=Math.max(0,o*Math.round((G.pts-G.dts)/o));else{if(U<T-1)o=_[U+1].dts-G.dts;else{var J=this.config,$=G.dts-_[U>0?U-1:U].dts;if(J.stretchShortVideoTrack){var Q=J.maxBufferHole,Z=J.maxSeekHole,ee=Math.floor(Math.min(Q,Z)*m),te=(n?u+n*m:this.nextAudioPts)-G.pts;te>ee?(o=te-$,o<0&&(o=$),c.logger.log("It is approximately "+te/90+" ms to the next segment; using duration "+o/90+" ms for the last video frame.")):o=$}else o=$}q=Math.round(G.pts-G.dts)}b.push({size:H,duration:o,cts:q,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=y+o;var re=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=b[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=b,s=f.default.moof(e.sequenceNumber++,d,e),e.samples=[];var ie={data1:s,data2:a,startPTS:u/m,endPTS:(g+o)/m,startDTS:d/m,endDTS:this.nextAvcDts/m,type:"video",nb:b.length,dropped:re};return this.observer.trigger(l.default.FRAG_PARSING_DATA,ie),ie}},{key:"remuxAudio",value:function(e,t,r,n){var i,o,a,u,d,g,y,v=e.inputTimeScale,m=e.timescale,_=v/m,b=e.isAAC?1024:1152,T=b*_,E=this._PTSNormalize,w=this._initDTS,k=!e.isAAC&&this.typeSupported.mpeg,S=e.samples,A=[],C=this.nextAudioPts;if(r|=S.length&&C&&(n&&Math.abs(t-C/v)<.1||Math.abs(S[0].pts-C-w)<20*T),r||(C=t*v),S.forEach(function(e){e.pts=e.dts=E(e.pts-w,C)}),S.sort(function(e,t){return e.pts-t.pts}),n&&e.isAAC)for(var P=0,O=C;P<S.length;){var R,x=S[P],j=x.pts;R=j-O;var I=Math.abs(1e3*R/v);if(R<=-T)c.logger.warn("Dropping 1 audio frame @ "+(O/v).toFixed(3)+"s due to "+I+" ms overlap."),S.splice(P,1),e.len-=x.unit.length;else if(R>=T&&I<p&&O){var L=Math.round(R/T);c.logger.warn("Injecting "+L+" audio frame @ "+(O/v).toFixed(3)+"s due to "+Math.round(1e3*R/v)+" ms gap.");for(var D=0;D<L;D++){var M=Math.max(O,0);a=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),a||(c.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),a=x.unit.subarray()),S.splice(P,0,{unit:a,pts:M,dts:M}),e.len+=a.length,O+=T,P++}x.pts=x.dts=O,O+=T,P++}else Math.abs(R)>.1*T,x.pts=x.dts=O,O+=T,P++}for(var N=0,F=S.length;N<F;N++){var B=S[N],U=B.unit,G=B.pts;if(void 0!==y)o.duration=Math.round((G-y)/_);else{var V=Math.round(1e3*(G-C)/v),H=0;if(r&&e.isAAC&&V){if(V>0&&V<p)H=Math.round((G-C)/T),c.logger.log(V+" ms hole between AAC samples detected,filling it"),H>0&&(a=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),a||(a=U.subarray()),e.len+=H*a.length);else if(V<-12){c.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(C/v).toFixed(3)+"s/"+(G/v).toFixed(3)+"s/"+-V+"ms"),e.len-=U.byteLength;continue}G=C}if(g=Math.max(0,G),!(e.len>0))return;var q=k?e.len:e.len+8;i=k?0:8;try{u=new Uint8Array(q)}catch(e){return void this.observer.trigger(l.default.ERROR,{type:h.ErrorTypes.MUX_ERROR,details:h.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:q,reason:"fail allocating audio mdat "+q})}if(!k){var z=new DataView(u.buffer);z.setUint32(0,q),u.set(f.default.types.mdat,4)}for(var W=0;W<H;W++)a=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),a||(c.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),a=U.subarray()),u.set(a,i),i+=a.byteLength,o={size:a.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(o)}u.set(U,i);var K=U.byteLength;i+=K,o={size:K,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(o),y=G}var X=0,Y=A.length;if(Y>=2&&(X=A[Y-2].duration,o.duration=X),Y){this.nextAudioPts=C=y+_*X,e.len=0,e.samples=A,d=k?new Uint8Array:f.default.moof(e.sequenceNumber++,g/_,e),e.samples=[];var J=g/v,$=C/v,Q={data1:d,data2:u,startPTS:J,endPTS:$,startDTS:J,endDTS:$,type:"audio",nb:Y};return this.observer.trigger(l.default.FRAG_PARSING_DATA,Q),Q}return null}},{key:"remuxEmptyAudio",value:function(e,t,r,n){var i=e.inputTimeScale,o=e.samplerate?e.samplerate:i,a=i/o,u=this.nextAudioPts,l=(void 0!==u?u:n.startDTS*i)+this._initDTS,d=n.endDTS*i+this._initDTS,f=1024,h=a*f,p=Math.ceil((d-l)/h),g=s.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(c.logger.warn("remux empty Audio"),!g)return void c.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var y=[],v=0;v<p;v++){var m=l+v*h;y.push({unit:g,pts:m,dts:m}),e.len+=g.length}e.samples=y,this.remuxAudio(e,t,r)}},{key:"remuxID3",value:function(e,t){var r,n=e.samples.length,i=e.inputTimeScale,o=this._initPTS,a=this._initDTS;if(n){for(var s=0;s<n;s++)r=e.samples[s],r.pts=(r.pts-o)/i,r.dts=(r.dts-a)/i;this.observer.trigger(l.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t}},{key:"remuxText",value:function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var r,n=e.samples.length,i=e.inputTimeScale,o=this._initPTS;if(n){for(var a=0;a<n;a++)r=e.samples[a],r.pts=(r.pts-o)/i;this.observer.trigger(l.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t}},{key:"_PTSNormalize",value:function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e}}]),e}();r.default=g},{33:33,35:35,36:36,44:44,53:53}],46:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(35),s=n(a),u=function(){function e(t){i(this,e),this.observer=t}return o(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",value:function(e,t,r,n,i,o,a,u){var l=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),l.trigger(s.default.FRAG_PARSING_DATA,{data1:u,startPTS:i,startDTS:i,type:c,nb:1,dropped:0}),l.trigger(s.default.FRAG_PARSED)}}]),e}();r.default=u},{35:35}],47:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=/^(\d+)x(\d+)$/,a=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,s=function(){function e(t){n(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])}return i(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",value:function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null}},{key:"hexadecimalIntegerAsNumber",value:function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"decimalFloatingPoint",value:function(e){return parseFloat(this[e])}},{key:"enumeratedString",value:function(e){return this[e]}},{key:"decimalResolution",value:function(e){var t=o.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}}],[{key:"parseAttrList",value:function(e){var t,r={};for(a.lastIndex=0;null!==(t=a.exec(e));){var n=t[2],i='"';0===n.indexOf(i)&&n.lastIndexOf(i)===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r}}]),e}();r.default=s},{}],48:[function(e,t,r){"use strict";var n={search:function(e,t){for(var r=0,n=e.length-1,i=null,o=null;r<=n;){i=(r+n)/2|0,o=e[i];var a=t(o);if(a>0)r=i+1;else{if(!(a<0))return o;n=i-1}}return null}};t.exports=n},{}],49:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},a=function(e){var t=e;return o.hasOwnProperty(e)&&(t=o[e]),String.fromCharCode(t)},s=15,u=100,l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},f={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],p={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var r=this.verboseFilter[e];this.verboseLevel>=r&&console.log(this.time+" ["+e+"] "+t)}},g=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},y=function(){function e(t,r,i,o,a){n(this,e),this.foreground=t||"white",this.underline=r||!1,this.italics=i||!1,this.background=o||"black",this.flash=a||!1}return i(e,[{key:"reset",value:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}},{key:"setStyles",value:function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}}},{key:"isDefault",value:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}},{key:"equals",value:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}},{key:"copy",value:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}},{key:"toString",value:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}]),e}(),v=function(){function e(t,r,i,o,a,s){n(this,e),this.uchar=t||" ",this.penState=new y(r,i,o,a,s)}return i(e,[{key:"reset",value:function(){this.uchar=" ",this.penState.reset()}},{key:"setChar",value:function(e,t){this.uchar=e,this.penState.copy(t)}},{key:"setPenState",value:function(e){this.penState.copy(e)}},{key:"equals",value:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}},{key:"copy",value:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)}},{key:"isEmpty",value:function(){return" "===this.uchar&&this.penState.isDefault()}}]),e}(),m=function(){function e(){n(this,e),this.chars=[];for(var t=0;t<u;t++)this.chars.push(new v);this.pos=0,this.currPenState=new y}return i(e,[{key:"equals",value:function(e){for(var t=!0,r=0;r<u;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<u;t++)this.chars[t].copy(e.chars[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<u;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}},{key:"setCursor",value:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(p.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>u&&(p.log("ERROR","Too large cursor position "+this.pos),this.pos=u)}},{key:"moveCursor",value:function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}},{key:"backSpace",value:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}},{key:"insertChar",value:function(e){e>=144&&this.backSpace();var t=a(e);return this.pos>=u?void p.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))}},{key:"clearFromPos",value:function(e){var t;for(t=e;t<u;t++)this.chars[t].reset()}},{key:"clear",value:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}},{key:"clearToEndOfRow",value:function(){this.clearFromPos(this.pos)}},{key:"getTextString",value:function(){for(var e=[],t=!0,r=0;r<u;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")}},{key:"setPenStyles",value:function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)}}]),e}(),_=function(){function e(){n(this,e),this.rows=[];for(var t=0;t<s;t++)this.rows.push(new m);this.currRow=s-1,this.nrRollUpRows=null,this.reset()}return i(e,[{key:"reset",value:function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=s-1}},{key:"equals",value:function(e){for(var t=!0,r=0;r<s;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}},{key:"copy",value:function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])}},{key:"isEmpty",value:function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}},{key:"backSpace",value:function(){var e=this.rows[this.currRow];e.backSpace()}},{key:"clearToEndOfRow",value:function(){var e=this.rows[this.currRow];e.clearToEndOfRow()}},{key:"insertChar",value:function(e){var t=this.rows[this.currRow];t.insertChar(e)}},{key:"setPen",value:function(e){var t=this.rows[this.currRow];t.setPenStyles(e)}},{key:"moveCursor",value:function(e){var t=this.rows[this.currRow];t.moveCursor(e)}},{key:"setCursor",value:function(e){p.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)}},{key:"setPAC",value:function(e){p.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<s;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var o=i.rows[n].cueStartTime;if(o&&o<p.time)for(var a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(i.rows[n+a])}}this.currRow=t;var u=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,c=Math.max(l-1,0);u.setCursor(e.indent),e.color=u.chars[c].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)}},{key:"setBkgData",value:function(e){p.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}},{key:"setRollUpRows",value:function(e){this.nrRollUpRows=e}},{key:"rollUp",value:function(){if(null===this.nrRollUpRows)return void p.log("DEBUG","roll_up but nrRollUpRows not set yet");p.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),p.log("INFO","Rolling up")}},{key:"getDisplayText",value:function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<s;i++){var o=this.rows[i].getTextString();o&&(n=i+1,e?t.push("Row "+n+": '"+o+"'"):t.push(o.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r}},{key:"getTextAndFormat",value:function(){return this.rows}}]),e}(),b=function(){function e(t,r){n(this,e),this.chNr=t,this.outputFilter=r,this.mode=null,this.verbose=0,this.displayedMemory=new _,this.nonDisplayedMemory=new _,this.lastOutputScreen=new _,this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return i(e,[{key:"reset",value:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[s-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null}},{key:"getHandler",value:function(){return this.outputFilter}},{key:"setHandler",value:function(e){this.outputFilter=e}},{key:"setPAC",value:function(e){this.writeScreen.setPAC(e)}},{key:"setBkgData",value:function(e){this.writeScreen.setBkgData(e)}},{key:"setMode",value:function(e){e!==this.mode&&(this.mode=e,p.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}},{key:"insertChars",value:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";p.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(p.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}},{key:"ccRCL",value:function(){p.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}},{key:"ccBS",value:function(){p.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}},{key:"ccAOF",value:function(){}},{key:"ccAON",value:function(){}},{key:"ccDER",value:function(){p.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}},{key:"ccRU",value:function(e){p.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}},{key:"ccFON",value:function(){p.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})}},{key:"ccRDC",value:function(){p.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}},{key:"ccTR",value:function(){p.log("INFO","TR"),this.setMode("MODE_TEXT")}},{key:"ccRTD",value:function(){p.log("INFO","RTD"),this.setMode("MODE_TEXT")}},{key:"ccEDM",value:function(){p.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()}},{key:"ccCR",value:function(){p.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()}},{key:"ccENM",value:function(){p.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}},{key:"ccEOC",value:function(){if(p.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,p.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()}},{key:"ccTO",value:function(e){p.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}},{key:"ccMIDROW",value:function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}p.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}},{key:"outputDataUpdate",value:function(){var e=p.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))}},{key:"cueSplitAtTime",value:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}]),e}(),T=function(){function e(t,r,i){n(this,e),this.field=t||1,this.outputs=[r,i],this.channels=[new b(1,r),new b(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return i(e,[{key:"getHandler",value:function(e){return this.channels[e].getHandler()}},{key:"setHandler",value:function(e,t){this.channels[e].setHandler(t)}},{key:"addData",value:function(e,t){var r,n,i,o=!1;this.lastTime=e,p.setTime(e);for(var a=0;a<t.length;a+=2)if(n=127&t[a],i=127&t[a+1],0!==n||0!==i){if(p.log("DATA","["+g([t[a],t[a+1]])+"] -> ("+g([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(o=this.parseChars(n,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else p.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,p.log("WARNING","Couldn't parse cleaned data "+g([n,i])+" orig: "+g([t[a],t[a+1]])))}else this.dataCounters.padding+=2}},{key:"parseCmd",value:function(e,t){var r=null,n=(20===e||28===e)&&32<=t&&t<=47,i=(23===e||31===e)&&33<=t&&t<=35;if(!n&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,p.log("DEBUG","Repeated command ("+g([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var o=this.channels[r-1];return 20===e||28===e?32===t?o.ccRCL():33===t?o.ccBS():34===t?o.ccAOF():35===t?o.ccAON():36===t?o.ccDER():37===t?o.ccRU(2):38===t?o.ccRU(3):39===t?o.ccRU(4):40===t?o.ccFON():41===t?o.ccRDC():42===t?o.ccTR():43===t?o.ccRTD():44===t?o.ccEDM():45===t?o.ccCR():46===t?o.ccENM():47===t&&o.ccEOC():o.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"parseMidrow",value:function(e,t){var r=null;if((17===e||25===e)&&32<=t&&t<=47){if(r=17===e?1:2,r!==this.currChNr)return p.log("ERROR","Mismatch channel in midrow parsing"),!1;var n=this.channels[r-1];return n.ccMIDROW(t),p.log("DEBUG","MIDROW ("+g([e,t])+")"),!0}return!1}},{key:"parsePAC",value:function(e,t){var r=null,n=null,i=(17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127,o=(16===e||24===e)&&64<=t&&t<=95;if(!i&&!o)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=64<=t&&t<=95?1===r?l[e]:d[e]:1===r?c[e]:f[e];var a=this.interpretPAC(n,t),s=this.channels[r-1];return s.setPAC(a),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0}},{key:"interpretPAC",value:function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1===(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n}},{key:"parseChars",value:function(e,t){var r=null,n=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),17<=i&&i<=19){var o=t;o=17===i?t+80:18===i?t+112:t+144,p.log("INFO","Special char '"+a(o)+"' in channel "+r),n=[o]}else 32<=e&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var s=g(n);p.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n}},{key:"parseBackgroundAttributes",value:function(e,t){var r,n,i,o,a=(16===e||24===e)&&32<=t&&t<=47,s=(23===e||31===e)&&45<=t&&t<=47;return!(!a&&!s)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=h[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,o=this.channels[i-1],o.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)}},{key:"reset",value:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null}},{key:"cueSplitAtTime",value:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}}]),e}();r.default=T},{}],50:[function(e,t,r){"use strict";var n=e(56),i={newCue:function(e,t,r,i){for(var o,a,s,u,l,c=window.VTTCue||window.TextTrackCue,d=0;d<i.rows.length;d++)if(o=i.rows[d],s=!0,u=0,l="",!o.isEmpty()){for(var f=0;f<o.chars.length;f++)o.chars[f].uchar.match(/\s/)&&s?u++:(l+=o.chars[f].uchar,s=!1);o.cueStartTime=t,t===r&&(r+=1e-4),a=new c(t,r,(0,n.fixLineBreaks)(l.trim())),u>=16?u--:u++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=d>7?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,100*(u/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}};t.exports=i},{56:56}],51:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(52),s=n(a),u=function(){function e(t,r,n,o){i(this,e),this.hls=t,this.defaultEstimate_=o,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new s.default(r),this.fast_=new s.default(n)}return o(e,[{key:"sample",value:function(e,t){e=Math.max(e,this.minDelayMs_);var r=8e3*t/e,n=e/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)}},{key:"canEstimate",value:function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_}},{key:"getEstimate",value:function(){
return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}},{key:"destroy",value:function(){}}]),e}();r.default=u},{52:52}],52:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t){n(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return i(e,[{key:"sample",value:function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",value:function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_}}]),e}();r.default=o},{}],53:[function(e,t,r){"use strict";function n(){}function i(e,t){return t="["+e+"] > "+t}function o(e){var t=self.console[e];return t?function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];n[0]&&(n[0]=i(e,n[0])),t.apply(self.console,n)}:n}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach(function(t){l[t]=e[t]?e[t].bind(e):o(t)})}Object.defineProperty(r,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u={trace:n,debug:n,log:n,warn:n,info:n,error:n},l=u;r.enableLogs=function(e){if(e===!0||"object"===("undefined"==typeof e?"undefined":s(e))){a(e,"debug","log","info","warn","error");try{l.log()}catch(e){l=u}}else l=u},r.logger=l},{}],54:[function(e,t,r){"use strict";var n={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}};t.exports=n},{}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function e(e){if("string"!=typeof e)return!1;var t=o[e.toLowerCase()];return!!t&&e.toLowerCase()}function t(e){if("string"!=typeof e)return!1;var t=a[e.toLowerCase()];return!!t&&e.toLowerCase()}function r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function n(n,o,a){var s=this,u=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),l={};u?s=document.createElement("custom"):l.enumerable=!0,s.hasBeenReset=!1;var c="",d=!1,f=n,h=o,p=a,g=null,y="",v=!0,m="auto",_="start",b=50,T="middle",E=50,w="middle";if(Object.defineProperty(s,"id",r({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(s,"pauseOnExit",r({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(s,"startTime",r({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},l,{get:function(){return y},set:function(t){var r=e(t);if(r===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},l,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},l,{get:function(){return m},set:function(e){if("number"!=typeof e&&e!==i)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},l,{get:function(){return _},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");_=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},l,{get:function(){return T},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");T=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},l,{get:function(){return w},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");w=r,this.hasBeenReset=!0}})),s.displayState=void 0,u)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",o={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text)},n}()},{}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new f,this.regionList=[]}function o(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function a(){this.values=Object.create(null)}function s(e,t,r,n){var i=n?e.split(n):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);if(2===a.length){var s=a[0],u=a[1];t(s,u)}}}function u(e,t,r){function n(){var t=o(e);if(null===t)throw new Error("Malformed timestamp: "+l);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(e,t){var n=new a;s(e,function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];n.integer(e,a),n.percent(e,a)&&n.set("snapToLines",!1),n.alt(e,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start",p,"end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start",p,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",p,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&h.line===-1&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",p);var o=n.get("position","auto");"auto"===o&&50===h.position&&(o="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=o}function u(){e=e.replace(/^\s+/,"")}var l=e;if(u(),t.startTime=n(),u(),"-->"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+l);e=e.substr(3),u(),t.endTime=n(),u(),i(e,t)}function l(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(r,"__esModule",{value:!0}),r.fixLineBreaks=void 0;var c=e(55),d=n(c),f=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var r;return!!((r=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var h=new d.default(0,0,0),p="middle"===h.align?"middle":"center";i.prototype={parse:function(e){function t(){var e=n.buffer,t=0;for(e=l(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}function r(e){s(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/)}var n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;i=t();var o=i.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var a=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(a?a=!1:i=t(),n.state){case"HEADER":/:/.test(i)?r(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new d.default(0,0,""),n.state="CUE",i.indexOf("-->")===-1){n.cue.id=i;continue}case"CUE":try{u(i,n.cue,n.regionList)}catch(e){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var c=i.indexOf("-->")!==-1;if(!i||c&&(a=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID");continue}}}catch(e){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}},r.fixLineBreaks=l,r.default=i},{55:55}],57:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=e(56),o=n(i),a=function(e,t,r){return e.substr(r||0,t.length)===t},s=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),i=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(r)||isNaN(n)||isNaN(i)?-1:(t+=1e3*r,t+=6e4*n,t+=36e5*i)},u=function e(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()},l=function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC];e.presentationOffset=r},c={parse:function(e,t,r,n,i,c){var d=/\r\n|\n\r|\n|\r/g,f=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(d,"\n").split("\n"),h="00:00.000",p=0,g=0,y=0,v=[],m=void 0,_=!0,b=new o.default;b.oncue=function(e){var t=r[n],i=r.ccOffset;t&&t.new&&(void 0!==g?i=r.ccOffset=t.start:l(r,n,y)),y&&(i=y+r.ccOffset-r.presentationOffset),e.startTime+=i-g,e.endTime+=i-g,e.id=u(e.startTime)+u(e.endTime)+u(e.text),e.text=decodeURIComponent(escape(e.text)),e.endTime>0&&v.push(e)},b.onparsingerror=function(e){m=e},b.onflush=function(){return m&&c?void c(m):void i(v)},f.forEach(function(e){if(_){if(a(e,"X-TIMESTAMP-MAP=")){_=!1,e.substr(16).split(",").forEach(function(e){a(e,"LOCAL:")?h=e.substr(6):a(e,"MPEGTS:")&&(p=parseInt(e.substr(7)))});try{t=t<0?t+8589934592:t,p-=t,g=s(h)/1e3,y=p/9e4,g===-1&&(m=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){m=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(_=!1)}b.parse(e+"\n")}),b.flush()}};t.exports=c},{56:56}],58:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(53),a=function(){function e(t){n(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return i(e,[{key:"destroy",value:function(){this.abort(),this.loader=null}},{key:"abort",value:function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null}},{key:"load",value:function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()}},{key:"loadInternal",value:function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}},{key:"readystatechange",value:function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,i=this.context,a=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(performance.now(),n.trequest)),4===r){var s=t.status;if(s>=200&&s<300){n.tload=Math.max(n.tfirst,performance.now());var u=void 0,l=void 0;"arraybuffer"===i.responseType?(u=t.response,l=u.byteLength):(u=t.responseText,l=u.length),n.loaded=n.total=l;var c={url:t.responseURL,data:u};this.callbacks.onSuccess(c,n,i)}else n.retry>=a.maxRetry||s>=400&&s<499?(o.logger.error(s+" while loading "+i.url),this.callbacks.onError({code:s,text:t.statusText},i)):(o.logger.warn(s+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)}},{key:"loadtimeout",value:function(){o.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context)}},{key:"loadprogress",value:function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total);var r=this.callbacks.onProgress;r&&r(t,this.context,null)}}]),e}();r.default=a},{53:53}]},{},[40])(40)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,r){function n(e){var t=i.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=n;var i=Object.prototype.toString},{}],8:[function(e,t,r){var n=e("trim"),i=e("for-each"),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return i(n(e).split("\n"),function(e){var r=e.indexOf(":"),i=n(e.slice(0,r)).toLowerCase(),a=n(e.slice(r+1));"undefined"==typeof t[i]?t[i]=a:o(t[i])?t[i].push(a):t[i]=[t[i],a]}),t}},{"for-each":3,trim:10}],9:[function(e,t,r){function n(e,t){var r,n=null;try{r=JSON.parse(e,t)}catch(e){n=e}return[n,r]}t.exports=n},{}],10:[function(e,t,r){function n(e){return e.replace(/^\s*|\s*$/g,"")}r=t.exports=n,r.left=function(e){return e.replace(/^\s*/,"")},r.right=function(e){return e.replace(/\s*$/,"")}},{}],11:[function(e,t,r){function n(e){return e.replace(/\n\r?\s*/g,"")}t.exports=function(e){for(var t="",r=0;r<arguments.length;r++)t+=n(e[r])+(arguments[r+1]||"");return t}},{}],12:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./button.js"),u=n(s),l=e("./component.js"),c=n(l),d=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r,n));return a.mouseused_=!1,a.on("mousedown",a.handleMouseDown),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-play-button"},t.prototype.handleClick=function(e){var t=this.player_.play();if(!(this.mouseused_&&e.clientX&&e.clientY)){var r=this.player_.getChild("controlBar"),n=r&&r.getChild("playToggle");if(!n)return void this.player_.focus();var i=function(){return n.focus()};if(t&&t.then){var o=function(){};t.then(i,o)}else this.setTimeout(i,1)}},t.prototype.handleKeyPress=function(t){this.mouseused_=!1,e.prototype.handleKeyPress.call(this,t)},t.prototype.handleMouseDown=function(e){this.mouseused_=!0},t}(u.default);d.prototype.controlText_="Play Video",c.default.registerComponent("BigPlayButton",d),r.default=d},{"./button.js":13,"./component.js":16}],13:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./clickable-component.js"),u=n(s),l=e("./component"),c=n(l),d=e("./utils/log.js"),f=n(d),h=e("./utils/obj"),p=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"button",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=(0,h.assign)({className:this.buildCSSClass()},t),"button"!==e&&(f.default.warn("Creating a Button with an HTML element of "+e+" is deprecated; use ClickableComponent instead."),t=(0,h.assign)({tabIndex:0},t),r=(0,h.assign)({role:"button"},r)),r=(0,h.assign)({type:"button","aria-live":"polite"},r);var n=c.default.prototype.createEl.call(this,e,t,r);return this.createControlTextEl(n),n},t.prototype.addChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.constructor.name;return f.default.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead."),c.default.prototype.addChild.call(this,e,t)},t.prototype.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.prototype.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.prototype.handleKeyPress=function(t){32!==t.which&&13!==t.which&&e.prototype.handleKeyPress.call(this,t)},t}(u.default);c.default.registerComponent("Button",p),r.default=p},{"./clickable-component.js":14,"./component":16,"./utils/log.js":97,"./utils/obj":99}],14:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./component"),l=i(u),c=e("./utils/dom.js"),d=n(c),f=e("./utils/events.js"),h=n(f),p=e("./utils/fn.js"),g=n(p),y=e("./utils/log.js"),v=i(y),m=e("global/document"),_=i(m),b=e("./utils/obj"),T=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.emitTapEvents(),i.enable(),i}return s(t,e),t.prototype.createEl=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=(0,b.assign)({className:this.buildCSSClass(),tabIndex:0},r),"button"===t&&v.default.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=(0,b.assign)({role:"button","aria-live":"polite"},n),this.tabIndex_=r.tabIndex;var i=e.prototype.createEl.call(this,t,r,n);return this.createControlTextEl(i),i},t.prototype.createControlTextEl=function(e){return this.controlTextEl_=d.createEl("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.prototype.controlText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var r=this.localize(e);return this.controlText_=e,this.controlTextEl_.innerHTML=r,this.nonIconControl||t.setAttribute("title",r),this},t.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},t.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this},t.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this},t.prototype.handleClick=function(e){},t.prototype.handleFocus=function(e){h.on(_.default,"keydown",g.bind(this,this.handleKeyPress))},t.prototype.handleKeyPress=function(t){32===t.which||13===t.which?(t.preventDefault(),this.handleClick(t)):e.prototype.handleKeyPress&&e.prototype.handleKeyPress.call(this,t)},t.prototype.handleBlur=function(e){h.off(_.default,"keydown",g.bind(this,this.handleKeyPress))},t}(l.default);l.default.registerComponent("ClickableComponent",T),r.default=T},{"./component":16,"./utils/dom.js":92,"./utils/events.js":93,"./utils/fn.js":94,"./utils/log.js":97,"./utils/obj":99,"global/document":4}],15:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./button"),u=n(s),l=e("./component"),c=n(l),d=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r,n));return a.controlText(n&&n.controlText||a.localize("Close")),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},t}(u.default);c.default.registerComponent("CloseButton",d),r.default=d},{"./button":13,"./component":16}],16:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=e("global/window"),s=i(a),u=e("./utils/dom.js"),l=n(u),c=e("./utils/fn.js"),d=n(c),f=e("./utils/guid.js"),h=n(f),p=e("./utils/events.js"),g=n(p),y=e("./utils/log.js"),v=i(y),m=e("./utils/to-title-case.js"),_=i(m),b=e("./utils/merge-options.js"),T=i(b),E=function(){function e(t,r,n){if(o(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=(0,T.default)({},this.options_),r=this.options_=(0,T.default)(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+h.newGUID()}this.name_=r.name||null,r.el?this.el_=r.el:r.createEl!==!1&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},this.childNameIndex_={},r.initChildren!==!1&&this.initChildren(),this.ready(n),r.reportTouchActivity!==!1&&this.enableTouchActivity()}return e.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),l.removeElData(this.el_),this.el_=null},e.prototype.player=function(){return this.player_},e.prototype.options=function(e){return v.default.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e?(this.options_=(0,T.default)(this.options_,e),this.options_):this.options_},e.prototype.el=function(){return this.el_},e.prototype.createEl=function(e,t,r){return l.createEl(e,t,r)},e.prototype.localize=function(e){var t=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages();if(!t||!r)return e;var n=r[t];if(n&&n[e])return n[e];var i=t.split("-")[0],o=r[i];return o&&o[e]?o[e]:e},e.prototype.contentEl=function(){return this.contentEl_||this.el_},e.prototype.id=function(){return this.id_},e.prototype.name=function(){return this.name_},e.prototype.children=function(){return this.children_},e.prototype.getChildById=function(e){return this.childIndex_[e]},e.prototype.getChild=function(e){if(e)return e=(0,_.default)(e),this.childNameIndex_[e]},e.prototype.addChild=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length,i=void 0,o=void 0;if("string"==typeof t){o=(0,_.default)(t),r||(r={}),r===!0&&(v.default.warn("Initializing a child component with `true` is deprecated.Children should be defined in an array when possible, but if necessary use an object instead of `true`."),r={});var a=r.componentClass||o;r.name=o;var s=e.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,r)}else i=t;if(this.children_.splice(n,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),o=o||i.name&&(0,_.default)(i.name()),o&&(this.childNameIndex_[o]=i),"function"==typeof i.el&&i.el()){var u=this.contentEl().children,l=u[n]||null;this.contentEl().insertBefore(i.el(),l)}return i},e.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){t=!0,this.children_.splice(r,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var n=e.el();n&&n.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.prototype.initChildren=function(){var t=this,r=this.options_.children;if(r){var n=this.options_,i=function(e){var r=e.name,i=e.opts;if(void 0!==n[r]&&(i=n[r]),i!==!1){i===!0&&(i={}),i.playerOptions=t.options_.playerOptions;var o=t.addChild(r,i);o&&(t[r]=o)}},o=void 0,a=e.getComponent("Tech");o=Array.isArray(r)?r:Object.keys(r),o.concat(Object.keys(this.options_).filter(function(e){return!o.some(function(t){return"string"==typeof t?e===t:e===t.name})})).map(function(e){var n=void 0,i=void 0;return"string"==typeof e?(n=e,i=r[n]||t.options_[n]||{}):(n=e.name,i=e),{name:n,opts:i}}).filter(function(t){var r=e.getComponent(t.opts.componentClass||(0,_.default)(t.name));return r&&!a.isTech(r)}).forEach(i)}},e.prototype.buildCSSClass=function(){return""},e.prototype.on=function(e,t,r){var n=this;if("string"==typeof e||Array.isArray(e))g.on(this.el_,e,d.bind(this,t));else{var i=e,o=t,a=d.bind(this,r),s=function(){return n.off(i,o,a)};s.guid=a.guid,this.on("dispose",s);var u=function(){return n.off("dispose",s)};u.guid=a.guid,e.nodeName?(g.on(i,o,a),g.on(i,"dispose",u)):"function"==typeof e.on&&(i.on(o,a),i.on("dispose",u))}return this},e.prototype.off=function(e,t,r){if(!e||"string"==typeof e||Array.isArray(e))g.off(this.el_,e,t);else{var n=e,i=t,o=d.bind(this,r);this.off("dispose",o),e.nodeName?(g.off(n,i,o),g.off(n,"dispose",o)):(n.off(i,o),n.off("dispose",o))}return this},e.prototype.one=function(e,t,r){var n=this,i=arguments;if("string"==typeof e||Array.isArray(e))g.one(this.el_,e,d.bind(this,t));else{var o=e,a=t,s=d.bind(this,r),u=function e(){n.off(o,a,e),s.apply(null,i)};u.guid=s.guid,this.on(o,a,u)}return this},e.prototype.trigger=function(e,t){return g.trigger(this.el_,e,t),this},e.prototype.ready=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(this.isReady_?t?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e))),this},e.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.prototype.$=function(e,t){return l.$(e,t||this.contentEl())},e.prototype.$$=function(e,t){return l.$$(e,t||this.contentEl())},e.prototype.hasClass=function(e){return l.hasElClass(this.el_,e)},e.prototype.addClass=function(e){return l.addElClass(this.el_,e),this},e.prototype.removeClass=function(e){return l.removeElClass(this.el_,e),this},e.prototype.toggleClass=function(e,t){return l.toggleElClass(this.el_,e,t),this},e.prototype.show=function(){return this.removeClass("vjs-hidden"),this},e.prototype.hide=function(){return this.addClass("vjs-hidden"),this},e.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},e.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},e.prototype.getAttribute=function(e){return l.getAttribute(this.el_,e)},e.prototype.setAttribute=function(e,t){return l.setAttribute(this.el_,e,t),this},e.prototype.removeAttribute=function(e){return l.removeAttribute(this.el_,e),this},e.prototype.width=function(e,t){return this.dimension("width",e,t)},e.prototype.height=function(e,t){return this.dimension("height",e,t)},e.prototype.dimensions=function(e,t){return this.width(e,!0).height(t)},e.prototype.dimension=function(e,t,r){if(void 0!==t)return null!==t&&t===t||(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:"auto"===t?this.el_.style[e]="":this.el_.style[e]=t+"px",r||this.trigger("resize"),
this;if(!this.el_)return 0;var n=this.el_.style[e],i=n.indexOf("px");return i!==-1?parseInt(n.slice(0,i),10):parseInt(this.el_["offset"+(0,_.default)(e)],10)},e.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof s.default.getComputedStyle){var r=s.default.getComputedStyle(this.el_);t=r.getPropertyValue(e)||r[e]}if(t=parseFloat(t),0===t){var n="offset"+(0,_.default)(e);t=this.el_[n]}return t},e.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.prototype.currentWidth=function(){return this.currentDimension("width")},e.prototype.currentHeight=function(){return this.currentDimension("height")},e.prototype.focus=function(){this.el_.focus()},e.prototype.blur=function(){this.el_.blur()},e.prototype.emitTapEvents=function(){var e=0,t=null,r=10,n=200,i=void 0;this.on("touchstart",function(r){1===r.touches.length&&(t={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},e=(new Date).getTime(),i=!0)}),this.on("touchmove",function(e){if(e.touches.length>1)i=!1;else if(t){var n=e.touches[0].pageX-t.pageX,o=e.touches[0].pageY-t.pageY,a=Math.sqrt(n*n+o*o);a>r&&(i=!1)}});var o=function(){i=!1};this.on("touchleave",o),this.on("touchcancel",o),this.on("touchend",function(r){if(t=null,i===!0){var o=(new Date).getTime()-e;o<n&&(r.preventDefault(),this.trigger("tap"))}})},e.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e=d.bind(this.player(),this.player().reportUserActivity),t=void 0;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var r=function(r){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",r),this.on("touchcancel",r)}},e.prototype.setTimeout=function(e,t){e=d.bind(this,e);var r=s.default.setTimeout(e,t),n=function(){this.clearTimeout(r)};return n.guid="vjs-timeout-"+r,this.on("dispose",n),r},e.prototype.clearTimeout=function(e){s.default.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.prototype.setInterval=function(e,t){e=d.bind(this,e);var r=s.default.setInterval(e,t),n=function(){this.clearInterval(r)};return n.guid="vjs-interval-"+r,this.on("dispose",n),r},e.prototype.clearInterval=function(e){s.default.clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},e.registerComponent=function(t,r){if(t){if(t=(0,_.default)(t),e.components_||(e.components_={}),"Player"===t&&e.components_[t]){var n=e.components_[t];if(n.players&&Object.keys(n.players).length>0&&Object.keys(n.players).map(function(e){return n.players[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created")}return e.components_[t]=r,r}},e.getComponent=function(t){if(t)return t=(0,_.default)(t),e.components_&&e.components_[t]?e.components_[t]:s.default&&s.default.videojs&&s.default.videojs[t]?(v.default.warn("The "+t+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),s.default.videojs[t]):void 0},e.extend=function(t){t=t||{},v.default.warn("Component.extend({}) has been deprecated,  use videojs.extend(Component, {}) instead");var r=t.init||t.init||this.prototype.init||this.prototype.init||function(){},n=function(){r.apply(this,arguments)};n.prototype=Object.create(this.prototype),n.prototype.constructor=n,n.extend=e.extend;for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i]);return n},e}();E.registerComponent("Component",E),r.default=E},{"./utils/dom.js":92,"./utils/events.js":93,"./utils/fn.js":94,"./utils/guid.js":96,"./utils/log.js":97,"./utils/merge-options.js":98,"./utils/to-title-case.js":102,"global/window":5}],17:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../track-button.js"),u=n(s),l=e("../../component.js"),c=n(l),d=e("./audio-track-menu-item.js"),f=n(d),h=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),n.tracks=r.audioTracks&&r.audioTracks();var a=o(this,e.call(this,r,n));return a.el_.setAttribute("aria-label","Audio Menu"),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;var t=this.player_.audioTracks&&this.player_.audioTracks();if(!t)return e;for(var r=0;r<t.length;r++){var n=t[r];e.push(new f.default(this.player_,{track:n,selectable:!0}))}return e},t}(u.default);h.prototype.controlText_="Audio Track",c.default.registerComponent("AudioTrackButton",h),r.default=h},{"../../component.js":16,"../track-button.js":47,"./audio-track-menu-item.js":18}],18:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../menu/menu-item.js"),l=i(u),c=e("../../component.js"),d=i(c),f=e("../../utils/fn.js"),h=n(f),p=function(e){function t(r,n){o(this,t);var i=n.track,s=r.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled;var u=a(this,e.call(this,r,n));if(u.track=i,s){var l=h.bind(u,u.handleTracksChange);s.addEventListener("change",l),u.on("dispose",function(){s.removeEventListener("change",l)})}return u}return s(t,e),t.prototype.handleClick=function(t){var r=this.player_.audioTracks();if(e.prototype.handleClick.call(this,t),r)for(var n=0;n<r.length;n++){var i=r[n];i.enabled=i===this.track}},t.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(l.default);d.default.registerComponent("AudioTrackMenuItem",p),r.default=p},{"../../component.js":16,"../../menu/menu-item.js":59,"../../utils/fn.js":94}],19:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../component.js"),u=n(s);e("./play-toggle.js"),e("./time-controls/current-time-display.js"),e("./time-controls/duration-display.js"),e("./time-controls/time-divider.js"),e("./time-controls/remaining-time-display.js"),e("./live-display.js"),e("./progress-control/progress-control.js"),e("./fullscreen-toggle.js"),e("./volume-control/volume-control.js"),e("./volume-menu-button.js"),e("./mute-toggle.js"),e("./text-track-controls/chapters-button.js"),e("./text-track-controls/descriptions-button.js"),e("./text-track-controls/subtitles-button.js"),e("./text-track-controls/captions-button.js"),e("./audio-track-controls/audio-track-button.js"),e("./playback-rate-menu/playback-rate-menu-button.js"),e("./spacer-controls/custom-control-spacer.js");var l=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},t}(u.default);l.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},u.default.registerComponent("ControlBar",l),r.default=l},{"../component.js":16,"./audio-track-controls/audio-track-button.js":17,"./fullscreen-toggle.js":20,"./live-display.js":21,"./mute-toggle.js":22,"./play-toggle.js":23,"./playback-rate-menu/playback-rate-menu-button.js":24,"./progress-control/progress-control.js":29,"./spacer-controls/custom-control-spacer.js":32,"./text-track-controls/captions-button.js":35,"./text-track-controls/chapters-button.js":36,"./text-track-controls/descriptions-button.js":38,"./text-track-controls/subtitles-button.js":40,"./time-controls/current-time-display.js":43,"./time-controls/duration-display.js":44,"./time-controls/remaining-time-display.js":45,"./time-controls/time-divider.js":46,"./volume-control/volume-control.js":49,"./volume-menu-button.js":51}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../button.js"),u=n(s),l=e("../component.js"),c=n(l),d=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r,n));return a.on(r,"fullscreenchange",a.handleFullscreenChange),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(u.default);d.prototype.controlText_="Fullscreen",c.default.registerComponent("FullscreenToggle",d),r.default=d},{"../button.js":13,"../component.js":16}],21:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../component"),l=i(u),c=e("../utils/dom.js"),d=n(c),f=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.updateShowing(),i.on(i.player(),"durationchange",i.updateShowing),i}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(l.default);l.default.registerComponent("LiveDisplay",f),r.default=f},{"../component":16,"../utils/dom.js":92}],22:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../button"),l=i(u),c=e("../component"),d=i(c),f=e("../utils/dom.js"),h=n(f),p=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.on(r,"volumechange",i.update),r.tech_&&r.tech_.featuresVolumeControl===!1&&i.addClass("vjs-hidden"),i.on(r,"loadstart",function(){this.update(),r.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),i}return s(t,e),t.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.muted(!this.player_.muted())},t.prototype.update=function(e){var t=this.player_.volume(),r=3;this.player_.muted()?r=0:t<.33?r=1:t<.67&&(r=2);var n=this.player_.muted()?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n);for(var i=0;i<4;i++)h.removeElClass(this.el_,"vjs-vol-"+i);h.addElClass(this.el_,"vjs-vol-"+r)},t}(l.default);p.prototype.controlText_="Mute",d.default.registerComponent("MuteToggle",p),r.default=p},{"../button":13,"../component":16,"../utils/dom.js":92}],23:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../button.js"),u=n(s),l=e("../component.js"),c=n(l),d=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r,n));return a.on(r,"play",a.handlePlay),a.on(r,"pause",a.handlePause),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},t.prototype.handlePlay=function(e){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t}(u.default);d.prototype.controlText_="Play",c.default.registerComponent("PlayToggle",d),r.default=d},{"../button.js":13,"../component.js":16}],24:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../menu/menu-button.js"),l=i(u),c=e("../../menu/menu.js"),d=i(c),f=e("./playback-rate-menu-item.js"),h=i(f),p=e("../../component.js"),g=i(p),y=e("../../utils/dom.js"),v=n(y),m=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.updateVisibility(),i.updateLabel(),i.on(r,"loadstart",i.updateVisibility),i.on(r,"ratechange",i.updateLabel),i}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=v.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),t.appendChild(this.labelEl_),t},t.prototype.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},t.prototype.createMenu=function(){var e=new d.default(this.player()),t=this.playbackRates();if(t)for(var r=t.length-1;r>=0;r--)e.addChild(new h.default(this.player(),{rate:t[r]+"x"}));return e},t.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),r=this.playbackRates(),n=r[0],i=0;i<r.length;i++)if(r[i]>t){n=r[i];break}this.player().playbackRate(n)},t.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(l.default);m.prototype.controlText_="Playback Rate",g.default.registerComponent("PlaybackRateMenuButton",m),r.default=m},{"../../component.js":16,"../../menu/menu-button.js":58,"../../menu/menu.js":60,"../../utils/dom.js":92,"./playback-rate-menu-item.js":25}],25:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../menu/menu-item.js"),u=n(s),l=e("../../component.js"),c=n(l),d=function(e){function t(r,n){i(this,t);var a=n.rate,s=parseFloat(a,10);n.label=a,n.selected=1===s,n.selectable=!0;var u=o(this,e.call(this,r,n));return u.label=a,u.rate=s,u.on(r,"ratechange",u.update),u}return a(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(u.default);d.prototype.contentElType="button",c.default.registerComponent("PlaybackRateMenuItem",d),r.default=d},{"../../component.js":16,"../../menu/menu-item.js":59}],26:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../component.js"),l=i(u),c=e("../../utils/dom.js"),d=n(c),f=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.partEls_=[],i.on(r,"progress",i.update),i}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.prototype.update=function(e){var t=this.player_.buffered(),r=this.player_.duration(),n=this.player_.bufferedEnd(),i=this.partEls_,o=function(e,t){var r=e/t||0;return 100*(r>=1?1:r)+"%"};this.el_.style.width=o(n,r);for(var a=0;a<t.length;a++){var s=t.start(a),u=t.end(a),l=i[a];l||(l=this.el_.appendChild(d.createEl()),i[a]=l),l.style.left=o(s,n),l.style.width=o(u-s,n)}for(var c=i.length;c>t.length;c--)this.el_.removeChild(i[c-1]);i.length=t.length},t}(l.default);l.default.registerComponent("LoadProgressBar",f),r.default=f},{"../../component.js":16,"../../utils/dom.js":92}],27:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../component.js"),l=i(u),c=e("../../utils/dom.js"),d=n(c),f=e("../../utils/fn.js"),h=n(f),p=e("../../utils/format-time.js"),g=i(p),y=e("../../utils/computed-style.js"),v=i(y),m=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(i.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),i.keepTooltipsInside&&(i.tooltip=d.createEl("div",{className:"vjs-time-tooltip"}),i.el().appendChild(i.tooltip),i.addClass("vjs-keep-tooltips-inside")),i.update(0,0),r.on("ready",function(){i.on(r.controlBar.progressControl.el(),"mousemove",h.throttle(h.bind(i,i.handleMouseMove),25))}),i}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.prototype.handleMouseMove=function(e){var t=this.player_.duration(),r=this.calculateDistance(e)*t,n=e.pageX-d.findElPosition(this.el().parentNode).left;this.update(r,n)},t.prototype.update=function(e,t){var r=(0,g.default)(e,this.player_.duration());if(this.el().style.left=t+"px",this.el().setAttribute("data-current-time",r),this.keepTooltipsInside){var n=this.clampPosition_(t),i=t-n+1,o=parseFloat((0,v.default)(this.tooltip,"width")),a=o/2;this.tooltip.innerHTML=r,this.tooltip.style.right="-"+(a-i)+"px"}},t.prototype.calculateDistance=function(e){return d.getPointerPosition(this.el().parentNode,e).x},t.prototype.clampPosition_=function(e){if(!this.keepTooltipsInside)return e;var t=parseFloat((0,v.default)(this.player().el(),"width")),r=parseFloat((0,v.default)(this.tooltip,"width")),n=r/2,i=e;return e<n?i=Math.ceil(n):e>t-n&&(i=Math.floor(t-n)),i},t}(l.default);l.default.registerComponent("MouseTimeDisplay",m),r.default=m},{"../../component.js":16,"../../utils/computed-style.js":91,"../../utils/dom.js":92,"../../utils/fn.js":94,"../../utils/format-time.js":95}],28:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../component.js"),l=i(u),c=e("../../utils/fn.js"),d=n(c),f=e("../../utils/format-time.js"),h=i(f),p=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.updateDataAttr(),i.on(r,"timeupdate",i.updateDataAttr),r.ready(d.bind(i,i.updateDataAttr)),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(i.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),i.keepTooltipsInside&&i.addClass("vjs-keep-tooltips-inside"),i}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},t.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",(0,h.default)(t,this.player_.duration()))},t}(l.default);l.default.registerComponent("PlayProgressBar",p),r.default=p},{"../../component.js":16,"../../utils/fn.js":94,"../../utils/format-time.js":95}],29:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../component.js"),u=n(s);e("./seek-bar.js"),e("./mouse-time-display.js");var l=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t}(u.default);l.prototype.options_={children:["seekBar"]},u.default.registerComponent("ProgressControl",l),r.default=l},{"../../component.js":16,"./mouse-time-display.js":27,"./seek-bar.js":30}],30:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../slider/slider.js"),l=i(u),c=e("../../component.js"),d=i(c),f=e("../../utils/fn.js"),h=n(f),p=e("../../utils/format-time.js"),g=i(p),y=e("../../utils/computed-style.js"),v=i(y);e("./load-progress-bar.js"),e("./play-progress-bar.js"),e("./tooltip-progress-bar.js");var m=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.on(r,"timeupdate",i.updateProgress),i.on(r,"ended",i.updateProgress),r.ready(h.bind(i,i.updateProgress)),n.playerOptions&&n.playerOptions.controlBar&&n.playerOptions.controlBar.progressControl&&n.playerOptions.controlBar.progressControl.keepTooltipsInside&&(i.keepTooltipsInside=n.playerOptions.controlBar.progressControl.keepTooltipsInside),i.keepTooltipsInside&&(i.tooltipProgressBar=i.addChild("TooltipProgressBar")),i}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},t.prototype.updateProgress=function(e){if(this.updateAriaAttributes(this.el_),this.keepTooltipsInside){this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width;var t=parseFloat((0,v.default)(this.player().el(),"width")),r=parseFloat((0,v.default)(this.tooltipProgressBar.tooltip,"width")),n=this.tooltipProgressBar.el().style;n.maxWidth=Math.floor(t-r/2)+"px",n.minWidth=Math.ceil(r/2)+"px",n.right="-"+r/2+"px"}},t.prototype.updateAriaAttributes=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();e.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),e.setAttribute("aria-valuetext",(0,g.default)(t,this.player_.duration()))},t.prototype.getPercent=function(){var e=this.player_.currentTime()/this.player_.duration();return e>=1?1:e},t.prototype.handleMouseDown=function(t){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t)},t.prototype.handleMouseMove=function(e){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)},t.prototype.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},t.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},t.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},t}(l.default);m.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},m.prototype.playerEvent="timeupdate",d.default.registerComponent("SeekBar",m),r.default=m},{"../../component.js":16,"../../slider/slider.js":68,"../../utils/computed-style.js":91,"../../utils/fn.js":94,"../../utils/format-time.js":95,"./load-progress-bar.js":26,"./play-progress-bar.js":28,
"./tooltip-progress-bar.js":31}],31:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../component.js"),l=i(u),c=e("../../utils/fn.js"),d=n(c),f=e("../../utils/format-time.js"),h=i(f),p=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.updateDataAttr(),i.on(r,"timeupdate",i.updateDataAttr),r.ready(d.bind(i,i.updateDataAttr)),i}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=t.querySelector(".vjs-time-tooltip"),t},t.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),r=(0,h.default)(t,this.player_.duration());this.el_.setAttribute("data-current-time",r),this.tooltip.innerHTML=r},t}(l.default);l.default.registerComponent("TooltipProgressBar",p),r.default=p},{"../../component.js":16,"../../utils/fn.js":94,"../../utils/format-time.js":95}],32:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./spacer.js"),u=n(s),l=e("../../component.js"),c=n(l),d=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="&nbsp;",t},t}(u.default);c.default.registerComponent("CustomControlSpacer",d),r.default=d},{"../../component.js":16,"./spacer.js":33}],33:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../component.js"),u=n(s),l=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(u.default);u.default.registerComponent("Spacer",l),r.default=l},{"../../component.js":16}],34:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./text-track-menu-item.js"),u=n(s),l=e("../../component.js"),c=n(l),d=function(e){function t(r,n){i(this,t),n.track={player:r,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1;var a=o(this,e.call(this,r,n));return a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+n.kind+" settings dialog"),a}return a(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},t}(u.default);c.default.registerComponent("CaptionSettingsMenuItem",d),r.default=d},{"../../component.js":16,"./text-track-menu-item.js":42}],35:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./text-track-button.js"),u=n(s),l=e("../../component.js"),c=n(l),d=e("./caption-settings-menu-item.js"),f=n(d),h=function(e){function t(r,n,a){i(this,t);var s=o(this,e.call(this,r,n,a));return s.el_.setAttribute("aria-label","Captions Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},t.prototype.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(t.push(new f.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(u.default);h.prototype.kind_="captions",h.prototype.controlText_="Captions",c.default.registerComponent("CaptionsButton",h),r.default=h},{"../../component.js":16,"./caption-settings-menu-item.js":34,"./text-track-button.js":41}],36:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./text-track-button.js"),u=n(s),l=e("../../component.js"),c=n(l),d=e("./chapters-track-menu-item.js"),f=n(d),h=e("../../utils/to-title-case.js"),p=n(h),g=function(e){function t(r,n,a){i(this,t);var s=o(this,e.call(this,r,n,a));return s.el_.setAttribute("aria-label","Chapters Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},t.prototype.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},t.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);r&&r.addEventListener("load",this.updateHandler_)}}},t.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var r=e[t];if(r.kind===this.kind_)return r}},t.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize((0,p.default)(this.kind_))},t.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},t.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var r=0,n=t.length;r<n;r++){var i=t[r],o=new f.default(this.player_,{track:this.track_,cue:i});e.push(o)}return e},t}(u.default);g.prototype.kind_="chapters",g.prototype.controlText_="Chapters",c.default.registerComponent("ChaptersButton",g),r.default=g},{"../../component.js":16,"../../utils/to-title-case.js":102,"./chapters-track-menu-item.js":37,"./text-track-button.js":41}],37:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../menu/menu-item.js"),l=i(u),c=e("../../component.js"),d=i(c),f=e("../../utils/fn.js"),h=n(f),p=function(e){function t(r,n){o(this,t);var i=n.track,s=n.cue,u=r.currentTime();n.selectable=!0,n.label=s.text,n.selected=s.startTime<=u&&u<s.endTime;var l=a(this,e.call(this,r,n));return l.track=i,l.cue=s,i.addEventListener("cuechange",h.bind(l,l.update)),l}return s(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.prototype.update=function(e){var t=this.cue,r=this.player_.currentTime();this.selected(t.startTime<=r&&r<t.endTime)},t}(l.default);d.default.registerComponent("ChaptersTrackMenuItem",p),r.default=p},{"../../component.js":16,"../../menu/menu-item.js":59,"../../utils/fn.js":94}],38:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./text-track-button.js"),l=i(u),c=e("../../component.js"),d=i(c),f=e("../../utils/fn.js"),h=n(f),p=function(e){function t(r,n,i){o(this,t);var s=a(this,e.call(this,r,n,i));s.el_.setAttribute("aria-label","Descriptions Menu");var u=r.textTracks();if(u){var l=h.bind(s,s.handleTracksChange);u.addEventListener("change",l),s.on("dispose",function(){u.removeEventListener("change",l)})}return s}return s(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),r=!1,n=0,i=t.length;n<i;n++){var o=t[n];if(o.kind!==this.kind_&&"showing"===o.mode){r=!0;break}}r?this.disable():this.enable()},t.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},t}(l.default);p.prototype.kind_="descriptions",p.prototype.controlText_="Descriptions",d.default.registerComponent("DescriptionsButton",p),r.default=p},{"../../component.js":16,"../../utils/fn.js":94,"./text-track-button.js":41}],39:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./text-track-menu-item.js"),u=n(s),l=e("../../component.js"),c=n(l),d=function(e){function t(r,n){i(this,t),n.track={player:r,kind:n.kind,label:n.kind+" off",default:!1,mode:"disabled"},n.selectable=!0;var a=o(this,e.call(this,r,n));return a.selected(!0),a}return a(t,e),t.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),r=!0,n=0,i=t.length;n<i;n++){var o=t[n];if(o.kind===this.track.kind&&"showing"===o.mode){r=!1;break}}this.selected(r)},t}(u.default);c.default.registerComponent("OffTextTrackMenuItem",d),r.default=d},{"../../component.js":16,"./text-track-menu-item.js":42}],40:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./text-track-button.js"),u=n(s),l=e("../../component.js"),c=n(l),d=function(e){function t(r,n,a){i(this,t);var s=o(this,e.call(this,r,n,a));return s.el_.setAttribute("aria-label","Subtitles Menu"),s}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},t}(u.default);d.prototype.kind_="subtitles",d.prototype.controlText_="Subtitles",c.default.registerComponent("SubtitlesButton",d),r.default=d},{"../../component.js":16,"./text-track-button.js":41}],41:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../track-button.js"),u=n(s),l=e("../../component.js"),c=n(l),d=e("./text-track-menu-item.js"),f=n(d),h=e("./off-text-track-menu-item.js"),p=n(h),g=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(this,t),n.tracks=r.textTracks(),o(this,e.call(this,r,n))}return a(t,e),t.prototype.createItems=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.push(new p.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1;var t=this.player_.textTracks();if(!t)return e;for(var r=0;r<t.length;r++){var n=t[r];n.kind===this.kind_&&e.push(new f.default(this.player_,{track:n,selectable:!0}))}return e},t}(u.default);c.default.registerComponent("TextTrackButton",g),r.default=g},{"../../component.js":16,"../track-button.js":47,"./off-text-track-menu-item.js":39,"./text-track-menu-item.js":42}],42:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=e("../../menu/menu-item.js"),c=i(l),d=e("../../component.js"),f=i(d),h=e("../../utils/fn.js"),p=n(h),g=e("global/window"),y=i(g),v=e("global/document"),m=i(v),_=function(e){function t(r,n){o(this,t);var i=n.track,s=r.textTracks();n.label=i.label||i.language||"Unknown",n.selected=i.default||"showing"===i.mode;var l=a(this,e.call(this,r,n));if(l.track=i,s){var c=p.bind(l,l.handleTracksChange);r.on(["loadstart","texttrackchange"],c),s.addEventListener("change",c),l.on("dispose",function(){s.removeEventListener("change",c)})}if(s&&void 0===s.onchange){var d=void 0;l.on(["tap","click"],function(){if("object"!==u(y.default.Event))try{d=new y.default.Event("change")}catch(e){}d||(d=m.default.createEvent("Event"),d.initEvent("change",!0,!0)),s.dispatchEvent(d)})}return l}return s(t,e),t.prototype.handleClick=function(t){var r=this.track.kind,n=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),n)for(var i=0;i<n.length;i++){var o=n[i];o.kind===r&&(o===this.track?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled"))}},t.prototype.handleTracksChange=function(e){this.selected("showing"===this.track.mode)},t}(c.default);f.default.registerComponent("TextTrackMenuItem",_),r.default=_},{"../../component.js":16,"../../menu/menu-item.js":59,"../../utils/fn.js":94,"global/document":4,"global/window":5}],43:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../component.js"),l=i(u),c=e("../../utils/dom.js"),d=n(c),f=e("../../utils/format-time.js"),h=i(f),p=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.on(r,"timeupdate",i.updateContent),i}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),r=this.localize("Current Time"),n=(0,h.default)(t,this.player_.duration());n!==this.formattedTime_&&(this.formattedTime_=n,this.contentEl_.innerHTML='<span class="vjs-control-text">'+r+"</span> "+n)},t}(l.default);l.default.registerComponent("CurrentTimeDisplay",p),r.default=p},{"../../component.js":16,"../../utils/dom.js":92,"../../utils/format-time.js":95}],44:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../component.js"),l=i(u),c=e("../../utils/dom.js"),d=n(c),f=e("../../utils/format-time.js"),h=i(f),p=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.on(r,"durationchange",i.updateContent),i.on(r,"timeupdate",i.updateContent),i.on(r,"loadedmetadata",i.updateContent),i}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){var t=this.player_.duration();if(t&&this.duration_!==t){this.duration_=t;var r=this.localize("Duration Time"),n=(0,h.default)(t);this.contentEl_.innerHTML='<span class="vjs-control-text">'+r+"</span> "+n}},t}(l.default);l.default.registerComponent("DurationDisplay",p),r.default=p},{"../../component.js":16,"../../utils/dom.js":92,"../../utils/format-time.js":95}],45:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../component.js"),l=i(u),c=e("../../utils/dom.js"),d=n(c),f=e("../../utils/format-time.js"),h=i(f),p=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.on(r,"timeupdate",i.updateContent),i.on(r,"durationchange",i.updateContent),i}return s(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=d.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},t.prototype.updateContent=function(e){if(this.player_.duration()){var t=this.localize("Remaining Time"),r=(0,h.default)(this.player_.remainingTime());r!==this.formattedTime_&&(this.formattedTime_=r,this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> -"+r)}},t}(l.default);l.default.registerComponent("RemainingTimeDisplay",p),r.default=p},{"../../component.js":16,"../../utils/dom.js":92,"../../utils/format-time.js":95}],46:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../component.js"),u=n(s),l=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(u.default);u.default.registerComponent("TimeDivider",l),r.default=l},{"../../component.js":16}],47:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../menu/menu-button.js"),l=i(u),c=e("../component.js"),d=i(c),f=e("../utils/fn.js"),h=n(f),p=function(e){function t(r,n){o(this,t);var i=n.tracks,s=a(this,e.call(this,r,n));if(s.items.length<=1&&s.hide(),!i)return a(s);var u=h.bind(s,s.update);return i.addEventListener("removetrack",u),i.addEventListener("addtrack",u),s.player_.on("dispose",function(){i.removeEventListener("removetrack",u),i.removeEventListener("addtrack",u)}),s}return s(t,e),t}(l.default);d.default.registerComponent("TrackButton",p),r.default=p},{"../component.js":16,"../menu/menu-button.js":58,"../utils/fn.js":94}],48:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../../slider/slider.js"),l=i(u),c=e("../../component.js"),d=i(c),f=e("../../utils/fn.js"),h=n(f);e("./volume-level.js");var p=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.on(r,"volumechange",i.updateARIAAttributes),r.ready(h.bind(i,i.updateARIAAttributes)),i}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},t.prototype.handleMouseMove=function(e){this.checkMuted(),this.player_.volume(this.calculateDistance(e))},t.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.prototype.updateARIAAttributes=function(e){var t=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},t}(l.default);p.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},p.prototype.playerEvent="volumechange",d.default.registerComponent("VolumeBar",p),r.default=p},{"../../component.js":16,"../../slider/slider.js":68,"../../utils/fn.js":94,"./volume-level.js":50}],49:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../component.js"),u=n(s);e("./volume-bar.js");var l=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r,n));return r.tech_&&r.tech_.featuresVolumeControl===!1&&a.addClass("vjs-hidden"),a.on(r,"loadstart",function(){r.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),a}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},t}(u.default);l.prototype.options_={children:["volumeBar"]},u.default.registerComponent("VolumeControl",l),r.default=l},{"../../component.js":16,"./volume-bar.js":48}],50:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../../component.js"),u=n(s),l=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),
t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(u.default);u.default.registerComponent("VolumeLevel",l),r.default=l},{"../../component.js":16}],51:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../utils/fn.js"),l=i(u),c=e("../component.js"),d=n(c),f=e("../popup/popup.js"),h=n(f),p=e("../popup/popup-button.js"),g=n(p),y=e("./mute-toggle.js"),v=n(y),m=e("./volume-control/volume-bar.js"),_=n(m),b=function(e){function t(r){function n(){r.tech_&&r.tech_.featuresVolumeControl===!1?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),void 0===i.inline&&(i.inline=!0),void 0===i.vertical&&(i.inline?i.vertical=!1:i.vertical=!0),i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=!!i.vertical;var s=a(this,e.call(this,r,i));return s.on(r,"volumechange",s.volumeUpdate),s.on(r,"loadstart",s.volumeUpdate),n.call(s),s.on(r,"loadstart",n),s.on(s.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),s.on(s.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),s.on(s.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),s.on(s.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")}),s}return s(t,e),t.prototype.buildCSSClass=function(){var t="";return t=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal","vjs-volume-menu-button "+e.prototype.buildCSSClass.call(this)+" "+t},t.prototype.createPopup=function(){var e=new h.default(this.player_,{contentElType:"div"}),t=new _.default(this.player_,this.options_.volumeBar);return e.addChild(t),this.menuContent=e,this.volumeBar=t,this.attachVolumeBarEvents(),e},t.prototype.handleClick=function(t){v.default.prototype.handleClick.call(this),e.prototype.handleClick.call(this)},t.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],l.bind(this,this.handleMouseDown))},t.prototype.handleMouseDown=function(e){this.on(["mousemove","touchmove"],l.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},t.prototype.handleMouseUp=function(e){this.off(["mousemove","touchmove"],l.bind(this.volumeBar,this.volumeBar.handleMouseMove))},t}(g.default);b.prototype.volumeUpdate=v.default.prototype.update,b.prototype.controlText_="Mute",d.default.registerComponent("VolumeMenuButton",b),r.default=b},{"../component.js":16,"../popup/popup-button.js":64,"../popup/popup.js":65,"../utils/fn.js":94,"./mute-toggle.js":22,"./volume-control/volume-bar.js":48}],52:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./component"),u=n(s),l=e("./modal-dialog"),c=n(l),d=e("./utils/merge-options"),f=n(d),h=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r,n));return a.on(r,"error",a.open),a}return a(t,e),t.prototype.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},t.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(c.default);h.prototype.options_=(0,f.default)(c.default.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),u.default.registerComponent("ErrorDisplay",h),r.default=h},{"./component":16,"./modal-dialog":61,"./utils/merge-options":98}],53:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}r.__esModule=!0;var i=e("./utils/events.js"),o=n(i),a=function(){};a.prototype.allowedEvents_={},a.prototype.on=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},o.on(this,e,t),this.addEventListener=r},a.prototype.addEventListener=a.prototype.on,a.prototype.off=function(e,t){o.off(this,e,t)},a.prototype.removeEventListener=a.prototype.off,a.prototype.one=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},o.one(this,e,t),this.addEventListener=r},a.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=o.fixEvent(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),o.trigger(this,e)},a.prototype.dispatchEvent=a.prototype.trigger,r.default=a},{"./utils/events.js":93}],54:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=e("./utils/log"),a=n(o),s=e("./utils/obj"),u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){e.apply(this,arguments)},n={};(0,s.isObject)(t)?("function"==typeof t.init&&(a.default.warn("Constructor logic via init() is deprecated; please use constructor() instead."),t.constructor=t.init),t.constructor!==Object.prototype.constructor&&(r=t.constructor),n=t):"function"==typeof t&&(r=t),u(r,e);for(var i in n)n.hasOwnProperty(i)&&(r.prototype[i]=n[i]);return r};r.default=l},{"./utils/log":97,"./utils/obj":99}],55:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;for(var i=e("global/document"),o=n(i),a={},s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],u=s[0],l=void 0,c=0;c<s.length;c++)if(s[c][1]in o.default){l=s[c];break}if(l)for(var d=0;d<l.length;d++)a[u[d]]=l[d];r.default=a},{"global/document":4}],56:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("./component"),u=n(s),l=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},t}(u.default);u.default.registerComponent("LoadingSpinner",l),r.default=l},{"./component":16}],57:[function(e,t,r){"use strict";function n(e){return e instanceof n?e:("number"==typeof e?this.code=e:"string"==typeof e?this.message=e:(0,i.isObject)(e)&&("number"==typeof e.code&&(this.code=e.code),(0,i.assign)(this,e)),void(this.message||(this.message=n.defaultMessages[this.code]||"")))}r.__esModule=!0;var i=e("./utils/obj");n.prototype.code=0,n.prototype.message="",n.prototype.status=null,n.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],n.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var o=0;o<n.errorTypes.length;o++)n[n.errorTypes[o]]=o,n.prototype[n.errorTypes[o]]=o;r.default=n},{"./utils/obj":99}],58:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../clickable-component.js"),l=i(u),c=e("../component.js"),d=i(c),f=e("./menu.js"),h=i(f),p=e("../utils/dom.js"),g=n(p),y=e("../utils/fn.js"),v=n(y),m=e("../utils/to-title-case.js"),_=i(m),b=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var i=a(this,e.call(this,r,n));return i.update(),i.enabled_=!0,i.el_.setAttribute("aria-haspopup","true"),i.el_.setAttribute("role","menuitem"),i.on("keydown",i.handleSubmenuKeyPress),i}return s(t,e),t.prototype.update=function(){var e=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.prototype.createMenu=function(){var e=new h.default(this.player_);if(this.hideThreshold_=0,this.options_.title){var t=g.createEl("li",{className:"vjs-menu-title",innerHTML:(0,_.default)(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),g.insertElFirst(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)e.addItem(this.items[r]);return e},t.prototype.createItems=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return t+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",v.bind(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},t.prototype.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&t.preventDefault()):38===t.which||40===t.which?this.buttonPressed_||(this.pressButton(),t.preventDefault()):e.prototype.handleKeyPress.call(this,t)},t.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault())},t.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},t.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},t.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,e.prototype.disable.call(this)},t.prototype.enable=function(){return this.enabled_=!0,e.prototype.enable.call(this)},t}(l.default);d.default.registerComponent("MenuButton",b),r.default=b},{"../clickable-component.js":14,"../component.js":16,"../utils/dom.js":92,"../utils/fn.js":94,"../utils/to-title-case.js":102,"./menu.js":60}],59:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../clickable-component.js"),u=n(s),l=e("../component.js"),c=n(l),d=e("../utils/obj"),f=function(e){function t(r,n){i(this,t);var a=o(this,e.call(this,r,n));return a.selectable=n.selectable,a.selected(n.selected),a.selectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitem"),a}return a(t,e),t.prototype.createEl=function(t,r,n){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",(0,d.assign)({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},r),n)},t.prototype.handleClick=function(e){this.selected(!0)},t.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText("")))},t}(u.default);c.default.registerComponent("MenuItem",f),r.default=f},{"../clickable-component.js":14,"../component.js":16,"../utils/obj":99}],60:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../component.js"),l=i(u),c=e("../utils/dom.js"),d=n(c),f=e("../utils/fn.js"),h=n(f),p=e("../utils/events.js"),g=n(p),y=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.focusedChild_=-1,i.on("keydown",i.handleKeyPress),i}return s(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",h.bind(this,function(e){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=d.createEl(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var r=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.setAttribute("role","presentation"),r.appendChild(this.contentEl_),g.on(r,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),r},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},t.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},t.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},t.prototype.focus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice(),r=t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className);r&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(l.default);l.default.registerComponent("Menu",y),r.default=y},{"../component.js":16,"../utils/dom.js":92,"../utils/events.js":93,"../utils/fn.js":94}],61:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./utils/dom"),l=i(u),c=e("./utils/fn"),d=i(c),f=e("./component"),h=n(f),p="vjs-modal-dialog",g=27,y=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=l.createEl("div",{className:p+"-content"},{role:"document"}),i.descEl_=l.createEl("p",{className:p+"-description vjs-offscreen",id:i.el().getAttribute("aria-describedby")}),l.textContent(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}return s(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.prototype.buildCSSClass=function(){return p+" vjs-hidden "+e.prototype.buildCSSClass.call(this)},t.prototype.handleKeyPress=function(e){e.which===g&&this.closeable()&&this.close()},t.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},t.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",d.bind(this,this.handleKeyPress)),e.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}return this},t.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",d.bind(this,this.handleKeyPress)),e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()}return this},t.prototype.closeable=function e(t){if("boolean"==typeof t){var e=this.closeable_=!!t,r=this.getChild("closeButton");if(e&&!r){var n=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(r,"close",this.close)}!e&&r&&(this.off(r,"close",this.close),this.removeChild(r),r.dispose())}return this.closeable_},t.prototype.fill=function(){return this.fillWith(this.content())},t.prototype.fillWith=function(e){var t=this.contentEl(),r=t.parentNode,n=t.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(t),this.empty(),l.insertContent(t,e),this.trigger("modalfill"),n?r.insertBefore(t,n):r.appendChild(t),this},t.prototype.empty=function(){return this.trigger("beforemodalempty"),l.emptyEl(this.contentEl()),this.trigger("modalempty"),this},t.prototype.content=function(e){return"undefined"!=typeof e&&(this.content_=e),this.content_},t}(h.default);y.prototype.options_={pauseOnOpen:!0,temporary:!0},h.default.registerComponent("ModalDialog",y),r.default=y},{"./component":16,"./utils/dom":92,"./utils/fn":94}],62:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./component.js"),l=i(u),c=e("global/document"),d=i(c),f=e("global/window"),h=i(f),p=e("./utils/events.js"),g=n(p),y=e("./utils/dom.js"),v=n(y),m=e("./utils/fn.js"),_=n(m),b=e("./utils/guid.js"),T=n(b),E=e("./utils/browser.js"),w=n(E),k=e("./utils/log.js"),S=i(k),A=e("./utils/to-title-case.js"),C=i(A),P=e("./utils/time-ranges.js"),O=e("./utils/buffer.js"),R=e("./utils/stylesheet.js"),x=n(R),j=e("./fullscreen-api.js"),I=i(j),L=e("./media-error.js"),D=i(L),M=e("safe-json-parse/tuple"),N=i(M),F=e("./utils/obj"),B=e("./utils/merge-options.js"),U=i(B),G=e("./tracks/text-track-list-converter.js"),V=i(G),H=e("./modal-dialog"),q=i(H),z=e("./tech/tech.js"),W=i(z),K=e("./tracks/audio-track-list.js"),X=i(K),Y=e("./tracks/video-track-list.js"),J=i(Y);e("./tech/loader.js"),e("./tech/flash.js"),e("./poster-image.js"),e("./tracks/text-track-display.js"),e("./loading-spinner.js"),e("./big-play-button.js"),e("./close-button.js"),e("./control-bar/control-bar.js"),e("./error-display.js"),e("./tracks/text-track-settings.js"),e("./tech/html5.js");var $=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"],Q=function(e){function t(r,n,i){if(o(this,t),r.id=r.id||"vjs_video_"+T.newGUID(),n=(0,F.assign)(t.getTagSettings(r),n),n.initChildren=!1,n.createEl=!1,n.reportTouchActivity=!1,!n.language)if("function"==typeof r.closest){var s=r.closest("[lang]");s&&(n.language=s.getAttribute("lang"))}else for(var u=r;u&&1===u.nodeType;){if(v.getElAttributes(u).hasOwnProperty("lang")){n.language=u.getAttribute("lang");break}u=u.parentNode}var l=a(this,e.call(this,null,n,i));if(!l.options_||!l.options_.techOrder||!l.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(l.tag=r,l.tagAttributes=r&&v.getElAttributes(r),l.language(l.options_.language),n.languages){var c={};Object.getOwnPropertyNames(n.languages).forEach(function(e){c[e.toLowerCase()]=n.languages[e]}),l.languages_=c}else l.languages_=t.prototype.options_.languages;l.cache_={},l.poster_=n.poster||"",l.controls_=!!n.controls,r.controls=!1,l.scrubbing_=!1,l.el_=l.createEl();var d=(0,U.default)(l.options_);if(n.plugins){var f=n.plugins;Object.getOwnPropertyNames(f).forEach(function(e){"function"==typeof this[e]?this[e](f[e]):S.default.error("Unable to find plugin:",e)},l)}l.options_.playerOptions=d,l.initChildren(),l.isAudio("audio"===r.nodeName.toLowerCase()),l.controls()?l.addClass("vjs-controls-enabled"):l.addClass("vjs-controls-disabled"),l.el_.setAttribute("role","region"),l.isAudio()?l.el_.setAttribute("aria-label","audio player"):l.el_.setAttribute("aria-label","video player"),l.isAudio()&&l.addClass("vjs-audio"),l.flexNotSupported_()&&l.addClass("vjs-no-flex"),w.IS_IOS||l.addClass("vjs-workinghover"),t.players[l.id_]=l;var h="5.20.5".split(".")[0];return l.addClass("vjs-v"+h),l.userActive(!0),l.reportUserActivity(),l.listenForUserActivity_(),l.on("fullscreenchange",l.handleFullscreenChange_),l.on("stageclick",l.handleStageClick_),l}return s(t,e),t.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var t=this.tag,r=void 0,n=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");r=n?this.el_=t.parentNode:this.el_=e.prototype.createEl.call(this,"div"),t.setAttribute("tabindex","-1"),t.removeAttribute("width"),t.removeAttribute("height");var i=v.getElAttributes(t);if(Object.getOwnPropertyNames(i).forEach(function(e){"class"===e?r.className+=" "+i[e]:r.setAttribute(e,i[e])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=r.player=this,this.addClass("vjs-paused"),h.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=x.createStyleElement("vjs-styles-dimensions");var o=v.$(".vjs-styles-defaults"),a=v.$("head");a.insertBefore(this.styleEl_,o?o.nextSibling:a.firstChild)}this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=t.getElementsByTagName("a"),u=0;u<s.length;u++){var l=s.item(u);v.addElClass(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!n&&t.parentNode.insertBefore(r,t),v.insertElFirst(t,r),this.children_.unshift(t),this.el_=r,r},t.prototype.width=function(e){return this.dimension("width",e)},t.prototype.height=function(e){return this.dimension("height",e)},t.prototype.dimension=function(e,t){var r=e+"_";if(void 0===t)return this[r]||0;if(""===t)this[r]=void 0;else{var n=parseFloat(t);if(isNaN(n))return S.default.error('Improper value "'+t+'" supplied for for '+e),this;this[r]=n}return this.updateStyleEl_(),this},t.prototype.fluid=function(e){return void 0===e?!!this.fluid_:(this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),void this.updateStyleEl_())},t.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},t.prototype.updateStyleEl_=function(){if(h.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){var e="number"==typeof this.width_?this.width_:this.options_.width,t="number"==typeof this.height_?this.height_:this.options_.height,r=this.tech_&&this.tech_.el();return void(r&&(e>=0&&(r.width=e),t>=0&&(r.height=t)))}var n=void 0,i=void 0,o=void 0,a=void 0;o=void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9";var s=o.split(":"),u=s[1]/s[0];n=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/u:this.videoWidth()||300,i=void 0!==this.height_?this.height_:n*u,a=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(a),x.setTextContent(this.styleEl_,"\n      ."+a+" {\n        width: "+n+"px;\n        height: "+i+"px;\n      }\n\n      ."+a+".vjs-fluid {\n        padding-top: "+100*u+"%;\n      }\n    ")},t.prototype.loadTech_=function(e,t){var r=this;this.tech_&&this.unloadTech_(),"Html5"!==e&&this.tag&&(W.default.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,this.isReady_=!1;var n=(0,F.assign)({source:t,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]},this.options_[e.toLowerCase()]);this.tag&&(n.tag=this.tag),t&&(this.currentType_=t.type,t.src===this.cache_.src&&this.cache_.currentTime>0&&(n.startTime=this.cache_.currentTime),this.cache_.sources=null,this.cache_.source=t,this.cache_.src=t.src);var i=W.default.getTech(e);i||(i=l.default.getComponent(e)),this.tech_=new i(n),this.tech_.ready(_.bind(this,this.handleTechReady_),!0),V.default.jsonToTextTracks(this.textTracksJson_||[],this.tech_),$.forEach(function(e){r.on(r.tech_,e,r["handleTech"+(0,C.default)(e)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||v.insertElFirst(this.tech_.el(),this.el()),
this.tag&&(this.tag.player=null,this.tag=null)},t.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=V.default.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},t.prototype.tech=function(e){if(e&&e.IWillNotUseThisInPlugins)return this.tech_;var t="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw h.default.alert(t),new Error(t)},t.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},t.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},t.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(e){(0,S.default)("deleting tag.poster throws in some browsers",e)}this.play()}},t.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},t.prototype.hasStarted=function(e){return void 0!==e?(this.hasStarted_!==e&&(this.hasStarted_=e,e?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},t.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},t.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},t.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(S.default.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.prototype.handleTechClick_=function(e){0===e.button&&this.controls()&&(this.paused()?this.play():this.pause())},t.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},t.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},t.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.prototype.handleStageClick_=function(){this.reportUserActivity()},t.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},t.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},t.prototype.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},t.prototype.getCache=function(){return this.cache_},t.prototype.techCall_=function(e,t){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[e](t)},!0);else try{this.tech_&&this.tech_[e](t)}catch(e){throw(0,S.default)(e),e}},t.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?(0,S.default)("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?((0,S.default)("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):(0,S.default)(t),t}},t.prototype.play=function(){return this.src()||this.currentSrc()?this.techCall_("play"):this.tech_.one("loadstart",function(){this.play()}),this},t.prototype.pause=function(){return this.techCall_("pause"),this},t.prototype.paused=function(){return this.techGet_("paused")!==!1},t.prototype.scrubbing=function(e){return void 0!==e?(this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},t.prototype.currentTime=function(e){return void 0!==e?(this.techCall_("setCurrentTime",e),this):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},t.prototype.duration=function(e){return void 0===e?void 0!==this.cache_.duration?this.cache_.duration:NaN:(e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},t.prototype.remainingTime=function(){return this.duration()-this.currentTime()},t.prototype.buffered=function e(){var e=this.techGet_("buffered");return e&&e.length||(e=(0,P.createTimeRange)(0,0)),e},t.prototype.bufferedPercent=function(){return(0,O.bufferedPercent)(this.buffered(),this.duration())},t.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),r=e.end(e.length-1);return r>t&&(r=t),r},t.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),this):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},t.prototype.muted=function(e){return void 0!==e?(this.techCall_("setMuted",e),this):this.techGet_("muted")||!1},t.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.prototype.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,this):!!this.isFullscreen_},t.prototype.requestFullscreen=function(){var e=I.default;return this.isFullscreen(!0),e.requestFullscreen?(g.on(d.default,e.fullscreenchange,_.bind(this,function t(r){this.isFullscreen(d.default[e.fullscreenElement]),this.isFullscreen()===!1&&g.off(d.default,e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.exitFullscreen=function(){var e=I.default;return this.isFullscreen(!1),e.requestFullscreen?d.default[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},t.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=d.default.documentElement.style.overflow,g.on(d.default,"keydown",_.bind(this,this.fullWindowOnEscKey)),d.default.documentElement.style.overflow="hidden",v.addElClass(d.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(this.isFullscreen()===!0?this.exitFullscreen():this.exitFullWindow())},t.prototype.exitFullWindow=function(){this.isFullWindow=!1,g.off(d.default,"keydown",this.fullWindowOnEscKey),d.default.documentElement.style.overflow=this.docOrigOverflow,v.removeElClass(d.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.prototype.canPlayType=function(e){for(var t=void 0,r=0,n=this.options_.techOrder;r<n.length;r++){var i=(0,C.default)(n[r]),o=W.default.getTech(i);if(o||(o=l.default.getComponent(i)),o){if(o.isSupported()&&(t=o.canPlayType(e)))return t}else S.default.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},t.prototype.selectSource=function(e){var t=this,r=this.options_.techOrder.map(C.default).map(function(e){return[e,W.default.getTech(e)||l.default.getComponent(e)]}).filter(function(e){var t=e[0],r=e[1];return r?r.isSupported():(S.default.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),n=function(e,t,r){var n=void 0;return e.some(function(e){return t.some(function(t){if(n=r(e,t))return!0})}),n},i=void 0,o=function(e){return function(t,r){return e(r,t)}},a=function(e,r){var n=e[0],i=e[1];if(i.canPlaySource(r,t.options_[n.toLowerCase()]))return{source:r,tech:n}};return i=this.options_.sourceOrder?n(e,r,o(a)):n(r,e,a),i||!1},t.prototype.src=function(e){if(void 0===e)return this.techGet_("src");var t=W.default.getTech(this.techName_);return t||(t=l.default.getComponent(this.techName_)),Array.isArray(e)?this.sourceList_(e):"string"==typeof e?this.src({src:e}):e instanceof Object&&(e.type&&!t.canPlaySource(e,this.options_[this.techName_.toLowerCase()])?this.sourceList_([e]):(this.cache_.sources=null,this.cache_.source=e,this.cache_.src=e.src,this.currentType_=e.type||"",this.ready(function(){t.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this},t.prototype.sourceList_=function(e){var t=this.selectSource(e);t?(t.tech===this.techName_?this.src(t.source):this.loadTech_(t.tech,t.source),this.cache_.sources=e):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},t.prototype.load=function(){return this.techCall_("load"),this},t.prototype.reset=function(){return this.loadTech_((0,C.default)(this.options_.techOrder[0]),null),this.techCall_("reset"),this},t.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},t.prototype.currentSource=function(){var e={},t=this.currentSrc();return t&&(e.src=t),this.cache_.source||e},t.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},t.prototype.currentType=function(){return this.currentType_||""},t.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),this.options_.preload=e,this):this.techGet_("preload")},t.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),this.options_.autoplay=e,this):this.techGet_("autoplay",e)},t.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},t.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),this.options_.loop=e,this):this.techGet_("loop")},t.prototype.poster=function(e){return void 0===e?this.poster_:(e||(e=""),this.poster_=e,this.techCall_("setPoster",e),this.trigger("posterchange"),this)},t.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},t.prototype.controls=function(e){return void 0!==e?(e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},t.prototype.usingNativeControls=function(e){return void 0!==e?(e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,e?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},t.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close(),this):(this.error_=new D.default(e),this.addClass("vjs-error"),S.default.error("(CODE:"+this.error_.code+" "+D.default.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),this)},t.prototype.reportUserActivity=function(e){this.userActivity_=!0},t.prototype.userActive=function(e){return void 0!==e?(e=!!e,e!==this.userActive_&&(this.userActive_=e,e?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},t.prototype.listenForUserActivity_=function(){var e=void 0,t=void 0,r=void 0,n=_.bind(this,this.reportUserActivity),i=function(e){e.screenX===t&&e.screenY===r||(t=e.screenX,r=e.screenY,n())},o=function(){n(),this.clearInterval(e),e=this.setInterval(n,250)},a=function(t){n(),this.clearInterval(e)};this.on("mousedown",o),this.on("mousemove",i),this.on("mouseup",a),this.on("keydown",n),this.on("keyup",n);var s=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(s);var e=this.options_.inactivityTimeout;e>0&&(s=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},t.prototype.playbackRate=function(e){return void 0!==e?(this.techCall_("setPlaybackRate",e),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},t.prototype.isAudio=function(e){return void 0!==e?(this.isAudio_=!!e,this):!!this.isAudio_},t.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new J.default,this.videoTracks_)},t.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new X.default,this.audioTracks_)},t.prototype.textTracks=function(){if(this.tech_)return this.tech_.textTracks()},t.prototype.remoteTextTracks=function(){if(this.tech_)return this.tech_.remoteTextTracks()},t.prototype.remoteTextTrackEls=function(){if(this.tech_)return this.tech_.remoteTextTrackEls()},t.prototype.addTextTrack=function(e,t,r){if(this.tech_)return this.tech_.addTextTrack(e,t,r)},t.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},t.prototype.removeRemoteTextTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.track,r=void 0===t?arguments[0]:t;if(this.tech_)return this.tech_.removeRemoteTextTrack(r)},t.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.prototype.language=function(e){return void 0===e?this.language_:(this.language_=String(e).toLowerCase(),this)},t.prototype.languages=function(){return(0,U.default)(t.prototype.options_.languages,this.languages_)},t.prototype.toJSON=function(){var e=(0,U.default)(this.options_),t=e.tracks;e.tracks=[];for(var r=0;r<t.length;r++){var n=t[r];n=(0,U.default)(n),n.player=void 0,e.tracks[r]=n}return e},t.prototype.createModal=function(e,t){var r=this;t=t||{},t.content=e||"";var n=new q.default(this,t);return this.addChild(n),n.on("dispose",function(){r.removeChild(n)}),n.open()},t.getTagSettings=function(e){var t={sources:[],tracks:[]},r=v.getElAttributes(e),n=r["data-setup"];if(v.hasElClass(e,"vjs-fluid")&&(r.fluid=!0),null!==n){var i=(0,N.default)(n||"{}"),o=i[0],a=i[1];o&&S.default.error(o),(0,F.assign)(r,a)}if((0,F.assign)(t,r),e.hasChildNodes())for(var s=e.childNodes,u=0,l=s.length;u<l;u++){var c=s[u],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(v.getElAttributes(c)):"track"===d&&t.tracks.push(v.getElAttributes(c))}return t},t.prototype.flexNotSupported_=function(){var e=d.default.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},t}(l.default);Q.players={};var Z=h.default.navigator;Q.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Z&&(Z.languages&&Z.languages[0]||Z.userLanguage||Z.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Q.prototype[e]=function(){return this.techGet_(e)}}),$.forEach(function(e){Q.prototype["handleTech"+(0,C.default)(e)+"_"]=function(){return this.trigger(e)}}),l.default.registerComponent("Player",Q),r.default=Q},{"./big-play-button.js":12,"./close-button.js":15,"./component.js":16,"./control-bar/control-bar.js":19,"./error-display.js":52,"./fullscreen-api.js":55,"./loading-spinner.js":56,"./media-error.js":57,"./modal-dialog":61,"./poster-image.js":66,"./tech/flash.js":70,"./tech/html5.js":71,"./tech/loader.js":72,"./tech/tech.js":73,"./tracks/audio-track-list.js":74,"./tracks/text-track-display.js":79,"./tracks/text-track-list-converter.js":80,"./tracks/text-track-settings.js":82,"./tracks/video-track-list.js":87,"./utils/browser.js":89,"./utils/buffer.js":90,"./utils/dom.js":92,"./utils/events.js":93,"./utils/fn.js":94,"./utils/guid.js":96,"./utils/log.js":97,"./utils/merge-options.js":98,"./utils/obj":99,"./utils/stylesheet.js":100,"./utils/time-ranges.js":101,"./utils/to-title-case.js":102,"global/document":4,"global/window":5,"safe-json-parse/tuple":9}],63:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var i=e("./player.js"),o=n(i),a=function(e,t){o.default.prototype[e]=t};r.default=a},{"./player.js":62}],64:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../clickable-component.js"),u=n(s),l=e("../component.js"),c=n(l),d=function(e){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var a=o(this,e.call(this,r,n));return a.update(),a}return a(t,e),t.prototype.update=function(){var e=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=e,this.addChild(e),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},t.prototype.createPopup=function(){},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t.prototype.buildCSSClass=function(){var t="vjs-menu-button";return t+=this.options_.inline===!0?"-inline":"-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},t}(u.default);c.default.registerComponent("PopupButton",d),r.default=d},{"../clickable-component.js":14,"../component.js":16}],65:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../component.js"),l=i(u),c=e("../utils/dom.js"),d=n(c),f=e("../utils/fn.js"),h=n(f),p=e("../utils/events.js"),g=n(p),y=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.prototype.addItem=function(e){this.addChild(e),e.on("click",h.bind(this,function(){this.unlockShowing()}))},t.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=d.createEl(t,{className:"vjs-menu-content"});var r=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return r.appendChild(this.contentEl_),g.on(r,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),r},t}(l.default);l.default.registerComponent("Popup",y),r.default=y},{"../component.js":16,"../utils/dom.js":92,"../utils/events.js":93,"../utils/fn.js":94}],66:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./clickable-component.js"),l=i(u),c=e("./component.js"),d=i(c),f=e("./utils/fn.js"),h=n(f),p=e("./utils/dom.js"),g=n(p),y=e("./utils/browser.js"),v=n(y),m=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.update(),r.on("posterchange",h.bind(i,i.update)),i}return s(t,e),t.prototype.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},t.prototype.createEl=function(){var e=g.createEl("div",{className:"vjs-poster",tabIndex:-1});return v.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=g.createEl("img"),e.appendChild(this.fallbackImg_)),e},t.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},t.prototype.setSrc=function(e){if(this.fallbackImg_)this.fallbackImg_.src=e;else{var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t}},t.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},t}(l.default);d.default.registerComponent("PosterImage",m),r.default=m},{"./clickable-component.js":14,"./component.js":16,"./utils/browser.js":89,"./utils/dom.js":92,"./utils/fn.js":94}],67:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){t&&(g=t),h.default.setTimeout(y,e)}r.__esModule=!0,r.hasLoaded=r.autoSetupTimeout=r.autoSetup=void 0;var a=e("./utils/dom"),s=i(a),u=e("./utils/events.js"),l=i(u),c=e("global/document"),d=n(c),f=e("global/window"),h=n(f),p=!1,g=void 0,y=function(){if(s.isReal()){var e=d.default.getElementsByTagName("video"),t=d.default.getElementsByTagName("audio"),r=[];if(e&&e.length>0)for(var n=0,i=e.length;n<i;n++)r.push(e[n]);if(t&&t.length>0)for(var a=0,u=t.length;a<u;a++)r.push(t[a]);if(r&&r.length>0)for(var l=0,c=r.length;l<c;l++){var f=r[l];if(!f||!f.getAttribute){o(1);break}if(void 0===f.player){var h=f.getAttribute("data-setup");null!==h&&g(f)}}else p||o(1)}};s.isReal()&&"complete"===d.default.readyState?p=!0:l.one(h.default,"load",function(){p=!0});var v=function(){return p};r.autoSetup=y,r.autoSetupTimeout=o,r.hasLoaded=v},{"./utils/dom":92,"./utils/events.js":93,"global/document":4,"global/window":5}],68:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../component.js"),l=i(u),c=e("../utils/dom.js"),d=n(c),f=e("../utils/obj"),h=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.on("mousedown",i.handleMouseDown),i.on("touchstart",i.handleMouseDown),i.on("focus",i.handleFocus),i.on("blur",i.handleBlur),i.on("click",i.handleClick),i.on(r,"controlsvisible",i.update),i.on(r,i.playerEvent,i.update),i}return s(t,e),t.prototype.createEl=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r.className=r.className+" vjs-slider",r=(0,f.assign)({tabIndex:0},r),n=(0,f.assign)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),e.prototype.createEl.call(this,t,r,n)},t.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),d.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.prototype.handleMouseMove=function(e){},t.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;d.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!==e||e<0||e===1/0)&&(e=0);var r=(100*e).toFixed(2)+"%";this.vertical()?t.el().style.height=r:t.el().style.width=r}}},t.prototype.calculateDistance=function(e){var t=d.getPointerPosition(this.el_,e);return this.vertical()?t.y:t.x},t.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.prototype.vertical=function(e){return void 0===e?this.vertical_||!1:(this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal"),this)},t}(l.default);l.default.registerComponent("Slider",h),r.default=h},{"../component.js":16,"../utils/dom.js":92,"../utils/obj":99}],69:[function(e,t,r){"use strict";function n(e){return e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},e.streamFromParts=function(e,t){return e+"&"+t},e.streamToParts=function(e){var t={connection:"",stream:""};if(!e)return t;var r=e.search(/&(?!\w+=)/),n=void 0;return r!==-1?n=r+1:(r=n=e.lastIndexOf("/")+1,0===r&&(r=n=e.length)),t.connection=e.substring(0,r),t.stream=e.substring(n,e.length),t},e.isStreamingType=function(t){return t in e.streamingFormats},e.RTMP_RE=/^rtmp[set]?:\/\//i,e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)},e.rtmpSourceHandler={},e.rtmpSourceHandler.canPlayType=function(t){return e.isStreamingType(t)?"maybe":""},e.rtmpSourceHandler.canHandleSource=function(t,r){var n=e.rtmpSourceHandler.canPlayType(t.type);return n?n:e.isStreamingSrc(t.src)?"maybe":""},e.rtmpSourceHandler.handleSource=function(t,r,n){var i=e.streamToParts(t.src);r.setRtmpConnection(i.connection),r.setRtmpStream(i.stream)},e.registerSourceHandler(e.rtmpSourceHandler),e}r.__esModule=!0,r.default=n},{}],70:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.charAt(0).toUpperCase()+e.slice(1);A["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function l(e){A[e]=function(){return this.el_.vjs_getProperty(e)}}r.__esModule=!0;for(var c=e("./tech"),d=i(c),f=e("../utils/dom.js"),h=n(f),p=e("../utils/url.js"),g=n(p),y=e("../utils/time-ranges.js"),v=e("./flash-rtmp"),m=i(v),_=e("../component"),b=i(_),T=e("global/window"),E=i(T),w=e("../utils/obj"),k=E.default.navigator,S=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return r.source&&i.ready(function(){this.setSource(r.source)},!0),r.startTime&&i.ready(function(){this.load(),this.play(),this.currentTime(r.startTime)},!0),E.default.videojs=E.default.videojs||{},E.default.videojs.Flash=E.default.videojs.Flash||{},E.default.videojs.Flash.onReady=t.onReady,E.default.videojs.Flash.onEvent=t.onEvent,E.default.videojs.Flash.onError=t.onError,i.on("seeked",function(){this.lastSeekTarget_=void 0}),i}return s(t,e),t.prototype.createEl=function(){var e=this.options_;if(!e.swf){var r="5.4.1";e.swf="//vjs.zencdn.net/swf/"+r+"/video-js.swf";
}var n=e.techId,i=(0,w.assign)({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),o=(0,w.assign)({wmode:"opaque",bgcolor:"#000000"},e.params),a=(0,w.assign)({id:n,name:n,class:"vjs-tech"},e.attributes);return this.el_=t.embed(e.swf,i,o,a),this.el_.tech=this,this.el_},t.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},t.prototype.pause=function(){this.el_.vjs_pause()},t.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},t.prototype.setSrc=function(e){var t=this;e=g.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout(function(){return t.play()},0)},t.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},t.prototype.setCurrentTime=function(t){var r=this.seekable();r.length&&(t=t>r.start(0)?t:r.start(0),t=t<r.end(r.length-1)?t:r.end(r.length-1),this.lastSeekTarget_=t,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",t),e.prototype.setCurrentTime.call(this))},t.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},t.prototype.duration=function e(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return e>=0?e:1/0},t.prototype.load=function(){this.el_.vjs_load()},t.prototype.poster=function(){this.el_.vjs_getProperty("poster")},t.prototype.setPoster=function(){},t.prototype.seekable=function(){var e=this.duration();return 0===e?(0,y.createTimeRange)():(0,y.createTimeRange)(0,e)},t.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?(0,y.createTimeRange)():(0,y.createTimeRange)(e[0][0],e[0][1])},t.prototype.supportsFullScreen=function(){return!1},t.prototype.enterFullScreen=function(){return!1},t.prototype.getVideoPlaybackQuality=function(){var e=this.el_.vjs_getProperty("getVideoPlaybackQuality");return E.default.performance&&"function"==typeof E.default.performance.now?e.creationTime=E.default.performance.now():E.default.performance&&E.default.performance.timing&&"number"==typeof E.default.performance.timing.navigationStart&&(e.creationTime=E.default.Date.now()-E.default.performance.timing.navigationStart),e},t}(d.default),A=S.prototype,C="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),P="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(","),O=0;O<C.length;O++)l(C[O]),u(C[O]);for(var R=0;R<P.length;R++)l(P[R]);S.isSupported=function(){return S.version()[0]>=10},d.default.withSourceHandlers(S),S.nativeSourceHandler={},S.nativeSourceHandler.canPlayType=function(e){return e in S.formats?"maybe":""},S.nativeSourceHandler.canHandleSource=function(e,t){function r(e){var t=g.getFileExtension(e);return t?"video/"+t:""}var n=void 0;return n=e.type?e.type.replace(/;.*/,"").toLowerCase():r(e.src),S.nativeSourceHandler.canPlayType(n)},S.nativeSourceHandler.handleSource=function(e,t,r){t.setSrc(e.src)},S.nativeSourceHandler.dispose=function(){},S.registerSourceHandler(S.nativeSourceHandler),S.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},S.onReady=function(e){var t=h.getEl(e),r=t&&t.tech;r&&r.el()&&S.checkReady(r)},S.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){S.checkReady(e)},50))},S.onEvent=function(e,t){var r=h.getEl(e).tech,n=Array.prototype.slice.call(arguments,2);r.setTimeout(function(){r.trigger(t,n)},1)},S.onError=function(e,t){var r=h.getEl(e).tech;return"srcnotfound"===t?r.error(4):void r.error("FLASH: "+t)},S.version=function(){var e="0,0,0";try{e=new E.default.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{k.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(e=(k.plugins["Shockwave Flash 2.0"]||k.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(e){}}return e.split(",")},S.embed=function(e,t,r,n){var i=S.getEmbedCode(e,t,r,n),o=h.createEl("div",{innerHTML:i}).childNodes[0];return o},S.getEmbedCode=function(e,t,r,n){var i='<object type="application/x-shockwave-flash" ',o="",a="",s="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){o+=e+"="+t[e]+"&amp;"}),r=(0,w.assign)({movie:e,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},r),Object.getOwnPropertyNames(r).forEach(function(e){a+='<param name="'+e+'" value="'+r[e]+'" />'}),n=(0,w.assign)({data:e,width:"100%",height:"100%"},n),Object.getOwnPropertyNames(n).forEach(function(e){s+=e+'="'+n[e]+'" '}),""+i+s+">"+a+"</object>"},(0,m.default)(S),b.default.registerComponent("Flash",S),d.default.registerTech("Flash",S),r.default=S},{"../component":16,"../utils/dom.js":92,"../utils/obj":99,"../utils/time-ranges.js":101,"../utils/url.js":103,"./flash-rtmp":69,"./tech":73,"global/window":5}],71:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e.raw=t,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var l=o(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),c=e("./tech.js"),d=i(c),f=e("../component"),h=i(f),p=e("../utils/dom.js"),g=n(p),y=e("../utils/url.js"),v=n(y),m=e("../utils/fn.js"),_=n(m),b=e("../utils/log.js"),T=i(b),E=e("tsml"),w=i(E),k=e("../utils/browser.js"),S=n(k),A=e("global/document"),C=i(A),P=e("global/window"),O=i(P),R=e("../utils/obj"),x=e("../utils/merge-options.js"),j=i(x),I=e("../utils/to-title-case.js"),L=i(I),D=function(e){function t(r,n){a(this,t);var i=s(this,e.call(this,r,n)),o=r.source,u=!1;if(o&&(i.el_.currentSrc!==o.src||r.tag&&3===r.tag.initNetworkState_)?i.setSource(o):i.handleLateInit_(i.el_),i.el_.hasChildNodes()){for(var c=i.el_.childNodes,d=c.length,f=[];d--;){var h=c[d],p=h.nodeName.toLowerCase();"track"===p&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(h),i.remoteTextTracks().addTrack_(h.track),u||i.el_.hasAttribute("crossorigin")||!v.isCrossOrigin(h.src)||(u=!0)):f.push(h))}for(var g=0;g<f.length;g++)i.el_.removeChild(f[g])}var y=["audio","video"];return y.forEach(function(e){var t=i.el()[e+"Tracks"],r=i[e+"Tracks"](),n=(0,L.default)(e);i["featuresNative"+n+"Tracks"]&&t&&t.addEventListener&&(i["handle"+n+"TrackChange_"]=function(e){r.trigger({type:"change",target:r,currentTarget:r,srcElement:r})},i["handle"+n+"TrackAdd_"]=function(e){return r.addTrack(e.track)},i["handle"+n+"TrackRemove_"]=function(e){return r.removeTrack(e.track)},t.addEventListener("change",i["handle"+n+"TrackChange_"]),t.addEventListener("addtrack",i["handle"+n+"TrackAdd_"]),t.addEventListener("removetrack",i["handle"+n+"TrackRemove_"]),i["removeOld"+n+"Tracks_"]=function(e){return i.removeOldTracks_(r,t)},i.on("loadstart",i["removeOld"+n+"Tracks_"]))}),i.featuresNativeTextTracks&&(u&&T.default.warn((0,w.default)(l)),i.handleTextTrackChange_=_.bind(i,i.handleTextTrackChange),i.handleTextTrackAdd_=_.bind(i,i.handleTextTrackAdd),i.handleTextTrackRemove_=_.bind(i,i.handleTextTrackRemove),i.proxyNativeTextTracks_()),i.restoreMetadataTracksInIOSNativePlayer_(),(S.TOUCH_ENABLED||S.IS_IPHONE||S.IS_NATIVE_ANDROID)&&r.nativeControlsForTouch===!0&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return u(t,e),t.prototype.dispose=function(){var r=this;["audio","video","text"].forEach(function(e){var t=(0,L.default)(e),n=r.el_[e+"Tracks"];n&&n.removeEventListener&&(n.removeEventListener("change",r["handle"+t+"TrackChange_"]),n.removeEventListener("addtrack",r["handle"+t+"TrackAdd_"]),n.removeEventListener("removetrack",r["handle"+t+"TrackRemove_"])),n&&r.off("loadstart",r["removeOld"+t+"Tracks_"])}),t.disposeMediaElement(this.el_),e.prototype.dispose.call(this)},t.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),t=void 0,r=function(){t=[];for(var r=0;r<e.length;r++){var n=e[r];"metadata"===n.kind&&t.push({track:n,storedMode:n.mode})}};r(),e.addEventListener("change",r);var n=function r(){for(var n=0;n<t.length;n++){var i=t[n];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",r),e.removeEventListener("change",n),e.addEventListener("change",n)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",r),e.addEventListener("change",r),e.removeEventListener("change",n)})},t.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),t.disposeMediaElement(e),e=r}else{e=C.default.createElement("video");var n=this.options_.tag&&g.getElAttributes(this.options_.tag),i=(0,j.default)({},n);S.TOUCH_ENABLED&&this.options_.nativeControlsForTouch===!0||delete i.controls,g.setElAttributes(e,(0,R.assign)(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&g.setAttribute(e,"preload",this.options_.preload);for(var o=["loop","muted","playsinline","autoplay"],a=o.length-1;a>=0;a--){var s=o[a],u=this.options_[s];"undefined"!=typeof u&&(u?g.setAttribute(e,s,s):g.removeAttribute(e,s),e[s]=u)}return e},t.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,r=function(){t=!0};this.on("loadstart",r);var n=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",n),void this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",n),t||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})}},t.prototype.proxyNativeTextTracks_=function(){var e=this.el().textTracks;if(e){for(var t=0;t<e.length;t++)this.textTracks().addTrack_(e[t]);e.addEventListener&&(e.addEventListener("change",this.handleTextTrackChange_),e.addEventListener("addtrack",this.handleTextTrackAdd_),e.addEventListener("removetrack",this.handleTextTrackRemove_)),this.on("loadstart",this.removeOldTextTracks_)}},t.prototype.handleTextTrackChange=function(e){var t=this.textTracks();this.textTracks().trigger({type:"change",target:t,currentTarget:t,srcElement:t})},t.prototype.handleTextTrackAdd=function(e){this.textTracks().addTrack_(e.track)},t.prototype.handleTextTrackRemove=function(e){this.textTracks().removeTrack_(e.track)},t.prototype.removeOldTracks_=function(e,t){var r=[];if(t){for(var n=0;n<e.length;n++){for(var i=e[n],o=!1,a=0;a<t.length;a++)if(t[a]===i){o=!0;break}o||r.push(i)}for(var s=0;s<r.length;s++){var u=r[s];e.removeTrack_(u)}}},t.prototype.removeOldTextTracks_=function(e){var t=this.textTracks(),r=this.el().textTracks;this.removeOldTracks_(t,r)},t.prototype.play=function(){var e=this.el_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})},t.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){(0,T.default)(e,"Video is not ready. (Video.js)")}},t.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&S.IS_ANDROID&&S.IS_CHROME&&0===this.el_.currentTime){var t=function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},t.prototype.width=function(){return this.el_.offsetWidth},t.prototype.height=function(){return this.el_.offsetHeight},t.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},r=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",r),this.on("dispose",function(){e.off("webkitbeginfullscreen",r),e.off("webkitendfullscreen",t)})}},t.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=O.default.navigator&&O.default.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},t.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},t.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},t.prototype.src=function(e){return void 0===e?this.el_.src:void this.setSrc(e)},t.prototype.reset=function(){t.resetMediaElement(this.el_)},t.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.prototype.setControls=function(e){this.el_.controls=!!e},t.prototype.addTextTrack=function(t,r,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,r,n):e.prototype.addTextTrack.call(this,t,r,n)},t.prototype.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var r=C.default.createElement("track");return t.kind&&(r.kind=t.kind),t.label&&(r.label=t.label),(t.language||t.srclang)&&(r.srclang=t.language||t.srclang),t.default&&(r.default=t.default),t.id&&(r.id=t.id),t.src&&(r.src=t.src),r},t.prototype.addRemoteTextTrack=function(t,r){var n=e.prototype.addRemoteTextTrack.call(this,t,r);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},t.prototype.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var r=this.$$("track"),n=r.length;n--;)t!==r[n]&&t!==r[n].track||this.el().removeChild(r[n])},t.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),O.default.performance&&"function"==typeof O.default.performance.now?e.creationTime=O.default.performance.now():O.default.performance&&O.default.performance.timing&&"number"==typeof O.default.performance.timing.navigationStart&&(e.creationTime=O.default.Date.now()-O.default.performance.timing.navigationStart),e},t}(d.default);if(g.isReal()){D.TEST_VID=C.default.createElement("video");var M=C.default.createElement("track");M.kind="captions",M.srclang="en",M.label="English",D.TEST_VID.appendChild(M)}D.isSupported=function(){try{D.TEST_VID.volume=.5}catch(e){return!1}return!(!D.TEST_VID||!D.TEST_VID.canPlayType)},D.canControlVolume=function(){try{var e=D.TEST_VID.volume;return D.TEST_VID.volume=e/2+.1,e!==D.TEST_VID.volume}catch(e){return!1}},D.canControlPlaybackRate=function(){if(S.IS_ANDROID&&S.IS_CHROME&&S.CHROME_VERSION<58)return!1;try{var e=D.TEST_VID.playbackRate;return D.TEST_VID.playbackRate=e/2+.1,e!==D.TEST_VID.playbackRate}catch(e){return!1}},D.supportsNativeTextTracks=function(){return S.IS_ANY_SAFARI},D.supportsNativeVideoTracks=function(){return!(!D.TEST_VID||!D.TEST_VID.videoTracks)},D.supportsNativeAudioTracks=function(){return!(!D.TEST_VID||!D.TEST_VID.audioTracks)},D.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],D.prototype.featuresVolumeControl=D.canControlVolume(),D.prototype.featuresPlaybackRate=D.canControlPlaybackRate(),D.prototype.movingMediaElementInDOM=!S.IS_IOS,D.prototype.featuresFullscreenResize=!0,D.prototype.featuresProgressEvents=!0,D.prototype.featuresTimeupdateEvents=!0,D.prototype.featuresNativeTextTracks=D.supportsNativeTextTracks(),D.prototype.featuresNativeVideoTracks=D.supportsNativeVideoTracks(),D.prototype.featuresNativeAudioTracks=D.supportsNativeAudioTracks();var N=D.TEST_VID&&D.TEST_VID.constructor.prototype.canPlayType,F=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,B=/^video\/mp4/i;D.patchCanPlayType=function(){S.ANDROID_VERSION>=4&&!S.IS_FIREFOX?D.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&F.test(e)?"maybe":N.call(this,e)}:S.IS_OLD_ANDROID&&(D.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&B.test(e)?"maybe":N.call(this,e)})},D.unpatchCanPlayType=function(){var e=D.TEST_VID.constructor.prototype.canPlayType;return D.TEST_VID.constructor.prototype.canPlayType=N,e},D.patchCanPlayType(),D.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&!function(){try{e.load()}catch(e){}}()}},D.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),r=t.length;r--;)e.removeChild(t[r]);e.removeAttribute("src"),"function"==typeof e.load&&!function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){D.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){D.prototype["set"+(0,L.default)(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){D.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate"].forEach(function(e){D.prototype["set"+(0,L.default)(e)]=function(t){this.el_[e]=t}}),["pause","load"].forEach(function(e){D.prototype[e]=function(){return this.el_[e]()}}),d.default.withSourceHandlers(D),D.nativeSourceHandler={},D.nativeSourceHandler.canPlayType=function(e){try{return D.TEST_VID.canPlayType(e)}catch(e){return""}},D.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return D.nativeSourceHandler.canPlayType(e.type);if(e.src){var r=v.getFileExtension(e.src);return D.nativeSourceHandler.canPlayType("video/"+r)}return""},D.nativeSourceHandler.handleSource=function(e,t,r){t.setSrc(e.src)},D.nativeSourceHandler.dispose=function(){},D.registerSourceHandler(D.nativeSourceHandler),h.default.registerComponent("Html5",D),d.default.registerTech("Html5",D),r.default=D},{"../component":16,"../utils/browser.js":89,"../utils/dom.js":92,"../utils/fn.js":94,"../utils/log.js":97,"../utils/merge-options.js":98,"../utils/obj":99,"../utils/to-title-case.js":102,"../utils/url.js":103,"./tech.js":73,"global/document":4,"global/window":5,tsml:11}],72:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var s=e("../component.js"),u=n(s),l=e("./tech.js"),c=n(l),d=e("../utils/to-title-case.js"),f=n(d),h=function(e){function t(r,n,a){i(this,t);var s=o(this,e.call(this,r,n,a));if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)r.src(n.playerOptions.sources);else for(var l=0,d=n.playerOptions.techOrder;l<d.length;l++){var h=(0,f.default)(d[l]),p=c.default.getTech(h);if(h||(p=u.default.getComponent(h)),p&&p.isSupported()){r.loadTech_(h);break}}return s}return a(t,e),t}(u.default);u.default.registerComponent("MediaLoader",h),r.default=h},{"../component.js":16,"../utils/to-title-case.js":102,"./tech.js":73}],73:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=e.textTracks();i.kind=t,r&&(i.label=r),n&&(i.language=n),i.tech=e;var a=new m.default(i);return o.addTrack_(a),a}r.__esModule=!0;var l=e("../component"),c=i(l),d=e("../tracks/html-track-element"),f=i(d),h=e("../tracks/html-track-element-list"),p=i(h),g=e("../utils/merge-options.js"),y=i(g),v=e("../tracks/text-track"),m=i(v),_=e("../tracks/text-track-list"),b=i(_),T=e("../tracks/video-track-list"),E=i(T),w=e("../tracks/audio-track-list"),k=i(w),S=e("../utils/fn.js"),A=n(S),C=e("../utils/log.js"),P=i(C),O=e("../utils/time-ranges.js"),R=e("../utils/buffer.js"),x=e("../media-error.js"),j=i(x),I=e("global/window"),L=i(I),D=e("global/document"),M=i(D),N=e("../utils/obj"),F=function(t){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};o(this,r),e.reportTouchActivity=!1;var i=a(this,t.call(this,null,e,n));return i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),i.textTracks_=e.textTracks,i.videoTracks_=e.videoTracks,i.audioTracks_=e.audioTracks,i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(t){e["native"+t+"Tracks"]===!1&&(i["featuresNative"+t+"Tracks"]=!1)}),e.nativeCaptions===!1&&(i.featuresNativeTextTracks=!1),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new b.default,i.initTextTrackListeners(),i.initTrackListeners(),e.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}return s(r,t),r.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},r.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},r.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(A.bind(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},r.prototype.onDurationChange=function(e){this.duration_=this.duration()},r.prototype.buffered=function(){return(0,O.createTimeRange)(0,0)},r.prototype.bufferedPercent=function(){return(0,R.bufferedPercent)(this.buffered(),this.duration_)},r.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},r.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},r.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},r.prototype.clearTracks=function(e){var t=this;e=[].concat(e),e.forEach(function(e){for(var r=t[e+"Tracks"]()||[],n=r.length;n--;){var i=r[n];"text"===e&&t.removeRemoteTextTrack(i),r.removeTrack_(i)}})},r.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var r=e[t];this.removeRemoteTextTrack(r)}},r.prototype.reset=function(){},r.prototype.error=function(e){return void 0!==e&&(this.error_=new j.default(e),this.trigger("error")),this.error_},r.prototype.played=function(){return this.hasStarted_?(0,O.createTimeRange)(0,0):(0,O.createTimeRange)()},r.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.prototype.initTextTrackListeners=function(){var e=A.bind(this,function(){this.trigger("texttrackchange")}),t=this.textTracks();t&&(t.addEventListener("removetrack",e),t.addEventListener("addtrack",e),this.on("dispose",A.bind(this,function(){t.removeEventListener("removetrack",e),t.removeEventListener("addtrack",e)})))},r.prototype.initTrackListeners=function(){var e=this,t=["video","audio"];t.forEach(function(t){var r=function(){e.trigger(t+"trackchange")},n=e[t+"Tracks"]();n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),e.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)})})},r.prototype.addWebVttScript_=function(){var t=this;if(!L.default.WebVTT)if(M.default.body.contains(this.el())){var r=e("videojs-vtt.js");if(!this.options_["vtt.js"]&&(0,N.isPlain)(r)&&Object.keys(r).length>0)return void this.trigger("vttjsloaded");var n=M.default.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",n.onload=function(){t.trigger("vttjsloaded")},n.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){n.onload=null,n.onerror=null}),L.default.WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},r.prototype.emulateTextTracks=function(){var e=this,t=this.textTracks();if(t){var r=this.remoteTextTracks(),n=function(e){return t.addTrack_(e.track)},i=function(e){return t.removeTrack_(e.track)};r.on("addtrack",n),r.on("removetrack",i),this.addWebVttScript_();var o=function(){return e.trigger("texttrackchange")},a=function(){o();for(var e=0;e<t.length;e++){var r=t[e];r.removeEventListener("cuechange",o),"showing"===r.mode&&r.addEventListener("cuechange",o)}};a(),t.addEventListener("change",a),t.addEventListener("addtrack",a),t.addEventListener("removetrack",a),this.on("dispose",function(){r.off("addtrack",n),r.off("removetrack",i),t.removeEventListener("change",a),t.removeEventListener("addtrack",a),t.removeEventListener("removetrack",a);for(var e=0;e<t.length;e++){var s=t[e];s.removeEventListener("cuechange",o)}})}},r.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new E.default,this.videoTracks_},r.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new k.default,this.audioTracks_},r.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new b.default,this.textTracks_},r.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new b.default,this.remoteTextTracks_},r.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new p.default,this.remoteTextTrackEls_},r.prototype.addTextTrack=function(e,t,r){if(!e)throw new Error("TextTrack kind is required but was not provided");return u(this,e,t,r)},r.prototype.createRemoteTextTrack=function(e){var t=(0,y.default)(e,{tech:this});return new f.default(t)},r.prototype.addRemoteTextTrack=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],r=this.createRemoteTextTrack(e);return t!==!0&&t!==!1&&(P.default.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack_(r.track),t!==!0&&this.autoRemoteTextTracks_.addTrack_(r.track),r},r.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack_(e),this.autoRemoteTextTracks_.removeTrack_(e)},r.prototype.getVideoPlaybackQuality=function(){return{}},r.prototype.setPoster=function(){},r.prototype.playsinline=function(){},r.prototype.setPlaysinline=function(){},r.prototype.canPlayType=function(){return""},r.isTech=function(e){return e.prototype instanceof r||e instanceof r||e===r},r.registerTech=function(e,t){if(r.techs_||(r.techs_={}),!r.isTech(t))throw new Error("Tech "+e+" must be a Tech");return r.techs_[e]=t,t},r.getTech=function(e){return r.techs_&&r.techs_[e]?r.techs_[e]:L.default&&L.default.videojs&&L.default.videojs[e]?(P.default.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),L.default.videojs[e]):void 0},r}(c.default);F.prototype.textTracks_,F.prototype.audioTracks_,F.prototype.videoTracks_,F.prototype.featuresVolumeControl=!0,F.prototype.featuresFullscreenResize=!1,F.prototype.featuresPlaybackRate=!1,F.prototype.featuresProgressEvents=!1,F.prototype.featuresTimeupdateEvents=!1,F.prototype.featuresNativeTextTracks=!1,F.withSourceHandlers=function(e){e.registerSourceHandler=function(t,r){var n=e.sourceHandlers;n||(n=e.sourceHandlers=[]),void 0===r&&(r=n.length),n.splice(r,0,t)},e.canPlayType=function(t){for(var r=e.sourceHandlers||[],n=void 0,i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,r){for(var n=e.sourceHandlers||[],i=void 0,o=0;o<n.length;o++)if(i=n[o].canHandleSource(t,r))return n[o];return null},e.canPlaySource=function(t,r){var n=e.selectSourceHandler(t,r);return n?n.canHandleSource(t,r):""};var t=["seekable","duration"];t.forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},e.prototype),e.prototype.setSource=function(t){
var r=e.selectSourceHandler(t,this.options_);return r||(e.nativeSourceHandler?r=e.nativeSourceHandler:P.default.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),r!==e.nativeSourceHandler&&(this.currentSource_=t,this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",e.prototype.firstLoadStartListener_)),this.sourceHandler_=r.handleSource(t,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},e.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.successiveLoadStartListener_=function(){this.disposeSourceHandler(),this.one(this.el_,"loadstart",e.prototype.successiveLoadStartListener_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.off(this.el_,"loadstart",e.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",e.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},c.default.registerComponent("Tech",F),c.default.registerComponent("MediaTechController",F),F.registerTech("Tech",F),r.default=F},{"../component":16,"../media-error.js":57,"../tracks/audio-track-list":74,"../tracks/html-track-element":77,"../tracks/html-track-element-list":76,"../tracks/text-track":83,"../tracks/text-track-list":81,"../tracks/video-track-list":87,"../utils/buffer.js":90,"../utils/fn.js":94,"../utils/log.js":97,"../utils/merge-options.js":98,"../utils/obj":99,"../utils/time-ranges.js":101,"global/document":4,"global/window":5,"videojs-vtt.js":109}],74:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./track-list"),l=i(u),c=e("../utils/browser.js"),d=n(c),f=e("global/document"),h=i(f),p=function(e,t){for(var r=0;r<e.length;r++)t.id!==e[r].id&&(e[r].enabled=!1)},g=function(e){function t(){var r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);for(var s=void 0,u=i.length-1;u>=0;u--)if(i[u].enabled){p(i,i[u]);break}if(d.IS_IE8){s=h.default.createElement("custom");for(var c in l.default.prototype)"constructor"!==c&&(s[c]=l.default.prototype[c]);for(var f in t.prototype)"constructor"!==f&&(s[f]=t.prototype[f])}return s=r=a(this,e.call(this,i,s)),s.changing_=!1,n=s,a(r,n)}return s(t,e),t.prototype.addTrack_=function(t){var r=this;t.enabled&&p(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){r.changing_||(r.changing_=!0,p(r,t),r.changing_=!1,r.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(l.default);r.default=g},{"../utils/browser.js":89,"./track-list":85,"global/document":4}],75:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./track-enums"),l=e("./track"),c=i(l),d=e("../utils/merge-options"),f=i(d),h=e("../utils/browser.js"),p=n(h),g=function(e){function t(){var r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var s=(0,f.default)(i,{kind:u.AudioTrackKind[i.kind]||""}),l=r=a(this,e.call(this,s)),c=!1;if(p.IS_IE8)for(var d in t.prototype)"constructor"!==d&&(l[d]=t.prototype[d]);return Object.defineProperty(l,"enabled",{get:function(){return c},set:function(e){"boolean"==typeof e&&e!==c&&(c=e,this.trigger("enabledchange"))}}),s.enabled&&(l.enabled=s.enabled),l.loaded_=!0,n=l,a(r,n)}return s(t,e),t}(c.default);r.default=g},{"../utils/browser.js":89,"../utils/merge-options":98,"./track":86,"./track-enums":84}],76:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=e("../utils/browser.js"),s=i(a),u=e("global/document"),l=n(u),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e);var r=this;if(s.IS_IE8){r=l.default.createElement("custom");for(var n in e.prototype)"constructor"!==n&&(r[n]=e.prototype[n])}r.trackElements_=[],Object.defineProperty(r,"length",{get:function(){return this.trackElements_.length}});for(var i=0,a=t.length;i<a;i++)r.addTrackElement_(t[i]);if(s.IS_IE8)return r}return e.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)},e.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,r=0,n=this.trackElements_.length;r<n;r++)if(e===this.trackElements_[r].track){t=this.trackElements_[r];break}return t},e.prototype.removeTrackElement_=function(e){for(var t=0,r=this.trackElements_.length;t<r;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},e}();r.default=c},{"../utils/browser.js":89,"global/document":4}],77:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../utils/browser.js"),l=i(u),c=e("global/document"),d=n(c),f=e("../event-target"),h=n(f),p=e("../tracks/text-track"),g=n(p),y=0,v=1,m=2,_=3,b=function(e){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=a(this,e.call(this)),i=void 0,s=n;if(l.IS_IE8){s=d.default.createElement("custom");for(var u in t.prototype)"constructor"!==u&&(s[u]=t.prototype[u])}var c=new g.default(r);if(s.kind=c.kind,s.src=c.src,s.srclang=c.language,s.label=c.label,s.default=c.default,Object.defineProperty(s,"readyState",{get:function(){return i}}),Object.defineProperty(s,"track",{get:function(){return c}}),i=y,c.addEventListener("loadeddata",function(){i=m,s.trigger({type:"load",target:s})}),l.IS_IE8){var f;return f=s,a(n,f)}return n}return s(t,e),t}(h.default);b.prototype.allowedEvents_={load:"load"},b.NONE=y,b.LOADING=v,b.LOADED=m,b.ERROR=_,r.default=b},{"../event-target":53,"../tracks/text-track":83,"../utils/browser.js":89,"global/document":4}],78:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var a=e("../utils/browser.js"),s=i(a),u=e("global/document"),l=n(u),c=function(){function e(t){o(this,e);var r=this;if(s.IS_IE8){r=l.default.createElement("custom");for(var n in e.prototype)"constructor"!==n&&(r[n]=e.prototype[n])}if(e.prototype.setCues_.call(r,t),Object.defineProperty(r,"length",{get:function(){return this.length_}}),s.IS_IE8)return r}return e.prototype.setCues_=function(e){var t=this.length||0,r=0,n=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<n)for(r=t;r<n;r++)i.call(this,r)},e.prototype.getCueById=function(e){for(var t=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break}}return t},e}();r.default=c},{"../utils/browser.js":89,"global/document":4}],79:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function l(e,t,r){try{e.style[t]=r}catch(e){return}}r.__esModule=!0;var c=e("../component"),d=i(c),f=e("../utils/fn.js"),h=n(f),p=e("global/window"),g=i(p),y="#222",v="#ccc",m={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},_=function(e){function t(r,n,i){o(this,t);var s=a(this,e.call(this,r,n,i));return r.on("loadstart",h.bind(s,s.toggleDisplay)),r.on("texttrackchange",h.bind(s,s.updateDisplay)),r.ready(h.bind(s,function(){if(r.tech_&&r.tech_.featuresNativeTextTracks)return void this.hide();r.on("fullscreenchange",h.bind(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);var n={captions:1,subtitles:1},i=this.player_.textTracks(),o=void 0,a=void 0;if(i){for(var s=0;s<i.length;s++){var u=i[s];u.default&&("descriptions"!==u.kind||o?u.kind in n&&!a&&(a=u):o=u)}a?a.mode="showing":o&&(o.mode="showing")}})),s}return s(t,e),t.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.prototype.clearDisplay=function(){"function"==typeof g.default.WebVTT&&g.default.WebVTT.processCues(g.default,[],this.el_)},t.prototype.updateDisplay=function(){var e=this.player_.textTracks();if(this.clearDisplay(),e){for(var t=null,r=null,n=e.length;n--;){var i=e[n];"showing"===i.mode&&("descriptions"===i.kind?t=i:r=i)}r?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))}},t.prototype.updateForTrack=function(e){if("function"==typeof g.default.WebVTT&&e.activeCues){for(var t=this.player_.textTrackSettings.getValues(),r=[],n=0;n<e.activeCues.length;n++)r.push(e.activeCues[n]);g.default.WebVTT.processCues(g.default,r,this.el_);for(var i=r.length;i--;){var o=r[i];if(o){var a=o.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&l(a.firstChild,"color",u(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&l(a.firstChild,"backgroundColor",u(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?l(a,"backgroundColor",u(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+y+", 2px 2px 4px "+y+", 2px 2px 5px "+y:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+y+", 2px 2px "+y+", 3px 3px "+y:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+v+", 0 1px "+v+", -1px -1px "+y+", 0 -1px "+y:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+y+", 0 0 4px "+y+", 0 0 4px "+y+", 0 0 4px "+y)),t.fontPercent&&1!==t.fontPercent){var s=g.default.parseFloat(a.style.fontSize);a.style.fontSize=s*t.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=m[t.fontFamily])}}}},t}(d.default);d.default.registerComponent("TextTrackDisplay",_),r.default=_},{"../component":16,"../utils/fn.js":94,"global/window":5}],80:[function(e,t,r){"use strict";r.__esModule=!0;var n=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(t,r,n){return e[r]&&(t[r]=e[r]),t},{cues:e.cues&&Array.prototype.map.call(e.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return t},i=function(e){var t=e.$$("track"),r=Array.prototype.map.call(t,function(e){return e.track}),i=Array.prototype.map.call(t,function(e){var t=n(e.track);return e.src&&(t.src=e.src),t});return i.concat(Array.prototype.filter.call(e.textTracks(),function(e){return r.indexOf(e)===-1}).map(n))},o=function(e,t){return e.forEach(function(e){var r=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return r.addCue(e)})}),t.textTracks()};r.default={textTracksToJson:i,jsonToTextTracks:o,trackToJson_:n}},{}],81:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./track-list"),l=i(u),c=e("../utils/fn.js"),d=n(c),f=e("../utils/browser.js"),h=n(f),p=e("global/document"),g=i(p),y=function(e){function t(){var r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);var s=void 0;if(h.IS_IE8){s=g.default.createElement("custom");for(var u in l.default.prototype)"constructor"!==u&&(s[u]=l.default.prototype[u]);for(var c in t.prototype)"constructor"!==c&&(s[c]=t.prototype[c])}return s=r=a(this,e.call(this,i,s)),n=s,a(r,n)}return s(t,e),t.prototype.addTrack_=function(t){e.prototype.addTrack_.call(this,t),t.addEventListener("modechange",d.bind(this,function(){this.trigger("change")}))},t}(l.default);r.default=y},{"../utils/browser.js":89,"../utils/fn.js":94,"./track-list":85,"global/document":4}],82:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function l(e,t){var r=e.options[e.options.selectedIndex].value;return u(r,t)}function c(e,t,r){if(t)for(var n=0;n<e.options.length;n++)if(u(e.options[n].value,r)===t){e.selectedIndex=n;break}}r.__esModule=!0;var d=e("global/window"),f=i(d),h=e("../component"),p=i(h),g=e("../utils/dom"),y=e("../utils/fn"),v=n(y),m=e("../utils/obj"),_=n(m),b=e("../utils/log"),T=i(b),E="vjs-text-track-settings",w=["#000","Black"],k=["#00F","Blue"],S=["#0FF","Cyan"],A=["#0F0","Green"],C=["#F0F","Magenta"],P=["#F00","Red"],O=["#FFF","White"],R=["#FF0","Yellow"],x=["1","Opaque"],j=["0.5","Semi-Transparent"],I=["0","Transparent"],L={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[w,O,P,A,k,R,C,S]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[x,j,I]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[O,w,P,A,k,R,C,S]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[x,j]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[I,j,x]}};L.windowColor.options=L.backgroundColor.options;var D=function(e){function t(r,n){o(this,t);var i=a(this,e.call(this,r,n));return i.setDefaults(),i.hide(),i.updateDisplay=v.bind(i,i.updateDisplay),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.hide()}),i.on(i.$(".vjs-default-button"),"click",function(){i.setDefaults(),i.updateDisplay()}),_.each(L,function(e){i.on(i.$(e.selector),"change",i.updateDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return s(t,e),t.prototype.createElSelect_=function(e){var t=this,r=L[e],n=r.id.replace("%s",this.id_);return[(0,g.createEl)("label",{className:"vjs-label",textContent:r.label},{for:n}),(0,g.createEl)("select",{id:n},void 0,r.options.map(function(e){return(0,g.createEl)("option",{textContent:t.localize(e[1]),value:e[0]})}))]},t.prototype.createElFgColor_=function(){var e=(0,g.createEl)("legend",{textContent:this.localize("Text")}),t=this.createElSelect_("color"),r=(0,g.createEl)("span",{className:"vjs-text-opacity vjs-opacity"},void 0,this.createElSelect_("textOpacity"));return(0,g.createEl)("fieldset",{className:"vjs-fg-color vjs-tracksetting"},void 0,[e].concat(t,r))},t.prototype.createElBgColor_=function(){var e=(0,g.createEl)("legend",{textContent:this.localize("Background")}),t=this.createElSelect_("backgroundColor"),r=(0,g.createEl)("span",{className:"vjs-bg-opacity vjs-opacity"},void 0,this.createElSelect_("backgroundOpacity"));return(0,g.createEl)("fieldset",{className:"vjs-bg-color vjs-tracksetting"},void 0,[e].concat(t,r))},t.prototype.createElWinColor_=function(){var e=(0,g.createEl)("legend",{textContent:this.localize("Window")}),t=this.createElSelect_("windowColor"),r=(0,g.createEl)("span",{className:"vjs-window-opacity vjs-opacity"},void 0,this.createElSelect_("windowOpacity"));return(0,g.createEl)("fieldset",{className:"vjs-window-color vjs-tracksetting"},void 0,[e].concat(t,r))},t.prototype.createElColors_=function(){return(0,g.createEl)("div",{className:"vjs-tracksettings-colors"},void 0,[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()])},t.prototype.createElFont_=function(){var e=(0,g.createEl)("div",{className:"vjs-font-percent vjs-tracksetting"},void 0,this.createElSelect_("fontPercent")),t=(0,g.createEl)("div",{className:"vjs-edge-style vjs-tracksetting"},void 0,this.createElSelect_("edgeStyle")),r=(0,g.createEl)("div",{className:"vjs-font-family vjs-tracksetting"},void 0,this.createElSelect_("fontFamily"));return(0,g.createEl)("div",{className:"vjs-tracksettings-font"},void 0,[e,t,r])},t.prototype.createElControls_=function(){var e=(0,g.createEl)("button",{className:"vjs-default-button",textContent:this.localize("Defaults")}),t=(0,g.createEl)("button",{className:"vjs-done-button",textContent:"Done"});return(0,g.createEl)("div",{className:"vjs-tracksettings-controls"},void 0,[e,t])},t.prototype.createEl=function(){var e=(0,g.createEl)("div",{className:"vjs-tracksettings"},void 0,[this.createElColors_(),this.createElFont_(),this.createElControls_()]),t=(0,g.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogLabel-"+this.id_,textContent:"Caption Settings Dialog"},{"aria-level":"1",role:"heading"}),r=(0,g.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogDescription-"+this.id_,textContent:"Beginning of dialog window. Escape will cancel and close the window."}),n=(0,g.createEl)("div",void 0,{role:"document"},[t,r,e]);return(0,g.createEl)("div",{className:"vjs-caption-settings vjs-modal-overlay",tabIndex:-1},{role:"dialog","aria-labelledby":t.id,"aria-describedby":r.id},n)},t.prototype.getValues=function(){var e=this;return _.reduce(L,function(t,r,n){var i=l(e.$(r.selector),r.parser);return void 0!==i&&(t[n]=i),t},{})},t.prototype.setValues=function(e){var t=this;_.each(L,function(r,n){c(t.$(r.selector),e[n],r.parser)})},t.prototype.setDefaults=function(){var e=this;_.each(L,function(t){var r=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=r})},t.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(f.default.localStorage.getItem(E))}catch(e){T.default.warn(e)}e&&this.setValues(e)},t.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?f.default.localStorage.setItem(E,JSON.stringify(e)):f.default.localStorage.removeItem(E)}catch(e){T.default.warn(e)}}},t.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t}(p.default);p.default.registerComponent("TextTrackSettings",D),r.default=D},{"../component":16,"../utils/dom":92,"../utils/fn":94,"../utils/log":97,"../utils/obj":99,"global/window":5}],83:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./text-track-cue-list"),l=i(u),c=e("../utils/fn.js"),d=n(c),f=e("./track-enums"),h=e("../utils/log.js"),p=i(h),g=e("global/window"),y=i(g),v=e("./track.js"),m=i(v),_=e("../utils/url.js"),b=e("xhr"),T=i(b),E=e("../utils/merge-options"),w=i(E),k=e("../utils/browser.js"),S=n(k),A=function(e,t){var r=new y.default.WebVTT.Parser(y.default,y.default.vttjs,y.default.WebVTT.StringDecoder()),n=[];r.oncue=function(e){t.addCue(e)},r.onparsingerror=function(e){n.push(e)},r.onflush=function(){t.trigger({type:"loadeddata",target:t})},r.parse(e),n.length>0&&(y.default.console&&y.default.console.groupCollapsed&&y.default.console.groupCollapsed("Text Track parsing errors for "+t.src),n.forEach(function(e){return p.default.error(e)}),y.default.console&&y.default.console.groupEnd&&y.default.console.groupEnd()),r.flush()},C=function(e,t){var r={uri:e},n=(0,_.isCrossOrigin)(e);n&&(r.cors=n),(0,T.default)(r,d.bind(this,function(e,r,n){if(e)return p.default.error(e,r);if(t.loaded_=!0,"function"!=typeof y.default.WebVTT){if(t.tech_){var i=function(){return A(n,t)};t.tech_.on("vttjsloaded",i),t.tech_.on("vttjserror",function(){p.default.error("vttjs failed to load, stopping trying to process "+t.src),t.tech_.off("vttjsloaded",i)})}}else A(n,t)}))},P=function(e){function t(){var r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,t),!i.tech)throw new Error("A tech was not provided.");var s=(0,w.default)(i,{kind:f.TextTrackKind[i.kind]||"subtitles",language:i.language||i.srclang||""}),u=f.TextTrackMode[s.mode]||"disabled",c=s.default;"metadata"!==s.kind&&"chapters"!==s.kind||(u="hidden");var h=r=a(this,e.call(this,s));if(h.tech_=s.tech,S.IS_IE8)for(var p in t.prototype)"constructor"!==p&&(h[p]=t.prototype[p]);h.cues_=[],h.activeCues_=[];var g=new l.default(h.cues_),y=new l.default(h.activeCues_),v=!1,m=d.bind(h,function(){this.activeCues,v&&(this.trigger("cuechange"),v=!1)});return"disabled"!==u&&h.tech_.ready(function(){h.tech_.on("timeupdate",m)},!0),Object.defineProperty(h,"default",{get:function(){return c},set:function(){}}),Object.defineProperty(h,"mode",{get:function(){return u},set:function(e){var t=this;f.TextTrackMode[e]&&(u=e,"showing"===u&&this.tech_.ready(function(){t.tech_.on("timeupdate",m)},!0),this.trigger("modechange"))}}),Object.defineProperty(h,"cues",{get:function(){return this.loaded_?g:null},set:function(){}}),Object.defineProperty(h,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return y;for(var e=this.tech_.currentTime(),t=[],r=0,n=this.cues.length;r<n;r++){var i=this.cues[r];i.startTime<=e&&i.endTime>=e?t.push(i):i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e&&t.push(i)}if(v=!1,t.length!==this.activeCues_.length)v=!0;else for(var o=0;o<t.length;o++)this.activeCues_.indexOf(t[o])===-1&&(v=!0);return this.activeCues_=t,y.setCues_(this.activeCues_),y},set:function(){}}),s.src?(h.src=s.src,C(s.src,h)):h.loaded_=!0,n=h,a(r,n)}return s(t,e),t.prototype.addCue=function(e){var t=e;if(y.default.vttjs&&!(e instanceof y.default.vttjs.VTTCue)){t=new y.default.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(var r in e)r in t||(t[r]=e[r]);t.id=e.id,t.originalCue_=e}var n=this.tech_.textTracks();if(n)for(var i=0;i<n.length;i++)n[i]!==this&&n[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var r=this.cues_[t];if(r===e||r.originalCue_&&r.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(m.default);P.prototype.allowedEvents_={cuechange:"cuechange"},r.default=P},{"../utils/browser.js":89,"../utils/fn.js":94,"../utils/log.js":97,"../utils/merge-options":98,"../utils/url.js":103,"./text-track-cue-list":78,"./track-enums":84,"./track.js":86,"global/window":5,xhr:114}],84:[function(e,t,r){"use strict";r.__esModule=!0;r.VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},r.AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},r.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},r.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"}},{}],85:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../event-target"),l=i(u),c=e("../utils/browser.js"),d=n(c),f=e("global/document"),h=i(f),p=function(e){function t(){var r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,t);var s=a(this,e.call(this));if(!i&&(i=s,d.IS_IE8)){i=h.default.createElement("custom");for(var u in t.prototype)"constructor"!==u&&(i[u]=t.prototype[u])}i.tracks_=[],Object.defineProperty(i,"length",{get:function(){return this.tracks_.length}});for(var l=0;l<n.length;l++)i.addTrack_(n[l]);return r=i,a(s,r)}return s(t,e),t.prototype.addTrack_=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},t.prototype.removeTrack_=function(e){for(var t=void 0,r=0,n=this.length;r<n;r++)if(this[r]===e){t=this[r],t.off&&t.off(),this.tracks_.splice(r,1);break}t&&this.trigger({track:t,type:"removetrack"})},t.prototype.getTrackById=function(e){for(var t=null,r=0,n=this.length;r<n;r++){var i=this[r];if(i.id===e){t=i;break}}return t},t}(l.default);p.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"
};for(var g in p.prototype.allowedEvents_)p.prototype["on"+g]=null;r.default=p},{"../event-target":53,"../utils/browser.js":89,"global/document":4}],86:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("../utils/browser.js"),l=i(u),c=e("global/document"),d=n(c),f=e("../utils/guid.js"),h=i(f),p=e("../event-target"),g=n(p),y=function(e){function t(){var r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var i=a(this,e.call(this)),s=i;if(l.IS_IE8){s=d.default.createElement("custom");for(var u in t.prototype)"constructor"!==u&&(s[u]=t.prototype[u])}var c={id:n.id||"vjs_track_"+h.newGUID(),kind:n.kind||"",label:n.label||"",language:n.language||""},f=function(e){Object.defineProperty(s,e,{get:function(){return c[e]},set:function(){}})};for(var p in c)f(p);return r=s,a(i,r)}return s(t,e),t}(g.default);r.default=y},{"../event-target":53,"../utils/browser.js":89,"../utils/guid.js":96,"global/document":4}],87:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./track-list"),l=i(u),c=e("../utils/browser.js"),d=n(c),f=e("global/document"),h=i(f),p=function(e,t){for(var r=0;r<e.length;r++)t.id!==e[r].id&&(e[r].selected=!1)},g=function(e){function t(){var r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,t);for(var s=void 0,u=i.length-1;u>=0;u--)if(i[u].selected){p(i,i[u]);break}if(d.IS_IE8){s=h.default.createElement("custom");for(var c in l.default.prototype)"constructor"!==c&&(s[c]=l.default.prototype[c]);for(var f in t.prototype)"constructor"!==f&&(s[f]=t.prototype[f])}return s=r=a(this,e.call(this,i,s)),s.changing_=!1,Object.defineProperty(s,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n=s,a(r,n)}return s(t,e),t.prototype.addTrack_=function(t){var r=this;t.selected&&p(this,t),e.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("selectedchange",function(){r.changing_||(r.changing_=!0,p(r,t),r.changing_=!1,r.trigger("change"))})},t.prototype.addTrack=function(e){this.addTrack_(e)},t.prototype.removeTrack=function(t){e.prototype.removeTrack_.call(this,t)},t}(l.default);r.default=g},{"../utils/browser.js":89,"./track-list":85,"global/document":4}],88:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var u=e("./track-enums"),l=e("./track"),c=i(l),d=e("../utils/merge-options"),f=i(d),h=e("../utils/browser.js"),p=n(h),g=function(e){function t(){var r,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var s=(0,f.default)(i,{kind:u.VideoTrackKind[i.kind]||""}),l=r=a(this,e.call(this,s)),c=!1;if(p.IS_IE8)for(var d in t.prototype)"constructor"!==d&&(l[d]=t.prototype[d]);return Object.defineProperty(l,"selected",{get:function(){return c},set:function(e){"boolean"==typeof e&&e!==c&&(c=e,this.trigger("selectedchange"))}}),s.selected&&(l.selected=s.selected),n=l,a(r,n)}return s(t,e),t}(c.default);r.default=g},{"../utils/browser.js":89,"../utils/merge-options":98,"./track":86,"./track-enums":84}],89:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}r.__esModule=!0,r.BACKGROUND_SIZE_SUPPORTED=r.TOUCH_ENABLED=r.IS_ANY_SAFARI=r.IS_SAFARI=r.IE_VERSION=r.IS_IE8=r.CHROME_VERSION=r.IS_CHROME=r.IS_EDGE=r.IS_FIREFOX=r.IS_NATIVE_ANDROID=r.IS_OLD_ANDROID=r.ANDROID_VERSION=r.IS_ANDROID=r.IOS_VERSION=r.IS_IOS=r.IS_IPOD=r.IS_IPHONE=r.IS_IPAD=void 0;var o=e("./dom"),a=i(o),s=e("global/window"),u=n(s),l=u.default.navigator&&u.default.navigator.userAgent||"",c=/AppleWebKit\/([\d.]+)/i.exec(l),d=c?parseFloat(c.pop()):null,f=r.IS_IPAD=/iPad/i.test(l),h=r.IS_IPHONE=/iPhone/i.test(l)&&!f,p=r.IS_IPOD=/iPod/i.test(l),g=r.IS_IOS=h||f||p,y=(r.IOS_VERSION=function(){var e=l.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),r.IS_ANDROID=/Android/i.test(l)),v=r.ANDROID_VERSION=function(){var e=l.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);return t&&r?parseFloat(e[1]+"."+e[2]):t?t:null}(),m=(r.IS_OLD_ANDROID=y&&/webkit/i.test(l)&&v<2.3,r.IS_NATIVE_ANDROID=y&&v<5&&d<537,r.IS_FIREFOX=/Firefox/i.test(l),r.IS_EDGE=/Edge/i.test(l)),_=r.IS_CHROME=!m&&/Chrome/i.test(l),b=(r.CHROME_VERSION=function(){var e=l.match(/Chrome\/(\d+)/);return e&&e[1]?parseFloat(e[1]):null}(),r.IS_IE8=/MSIE\s8\.0/.test(l),r.IE_VERSION=function(){var e=/MSIE\s(\d+)\.\d/.exec(l),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(l)&&/rv:11.0/.test(l)&&(t=11),t}(),r.IS_SAFARI=/Safari/i.test(l)&&!_&&!y&&!m);r.IS_ANY_SAFARI=b||g,r.TOUCH_ENABLED=a.isReal()&&("ontouchstart"in u.default||u.default.DocumentTouch&&u.default.document instanceof u.default.DocumentTouch),r.BACKGROUND_SIZE_SUPPORTED=a.isReal()&&"backgroundSize"in u.default.document.createElement("video").style},{"./dom":92,"global/window":5}],90:[function(e,t,r){"use strict";function n(e,t){var r=0,n=void 0,o=void 0;if(!t)return 0;e&&e.length||(e=(0,i.createTimeRange)(0,0));for(var a=0;a<e.length;a++)n=e.start(a),o=e.end(a),o>t&&(o=t),r+=o-n;return r/t}r.__esModule=!0,r.bufferedPercent=n;var i=e("./time-ranges.js")},{"./time-ranges.js":101}],91:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e||!t)return"";if("function"==typeof a.default.getComputedStyle){var r=a.default.getComputedStyle(e);return r?r[t]:""}return e.currentStyle[t]||""}r.__esModule=!0,r.default=i;var o=e("global/window"),a=n(o)},{"global/window":5}],92:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e.raw=t,e}function a(e){return"string"==typeof e&&/\S/.test(e)}function s(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function u(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function l(){return B.default===G.default.document&&"undefined"!=typeof B.default.createElement}function c(e){return(0,X.isObject)(e)&&1===e.nodeType}function d(e){return function(t,r){if(!a(t))return B.default[e](null);a(r)&&(r=B.default.querySelector(r));var n=c(r)?r:B.default;return n[e]&&n[e](t)}}function f(e){return 0===e.indexOf("#")&&(e=e.slice(1)),B.default.getElementById(e)}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i=B.default.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var r=t[e];e.indexOf("aria-")!==-1||"role"===e||"type"===e?(z.default.warn((0,K.default)(N,e,r)),i.setAttribute(e,r)):"textContent"===e?p(i,r):i[e]=r}),Object.getOwnPropertyNames(r).forEach(function(e){i.setAttribute(e,r[e])}),n&&D(i,n),i}function p(e,t){return"undefined"==typeof e.textContent?e.innerText=t:e.textContent=t,e}function g(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function y(e){var t=e[J];return t||(t=e[J]=H.newGUID()),Y[t]||(Y[t]={}),Y[t]}function v(e){var t=e[J];return!!t&&!!Object.getOwnPropertyNames(Y[t]).length}function m(e){var t=e[J];if(t){delete Y[t];try{delete e[J]}catch(t){e.removeAttribute?e.removeAttribute(J):e[J]=null}}}function _(e,t){return s(t),e.classList?e.classList.contains(t):u(t).test(e.className)}function b(e,t){return e.classList?e.classList.add(t):_(e,t)||(e.className=(e.className+" "+t).trim()),e}function T(e,t){return e.classList?e.classList.remove(t):(s(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function E(e,t,r){var n=_(e,t);if("function"==typeof r&&(r=r(e,t)),"boolean"!=typeof r&&(r=!n),r!==n)return r?b(e,t):T(e,t),e}function w(e,t){Object.getOwnPropertyNames(t).forEach(function(r){var n=t[r];null===n||"undefined"==typeof n||n===!1?e.removeAttribute(r):e.setAttribute(r,n===!0?"":n)})}function k(e){var t={},r=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,i=n.length-1;i>=0;i--){var o=n[i].name,a=n[i].value;"boolean"!=typeof e[o]&&r.indexOf(","+o+",")===-1||(a=null!==a),t[o]=a}return t}function S(e,t){return e.getAttribute(t)}function A(e,t,r){e.setAttribute(t,r)}function C(e,t){e.removeAttribute(t)}function P(){B.default.body.focus(),B.default.onselectstart=function(){return!1}}function O(){B.default.onselectstart=function(){return!0}}function R(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var r=B.default.documentElement,n=B.default.body,i=r.clientLeft||n.clientLeft||0,o=G.default.pageXOffset||n.scrollLeft,a=t.left+o-i,s=r.clientTop||n.clientTop||0,u=G.default.pageYOffset||n.scrollTop,l=t.top+u-s;return{left:Math.round(a),top:Math.round(l)}}function x(e,t){var r={},n=R(e),i=e.offsetWidth,o=e.offsetHeight,a=n.top,s=n.left,u=t.pageY,l=t.pageX;return t.changedTouches&&(l=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(a-u+o)/o)),r.x=Math.max(0,Math.min(1,(l-s)/i)),r}function j(e){return(0,X.isObject)(e)&&3===e.nodeType}function I(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function L(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),c(e)||j(e)?e:"string"==typeof e&&/\S/.test(e)?B.default.createTextNode(e):void 0}).filter(function(e){return e})}function D(e,t){return L(t).forEach(function(t){return e.appendChild(t)}),e}function M(e,t){return D(I(e),t)}r.__esModule=!0,r.$$=r.$=void 0;var N=o(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);r.isReal=l,r.isEl=c,r.getEl=f,r.createEl=h,r.textContent=p,r.insertElFirst=g,r.getElData=y,r.hasElData=v,r.removeElData=m,r.hasElClass=_,r.addElClass=b,r.removeElClass=T,r.toggleElClass=E,r.setElAttributes=w,r.getElAttributes=k,r.getAttribute=S,r.setAttribute=A,r.removeAttribute=C,r.blockTextSelection=P,r.unblockTextSelection=O,r.findElPosition=R,r.getPointerPosition=x,r.isTextNode=j,r.emptyEl=I,r.normalizeContent=L,r.appendContent=D,r.insertContent=M;var F=e("global/document"),B=i(F),U=e("global/window"),G=i(U),V=e("./guid.js"),H=n(V),q=e("./log.js"),z=i(q),W=e("tsml"),K=i(W),X=e("./obj"),Y={},J="vdata"+(new Date).getTime();r.$=d("querySelector"),r.$$=d("querySelectorAll")},{"./guid.js":96,"./log.js":97,"./obj":99,"global/document":4,"global/window":5,tsml:11}],93:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e,t){var r=h.getElData(e);0===r.handlers[t].length&&(delete r.handlers[t],e.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),0===Object.getOwnPropertyNames(r).length&&h.removeElData(e)}function a(e,t,r,n){r.forEach(function(r){e(t,r,n)})}function s(e){function t(){return!0}function r(){return!1}if(!e||!e.isPropagationStopped){var n=e||_.default.event;e={};for(var i in n)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&n.preventDefault||(e[i]=n[i]));if(e.target||(e.target=e.srcElement||T.default),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){n.preventDefault&&n.preventDefault(),e.returnValue=!1,n.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){n.stopPropagation&&n.stopPropagation(),e.cancelBubble=!0,n.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=r,e.stopImmediatePropagation=function(){n.stopImmediatePropagation&&n.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=r,null!==e.clientX&&void 0!==e.clientX){var o=T.default.documentElement,a=T.default.body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}function u(e,t,r){if(Array.isArray(t))return a(u,e,t,r);var n=h.getElData(e);if(n.handlers||(n.handlers={}),n.handlers[t]||(n.handlers[t]=[]),r.guid||(r.guid=g.newGUID()),n.handlers[t].push(r),n.dispatcher||(n.disabled=!1,n.dispatcher=function(t,r){if(!n.disabled){t=s(t);var i=n.handlers[t.type];if(i)for(var o=i.slice(0),a=0,u=o.length;a<u&&!t.isImmediatePropagationStopped();a++)try{o[a].call(e,t,r)}catch(e){v.default.error(e)}}}),1===n.handlers[t].length)if(e.addEventListener){var i=!1;E&&w.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,n.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,n.dispatcher)}function l(e,t,r){if(h.hasElData(e)){var n=h.getElData(e);if(n.handlers){if(Array.isArray(t))return a(l,e,t,r);var i=function(t){n.handlers[t]=[],o(e,t)};if(t){var s=n.handlers[t];if(s){if(!r)return void i(t);if(r.guid)for(var u=0;u<s.length;u++)s[u].guid===r.guid&&s.splice(u--,1);o(e,t)}}else for(var c in n.handlers)i(c)}}}function c(e,t,r){var n=h.hasElData(e)?h.getElData(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t&&(t={type:t,target:e}),t=s(t),n.dispatcher&&n.dispatcher.call(e,t,r),i&&!t.isPropagationStopped()&&t.bubbles===!0)c.call(null,i,t,r);else if(!i&&!t.defaultPrevented){var o=h.getElData(t.target);t.target[t.type]&&(o.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaultPrevented}function d(e,t,r){if(Array.isArray(t))return a(d,e,t,r);var n=function n(){l(e,t,n),r.apply(this,arguments)};n.guid=r.guid=r.guid||g.newGUID(),u(e,t,n)}r.__esModule=!0,r.fixEvent=s,r.on=u,r.off=l,r.trigger=c,r.one=d;var f=e("./dom.js"),h=i(f),p=e("./guid.js"),g=i(p),y=e("./log.js"),v=n(y),m=e("global/window"),_=n(m),b=e("global/document"),T=n(b),E=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){E=!0}});_.default.addEventListener("test",null,e)}catch(e){}}();var w=["touchstart","touchmove"]},{"./dom.js":92,"./guid.js":96,"./log.js":97,"global/document":4,"global/window":5}],94:[function(e,t,r){"use strict";r.__esModule=!0,r.throttle=r.bind=void 0;var n=e("./guid.js");r.bind=function(e,t,r){t.guid||(t.guid=(0,n.newGUID)());var i=function(){return t.apply(e,arguments)};return i.guid=r?r+"_"+t.guid:t.guid,i},r.throttle=function(e,t){var r=Date.now(),n=function(){var n=Date.now();n-r>=t&&(e.apply(void 0,arguments),r=n)};return n}},{"./guid.js":96}],95:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;e=e<0?0:e;var r=Math.floor(e%60),n=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=n=r="-"),i=i>0||a>0?i+":":"",n=((i||o>=10)&&n<10?"0"+n:n)+":",r=r<10?"0"+r:r,i+n+r}r.__esModule=!0,r.default=n},{}],96:[function(e,t,r){"use strict";function n(){return i++}r.__esModule=!0,r.newGUID=n;var i=1},{}],97:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.logByType=void 0;var i=e("global/window"),o=n(i),a=e("./browser"),s=e("./obj"),u=void 0,l=r.logByType=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!!a.IE_VERSION&&a.IE_VERSION<11;"log"!==e&&t.unshift(e.toUpperCase()+":"),u.history.push(t),t.unshift("VIDEOJS:");var n=o.default.console&&o.default.console[e];n&&(r&&(t=t.map(function(e){if((0,s.isObject)(e)||Array.isArray(e))try{return JSON.stringify(e)}catch(t){return String(e)}return String(e)}).join(" ")),n.apply?n[Array.isArray(t)?"apply":"call"](o.default.console,t):n(t))};u=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];l("log",t)},u.history=[],u.error=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return l("error",t)},u.warn=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return l("warn",t)},r.default=u},{"./browser":89,"./obj":99,"global/window":5}],98:[function(e,t,r){"use strict";function n(){for(var e={},t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return r.forEach(function(t){t&&(0,i.each)(t,function(t,r){return(0,i.isPlain)(t)?((0,i.isPlain)(e[r])||(e[r]={}),void(e[r]=n(e[r],t))):void(e[r]=t)})}),e}r.__esModule=!0,r.default=n;var i=e("./obj")},{"./obj":99}],99:[function(e,t,r){"use strict";function n(e,t){c(e).forEach(function(r){return t(e[r],r)})}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return c(e).reduce(function(r,n){return t(r,e[n],n)},r)}function o(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[e].concat(r)):(r.forEach(function(t){t&&n(t,function(t,r){e[r]=t})}),e)}function a(e){return!!e&&"object"===("undefined"==typeof e?"undefined":u(e))}function s(e){return a(e)&&"[object Object]"===l.call(e)&&e.constructor===Object}r.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r.each=n,r.reduce=i,r.assign=o,r.isObject=a,r.isPlain=s;var l=Object.prototype.toString,c=function(e){return a(e)?Object.keys(e):[]}},{}],100:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.setTextContent=r.createStyleElement=void 0;var i=e("global/document"),o=n(i);r.createStyleElement=function(e){var t=o.default.createElement("style");return t.className=e,t},r.setTextContent=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}},{"global/document":4}],101:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){if(t<0||t>r)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is greater than or equal to the maximum bound ("+r+").")}function o(e,t,r,n){return void 0===n&&(l.default.warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),n=0),i(e,n,r.length-1),r[n][t]}function a(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:o.bind(null,"start",0,e),end:o.bind(null,"end",1,e)}}function s(e,t){return Array.isArray(e)?a(e):void 0===e||void 0===t?a():a([[e,t]])}r.__esModule=!0,r.createTimeRange=void 0,r.createTimeRanges=s;var u=e("./log.js"),l=n(u);r.createTimeRange=s},{"./log.js":97}],102:[function(e,t,r){"use strict";function n(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}r.__esModule=!0,r.default=n},{}],103:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.isCrossOrigin=r.getFileExtension=r.getAbsoluteURL=r.parseUrl=void 0;var i=e("global/document"),o=n(i),a=e("global/window"),s=n(a),u=r.parseUrl=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],r=o.default.createElement("a");r.href=e;var n=""===r.host&&"file:"!==r.protocol,i=void 0;n&&(i=o.default.createElement("div"),i.innerHTML='<a href="'+e+'"></a>',r=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),o.default.body.appendChild(i));for(var a={},s=0;s<t.length;s++)a[t[s]]=r[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),n&&o.default.body.removeChild(i),a};r.getAbsoluteURL=function(e){if(!e.match(/^https?:\/\//)){var t=o.default.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},r.getFileExtension=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,r=t.exec(e);if(r)return r.pop().toLowerCase()}return""},r.isCrossOrigin=function(e){var t=s.default.location,r=u(e),n=":"===r.protocol?t.protocol:r.protocol,i=n+r.host!==t.protocol+t.host;return i}},{"global/document":4,"global/window":5}],104:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var n=void 0;if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),o.getPlayers()[e])return t&&H.default.warn('Player "'+e+'" is already initialised. Options will not be applied.'),r&&o.getPlayers()[e].ready(r),o.getPlayers()[e];n=p.getEl(e)}else n=e;if(!n||!n.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(n.player||A.default.players[n.playerId])return n.player||A.default.players[n.playerId];t=t||{},o.hooks("beforesetup").forEach(function(e){var r=e(n,(0,R.default)(t));return!(0,W.isObject)(r)||Array.isArray(r)?void H.default.error("please return an object in beforesetup hooks"):void(t=(0,R.default)(t,r))});var i=b.default.getComponent("Player"),a=new i(n,t,r);return o.hooks("setup").forEach(function(e){return e(a)}),a}r.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=e("global/window"),u=i(s),l=e("global/document"),c=i(l),d=e("./utils/browser.js"),f=n(d),h=e("./utils/dom.js"),p=n(h),g=e("./setup"),y=n(g),v=e("./utils/stylesheet.js"),m=n(v),_=e("./component"),b=i(_),T=e("./event-target"),E=i(T),w=e("./utils/events.js"),k=n(w),S=e("./player"),A=i(S),C=e("./plugins.js"),P=i(C),O=e("./utils/merge-options.js"),R=i(O),x=e("./utils/fn.js"),j=n(x),I=e("./tracks/text-track.js"),L=i(I),D=e("./tracks/audio-track.js"),M=i(D),N=e("./tracks/video-track.js"),F=i(N),B=e("./utils/time-ranges.js"),U=e("./utils/format-time.js"),G=i(U),V=e("./utils/log.js"),H=i(V),q=e("./utils/url.js"),z=n(q),W=e("./utils/obj"),K=e("./utils/computed-style.js"),X=i(K),Y=e("./extend.js"),J=i(Y),$=e("xhr"),Q=i($),Z=e("./tech/tech.js"),ee=i(Z);if("undefined"==typeof HTMLVideoElement&&p.isReal()&&(c.default.createElement("video"),c.default.createElement("audio"),c.default.createElement("track")),o.hooks_={},o.hooks=function(e,t){return o.hooks_[e]=o.hooks_[e]||[],t&&(o.hooks_[e]=o.hooks_[e].concat(t)),o.hooks_[e]},o.hook=function(e,t){o.hooks(e,t)},o.removeHook=function(e,t){var r=o.hooks(e).indexOf(t);return!(r<=-1)&&(o.hooks_[e]=o.hooks_[e].slice(),o.hooks_[e].splice(r,1),!0)},u.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&p.isReal()){var te=p.$(".vjs-styles-defaults");if(!te){te=m.createStyleElement("vjs-styles-defaults");var re=p.$("head");re&&re.insertBefore(te,re.firstChild),m.setTextContent(te,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}y.autoSetupTimeout(1,o),o.VERSION="5.20.5",o.options=A.default.prototype.options_,o.getPlayers=function(){return A.default.players},o.players=A.default.players,o.getComponent=b.default.getComponent,o.registerComponent=function(e,t){ee.default.isTech(t)&&H.default.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),b.default.registerComponent.call(b.default,e,t)},o.getTech=ee.default.getTech,o.registerTech=ee.default.registerTech,o.browser=f,o.TOUCH_ENABLED=f.TOUCH_ENABLED,o.extend=J.default,o.mergeOptions=R.default,o.bind=j.bind,o.plugin=P.default,o.addLanguage=function(e,t){var r;return e=(""+e).toLowerCase(),o.options.languages=(0,R.default)(o.options.languages,(r={},r[e]=t,r)),o.options.languages[e]},o.log=H.default,o.createTimeRange=o.createTimeRanges=B.createTimeRanges,o.formatTime=G.default,o.parseUrl=z.parseUrl,o.isCrossOrigin=z.isCrossOrigin,o.EventTarget=E.default,o.on=k.on,o.one=k.one,o.off=k.off,o.trigger=k.trigger,o.xhr=Q.default,o.TextTrack=L.default,o.AudioTrack=M.default,o.VideoTrack=F.default,o.isEl=p.isEl,o.isTextNode=p.isTextNode,o.createEl=p.createEl,o.hasClass=p.hasElClass,o.addClass=p.addElClass,o.removeClass=p.removeElClass,o.toggleClass=p.toggleElClass,o.setAttributes=p.setElAttributes,o.getAttributes=p.getElAttributes,o.emptyEl=p.emptyEl,o.appendContent=p.appendContent,o.insertContent=p.insertContent,o.computedStyle=X.default,"function"==typeof define&&define.amd?define("videojs",[],function(){return o}):"object"===("undefined"==typeof r?"undefined":a(r))&&"object"===("undefined"==typeof t?"undefined":a(t))&&(t.exports=o),r.default=o},{"./component":16,"./event-target":53,"./extend.js":54,"./player":62,"./plugins.js":63,"./setup":67,"./tech/tech.js":73,"./tracks/audio-track.js":75,"./tracks/text-track.js":83,"./tracks/video-track.js":88,"./utils/browser.js":89,"./utils/computed-style.js":91,"./utils/dom.js":92,"./utils/events.js":93,"./utils/fn.js":94,"./utils/format-time.js":95,"./utils/log.js":97,"./utils/merge-options.js":98,"./utils/obj":99,"./utils/stylesheet.js":100,"./utils/time-ranges.js":101,"./utils/url.js":103,"global/document":4,"global/window":5,xhr:114}],105:[function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var i=e,o=t,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,r=a,n=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=n(u),c=l.default.getComponent("Component"),d=l.default.getComponent("ControlBar"),f=l.default.getComponent("Button"),h=function(e){function t(e,r){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r),this.hide(),this.initializeApi(),r.appId=e.options_.chromecast.appId,e.chromecast=this}return o(t,e),a(t,[{key:"initializeApi",value:function(){var e=void 0,t=void 0,r=void 0;if(l.default.browser.IS_CHROME&&!l.default.browser.IS_EDGE)return chrome.cast&&chrome.cast.isAvailable?(l.default.log("Cast APIs are available"),t=this.options_.appId||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,r=new chrome.cast.SessionRequest(t),e=new chrome.cast.ApiConfig(r,this.sessionJoinedListener.bind(this),this.receiverListener.bind(this)),chrome.cast.initialize(e,this.onInitSuccess.bind(this),this.castError.bind(this))):(l.default.log("Cast APIs not available"),this.tryingReconnect<10&&(this.setTimeout(this.initializeApi,1e3),++this.tryingReconnect),void l.default.log("Cast APIs not available. Max reconnect attempt"))}},{key:"castError",value:function(e){var t={code:e.code,message:e.description};switch(e.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:case chrome.cast.ErrorCode.EXTENSION_MISSING:case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:case chrome.cast.ErrorCode.INVALID_PARAMETER:case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:case chrome.cast.ErrorCode.SESSION_ERROR:case chrome.cast.ErrorCode.CHANNEL_ERROR:case chrome.cast.ErrorCode.TIMEOUT:this.addClass("error");break;case chrome.cast.ErrorCode.CANCEL:break;default:this.player_.error(t)}return l.default.log("Cast Error: "+JSON.stringify(e))}},{key:"onInitSuccess",value:function(){return this.apiInitialized=!0}},{key:"sessionJoinedListener",value:function(e){return e.media.length&&(this.apiSession=e,this.onMediaDiscovered(e.media[0])),console.log("Session joined")}},{key:"receiverListener",value:function(e){if("available"===e)return this.show()}},{key:"doLaunch",value:function(){return l.default.log("Cast video: "+this.player_.cache_.src),this.apiInitialized?chrome.cast.requestSession(this.onSessionSuccess.bind(this),this.castError.bind(this)):l.default.log("Session not initialized")}},{key:"onSessionSuccess",value:function(e){var t=void 0,r=void 0,n=void 0,i=void 0,o=void 0,a=void 0;this.apiSession=e;var s=this.player_.cache_.src,u=this.player_.currentType();if(l.default.log("Session initialized: "+e.sessionId+" source : "+s+" type : "+u),i=new chrome.cast.media.MediaInfo(s,u),i.metadata=new chrome.cast.media.GenericMediaMetadata,this.options_.metadata){o=this.options_.metadata;
for(r in o)a=o[r],i.metadata[r]=a}var c=this.player().poster();c&&(t=new chrome.cast.Image(c),i.metadata.images=[t]);var d=this.player().textTracks(),f=this.player().remoteTextTrackEls(),h=[],p=0,g=void 0,y=void 0,v=0,m=void 0;if(d){for(p=0;p<d.length;p++)y=d.tracks_[p],g=f&&f.trackElements_&&f.trackElements_[p],v++,m=new chrome.cast.media.Track(v,chrome.cast.media.TrackType.TEXT),m.trackContentId=g?g.src:"caption_"+y.language,m.subtype=chrome.cast.media.TextTrackType.CAPTIONS,m.name=y.label,m.language=y.language,m.customData=null,h.push(m);i.textTrackStyle=new chrome.cast.media.TextTrackStyle,i.textTrackStyle.foregroundColor="#FFFFFF",i.textTrackStyle.backgroundColor="#00000060",i.textTrackStyle.edgeType=chrome.cast.media.TextTrackEdgeType.DROP_SHADOW,i.textTrackStyle.windowType=chrome.cast.media.TextTrackWindowType.ROUNDED_CORNERS}try{if(d=this.player().audioTracks())for(p=0;p<d.length;p++)y=d.tracks_[p],v++,m=new chrome.cast.media.Track(v,chrome.cast.media.TrackType.AUDIO),m.subtype=null,m.name=y.label,m.language=y.language,m.customData=null,h.push(m)}catch(e){l.default.log("get player audioTracks fail"+e)}h.length&&(i.tracks=h),n=new chrome.cast.media.LoadRequest(i),n.autoplay=!0,n.currentTime=this.player_.currentTime(),this.apiSession.loadMedia(n,this.onMediaDiscovered.bind(this),this.castError.bind(this)),this.apiSession.addUpdateListener(this.onSessionUpdate.bind(this))}},{key:"onMediaDiscovered",value:function(e){this.player_.loadTech_("Chromecast",{type:"cast",apiMedia:e,apiSession:this.apiSession}),this.casting=!0,this.inactivityTimeout=this.player_.options_.inactivityTimeout,this.player_.options_.inactivityTimeout=0,this.player_.userActive(!0),this.addClass("connected"),this.removeClass("error")}},{key:"onSessionUpdate",value:function(e){if(this.player_.apiMedia)return e?void 0:this.onStopAppSuccess()}},{key:"stopCasting",value:function(){return this.apiSession.stop(this.onStopAppSuccess.bind(this),this.castError.bind(this))}},{key:"onStopAppSuccess",value:function(){this.casting=!1;var e=this.player_.currentTime();return this.removeClass("connected"),this.player_.src(this.player_.options_.sources),this.player_.paused()||this.player_.one("seeked",function(){return this.player_.play()}),this.player_.currentTime(e),this.player_.options_.inactivityTimeout=this.inactivityTimeout,this.apiSession=null}},{key:"buildCSSClass",value:function(){return"vjs-chromecast-button "+s(Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(){return s(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this),this.casting?this.stopCasting():this.doLaunch()}}]),t}(f);h.prototype.tryingReconnect=0,h.prototype.inactivityTimeout=2e3,h.prototype.controlText_="Chromecast",d.prototype.options_.children.splice(d.prototype.options_.children.length-1,0,"chromeCastButton"),c.registerComponent("ChromeCastButton",h),r.default=h,t.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],106:[function(e,t,r){(function(n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,a=i(o),s=e("./videojs-chromecast"),u=(i(s),function(e){var t=this;t.addChild("Chromecast",e)});a.default.plugin("chromecast",u),r.default=u,t.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./videojs-chromecast":108}],107:[function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var i=e,o=t,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,r=a,n=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=n(u),c=l.default.getComponent("Component"),d=l.default.getComponent("Tech"),f=function(e){function t(e,r){var n=this;i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r),this.apiMedia=this.options_.source.apiMedia,this.apiSession=this.options_.source.apiSession,this.receiver=this.apiSession.receiver.friendlyName;var o=this.onMediaStatusUpdate.bind(this),a=this.onSessionUpdate.bind(this);this.apiMedia.addUpdateListener(o),this.apiSession.addUpdateListener(a),this.on("dispose",function(){n.apiMedia.removeUpdateListener(o),n.apiSession.removeUpdateListener(a),n.onMediaStatusUpdate(),n.onSessionUpdate(!1)});var u=this.textTracks();u&&!function(){var e=n.handleTextTracksChange.bind(n);u.addEventListener("change",e),n.on("dispose",function(){u.removeEventListener("change",e)}),n.handleTextTracksChange()}();try{u=this.audioTracks(),u&&!function(){var e=n.handleAudioTracksChange.bind(n);u.addEventListener("change",e),n.on("dispose",function(){u.removeEventListener("change",e)})}()}catch(e){l.default.log("get player audioTracks fail"+e)}try{u=this.videoTracks(),u&&!function(){var e=n.handleVideoTracksChange.bind(n);u.addEventListener("change",e),n.on("dispose",function(){u.removeEventListener("change",e)})}()}catch(e){l.default.log("get player videoTracks fail"+e)}this.update(),this.triggerReady()}return o(t,e),a(t,[{key:"createEl",value:function(){var e=l.default.createEl("div",{id:this.options_.techId,className:"vjs-tech vjs-tech-chromecast"});return e}},{key:"update",value:function(){this.el_.innerHTML='<div class="casting-image" style="background-image: url(\''+this.options_.poster+'\')"></div><div class="casting-overlay"><div class="casting-information"><div class="casting-icon"></div><div class="casting-description"><small>'+this.localize("CASTING TO")+"</small><br>"+this.receiver+"</div></div></div>"}},{key:"onSessionUpdate",value:function(e){if(this.apiMedia)return e?void 0:this.onStopAppSuccess()}},{key:"onStopAppSuccess",value:function(){this.stopTrackingCurrentTime(),this.apiMedia=null}},{key:"onMediaStatusUpdate",value:function(){if(this.apiMedia)switch(this.apiMedia.playerState){case chrome.cast.media.PlayerState.BUFFERING:this.trigger("waiting");break;case chrome.cast.media.PlayerState.IDLE:this.trigger("timeupdate");break;case chrome.cast.media.PlayerState.PAUSED:this.trigger("pause"),this.paused_=!0;break;case chrome.cast.media.PlayerState.PLAYING:this.trigger("playing"),this.trigger("play"),this.paused_=!1}}},{key:"src",value:function(e){}},{key:"currentSrc",value:function(){if(this.apiMedia)return this.apiMedia.media.contentId}},{key:"handleAudioTracksChange",value:function(){var e=[],t=this.textTracks(),r=this.audioTracks();if(r){for(var n=0;n<r.length;n++){var i=r[n];i.enabled&&e.push(n+1+t.length)}return this.apiMedia&&e.length?(this.tracksInfoRequest=new chrome.cast.media.EditTracksInfoRequest(e),this.apiMedia.editTracksInfo(this.tracksInfoRequest,this.onTrackSuccess.bind(this),this.onTrackError.bind(this))):void 0}}},{key:"handleVideoTracksChange",value:function(){}},{key:"handleTextTracksChange",value:function(){var e=[],t=this.textTracks();if(t){for(var r=0;r<t.length;r++){var n=t[r];"showing"===n.mode&&e.push(r+1)}return this.apiMedia&&e.length?(this.tracksInfoRequest=new chrome.cast.media.EditTracksInfoRequest(e),this.apiMedia.editTracksInfo(this.tracksInfoRequest,this.onTrackSuccess.bind(this),this.onTrackError.bind(this))):void 0}}},{key:"onTrackSuccess",value:function(){return l.default.log("track added")}},{key:"onTrackError",value:function(e){return l.default.log("Cast track Error: "+JSON.stringify(e))}},{key:"castError",value:function(e){return l.default.log("Cast Error: "+JSON.stringify(e))}},{key:"play",value:function(){if(this.apiMedia)return this.paused_&&this.apiMedia.play(null,this.mediaCommandSuccessCallback.bind(this,"Playing: "+this.apiMedia.sessionId),this.castError.bind(this)),this.paused_=!1}},{key:"pause",value:function(){if(this.apiMedia)return this.paused_?void 0:(this.apiMedia.pause(null,this.mediaCommandSuccessCallback.bind(this,"Paused: "+this.apiMedia.sessionId),this.castError.bind(this)),this.paused_=!0)}},{key:"paused",value:function(){return this.paused_}},{key:"currentTime",value:function(){return this.apiMedia?this.apiMedia.getEstimatedTime():0}},{key:"setCurrentTime",value:function(e){if(!this.apiMedia)return 0;var t=void 0;return t=new chrome.cast.media.SeekRequest,t.currentTime=e,this.apiMedia.seek(t,this.onSeekSuccess.bind(this,e),this.castError.bind(this))}},{key:"onSeekSuccess",value:function(e){l.default.log("seek success"+e)}},{key:"volume",value:function(){return this.volume_}},{key:"duration",value:function(){return this.apiMedia?this.apiMedia.media.duration||1/0:0}},{key:"controls",value:function(){return!1}},{key:"setVolume",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],r=void 0,n=void 0;if(this.apiMedia)return n=new chrome.cast.Volume,n.level=e,n.muted=t,this.volume_=n.level,this.muted_=t,r=new chrome.cast.media.VolumeRequest,r.volume=n,this.apiMedia.setVolume(r,this.mediaCommandSuccessCallback.bind(this,"Volume changed"),this.castError.bind(this)),this.trigger("volumechange")}},{key:"mediaCommandSuccessCallback",value:function(e){l.default.log(e)}},{key:"muted",value:function(){return this.muted_}},{key:"setMuted",value:function(e){return this.setVolume(this.volume_,e)}},{key:"supportsFullScreen",value:function(){return!1}},{key:"resetSrc_",value:function(e){e()}},{key:"dispose",value:function(){this.resetSrc_(Function.prototype),s(Object.getPrototypeOf(t.prototype),"dispose",this).call(this,this)}}]),t}(d);f.prototype.paused_=!1,f.prototype.options_={},f.prototype.timerStep=1e3,f.isSupported=function(){return!0},d.withSourceHandlers(f),f.nativeSourceHandler={},f.nativeSourceHandler.canPlayType=function(e){var t=/^application\/(?:dash\+xml|(x-|vnd\.apple\.)mpegurl)/i,r=/^video\/(mpd|mp4|webm|m3u8)/i;return t.test(e)?"probably":r.test(e)?"maybe":""},f.nativeSourceHandler.canHandleSource=function(e){return e.type?f.nativeSourceHandler.canPlayType(e.type):e.src?f.nativeSourceHandler.canPlayType(e.src):""},f.nativeSourceHandler.handleSource=function(e,t){t.src(e.src)},f.nativeSourceHandler.dispose=function(){},f.registerSourceHandler(f.nativeSourceHandler),f.prototype.featuresVolumeControl=!0,f.prototype.featuresPlaybackRate=!1,f.prototype.movingMediaElementInDOM=!1,f.prototype.featuresFullscreenResize=!1,f.prototype.featuresTimeupdateEvents=!1,f.prototype.featuresProgressEvents=!1,f.prototype.featuresNativeTextTracks=!0,f.prototype.featuresNativeAudioTracks=!0,f.prototype.featuresNativeVideoTracks=!1,l.default.options.chromecast={},c.registerComponent("Chromecast",f),d.registerTech("Chromecast",f),r.default=f,t.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],108:[function(e,t,r){(function(n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(e,t,r){for(var n=!0;n;){var i=e,o=t,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,r=a,n=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof n?n.videojs:null,l=i(u),c=e("./component/control-bar/chromecast-button"),d=(i(c),e("./tech/chromecast")),f=(i(d),l.default.getComponent("Component")),h=function(e){function t(e,r){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r)}return a(t,e),t}(f);h.prototype.options_={},l.default.options.children.push("chromecast"),l.default.addLanguage("en",{"CASTING TO":"WIEDERGABE AUF"}),l.default.addLanguage("de",{"CASTING TO":"WIEDERGABE AUF"}),l.default.addLanguage("it",{"CASTING TO":"PLAYBACK SU"}),l.default.addLanguage("fr",{"CASTING TO":"CAST EN COURS SUR"});var p=window.navigator.userAgent;l.default.browser.IS_EDGE=/Edge/i.test(p),f.registerComponent("Chromecast",h),r.default=h,t.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./component/control-bar/chromecast-button":105,"./tech/chromecast":107}],109:[function(e,t,r){var n=e("global/window"),i=t.exports={WebVTT:e("./vtt.js"),VTTCue:e("./vttcue.js"),VTTRegion:e("./vttregion.js")};n.vttjs=i,n.WebVTT=i.WebVTT;var o=i.VTTCue,a=i.VTTRegion,s=n.VTTCue,u=n.VTTRegion;i.shim=function(){n.VTTCue=o,n.VTTRegion=a},i.restore=function(){n.VTTCue=s,n.VTTRegion=u},n.VTTCue||i.shim()},{"./vtt.js":110,"./vttcue.js":111,"./vttregion.js":112,"global/window":113}],110:[function(e,t,r){function n(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function i(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function o(){this.values=v(null)}function a(e,t,r,n){var i=n?e.split(n):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);if(2===a.length){var s=a[0],u=a[1];t(s,u)}}}function s(e,t,r){function s(){var t=i(e);if(null===t)throw new n(n.Errors.BadTimeStamp,"Malformed timestamp: "+c);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function u(e,t){var n=new o;a(e,function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];n.integer(e,a),n.percent(e,a)?n.set("snapToLines",!1):null,n.alt(e,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start","middle","end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start","middle","end"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical",""),t.line=n.get("line","auto"),t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align","middle"),t.position=n.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=n.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function l(){e=e.replace(/^\s+/,"")}var c=e;if(l(),t.startTime=s(),l(),"-->"!==e.substr(0,3))throw new n(n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+c);e=e.substr(3),l(),t.endTime=s(),l(),u(e,t)}function u(e,t){function r(){function e(e){return t=t.substr(e.length),e}if(!t)return null;var r=t.match(/^([^<]*)(<[^>]*>?)?/);return e(r[1]?r[1]:r[2])}function n(e){return m[e]}function o(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],n);return e}function a(e,t){return!T[t.localName]||T[t.localName]===e.localName}function s(t,r){var n=_[t];if(!n)return null;var i=e.document.createElement(n);i.localName=n;var o=b[t];return o&&r&&(i[o]=r.trim()),i}for(var u,l=e.document.createElement("div"),c=l,d=[];null!==(u=r());)if("<"!==u[0])c.appendChild(e.document.createTextNode(o(u)));else{if("/"===u[1]){d.length&&d[d.length-1]===u.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);continue}var f,h=i(u.substr(1,u.length-2));if(h){f=e.document.createProcessingInstruction("timestamp",h),c.appendChild(f);continue}var p=u.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(f=s(p[1],p[3]),!f)continue;if(!a(c,f))continue;p[2]&&(f.className=p[2].substr(1).replace("."," ")),d.push(p[1]),c.appendChild(f),c=f}return l}function l(e){for(var t=0;t<E.length;t++){var r=E[t];if(e>=r[0]&&e<=r[1])return!0}return!1}function c(e){function t(e,t){for(var r=t.childNodes.length-1;r>=0;r--)e.push(t.childNodes[r])}function r(e){if(!e||!e.length)return null;var n=e.pop(),i=n.textContent||n.innerText;if(i){var o=i.match(/^.*(\n|\r)/);return o?(e.length=0,o[0]):i}return"ruby"===n.tagName?r(e):n.childNodes?(t(e,n),r(e)):void 0}var n,i=[],o="";if(!e||!e.childNodes)return"ltr";for(t(i,e);o=r(i);)for(var a=0;a<o.length;a++)if(n=o.charCodeAt(a),l(n))return"rtl";return"ltr"}function d(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,r=t.textTrackList,n=0,i=0;i<r.length&&r[i]!==t;i++)"showing"===r[i].mode&&n++;return++n*-1}function f(){}function h(e,t,r){var n=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)";n&&(i="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),f.call(this),this.cue=t,this.cueDiv=u(e,t.text);var a={color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};n||(a.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",a.unicodeBidi="plaintext"),this.applyStyles(a,this.cueDiv),this.div=e.document.createElement("div"),a={textAlign:"middle"===t.align?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},n||(a.direction=c(this.cueDiv),a.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(a),this.div.appendChild(this.cueDiv);var s=0;switch(t.positionAlign){case"start":s=t.position;break;case"middle":s=t.position-t.size/2;break;case"end":s=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function p(e){var t,r,n,i,o=/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){r=e.div.offsetHeight,n=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||r,this.bottom=e.bottom||i+(e.height||r),this.width=e.width||n,this.lineHeight=void 0!==t?t:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function g(e,t,r,n){function i(e,t){for(var i,o=new p(e),a=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(r,t[s])||e.within(r)&&e.overlapsAny(n);)e.move(t[s]);if(e.within(r))return e;var u=e.intersectPercentage(r);a>u&&(i=new p(e),a=u),e=new p(o)}return i||o}var o=new p(t),a=t.cue,s=d(a),u=[];if(a.snapToLines){var l;switch(a.vertical){case"":u=["+y","-y"],l="height";break;case"rl":u=["+x","-x"],l="width";break;case"lr":u=["-x","+x"],l="width"}var c=o.lineHeight,f=c*Math.round(s),h=r[l]+c,g=u[0];Math.abs(f)>h&&(f=f<0?-1:1,f*=Math.ceil(h/c)*c),s<0&&(f+=""===a.vertical?r.height:r.width,u=u.reverse()),o.move(g,f)}else{var y=o.lineHeight/r.height*100;switch(a.lineAlign){case"middle":s-=y/2;break;case"end":s-=y}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}u=["+y","-x","+x","-y"],o=new p(t)}var v=i(o,u);t.move(v.toCSSCompatValues(r))}function y(){}var v=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();n.prototype=v(Error.prototype),n.prototype.constructor=n,n.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},o.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var r;return!!((r=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}};var m={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},_={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},b={v:"title",lang:"lang"},T={rt:"ruby"},E=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];f.prototype.applyStyles=function(e,t){t=t||this.div;for(var r in e)e.hasOwnProperty(r)&&(t.style[r]=e[r])},f.prototype.formatStyle=function(e,t){return 0===e?0:e+t},h.prototype=v(f.prototype),h.prototype.constructor=h,p.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},p.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},p.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},p.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},p.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},p.prototype.intersectPercentage=function(e){var t=Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left)),r=Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)),n=t*r;return n/(this.height*this.width)},p.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},p.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,n=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e;var i={left:e.left,right:e.right,top:e.top||n,height:e.height||t,bottom:e.bottom||n+(e.height||t),width:e.width||r};return i},y.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},y.convertCueToDOMTree=function(e,t){return e&&t?u(e,t):null};var w=.05,k="sans-serif",S="1.5%";y.processCues=function(e,t,r){function n(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=S,r.appendChild(i),n(t)){var o=[],a=p.getSimpleBoxPosition(i),s=Math.round(a.height*w*100)/100,u={font:s+"px "+k};!function(){for(var r,n,s=0;s<t.length;s++)n=t[s],r=new h(e,n,u),i.appendChild(r.div),g(e,r,a,o),n.displayState=r.div,o.push(p.getSimpleBoxPosition(r))}()}else for(var l=0;l<t.length;l++)i.appendChild(t[l].displayState)},y.Parser=function(e,t,r){r||(r=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]},y.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof n))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){function t(){for(var e=c.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,c.buffer=e.substr(t),r}function r(e){var t=new o;if(a(e,function(e,r){switch(e){case"id":t.set(e,r);break;case"width":t.percent(e,r);break;case"lines":t.integer(e,r);break;case"regionanchor":case"viewportanchor":var n=r.split(",");if(2!==n.length)break;var i=new o;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;t.set(e+"X",i.get("x")),t.set(e+"Y",i.get("y"));break;case"scroll":t.alt(e,r,["up"])}},/=/,/\s/),t.has("id")){var r=new(c.vttjs.VTTRegion||c.window.VTTRegion);r.width=t.get("width",100),r.lines=t.get("lines",3),r.regionAnchorX=t.get("regionanchorX",0),r.regionAnchorY=t.get("regionanchorY",100),r.viewportAnchorX=t.get("viewportanchorX",0),r.viewportAnchorY=t.get("viewportanchorY",100),r.scroll=t.get("scroll",""),c.onregion&&c.onregion(r),c.regionList.push({id:t.get("id"),region:r})}}function u(e){var t=new o;a(e,function(e,r){switch(e){case"MPEGT":t.integer(e+"S",r);break;case"LOCA":t.set(e+"L",i(r))}},/[^\d]:/,/,/),c.ontimestampmap&&c.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}function l(e){e.match(/X-TIMESTAMP-MAP/)?a(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":u(t)}},/=/):a(e,function(e,t){switch(e){case"Region":r(t)}},/:/)}var c=this;e&&(c.buffer+=c.decoder.decode(e,{stream:!0}));try{var d;if("INITIAL"===c.state){if(!/\r\n|\n/.test(c.buffer))return this;d=t();var f=d.match(/^WEBVTT([ \t].*)?$/);if(!f||!f[0])throw new n(n.Errors.BadSignature);c.state="HEADER"}for(var h=!1;c.buffer;){if(!/\r\n|\n/.test(c.buffer))return this;switch(h?h=!1:d=t(),c.state){case"HEADER":/:/.test(d)?l(d):d||(c.state="ID");continue;case"NOTE":d||(c.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(d)){c.state="NOTE";break}if(!d)continue;if(c.cue=new(c.vttjs.VTTCue||c.window.VTTCue)(0,0,""),c.state="CUE",d.indexOf("-->")===-1){c.cue.id=d;continue}case"CUE":try{s(d,c.cue,c.regionList)}catch(e){c.reportOrThrowError(e),c.cue=null,c.state="BADCUE";continue}c.state="CUETEXT";continue;case"CUETEXT":var p=d.indexOf("-->")!==-1;if(!d||p&&(h=!0)){c.oncue&&c.oncue(c.cue),c.cue=null,c.state="ID";continue}c.cue.text&&(c.cue.text+="\n"),c.cue.text+=d;continue;case"BADCUE":d||(c.state="ID");continue}}}catch(e){c.reportOrThrowError(e),"CUETEXT"===c.state&&c.cue&&c.oncue&&c.oncue(c.cue),c.cue=null,c.state="INITIAL"===c.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new n(n.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},t.exports=y},{}],111:[function(e,t,r){function n(e){if("string"!=typeof e)return!1;var t=u[e.toLowerCase()];return!!t&&e.toLowerCase()}function i(e){if("string"!=typeof e)return!1;var t=l[e.toLowerCase()];return!!t&&e.toLowerCase()}function o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function a(e,t,r){var a=this,u=/MSIE\s8\.0/.test(navigator.userAgent),l={};u?a=document.createElement("custom"):l.enumerable=!0,a.hasBeenReset=!1;var c="",d=!1,f=e,h=t,p=r,g=null,y="",v=!0,m="auto",_="start",b=50,T="middle",E=50,w="middle";if(Object.defineProperty(a,"id",o({},l,{get:function(){return c},set:function(e){c=""+e}})),Object.defineProperty(a,"pauseOnExit",o({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(a,"startTime",o({},l,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"endTime",o({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"text",o({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(a,"region",o({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"vertical",o({},l,{get:function(){return y},set:function(e){var t=n(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"snapToLines",o({},l,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(a,"line",o({},l,{get:function(){return m},set:function(e){if("number"!=typeof e&&e!==s)throw new SyntaxError("An invalid number or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"lineAlign",o({},l,{get:function(){return _},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"position",o({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"positionAlign",o({},l,{get:function(){return T},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(a,"size",o({},l,{get:function(){return E},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(a,"align",o({},l,{get:function(){return w},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),a.displayState=void 0,u)return a}var s="auto",u={"":!0,lr:!0,rl:!0},l={start:!0,middle:!0,end:!0,left:!0,right:!0};a.prototype.getCueAsHTML=function(){
return WebVTT.convertCueToDOMTree(window,this.text)},t.exports=a},{}],112:[function(e,t,r){function n(e){if("string"!=typeof e)return!1;var t=a[e.toLowerCase()];return!!t&&e.toLowerCase()}function i(e){return"number"==typeof e&&e>=0&&e<=100}function o(){var e=100,t=3,r=0,o=100,a=0,s=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!i(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!i(e))throw new Error("RegionAnchorX must be between 0 and 100.");o=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!i(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!i(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!i(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return u},set:function(e){var t=n(e);if(t===!1)throw new SyntaxError("An invalid or illegal string was specified.");u=t}}})}var a={"":!0,up:!0};t.exports=o},{}],113:[function(e,t,r){(function(e){var r;r="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],114:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<e.length;r++)t(e[r])}function i(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e,t,r){var n=e;return d(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=h(t,{uri:e}),n.callback=r,n}function a(e,t,r){return t=o(e,t,r),s(t)}function s(e){function t(){4===d.readyState&&o()}function r(){var e=void 0;if(e=d.response?d.response:d.responseText||u(d),T)try{e=JSON.parse(e)}catch(e){}return e}function n(e){return clearTimeout(g),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,l(e,c)}function o(){if(!p){var t;clearTimeout(g),t=e.useXDR&&void 0===d.status?200:1223===d.status?204:d.status;var n=c,i=null;return 0!==t?(n={body:r(),statusCode:t,method:v,headers:{},url:y,rawRequest:d},d.getAllResponseHeaders&&(n.headers=f(d.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),l(i,n,n.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var s=!1,l=function(t,r,n){s||(s=!0,e.callback(t,r,n))},c={body:void 0,headers:{},statusCode:0,method:v,url:y,rawRequest:d},d=e.xhr||null;d||(d=e.cors||e.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var h,p,g,y=d.url=e.uri||e.url,v=d.method=e.method||"GET",m=e.body||e.data||null,_=d.headers=e.headers||{},b=!!e.sync,T=!1;if("json"in e&&(T=!0,_.accept||_.Accept||(_.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),m=JSON.stringify(e.json))),d.onreadystatechange=t,d.onload=o,d.onerror=n,d.onprogress=function(){},d.ontimeout=n,d.open(v,y,!b,e.username,e.password),b||(d.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(g=setTimeout(function(){p=!0,d.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",n(e)},e.timeout)),d.setRequestHeader)for(h in _)_.hasOwnProperty(h)&&d.setRequestHeader(h,_[h]);else if(e.headers&&!i(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(d.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(d),d.send(m),d}function u(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function l(){}var c=e("global/window"),d=e("is-function"),f=e("parse-headers"),h=e("xtend");t.exports=a,a.XMLHttpRequest=c.XMLHttpRequest||l,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:c.XDomainRequest,n(["get","put","post","patch","head","delete"],function(e){a["delete"===e?"del":e]=function(t,r,n){return r=o(t,r,n),r.method=e.toUpperCase(),s(r)}})},{"global/window":5,"is-function":7,"parse-headers":8,xtend:115}],115:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)i.call(r,n)&&(e[n]=r[n])}return e}t.exports=n;var i=Object.prototype.hasOwnProperty},{}],116:[function(e,t,r){!function(){var e=function(){var e=window.navigator.userAgent.match(/Chrome\/([0-9]+)/);return e?parseInt(e[1],10):0},t=function(e){return!!document.currentScript&&(-1!=document.currentScript.src.indexOf("?"+e)||-1!=document.currentScript.src.indexOf("&"+e))},r=t("loadGamesSDK")?"/cast_game_sender.js":"/cast_sender.js",n=t("loadCastFramework")||t("loadCastApplicationFramework"),i=function(){return"function"==typeof window.__onGCastApiAvailable?window.__onGCastApiAvailable:null},o=["boadgeojelhgndaghljhdicfkmllpafd","dliochdbjfkdbacpmhlcpmleaejidimm","enhhojjnijigcajfphajepfemndkmdlo","fmfcbgogabcbclcofgocippekhfcmgfj"],a=["pkedcjkdefgpdelpbcmbmeomcjbeemfm","fjhoaacokmgbjemoflkofnenfaiekifl"],s=50<=e()?a.concat(o):o.concat(a),u=function(e,t){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&t(!0)},r.onerror=function(){t(!1)};try{r.open("GET",e,!0),r.send()}catch(e){t(!1)}},l=function(e){if(e>=s.length)f();else{var t=s[e],n="chrome-extension://"+t+r;0<=o.indexOf(t)?u(n,function(r){r?(window.chrome.cast=window.chrome.cast||{},window.chrome.cast.extensionId=t,c(n,f)):l(e+1)}):c(n,function(){l(e+1)})}},c=function(e,t,r){var n=document.createElement("script");n.onerror=t,r&&(n.onload=r),n.src=e,(document.head||document.documentElement).appendChild(n)},d=function(e){return 0<=window.navigator.userAgent.indexOf(e)},f=function(){var e=i();e&&e(!1,"No cast extension found")},h=function(){if(n){var e=2,t=i(),r=function(){e--,0==e&&t&&t(!0)};window.__onGCastApiAvailable=r,c("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js",f,r)}};e:{if(d("CriOS")){var p=window.__gCrWeb&&window.__gCrWeb.message&&window.__gCrWeb.message.invokeOnHost;if(p){h(),p({command:"cast.sender.init"});break e}}if(!window.chrome||d("Edge"))f();else if(h(),d("Android")&&d("Chrome/")&&window.navigator.presentation){var g="",y=e();55<=y?g="55":50<=y&&(g="50"),c("//www.gstatic.com/eureka/clank"+g+r,f)}else l(0)}}()},{}],117:[function(e,t,r){e("videojs-chromecast");var n=window.videojs.getTech("Chromecast").prototype;n.seeking||(n.seeking=function(){return!1}),n.ended||(n.ended=function(){return"FINISHED"===chrome.cast.media.IdleReason})},{"videojs-chromecast":106}],118:[function(e,t,r){(function(e){(function(e,t,r,n,i){var o;try{o=o||{},o.PlatformAPIs=o.PlatformAPIs||{Standard:0,Trilithium:1,AppleTV:2,Chromecast:3},o.Utils=o.Utils||function(){return{uid:function(){var e=1;return function(){return+new Date+"_"+e++}}(),filter:function(e,t){var r={};for(var n in t)t.hasOwnProperty(n)&&e(t[n])&&(r[n]=t[n]);return r},extend:function(e){var t,r=arguments.length;e=e||{};for(var n=1;n<r;n++)if(t=arguments[n])for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},getString:function(e,t){var r=String(e);return null==e?t||"na":r},getLong:function(e,t){var r=Number(e);return null==e||isNaN(r)?t||0:r},getInteger:function(e,t){var r=Number(e);return null==e||isNaN(r)?t||0:r},getBoolean:function(e,t){var r="true"==String(e).toLowerCase();return null==e?t||!1:r},isNotEmpty:function(e){return"undefined"!=typeof e&&null!=e&&"undefined"!=typeof e.length&&e.length>0},indexOf:function(e,t){var r=-1;return this.forEach(t,function(t,n){t==e&&(r=n)}),r},forEach:function(e,t,r){try{if("function"==typeof t)if(r="undefined"!=typeof r?r:null,"number"!=typeof e.length||"undefined"==typeof e[0]){var n="undefined"!=typeof e.__proto__;for(var i in e)e.hasOwnProperty(i)&&(!n||n&&"undefined"==typeof e.__proto__[i])&&"function"!=typeof e[i]&&t.call(r,e[i],i)}else for(var o=0,a=e.length;o<a;o++)t.call(r,e[o],o)}catch(e){}},regionMatches:function(e,t,r,n,i){if(t<0||n<0||t+i>e.length||n+i>r.length)return!1;for(;--i>=0;){var o=e.charAt(t++),a=r.charAt(n++);if(o!=a)return!1}return!0},size:function(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&t++;return t},log:function(e,t){if("undefined"!=typeof t&&t&&"undefined"!=typeof console&&console){var r=new Date,n=r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();console.log(n,e)}},isTrue:function(e){return"undefined"!=typeof e&&("string"==typeof e?(e=e.toLowerCase(),"true"===e||"1"===e||"on"===e):!!e)},toString:function(e){if("undefined"==typeof e)return"undefined";if("string"==typeof e)return e;if("[object Array]"===Object.prototype.toString.call(e))return e.join(",");if(this.size(e)>0){var t="";for(var r in e)e.hasOwnProperty(r)&&(t+=r+":"+e[r]+";");return t}return e.toString()},exists:function(e){return"undefined"!=typeof e&&null!=e},firstGreaterThan0:function(){for(var e=0,t=arguments.length;e<t;e++){var r=arguments[e];if(r>0)return r}return 0},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=function(){function e(){}function t(t){return"object"==typeof t?(e.prototype=t,new e):t}function r(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}function n(){this.copiedObjects=[];var e=this;this.recursiveDeepCopy=function(t){return e.deepCopy(t)},this.depth=0}function i(e,t){var r=new n;return t&&(r.maxDepth=t),r.deepCopy(e)}function o(e){return"undefined"!=typeof window&&window&&window.Node?e instanceof Node:e===document||"number"==typeof e.nodeType&&e.attributes&&e.childNodes&&e.cloneNode}var a=[];return r.prototype={constructor:r,canCopy:function(){return!1},create:function(e){},populate:function(e,t,r){}},n.prototype={constructor:n,maxDepth:256,cacheResult:function(e,t){this.copiedObjects.push([e,t])},getCachedResult:function(e){for(var t=this.copiedObjects,r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1]},deepCopy:function(e){if(null===e)return null;if("object"!=typeof e)return e;var t=this.getCachedResult(e);if(t)return t;for(var r=0;r<a.length;r++){var n=a[r];if(n.canCopy(e))return this.applyDeepCopier(n,e)}throw new Error("Unable to clone the following object "+e)},applyDeepCopier:function(e,t){var r=e.create(t);if(this.cacheResult(t,r),this.depth++,this.depth>this.maxDepth)throw new Error("Maximum recursion depth exceeded.");return e.populate(this.recursiveDeepCopy,t,r),this.depth--,r}},i.DeepCopier=r,i.deepCopiers=a,i.register=function(e){e instanceof r||(e=new r(e)),a.unshift(e)},i.register({canCopy:function(){return!0},create:function(e){return e instanceof e.constructor?t(e.constructor.prototype):{}},populate:function(e,t,r){for(var n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}}),i.register({canCopy:function(e){return e instanceof Array},create:function(e){return new e.constructor},populate:function(e,t,r){for(var n=0;n<t.length;n++)r.push(e(t[n]));return r}}),i.register({canCopy:function(e){return e instanceof Date},create:function(e){return new Date(e)}}),i.register({canCopy:function(e){return o(e)},create:function(e){return e===document?document:e.cloneNode(!1)},populate:function(e,t,r){if(t===document)return document;if(t.childNodes&&t.childNodes.length)for(var n=0;n<t.childNodes.length;n++){var i=e(t.childNodes[n]);r.appendChild(i)}}}),{deepCopy:i}}();return t.deepCopy(e)},safeGet:function(e,t){return t=this.exists(t)?t:"",this.exists(e)?e:t},getBrowserName:function(){if("undefined"==typeof navigator||!navigator.hasOwnProperty("userAgent")||!navigator.hasOwnProperty("appName"))return"";var e,t,r=navigator.userAgent,n=navigator.appName;return(t=r.indexOf("Opera"))!=-1||(t=r.indexOf("OPR/"))!=-1?n="Opera":(t=r.indexOf("Android"))!=-1?n="Android":(t=r.indexOf("Chrome"))!=-1?n="Chrome":(t=r.indexOf("Safari"))!=-1?n="Safari":(t=r.indexOf("Firefox"))!=-1?n="Firefox":(t=r.indexOf("IEMobile"))!=-1?n="Internet Explorer Mobile":"Microsoft Internet Explorer"==n||"Netscape"==n?n="Internet Explorer":(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(n=r.substring(e,t),n.toLowerCase()==n.toUpperCase()&&(n=navigator.appName)),n},getBrowserFullVersion:function(){if("undefined"==typeof navigator||!navigator.hasOwnProperty("userAgent")||!navigator.hasOwnProperty("appName")||!navigator.hasOwnProperty("appVersion"))return"";var e,t,r,n,i=navigator.userAgent,o=navigator.appName,a=""+parseFloat(navigator.appVersion);return(t=i.indexOf("Opera"))!=-1?(a=i.substring(t+6),(t=i.indexOf("Version"))!=-1&&(a=i.substring(t+8))):(t=i.indexOf("OPR/"))!=-1?a=i.substring(t+4):(t=i.indexOf("Android"))!=-1?a=i.substring(t+11):(t=i.indexOf("Chrome"))!=-1?a=i.substring(t+7):(t=i.indexOf("Safari"))!=-1?(a=i.substring(t+7),(t=i.indexOf("Version"))!=-1&&(a=i.substring(t+8))):(t=i.indexOf("Firefox"))!=-1?a=i.substring(t+8):"Microsoft Internet Explorer"==o?(n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=n.exec(i)&&(a=parseFloat(RegExp.$1))):"Netscape"==o?(n=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!=n.exec(i)&&(a=parseFloat(RegExp.$1))):i.lastIndexOf(" ")+1<(t=i.lastIndexOf("/"))&&(a=i.substring(t+1)),a=a.toString(),(r=a.indexOf(";"))!=-1&&(a=a.substring(0,r)),(r=a.indexOf(" "))!=-1&&(a=a.substring(0,r)),(r=a.indexOf(")"))!=-1&&(a=a.substring(0,r)),e=parseInt(""+a,10),isNaN(e)&&(a=""+parseFloat(navigator.appVersion)),a},browserAcceptsLargeURLs:function(){return"undefined"==typeof window||(null===window.ActiveXObject||!0)}}}(),o.StreamSense=o.StreamSense||function(){function e(e,t){var n=e||"",i="undefined",o=m.comScore||m.sitestat||function(e){var t,n,o,a,s,u="comScore=",l=_.cookie,c="",d="indexOf",f="substring",h="length",g=r.browserAcceptsLargeURLs()?k.URL_LENGTH_LIMIT:k.RESTRICTED_URL_LENGTH_LIMIT,y="&ns_",v="&",b=m.encodeURIComponent||escape;if(l[d](u)+1)for(a=0,o=l.split(";"),s=o[h];a<s;a++)n=o[a][d](u),n+1&&(c=v+unescape(o[a][f](n+u[h])));e+=y+"_t="+ +new Date+y+"c="+(_.characterSet||_.defaultCharset||"")+c,e.length>g&&e.indexOf(v)>0&&(t=e.substr(0,g-8).lastIndexOf(v),e=(e.substring(0,t)+y+"cut="+b(e.substring(t+1))).substr(0,g)),p.httpGet(e),typeof ns_p===i&&(ns_p={src:e}),ns_p.lastMeasurement=e};if(typeof t!==i){var a=[],s=m.encodeURIComponent||escape;for(var u in t)t.hasOwnProperty(u)&&a.push(s(u)+"="+s(t[u]));/[\?\&]$/.test(n)||(n+="&"),n+=a.join("&")}return o(n)}function t(e,t){for(var n,i=m.encodeURIComponent||escape,o=[],a=k.LABELS_ORDER,s=e.split("?"),u=s[0],l=s[1],c=l.split("&"),d=0,f=c.length;d<f;d++){var h=c[d].split("="),p=unescape(h[0]),g=unescape(h[1]);p&&(t[p]=g)}for(var y={},v=0,b=a.length;v<b;v++){var T=a[v];if(t.hasOwnProperty(T)){var E=t[T];"undefined"!=typeof E&&null!=E&&(y[T]=!0,o.push(i(T)+"="+i(t[T])))}}for(var w in t)if(t.hasOwnProperty(w)){if(y[w])continue;var S=t[w];"undefined"!=typeof S&&null!=S&&o.push(i(w)+"="+i(t[w]))}n=u+"?"+o.join("&"),n=n+(n.indexOf("&c8=")<0?"&c8="+i(_.title):"")+(n.indexOf("&c7=")<0?"&c7="+i(_.URL):"")+(n.indexOf("&c9=")<0?"&c9="+i(_.referrer):"");var A=r.browserAcceptsLargeURLs()?k.URL_LENGTH_LIMIT:k.RESTRICTED_URL_LENGTH_LIMIT;if(n.length>A&&n.indexOf("&")>0){var C=n.substr(0,A-8).lastIndexOf("&");n=(n.substring(0,C)+"&ns_cut="+i(n.substring(C+1))).substr(0,A)}return n}var r=o.Utils,n=function(){var e="cs_";return function(){var t="undefined"!=typeof localStorage?localStorage:{};r.extend(this,{get:function(r){return t[e+r]},set:function(r,n){t[e+r]=n},has:function(r){return e+r in t},remove:function(r){delete t[e+r]},clear:function(){for(var e in t)t.hasOwnProperty(e)&&delete t[e]}})}}(),i=function(){var e="cs_",t=function(){var t="undefined"!=typeof atv&&"undefined"!=typeof atv.localStorage&&atv.localStorage||null;r.extend(this,{get:function(r){return t&&r&&t.getItem(e+r)||null},set:function(r,n){t&&r&&(t[e+r]=n)},has:function(r){return t&&r&&null!=t.getItem(e+r)||!1},remove:function(r){t&&r&&t.removeItem(e+r)},clear:function(){}})};return t}(),a=function(e,t){if("undefined"!=typeof Image){var r=new Image;r.onload=function(){t&&t(200),r=null},r.onerror=function(){t&&t(),r=null},r.src=e}},s=function(e,t,r){"undefined"!=typeof XMLHttpRequest&&r&&"undefined"!=typeof setTimeout&&setTimeout(r,0);var n=new XMLHttpRequest;n.open("POST",e,!0),n.onreadystatechange=function(){4===n.readyState&&(r&&r(n.status),n=null)},n.send(t)},u=function(e,t,r){r&&"undefined"!=typeof setTimeout&&setTimeout(r,0)},l=function(){function e(e){var t=u+e;d[t]="",f[t]=[]}function t(e,t){var r=u+e;d[r]+=h+a(t),f[r].push(t)}function n(e,t){var n=u+e,i=f[n];i.splice(r.indexOf(t,i),1);for(var o=[],s=0,l=i.length;s<l;s++)o.push(a(i[s]));d[n]=o.join(h),delete d[c+e+t]}function i(e,t,r){d[c+e+t]=r}function o(e,t){return d[c+e+t]}var a="undefined"!=typeof encodeURIComponent?encodeURIComponent:escape,s="undefined"!=typeof decodeURIComponent?decodeURIComponent:unescape,u="cs_dir_",c="cs_file_",d="undefined"!=typeof localStorage?localStorage:{},f={},h="|";return{dir:function(e){var t=u+e,r=f[t];if(r)return r.slice();var n=d[t];if(n){n=n.split(h),r=[];for(var i=0,o=n.length;i<o;i++)n[i].length>0&&r.push(s(n[i]));return f[t]=r,r.slice()}return null},append:function(e,t,r){var n=l.read(e,t);n?n+=r:n=r,l.write(e,t,n)},write:function(n,o,a){var s=l.dir(n);s||(e(n),s=[]),r.indexOf(o,s)==-1&&t(n,o),i(n,o,a)},deleteFile:function(e,t){var i=l.dir(e);return!!i&&(r.indexOf(t,i)!=-1&&(n(e,t),!0))},read:function(e,t){var n=l.dir(e);return n?r.indexOf(t,n)==-1?null:o(e,t):null}}}(),c=function(){return{dir:function(){return null},append:function(e,t,r){},write:function(e,t,r){},deleteFile:function(){return!1},read:function(){return null}}}(),d=function(e,t){"undefined"!=typeof engine&&t&&"undefined"!=typeof setTimeout&&setTimeout(t,0);var r=engine.createHttpClient(),n=r.createRequest("GET",e,null);n.start(),t&&setTimeout(t,0)},f=function(e,t){if("undefined"!=typeof atv&&"function"==typeof atv.setTimeout){"undefined"!=typeof XMLHttpRequest&&t&&atv.setTimeout(t,0);var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){4===r.readyState&&(t&&t(r.status),r=null)},r.send()}},h=function(e,t,r){if("undefined"!=typeof atv&&"function"==typeof atv.setTimeout){"undefined"!=typeof XMLHttpRequest&&r&&atv.setTimeout(r,0);var n=new XMLHttpRequest;n.open("POST",e,!0),n.onreadystatechange=function(){4===n.readyState&&(r&&r(n.status),n=null)},n.send(t)}},p=function(){return{PLATFORM:"generic",httpGet:a,httpPost:u,Storage:n,IO:c,getCrossPublisherId:function(){return null},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return this.getDeviceName()+ +new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return""},getPlatformVersion:function(){return""},getPlatformName:function(){return"js"},getRuntimeName:function(){return""},getRuntimeVersion:function(){return""},getResolution:function(){return""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:function(){return!0},autoSelect:function(){},setPlatformAPI:function(){},isCrossPublisherIdChanged:function(){return!1},setTimeout:function(e,t,r){return setTimeout(e,t,r)},clearTimeout:function(e){return clearTimeout(e)},getDeviceArchitecture:function(){return Constants.UNKNOWN_VALUE},getConnectionType:function(){return Constants.UNKNOWN_VALUE},getDeviceJailBrokenFlag:function(){return Constants.UNKNOWN_VALUE}}}(),g=function(){function e(){return"undefined"!=typeof engine&&"undefined"!=typeof engine.stats}function t(){return r.isNotEmpty(engine.stats.device.id)?engine.stats.device.id:r.isNotEmpty(engine.stats.network.mac)?engine.stats.network.mac:null}function i(){if(null==o){var e=t();null!=e?(o=e,a="31",s=e):(o=+new Date+~~(1e3*Math.random()),a="72",s=null)}}var o=null,a=null,s=null;return{PLATFORM:"trilithium",httpGet:d,httpPost:u,Storage:n,IO:c,getCrossPublisherId:function(){return i(),s},getAppName:function(){return r.isNotEmpty(engine.stats.application.name)?engine.stats.application.name:Constants.UNKNOWN_VALUE},getAppVersion:function(){return r.isNotEmpty(engine.stats.application.version)?engine.stats.application.version:Constants.UNKNOWN_VALUE},getVisitorId:function(){return i(),o},getVisitorIdSuffix:function(){return a},getDeviceName:function(){return r.safeGet(engine.stats.device.platform,"")},getPlatformVersion:function(){return r.safeGet(engine.stats.device.version,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"trilithium"},getRuntimeVersion:function(){return""},getResolution:function(){return"undefined"!=typeof screen&&"undefined"!=typeof screen.height&&"undefined"!=typeof screen.width?screen.height+"x"+screen.width:""},getLanguage:function(){return""},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},isCompatible:e}}(),y=function(){function e(){return"undefined"==typeof window&&"undefined"!=typeof atv}function t(){null==n&&("undefined"!=typeof atv&&"undefined"!=typeof atv.device&&atv.device.idForVendor?(n=r.safeGet(atv.device.idForVendor,""),o="62"):(n=+new Date+~~(1e3*Math.random()),o="72"),a=null)}var n=null,o=null,a=null;return{PLATFORM:"atv",httpGet:f,httpPost:h,Storage:i,IO:c,getCrossPublisherId:function(){return t(),a},getAppName:function(){return Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return t(),n},getVisitorIdSuffix:function(){return o},getDeviceName:function(){return"Apple TV"},getPlatformVersion:function(){return"undefined"!=typeof atv&&"undefined"!=typeof atv.device&&r.safeGet(atv.device.softwareVersion,"")},getPlatformName:function(){return"js"},getRuntimeName:function(){return"atv"},getRuntimeVersion:function(){return"undefined"!=typeof atv&&"undefined"!=typeof atv.device&&r.safeGet(atv.device.softwareVersion,"")},getResolution:function(){return"undefined"!=typeof atv.device&&"undefined"!=typeof atv.device.screenFrame&&"undefined"!=typeof atv.device.screenFrame.height&&"undefined"!=typeof atv.device.screenFrame.width?atv.device.screenFrame.height+"x"+atv.device.screenFrame.width:""},getLanguage:function(){return"undefined"!=typeof atv&&"undefined"!=typeof atv.device&&r.safeGet(atv.device.language,"")},getPackageName:function(){return""},isConnectionAvailable:function(){return!0},setTimeout:function(e,t,r){return"undefined"!=typeof atv&&"undefined"!=typeof atv.setTimeout&&atv.setTimeout(e,t,r)},clearTimeout:function(e){return"undefined"!=typeof atv&&"undefined"!=typeof atv.clearTimeout&&atv.clearTimeout(e)},isCompatible:e}}(),v=function(){function e(){return"undefined"!=typeof window&&"undefined"!=typeof document}return{PLATFORM:"chromecast",httpGet:a,httpPost:s,Storage:n,IO:l,getCrossPublisherId:function(){return null},getAppName:function(){return"undefined"!=typeof document&&document.title||Constants.UNKNOWN_VALUE},getAppVersion:function(){return Constants.UNKNOWN_VALUE},getVisitorId:function(){return+new Date+~~(1e3*Math.random())},getVisitorIdSuffix:function(){return"72"},getDeviceName:function(){return"chromecast"},getPlatformVersion:function(){return"5"},getPlatformName:function(){return"js"},getRuntimeName:function(){return"html"},getRuntimeVersion:function(){return r.safeGet(r.getBrowserName()+" "+r.getBrowserFullVersion(),Constants.UNKNOWN_VALUE)},getResolution:function(){var e="undefined"!=typeof window&&r.exists(window.screen)&&r.exists(window.screen.availWidth)?window.screen.availWidth:0,t="undefined"!=typeof window&&r.exists(window.screen)&&r.exists(window.screen.availHeight)?window.screen.availHeight:0;return e>0&&t>0?e+"x"+t:""},getLanguage:function(){return"undefined"!=typeof window&&r.exists(window.navigator)&&r.safeGet(window.navigator.language,"")||""},getPackageName:function(){return"undefined"!=typeof castReceiverManager&&castReceiverManager.getApplicationData&&"function"==typeof castReceiverManager.getApplicationData&&castReceiverManager.getApplicationData().namespaces&&castReceiverManager.getApplicationData().namespaces[0]||""},isConnectionAvailable:function(){return"undefined"!=typeof window&&r.exists(window.navigator)&&r.safeGet(window.navigator.onLine,!0)||!0},isCompatible:e,getConnectionType:function(){return Constants.UNKNOWN_VALUE}}}();p.autoSelect=function(){g.isCompatible()?o.Utils.extend(p,g):y.isCompatible()&&o.Utils.extend(p,y)},p.setPlatformAPI=function(e){var t=!1;switch(e){case o.PlatformAPIs.Trilithium:o.Utils.extend(p,g),t=!0;break;case o.PlatformAPIs.AppleTV:o.Utils.extend(p,y),t=!0;break;case o.PlatformAPIs.Chromecast:r.extend(p,v),t=!0}t&&(p.autoSelect=function(){})};var m,_,b="undefined"!=typeof window&&"undefined"!=typeof document;b?(m=window,_=document):(m={},_={location:{href:""},title:"",URL:"",referrer:"",cookie:""});var r=r||{};r.filterMap=function(e,t){for(var n in e)e.hasOwnProperty(n)&&r.indexOf(n,t)==-1&&delete e[n]},r.getKeys=function(e,t){var r,n=[];for(r in e)(!t||t.test(r))&&e.hasOwnProperty(r)&&(n[n.length]=r);return n};var T=function(){var e=["play","pause","end","buffer","keep-alive","hb","custom","ad_play","ad_pause","ad_end","ad_click"];return{PLAY:0,PAUSE:1,END:2,BUFFER:3,KEEP_ALIVE:4,HEART_BEAT:5,CUSTOM:6,AD_PLAY:7,AD_PAUSE:8,AD_END:9,AD_CLICK:10,toString:function(t){return e[t]}}}(),E=function(){var e=[T.END,T.PLAY,T.PAUSE,T.BUFFER];return{IDLE:0,PLAYING:1,PAUSED:2,BUFFERING:3,toEventType:function(t){return e[t]}}}(),w={ADPLAY:T.AD_PLAY,ADPAUSE:T.AD_PAUSE,ADEND:T.AD_END,ADCLICK:T.AD_CLICK},k={STREAMSENSE_VERSION:"4.1505.18",DEFAULT_PLAYERNAME:"streamsense",DEFAULT_HEARTBEAT_INTERVAL:[{playingtime:6e4,interval:1e4},{playingtime:null,interval:6e4}],DEFAULT_KEEP_ALIVE_INTERVAL:12e5,DEFAULT_PAUSED_ON_BUFFERING_INTERVAL:500,C1_VALUE:"19",C10_VALUE:"js",NS_AP_C12M_VALUE:"1",NS_NC_VALUE:"1",PAGE_NAME_LABEL:"name",RESTRICTED_URL_LENGTH_LIMIT:2048,URL_LENGTH_LIMIT:4096,LABELS_ORDER:["c1","c2","ca2","cb2","cc2","cd2","ns_site","ca_ns_site","cb_ns_site","cc_ns_site","cd_ns_site","ns_vsite","ca_ns_vsite","cb_ns_vsite","cc_ns_vsite","cd_ns_vsite","ns_ap_an","ca_ns_ap_an","cb_ns_ap_an","cc_ns_ap_an","cd_ns_ap_an","ns_ap_pn","ns_ap_pv","c12","ca12","cb12","cc12","cd12","ns_ak","ns_ap_hw","name","ns_ap_ni","ns_ap_ec","ns_ap_ev","ns_ap_device","ns_ap_id","ns_ap_csf","ns_ap_bi","ns_ap_pfm","ns_ap_pfv","ns_ap_ver","ca_ns_ap_ver","cb_ns_ap_ver","cc_ns_ap_ver","cd_ns_ap_ver","ns_ap_sv","ns_ap_cv","ns_type","ca_ns_type","cb_ns_type","cc_ns_type","cd_ns_type","ns_radio","ns_nc","ns_ap_ui","ca_ns_ap_ui","cb_ns_ap_ui","cc_ns_ap_ui","cd_ns_ap_ui","ns_ap_gs","ns_st_sv","ns_st_pv","ns_st_it","ns_st_id","ns_st_ec","ns_st_sp","ns_st_sq","ns_st_cn","ns_st_ev","ns_st_po","ns_st_cl","ns_st_el","ns_st_pb","ns_st_hc","ns_st_mp","ca_ns_st_mp","cb_ns_st_mp","cc_ns_st_mp","cd_ns_st_mp","ns_st_mv","ca_ns_st_mv","cb_ns_st_mv","cc_ns_st_mv","cd_ns_st_mv","ns_st_pn","ns_st_tp","ns_st_pt","ns_st_pa","ns_st_ad","ns_st_li","ns_st_ci","ns_ap_jb","ns_ap_res","ns_ap_sd","ns_ap_po","ns_ap_ot","ns_ap_c12m","cs_c12u","ns_ap_install","ns_ap_updated","ns_ap_lastrun","ns_ap_cs","ns_ap_runs","ns_ap_usage","ns_ap_fg","ns_ap_ft","ns_ap_dft","ns_ap_bt","ns_ap_dbt","ns_ap_dit","ns_ap_as","ns_ap_das","ns_ap_it","ns_ap_uc","ns_ap_aus","ns_ap_daus","ns_ap_us","ns_ap_dus","ns_ap_ut","ns_ap_oc","ns_ap_uxc","ns_ap_uxs","ns_ap_lang","ns_ap_ar","ns_ap_miss","ns_ts","ns_st_ca","ns_st_cp","ns_st_er","ca_ns_st_er","cb_ns_st_er","cc_ns_st_er","cd_ns_st_er","ns_st_pe","ns_st_ui","ca_ns_st_ui","cb_ns_st_ui","cc_ns_st_ui","cd_ns_st_ui","ns_st_bc","ns_st_bt","ns_st_bp","ns_st_pc","ns_st_pp","ns_st_br","ns_st_ub","ns_st_vo","ns_st_ws","ns_st_pl","ns_st_pr","ns_st_ep","ns_st_ty","ns_st_ct","ns_st_cs","ns_st_ge","ns_st_st","ns_st_dt","ns_st_de","ns_st_pu","ns_st_cu","ns_st_fee","ns_ap_i1","ns_ap_i2","ns_ap_i3","ns_ap_i4","ns_ap_i5","ns_ap_i6","ns_ap_referrer","ns_clid","ns_campaign","ns_source","ns_mchannel","ns_linkname","ns_fee","gclid","utm_campaign","utm_source","utm_medium","utm_term","utm_content","c3","ca3","cb3","cc3","cd3","c4","ca4","cb4","cc4","cd4","c5","ca5","cb5","cc5","cd5","c6","ca6","cb6","cc6","cd6","c10","c11","c13","c14","c15","c16","c7","c8","c9","ns_ap_er"]},S=function(){return function(){function e(e,t){var r=t[e];null!=r&&(n[e]=r)}var t,n,i=this,o=0,a=0,s=0,u=0,l=0,c=0;r.extend(this,{reset:function(e){null!=e&&e.length>0?r.filterMap(n,e):n={},n.hasOwnProperty("ns_st_cl")||(n.ns_st_cl="0"),n.hasOwnProperty("ns_st_pn")||(n.ns_st_pn="1"),n.hasOwnProperty("ns_st_tp")||(n.ns_st_tp="1"),i.setPauses(0),i.setStarts(0),i.setBufferingTime(0),i.setBufferingTimestamp(-1),i.setPlaybackTime(0),i.setPlaybackTimestamp(-1)},setLabels:function(e,t){null!=e&&r.extend(n,e),i.setRegisters(n,t)},getLabels:function(){return n},setLabel:function(e,t){var r={};r[e]=t,i.setLabels(r,null)},getLabel:function(e){return n[e]},getClipId:function(){return("undefined"==typeof t||null==t)&&i.setClipId("1"),t},setClipId:function(e){t=e},setRegisters:function(t,r){var n=t.ns_st_cn;null!=n&&(i.setClipId(n),delete t.ns_st_cn),n=t.ns_st_bt,null!=n&&(s=Number(n),delete t.ns_st_bt),e("ns_st_cl",t),e("ns_st_pn",t),e("ns_st_tp",t),e("ns_st_ub",t),e("ns_st_br",t),r!=E.PLAYING&&null!=r||(n=t.ns_st_sq,null!=n&&(a=Number(n),delete t.ns_st_sq)),r!=E.BUFFERING&&(n=t.ns_st_pt,null!=n&&(l=Number(n),delete t.ns_st_pt)),r!=E.PAUSED&&r!=E.IDLE&&null!=r||(n=t.ns_st_pc,null!=n&&(o=Number(n),delete t.ns_st_pc))},createLabels:function(e,t){var n=t||{};return n.ns_st_cn=i.getClipId(),n.ns_st_bt=String(i.getBufferingTime()),e!=T.PLAY&&null!=e||(n.ns_st_sq=String(a)),e!=T.PAUSE&&e!=T.END&&e!=T.KEEP_ALIVE&&e!=T.HEART_BEAT&&null!=e||(n.ns_st_pt=String(i.getPlaybackTime()),n.ns_st_pc=String(o)),r.extend(n,i.getLabels()),n},incrementPauses:function(){o++},incrementStarts:function(){a++},getBufferingTime:function(){var e=s;return u>=0&&(e+=+new Date-u),e},setBufferingTime:function(e){s=e},getPlaybackTime:function(){var e=l;return c>=0&&(e+=+new Date-c),e},setPlaybackTime:function(e){l=e},getPlaybackTimestamp:function(){return c},setPlaybackTimestamp:function(e){c=e},getBufferingTimestamp:function(){return u},setBufferingTimestamp:function(e){u=e},getPauses:function(){return o},setPauses:function(e){o=e},getStarts:function(){return a},setStarts:function(e){a=e}}),n={},i.reset()}}(),A=function(){return function(){var e,t,n=this,i=null,o=0,a=0,s=0,u=0,l=0,c=0,d=!1;r.extend(this,{reset:function(e){null!=e&&e.length>0?r.filterMap(t,e):t={},n.setPlaylistId(+new Date+"_"+c),n.setBufferingTime(0),n.setPlaybackTime(0),n.setPauses(0),n.setStarts(0),n.setRebufferCount(0),d=!1},setLabels:function(e,i){null!=e&&r.extend(t,e),n.setRegisters(t,i)},getLabels:function(){return t},setLabel:function(e,t){var r={};r[e]=t,n.setLabels(r,null)},getLabel:function(e){return t[e]},getClip:function(){return i},getPlaylistId:function(){return e},setPlaylistId:function(t){e=t},setRegisters:function(t,r){var n=t.ns_st_sp;null!=n&&(o=Number(n),delete t.ns_st_sp),n=t.ns_st_bc,null!=n&&(s=Number(n),delete t.ns_st_bc),n=t.ns_st_bp,null!=n&&(u=Number(n),delete t.ns_st_bp),n=t.ns_st_id,null!=n&&(e=n,delete t.ns_st_id),r!=E.BUFFERING&&(n=t.ns_st_pa,null!=n&&(l=Number(n),delete t.ns_st_pa)),r!=E.PAUSED&&r!=E.IDLE&&null!=r||(n=t.ns_st_pp,null!=n&&(a=Number(n),delete t.ns_st_pp))},createLabels:function(t,i){var u=i||{};return u.ns_st_bp=String(n.getBufferingTime()),u.ns_st_sp=String(o),u.ns_st_id=String(e),s>0&&(u.ns_st_bc=String(s)),t!=T.PAUSE&&t!=T.END&&t!=T.KEEP_ALIVE&&t!=T.HEART_BEAT&&null!=t||(u.ns_st_pa=String(n.getPlaybackTime()),u.ns_st_pp=String(a)),t!=T.PLAY&&null!=t||n.didFirstPlayOccurred()||(u.ns_st_pb="1",n.setFirstPlayOccurred(!0)),r.extend(u,n.getLabels()),u},incrementStarts:function(){o++},incrementPauses:function(){a++,i.incrementPauses()},setPlaylistCounter:function(e){c=e},incrementPlaylistCounter:function(){c++},addPlaybackTime:function(e){if(i.getPlaybackTimestamp()>=0){var t=e-i.getPlaybackTimestamp();i.setPlaybackTimestamp(-1),i.setPlaybackTime(i.getPlaybackTime()+t),
n.setPlaybackTime(n.getPlaybackTime()+t)}},addBufferingTime:function(e){if(i.getBufferingTimestamp()>=0){var t=e-i.getBufferingTimestamp();i.setBufferingTimestamp(-1),i.setBufferingTime(i.getBufferingTime()+t),n.setBufferingTime(n.getBufferingTime()+t)}},getBufferingTime:function(){var e=u;return i.getBufferingTimestamp()>=0&&(e+=+new Date-i.getBufferingTimestamp()),e},setBufferingTime:function(e){u=e},getPlaybackTime:function(){var e=l;return i.getPlaybackTimestamp()>=0&&(e+=+new Date-i.getPlaybackTimestamp()),e},setPlaybackTime:function(e){l=e},getStarts:function(){return o},setStarts:function(e){o=e},getPauses:function(){return a},setPauses:function(e){a=e},getRebufferCount:function(){return s},incrementRebufferCount:function(){s++},setRebufferCount:function(e){s=e},didFirstPlayOccurred:function(){return d},setFirstPlayOccurred:function(e){d=e}}),i=new S,t={},n.reset()}}(),C=function(){var n=function(n,i,a){function s(e){var t=0;if(null!=he)for(var r=0;r<he.length;r++){var n=he[r],i=n.playingtime;if(!i||e<i){t=n.interval;break}}return t}function u(){f();var e=s(de.getClip().getPlaybackTime());if(e>0){var t=ye>0?ye:e;Z=p.setTimeout(d,t)}ye=0}function l(){f();var e=s(de.getClip().getPlaybackTime());ye=e-de.getClip().getPlaybackTime()%e,null!=Z&&f()}function c(){ye=0,me=0,ve=0}function d(){ve++;var e=G(T.HEART_BEAT,null);O(e),ye=0,u()}function f(){null!=Z&&(p.clearTimeout(Z),Z=null)}function h(){y(),Q=p.setTimeout(g,pe)}function g(){var e=G(T.KEEP_ALIVE,null);O(e),ce++,h()}function y(){null!=Q&&(p.clearTimeout(Q),Q=null)}function v(){_(),oe.isPauseOnBufferingEnabled()&&L(E.PAUSED)&&($=p.setTimeout(m,ge))}function m(){if(ee==E.PLAYING){de.incrementRebufferCount(),de.incrementPauses();var e=G(T.PAUSE,null);O(e),ce++,ee=E.PAUSED}}function _(){null!=$&&(p.clearTimeout($),$=null)}function b(e){return e==E.PLAYING||e==E.PAUSED}function w(){K&&(p.clearTimeout(K),K=null)}function S(e){return e==T.PLAY?E.PLAYING:e==T.PAUSE?E.PAUSED:e==T.BUFFER?E.BUFFERING:e==T.END?E.IDLE:null}function C(e,t,n){if(w(),n)K=p.setTimeout(function(e,t){return function(){C(e,t)}}(e,t),n);else if(N(e)){var i=B(),o=ue,a=M(t),s=o>=0?a-o:0;j(B(),t),I(e,t),U(B()),F(e);for(var u=0,l=ie.length;u<l;u++)ie[u](i,e,t,s);P(t),de.setRegisters(t,e),de.getClip().setRegisters(t,e);var c=G(E.toEventType(e),t);r.extend(c,t),L(Y)&&(O(c),ee=Y,ce++)}}function P(e){var t=e.ns_st_mp;null!=t&&(te=t,delete e.ns_st_mp),t=e.ns_st_mv,null!=t&&(re=t,delete e.ns_st_mv),t=e.ns_st_ec,null!=t&&(ce=Number(t),delete e.ns_st_ec)}function O(e,r){void 0===r&&(r=!0),r&&x(e);var n=oe.getPixelURL();if(J){if(!R()){var i=be.am,o=be.et,a=i.newApplicationMeasurement(J,o.HIDDEN,e,n);J.getQueue().offer(a)}}else n&&p.httpGet(t(n,e))}function R(){var e=J.getAppContext(),t=J.getSalt(),r=J.getPixelURL();return null==e||null==t||0==t.length||null==r||0==r.length}function x(e){ne=G(null),r.extend(ne,e)}function j(e,t){var n=M(t);if(e==E.PLAYING)de.addPlaybackTime(n),l(),y();else if(e==E.BUFFERING)de.addBufferingTime(n),_();else if(e==E.IDLE){var i=r.getKeys(de.getClip().getLabels());de.getClip().reset(i)}}function I(e,t){var r=M(t);le=D(t),e==E.PLAYING?(u(),h(),de.getClip().setPlaybackTimestamp(r),L(e)&&(de.getClip().incrementStarts(),de.getStarts()<1&&de.setStarts(1))):e==E.PAUSED?L(e)&&de.incrementPauses():e==E.BUFFERING?(de.getClip().setBufferingTimestamp(r),fe&&v()):e==E.IDLE&&c()}function L(e){return(e!=E.PAUSED&&e!=E.IDLE||ee!=E.IDLE&&null!=ee)&&(e!=E.BUFFERING&&ee!=e)}function D(e){var t=-1;return e.hasOwnProperty("ns_st_po")&&(t=r.getInteger(e.ns_st_po)),t}function M(e){var t=-1;return e.hasOwnProperty("ns_ts")&&(t=Number(e.ns_ts)),t}function N(e){return null!=e&&B()!=e}function F(e){Y=e,ue=+new Date}function B(){return Y}function U(e){X=e}function G(){var e,t;1==arguments.length?(e=E.toEventType(Y),t=arguments[0]):(e=arguments[0],t=arguments[1]);var n={};if("undefined"!=typeof document){var i=document;n.c7=i.URL,n.c8=i.title,n.c9=i.referrer}return null!=t&&r.extend(n,t),n.hasOwnProperty("ns_ts")||(n.ns_ts=String(+new Date)),null!=e&&!n.hasOwnProperty("ns_st_ev")&&(n.ns_st_ev=T.toString(e)),r.extend(n,oe.getLabels()),V(e,n),de.createLabels(e,n),de.getClip().createLabels(e,n),n.hasOwnProperty("ns_st_mp")||(n.ns_st_mp=te),n.hasOwnProperty("ns_st_mv")||(n.ns_st_mv=re),n.hasOwnProperty("ns_st_ub")||(n.ns_st_ub="0"),n.hasOwnProperty("ns_st_br")||(n.ns_st_br="0"),n.hasOwnProperty("ns_st_pn")||(n.ns_st_pn="1"),n.hasOwnProperty("ns_st_tp")||(n.ns_st_tp="1"),n.hasOwnProperty("ns_st_it")||(n.ns_st_it="c"),n.ns_st_sv=k.STREAMSENSE_VERSION,n.ns_type="hidden",n}function V(e,t){var n=t||{};if(n.ns_st_ec=String(ce),!n.hasOwnProperty("ns_st_po")){var i=le,o=M(n);(e==T.PLAY||e==T.KEEP_ALIVE||e==T.HEART_BEAT||null==e&&Y==E.PLAYING)&&(i+=o-de.getClip().getPlaybackTimestamp()),n.ns_st_po=r.getInteger(i)}return e==T.HEART_BEAT&&(n.ns_st_hc=String(ve)),n}function H(e){var t=M(e);t<0&&(e.ns_ts=String(+new Date))}function q(e,t,r){t=t||{},t.ns_st_ad=1,e>=T.AD_PLAY&&e<=T.AD_CLICK&&oe.notify(e,t,r)}function z(e,t){oe.notify(T.CUSTOM,e,t)}var W,K,X,Y,J,$,Q,Z,ee,te,re,ne,ie,oe=this,ae=500,se=null,ue=0,le=0,ce=0,de=null,fe=!0,he=k.DEFAULT_HEARTBEAT_INTERVAL,pe=k.DEFAULT_KEEP_ALIVE_INTERVAL,ge=k.DEFAULT_PAUSED_ON_BUFFERING_INTERVAL,ye=0,ve=0,me=0,_e=!1,be={};a?p.setPlatformAPI(a):p.autoSelect(),r.extend(this,{reset:function(e){de.reset(e),de.setPlaylistCounter(0),de.setPlaylistId(+new Date+"_1"),de.getClip().reset(e),null==e||e.isEmpty()?W={}:r.filterMap(W,e),ce=1,ve=0,l(),c(),y(),_(),w(),Y=E.IDLE,X=null,ue=-1,ee=null,te=k.DEFAULT_PLAYERNAME,re=k.STREAMSENSE_VERSION,ne=null},setPauseOnBufferingInterval:function(e){ge=e},getPauseOnBufferingInterval:function(){return ge},setKeepAliveInterval:function(e){pe=e},getKeepAliveInterval:function(){return pe},setHeartbeatIntervals:function(e){he=e},notify:function(){var e,t,n,i;if(t=arguments[0],3==arguments.length?(n=arguments[1],i=arguments[2]):(n={},i=arguments[1]),T.toString(t)){e=S(t);var o=r.extend({},n);if(H(o),o.hasOwnProperty("ns_st_po")||(o.ns_st_po=r.getInteger(i).toString()),t==T.PLAY||t==T.PAUSE||t==T.BUFFER||t==T.END)oe.isThrottlingEnabled()&&b(Y)&&b(e)&&(Y!=E.PLAYING||e!=E.PAUSED||K)?C(e,o,ae):C(e,o);else{var a=G(t,o);r.extend(a,o),O(a,!1),ce++}}},getLabels:function(){return W},getState:function(){return Y},setLabels:function(e){for(var t in e)e.hasOwnProperty(t)&&oe.setLabel(t,e[t])},getLabel:function(e){return W[e]},setLabel:function(e,t){null==t?delete W[e]:W[e]=t},setPixelURL:function(e){if(null==e||0==e.length)return null;var t=decodeURIComponent||unescape,r=e.indexOf("?");if(r>=0){if(r<e.length-1){for(var n=e.substring(r+1).split("&"),i=0,o=n.length;i<o;i++){var a=n[i],s=a.split("=");2==s.length?oe.setLabel(s[0],t(s[1])):1==s.length&&oe.setLabel(k.PAGE_NAME_LABEL,t(s[0]))}e=e.substring(0,r+1)}}else e+="?";return se=e},getPixelURL:function(){return se?se:"undefined"!=typeof ns_p&&"string"==typeof ns_p.src?se=ns_p.src.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):"string"==typeof ns_pixelUrl?se=ns_pixelUrl.replace(/&amp;/,"&").replace(/&ns__t=\d+/,""):null},isPauseOnBufferingEnabled:function(){return fe},setPauseOnBufferingEnabled:function(e){fe=e},isThrottlingEnabled:function(){return _e},setThrottlingEnabled:function(e){_e=e},setThrottlingDelay:function(e){e&&e>0&&(ae=e)},getThrottlingDelay:function(){return ae},setClip:function(e,t){var r=!1;return Y==E.IDLE&&(de.getClip().reset(),de.getClip().setLabels(e,null),t&&de.incrementStarts(),r=!0),r},setPlaylist:function(e){var t=!1;return Y==E.IDLE&&(de.incrementPlaylistCounter(),de.reset(),de.getClip().reset(),de.setLabels(e,null),t=!0),t},importState:function(e){reset();var t=r.extend({},e);de.setRegisters(t,null),de.getClip().setRegisters(t,null),P(t),ce++},exportState:function(){return ne},getVersion:function(){return k.STREAMSENSE_VERSION},addListener:function(e){ie.push(e)},removeListener:function(e){ie.splice(r.indexOf(e,ie),1)},getClip:function(){return de.getClip()},getPlaylist:function(){return de},setHttpGet:function(e){"function"==typeof e&&(p.httpGet=e)},setHttpPost:function(e){"function"==typeof e&&(p.httpPost=e)}}),r.extend(this,{adNotify:q,customNotify:z,viewNotify:function(t,r){t=t||oe.getPixelURL(),t&&e(t,r)}}),o.comScore&&(be=o.comScore.exports,J=be.c()),W={},ce=1,Y=E.IDLE,de=new A,$=null,fe=!0,Z=null,ve=0,c(),Q=null,K=null,_e=!1,ee=null,le=0,ie=[],oe.reset(),n&&oe.setLabels(n),i&&oe.setPixelURL(i)};return function(e){function t(e,t){return w[S]||i(e,t)}function n(){S=-1;for(var e=0;e<=k;e++)if(w.hasOwnProperty(String(e))){S=e;break}return o.StreamSense.activeIndex=S,S}function i(e,t){return e=e||null,t=t||null,e&&"object"==typeof e&&(t=e,e=null),w[++k]=new o.StreamSense(t,e),n(),w[k]}function a(){var e=!1,t=S;if("number"==typeof arguments[0]&&isFinite(arguments[0]))t=arguments[0];else if(arguments[0]instanceof o.StreamSense)for(var r in w)if(w.hasOwnProperty(r)&&w[r]===arguments[0]){t=r;break}return w.hasOwnProperty(String(t))&&(e=w[t],delete w[t],e.reset(),n()),e}function s(e){return e=e||{},t().setPlaylist(e),t().getPlaylist()}function u(e,r,n){return e=e||{},"number"==typeof r&&(e.ns_st_cn=r),t().setClip(e,n),t().getClip()}function l(e,r,n){return"undefined"!=typeof e&&(n=n||null,r=r||{},t().notify(e,r,n))}function c(e){"undefined"!=typeof e&&t().setLabels(e)}function d(){return t().getLabels()}function f(e){"undefined"!=typeof e&&t().getPlaylist().setLabels(e)}function h(){return t().getPlaylist().getLabels()}function p(e){"undefined"!=typeof e&&t().getClip().setLabels(e)}function g(){return t().getClip().getLabels()}function y(e){return t().reset(e||{})}function v(e){return t().getPlaylist().reset(e||{})}function m(e){return t().getClip().reset(e||{})}function _(e){return e=e||{},t().viewNotify(null,e)}function b(e,r){return arguments.length>2&&(e=arguments[1],r=arguments[2]),e=e||{},"number"==typeof r&&(e.ns_st_po=r),t().customNotify(e,r)}function T(){return t().exportState()}function E(e){t().importState(e)}var w={},k=-1,S=-1;r.extend(e,{activeIndex:S,newInstance:i,new:i,destroyInstance:a,destroy:a,newPlaylist:s,newClip:u,notify:l,setLabels:c,getLabels:d,setPlaylistLabels:f,getPlaylistLabels:h,setClipLabels:p,getClipLabels:g,resetInstance:y,resetPlaylist:v,resetClip:m,viewEvent:_,customEvent:b,exportState:T,importState:E})}(n),n}();return C.AdEvents=w,C.PlayerEvents=T,C.InternalStates=E,C.getPlatformAPI=function(){return p},C}(),o.StreamingTag=o.StreamingTag||function(){var e=o.Utils,t=o.StreamSense,r=o.StreamSense.PlayerEvents,n=(o.StreamSense.AdEvents,o.StreamSense.InternalStates||null),i=null!=o.StreamSense.InternalStates;return function(){var a=function(a){function s(){if(i)if(o.comScore)T=new t,T.setLabel("ns_st_it","r");else if(e.exists(a))if(E=e.isTrue(a.debug),e.exists(a.customerC2)&&a.customerC2.length>0){var r=a.secure?"https://sb":"http"+("s"==document.location.href.charAt(4)?"s://sb":"://b");T=new t,T.setPixelURL(r+".scorecardresearch.com/p?c1=2"),T.setLabel("c2",a.customerC2),T.setLabel("ns_st_it","r")}else E&&console&&console.log("Warning: customerC2 is not provided (or incorrect) in the StreamingTag configuration.")}function u(t){return e.exists(t)||(t={}),e.exists(t.ns_st_ci)||(t.ns_st_ci="0"),e.exists(t.c3)||(t.c3="*null"),e.exists(t.c4)||(t.c4="*null"),e.exists(t.c6)||(t.c6="*null"),t}function l(e){return v>0&&e>=v?m+=e-v:m=0,m}function c(e){T.getState()!=n.IDLE&&T.getState()!=n.PAUSED?T.notify(r.END,l(e)):T.getState()==n.PAUSED&&T.notify(r.END,m)}function d(e){return f("ns_st_ci",_,e)&&f("c3",_,e)&&f("c4",_,e)&&f("c6",_,e)}function f(t,r,n){if(e.exists(t)&&e.exists(r)&&e.exists(n)){var i=r[t],o=n[t];return e.exists(i)&&e.exists(o)&&i===o}return!1}function h(t,n){c(t),y++;var i={ns_st_cn:y,ns_st_pn:"1",ns_st_tp:"0"};e.extend(i,n),T.setClip(i),_=n,v=t,m=0,T.notify(r.PLAY,m)}function p(t){var n=+new Date;c(n),y++,t=u(t);var i={ns_st_cn:y,ns_st_pn:"1",ns_st_tp:"1",ns_st_ad:"1"};e.extend(i,t),T.setClip(i),m=0,T.notify(r.PLAY,m),v=n,b=!1}function g(e,t){var i=+new Date;e=u(e),k==w.None&&(k=t),b&&k==t&&d(e)?(T.getClip().setLabels(e),T.getState()!=n.PLAYING&&(v=i,T.notify(r.PLAY,m))):h(i,e),b=!0,k=t}var y=0,v=0,m=0,_=null,b=!1,T=null,E=!1,w={None:0,AudioContent:1,VideoContent:2},k=w.None;e.extend(this,{playAdvertisement:function(){if(T){E&&console&&console.warn("Calling deprecated function 'playAdvertisement'. Please call 'playVideoAdvertisement' or 'playAudioAdvertisement' functions instead.");var e={ns_st_ct:"va"};p(e)}},playVideoAdvertisement:function(t){if(T){var r={ns_st_ct:"va"};t&&e.extend(r,t),p(r)}},playAudioAdvertisement:function(t){if(T){var r={ns_st_ct:"aa"};t&&e.extend(r,t),p(r)}},playContentPart:function(t){if(T){E&&console&&console.warn("Calling deprecated function 'playContentPart'. Please call 'playVideoContentPart' or 'playAudioContentPart' functions instead.");var r={ns_st_ct:"vc"};t&&e.extend(r,t),g(r,w.VideoContent)}},playVideoContentPart:function(t){if(T){var r={ns_st_ct:"vc"};t&&e.extend(r,t),g(r,w.VideoContent)}},playAudioContentPart:function(t){if(T){var r={ns_st_ct:"ac"};t&&e.extend(r,t),g(r,w.AudioContent)}},stop:function(){if(T){var e=+new Date;T.notify(r.PAUSE,l(e))}}}),s()};return function(e){}(a),a}()}()}catch(e){}i("undefined"!=typeof o?o:window.ns_)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],119:[function(e,t,r){e("event-source-polyfill"),window.videojs=e("video.js"),e("./chromecast/videojs-chromecast.js"),window.Hls=e("hls.js"),window.ns_=e("./comscore/streamsense.min.js"),window.initMoatTracking=e("./moat/moat_analytics.js"),window.xml=e("./parser/xml.min.js"),window.$YB=e("./youbora/sp.min.js"),window.getIndexAds=e("./indexExchange/indexExchange.js"),e("./chromecast/cast_sender.js")},{"./chromecast/cast_sender.js":116,"./chromecast/videojs-chromecast.js":117,"./comscore/streamsense.min.js":118,"./indexExchange/indexExchange.js":120,"./moat/moat_analytics.js":121,"./parser/xml.min.js":122,"./youbora/sp.min.js":123,"event-source-polyfill":2,"hls.js":6,"video.js":104}],120:[function(e,t,r){(function(e){(function(e,t,r,n,o){window.getIndexAds=function(e,t){"undefined"!=typeof t&&"string"==typeof t||(t="840x473");var r="2",n="video/mp4~video/webm~application/javascript";if("string"!=typeof e)return e;/^\/\//.test(e)&&(e=window.location.protocol+e);var o=window.location!=window.parent.location?encodeURIComponent(document.referrer):encodeURIComponent(document.location.href),a=function(e,t){var r=e.length;for(bucketSelector=-1,i=0;i<r;++i){var n=e[i].length;for(j=0;j<n;++j)if(t.indexOf(e[i][j])!==-1){bucketSelector=i;break}if(bucketSelector>-1)break}return bucketSelector},s=[["bloomberg.com"],["bloomberg.co.jp"]];bucket_selector=a(s,o.toLowerCase()),bucket_selector===-1&&(bucket_selector=0);var u,l=[["218980","218981"],["218982","218983"]],c=l[bucket_selector][0],d=l[bucket_selector][1];u=e.indexOf("preroll")>=0?15:30;var f="//as-sec.casalemedia.com/playlist?ix_id=%5Bindex_epr%5D&ix_v=8.8&ix_u=__PAGE_URL_IX__&ix_vt="+encodeURIComponent(e)+"&ix_s="+c+"&ix_ms="+d+"&ix_maxd="+u+"&ix_sz="+t+"&ix_dur=15~30&ix_vasd=0&ix_pod=1&ix_vpos=preroll&ix_vastp=2~3~5~6&ix_vami="+n+"&ix_api="+r;return f.replace("__PAGE_URL_IX__",window.location!=window.parent.location?encodeURIComponent(document.referrer):encodeURIComponent(document.location.href))},o("undefined"!=typeof getIndexAds?getIndexAds:window.getIndexAds)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],121:[function(e,t,r){(function(e){(function(e,t,r,n,i){function o(e,t,r){if(!1===t.hasOwnProperty("partnerCode"))return!1;var n=document.createElement("script");r=r||e&&("undefined"!=typeof e.O?e.O.parentNode:document.body)||document.body;var i=[],o={adsManager:e,ids:t,imaSDK:!0,events:[],dispatchEvent:function(e){var t=this.sendEvent,r=this.events;t?(r&&(r.push(e),e=r),t(e)):r.push(e)}},a={complete:"AdVideoComplete",firstquartile:"AdVideoFirstQuartile",impression:"AdImpression",loaded:"AdLoaded",midpoint:"AdVideoMidpoint",pause:"AdPaused",skip:"AdSkipped",start:"AdVideoStart",thirdquartile:"AdVideoThirdQuartile",volumeChange:"AdVolumeChange"};if(google&&google.ima&&e){var s,u="_moatApi"+Math.floor(1e8*Math.random());for(s in google.ima.AdEvent.Type){var l=function(t){if(o.sendEvent){for(t=i.length-1;0<=t;t--)e.removeEventListener(i[t].type,i[t].func);o.sendEvent(o.events)}else o.events.push({type:a[t.type]||t.type,adVolume:e.getVolume()})};e.addEventListener(google.ima.AdEvent.Type[s],l),i.push({type:google.ima.AdEvent.Type[s],func:l})}}var c,d,u="undefined"!=typeof u?u:"";try{c=r.ownerDocument,d=c.defaultView||c.parentWindow}catch(e){c=document,d=window}return d[u]=o,n.type="text/javascript",r&&r.appendChild(n),n.src="https://z.moatads.com/"+t.partnerCode+"/moatvideo.js#"+u,o}i("undefined"!=typeof o?o:window.initMoatTracking)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],122:[function(e,t,r){(function(e){(function(e,t,r,n,i){!function(e,t){"".trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});var r,n;r={isUnsafe:!1,isXML:function(e){return"object"==typeof e&&e.nodeType!==t},getRoot:function(e){return 9===e.nodeType?e.documentElement:11===e.nodeType?e.firstChild:e},convert:function(r){var n={};if("string"==typeof r){var i=null,o=null,a=!0;try{i="DOMParser"in e?new DOMParser:new ActiveXObject("MSXML2.DOMDocument"),i.async=!1}catch(e){throw Error("XML Parser could not be instantiated")}if("parseFromString"in i?(o=i.parseFromString(r,"text/xml"),a="parsererror"!==o.documentElement.tagName):o=!!(a=i.loadXML(r))&&i,!a)throw Error("Error parsing XML string");r=o}else r=this.isXML(r)?r:t;if(!r)throw Error("Unable to parse XML");return 3===r.nodeType||4===r.nodeType?r.nodeValue:(r=this.getRoot(r),n[r.nodeName]={},this.process(r,n[r.nodeName]),n)},process:function(e,t){var r,n,i,o,a;if(e.hasChildNodes())for(o=e.childNodes.length,i=0;i<o;i++)switch(r=e.childNodes[i],r.nodeType){case 3:t.Text=t.Text?t.Text+r.nodeValue.trim():r.nodeValue.trim();break;case 4:r=r[r.text?"text":"nodeValue"],t.Text=t.Text?t.Text+r:r;break;case 1:n=r.nodeName,a={},n in t?t[n].length?(this.process(r,a),t[n].push(a)):(this.process(r,a),t[n]=[t[n],a]):(this.process(r,a),t[n]=a)}if(e.attributes.length)for(o=e.attributes.length-1;0<=o;o--)r=e.attributes[o],i=r.name.trim(),r=r.value,t[(this.isUnsafe?"":"@")+i]=r}},n={xmlToJSON:function(e,n){return r.isUnsafe=n!==t&&n,r.convert(e)}},e.xml=e.xml||n}(window),i("undefined"!=typeof xml?xml:window.xml)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],123:[function(e,t,r){(function(e){(function(e,t,r,n,i){var o=o||{version:"5.5.0",plugins:{},adnalyzers:{},utils:{},managers:{},comm:{},data:{}};o.comm.Communication=function(e,t){try{this.host=e,this.httpSecure=t,this.pingTime=5,this.prefix="U",this.code="",this.view=-1,this.preloaders=[],this._requests={},this.addPreloader("FastData")}catch(e){o.error(e)}},o.comm.Communication.prototype.extraOperationsCallback=null,o.comm.Communication.prototype.getViewCode=function(){return this.code?this.prefix+this.code+"_"+this.view:"nocode"},o.comm.Communication.prototype.nextView=function(e){return this.view++,e===!0?this.prefix="L":e===!1?this.prefix="V":this.prefix="U",this.getViewCode()},o.comm.Communication.prototype.requestData=function(e,t){try{e=e||{},e.outputformat="jsonp",delete e.code;var r=this,n=new o.comm.AjaxRequest(this._parseServiceHost(this.host),"/data",e);n.load(function(){r.receiveData(n)}),n.load(t),n.send(),o.noticeRequest("Request: NQS /data "+e.system)}catch(e){o.error(e)}},o.comm.Communication.prototype.receiveData=function(e){try{var t=e.getXHR(),r=t.response||t.responseText,n=JSON.parse(r.slice(r.indexOf("(")+1,r.lastIndexOf(")"))),i=n.q.h,a=n.q.c,s=n.q.pt,u=n.q.b;i.length>0&&a.length>0&&s.length>0&&u.length>0?(this.prefix=a.slice(0,1),this.code=a.slice(1),this.host=i,this.pingTime=s,this.balancerEnabled=u,o.noticeRequest("FastData '"+a+"' is ready."),this._requests.nocode&&this._requests.nocode.length>0&&(this._requests[this.getViewCode()]=this._requests.nocode,delete this._requests.nocode),this.removePreloader("FastData")):o.error("Error: FastData response is wrong.")}catch(e){o.error(e)}},o.comm.Communication.prototype.sendRequest=function(e,t,r){try{t=t||{},delete t.code;var n=new o.comm.AjaxRequest("",e,t);n.load(r),this._registerRequest(n)}catch(e){o.error(e)}},o.comm.Communication.prototype.sendService=function(e,t,r){try{var n=new o.comm.AjaxRequest(this._parseServiceHost(e),"",t);n.load(r),this._registerRequest(n)}catch(e){o.error(e)}},o.comm.Communication.prototype.addPreloader=function(e){try{this.preloaders.push(e)}catch(e){o.error(e)}},o.comm.Communication.prototype.removePreloader=function(e){try{var t=this.preloaders.indexOf(e);if(t!==-1){if(this.preloaders.splice(t,1),0===this.preloaders.length){var r;for(var n in this._requests)for(;r=this._requests[n].shift();)r.setParam("code",n),r.host||(r.host=this._parseServiceHost(this.host)),"function"==typeof this.extraOperationsCallback&&this.extraOperationsCallback(r.params),r.send()}}else o.warn("Warning: trying to remove unexisting preloader '"+e+"'.")}catch(e){o.error(e)}},o.comm.Communication.prototype._registerRequest=function(e){try{return"undefined"==typeof this._requests[this.getViewCode()]&&(this._requests[this.getViewCode()]=[]),e.setParam("timemark",(new Date).getTime()),this._requests[this.getViewCode()].push(e),this._sendRequests(),e}catch(e){o.error(e)}},o.comm.Communication.prototype._sendRequests=function(){try{if(0===this.preloaders.length){var e;for(var t in this._requests)for(;e=this._requests[t].shift();)e.setParam("code",t),e.host||(e.host=this._parseServiceHost(this.host)),e.send()}}catch(e){o.error(e)}},o.comm.Communication.prototype._parseServiceHost=function(e){try{return 0===e.indexOf("//")?e=e.slice(2):0===e.indexOf("http://")?e=e.slice(7):0===e.indexOf("https://")&&(e=e.slice(8)),e=this.httpSecure===!0?"https://"+e:0===window.location.protocol.indexOf("http")?"//"+e:"http://"+e}catch(e){return o.error(e),"http://localhost"}},o.comm.AjaxRequest=function(e,t,r,n){try{this.xhr=this.createXHR(),this.host=e,this.service=t||"",this.params=r,this.options=n||{},this.options.method=this.options.method||o.comm.AjaxRequest.options.method,this.options.maxRetries=this.options.maxRetries||o.comm.AjaxRequest.options.maxRetries,"undefined"==typeof this.options.retryAfter&&(this.options.retryAfter=o.comm.AjaxRequest.options.retryAfter),this.hasError=!1,this.retries=1}catch(e){o.error(e)}},o.comm.AjaxRequest.onEverySuccess=null,o.comm.AjaxRequest.options={method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3},o.comm.AjaxRequest.prototype.getUrl=function(){try{return this.host+this.service+this.getParams()}catch(e){o.error(e)}},o.comm.AjaxRequest.prototype.getParams=function(){try{switch(typeof this.params){case"object":return"?"+this._parseParams(this.params);case"string":return this.params?"?"+this.params:"";default:return""}}catch(e){o.error(e)}},o.comm.AjaxRequest.prototype.setParam=function(e,t){try{switch(typeof this.params){case"string":this.params.length>0&&(this.params+="&"),this.params+=e+"="+t;break;case"object":default:this.params[e]=t}return this}catch(e){return o.error(e),this}},o.comm.AjaxRequest.prototype.on=function(e,t){try{"error"==e&&(this.hasError=!0),"function"==typeof t?this.xhr.addEventListener(e,t,!1):"undefined"!=typeof t&&o.warn("Warning: Request '"+this.getUrl()+"' has a callback that is not a function.")}catch(e){o.error(e)}finally{return this}},o.comm.AjaxRequest.prototype.load=function(e){return this.on("load",e)},o.comm.AjaxRequest.prototype.error=function(e){return this.on("error",e)},o.comm.AjaxRequest.prototype.send=function(){try{if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);if(!this.hasError&&this.options.retryAfter>0&&this.options.maxRetries>0){var t=this;this.error(function(){if(t.retries>t.options.maxRetries)o.error("Error: Aborting failed request. Max retries reached.");else{o.warn("Error: Request "+t.service+" failed. Retry "+t.retries+" of "+t.options.maxRetries+" in "+t.options.retryAfter+"ms.");var e=t;setTimeout(function(){e.retries+=1,e.send()},t.options.retryAfter)}})}o.debugLevel>=5&&o.verbose("XHR Req: "+this.getUrl()),"function"==typeof o.comm.AjaxRequest.onEverySuccess&&this.load(o.comm.AjaxRequest.onEverySuccess),this.xhr.send()}catch(e){o.error(e)}},o.comm.AjaxRequest.prototype.createXHR=function(){try{return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(e){return o.error(e),{}}},o.comm.AjaxRequest.prototype.getXHR=function(){return this.xhr},o.comm.AjaxRequest.prototype._parseParams=function(e){try{if("string"==typeof e)return e;if(null!==e&&"object"==typeof e){var t="";for(var r in e)null!==e[r]&&"object"==typeof e[r]?t+=encodeURIComponent(r)+"="+encodeURIComponent(JSON.stringify(e[r]))+"&":null!==e[r]&&"undefined"!=typeof e[r]&&""!==e[r]&&(t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r])+"&");return t.slice(0,-1)}return""}catch(e){return o.error(e),""}},o.data.Options=function(e){try{this.setOptions(e)}catch(e){o.error(e)}},o.data.Options.prototype={enableAnalytics:!0,disabledRequests:[],parseHLS:!1,parseCDNNodeHost:!1,useCDNFromParser:!1,parseCDNNameFrom:"x-cdn-forward",haltOnError:!0,hashTitle:!0,httpSecure:void 0,enableNiceBuffer:!0,enableNiceSeek:!0,accountCode:"nicetest",service:"nqs.nice264.com",username:void 0,transactionCode:void 0,network:{ip:void 0,isp:void 0},device:{id:void 0},media:{isLive:void 0,resource:void 0,title:void 0,duration:void 0,cdn:void 0,isBalanced:0,isResumed:0},ads:{expected:!1,resource:void 0,campaign:void 0,title:void 0,position:void 0,duration:void 0},properties:{contentId:void 0,type:void 0,transaction_type:void 0,genre:void 0,language:void 0,year:void 0,cast:void 0,director:void 0,owner:void 0,parental:void 0,price:void 0,rating:void 0,audioType:void 0,audioChannels:void 0,device:void 0,quality:void 0},extraParams:{param1:void 0,param2:void 0,param3:void 0,param4:void 0,param5:void 0,param6:void 0,param7:void 0,param8:void 0,param9:void 0,param10:void 0,param11:void 0,param12:void 0,param13:void 0,param14:void 0,param15:void 0,param16:void 0,param17:void 0,param18:void 0,param19:void 0,param20:void 0},setOptions:function(e,t){try{if(t=t||this,"undefined"!=typeof e)for(var r in e)"object"==typeof t[r]&&null!==t[r]?this.setOptions(e[r],t[r]):t[r]=e[r]}catch(e){o.error(e)}}},o.adnalyzers.Generic=function(){},o.adnalyzers.Generic.prototype={adnalyzerVersion:"5.3.0-GENERIC",ads:void 0,plugin:void 0},o.adnalyzers.Generic.prototype.startMonitoring=function(e,t){try{o.notice("Adnalyzer "+this.adnalyzerVersion+" is ready."),this.plugin=e,this.ads=t}catch(e){return o.error(e),null}},o.adnalyzers.Generic.prototype.stopMonitoring=function(){this.ads=null,this.plugin.viewManager.timer.adPlayheadMonitor.stop()},o.adnalyzers.Generic.prototype.enableAdBufferMonitor=function(){this.plugin.infoManager.options.enableNiceBuffer&&(this.plugin.viewManager.enableAdBufferMonitor=!0)},o.adnalyzers.Generic.prototype.enableAdSeekMonitor=function(){this.plugin.infoManager.options.enableNiceSeek&&(this.plugin.viewManager.enableAdSeekMonitor=!0)},o.adnalyzers.Generic.prototype.initAdHandler=function(){try{this.plugin.viewManager.isAdStartSent||this.plugin.viewManager.isAdInitSent||this.plugin.viewManager.sendAdInit()}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.playAdHandler=function(){try{this.plugin.viewManager.isAdStartSent||this.plugin.viewManager.sendAdStart()}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.startJoinAdHandler=function(){try{this.plugin.viewManager.isAdStartSent||(this.plugin.viewManager.sendAdStart(),this.plugin.viewManager.isBuffering&&(this.plugin.viewManager.chrono.joinTime.startTime=this.plugin.viewManager.chrono.buffer.startTime,this.plugin.viewManager.isBuffering=!1),this.plugin.viewManager.sendAdJoin())}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.joinAdHandler=function(){try{this.plugin.viewManager.sendAdJoin()}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.pauseAdHandler=function(){try{this.plugin.viewManager.sendAdPause()}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.pauseToggleAdHandler=function(){try{this.plugin.viewManager.isAdPaused?this.plugin.viewManager.sendAdResume():this.plugin.viewManager.sendAdPause()}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.resumeAdHandler=function(){try{this.plugin.viewManager.sendAdResume()}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.endedAdHandler=function(){try{this.plugin.viewManager.sendAdStop()}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.skipAdHandler=function(){try{this.plugin.viewManager.sendAdStop({skipped:!0})}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.bufferingAdHandler=function(){try{this.plugin.viewManager.sendAdBufferStart()}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.bufferedAdHandler=function(){try{this.plugin.viewManager.isAdStartSent&&(this.plugin.viewManager.isAdJoinSent?this.plugin.viewManager.isAdBuffering&&this.plugin.viewManager.sendAdBufferEnd():this.plugin.viewManager.sendAdJoin())}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.errorAdHandler=function(e,t){try{"undefined"==typeof e&&(e=0),t=t||e||"Unknown error",this.plugin.viewManager.sendAdError({errorCode:e,msg:t})}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.noServedAdHandler=function(e,t){try{"undefined"==typeof e&&(e=0),t=t||e||"Unknown error",this.plugin.viewManager.sendAdError({errorCode:e,msg:t,errorSeverity:"AdsNotServed"}),this.plugin.viewManager.sendAdStop()}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.clickAdHandler=function(e){try{this.plugin.viewManager.sendAdClick({adUrl:e})}catch(e){o.error(e)}},o.adnalyzers.Generic.prototype.getAdResource=function(){return"unknown"},o.adnalyzers.Generic.prototype.getMediaPlayhead=function(){return null},o.adnalyzers.Generic.prototype.getAdPlayhead=function(){return 0},o.adnalyzers.Generic.prototype.getAdPosition=function(){return this.plugin.viewManager.isJoinSent?"mid":"pre"},o.adnalyzers.Generic.prototype.getAdTitle=function(){return null},o.adnalyzers.Generic.prototype.getAdDuration=function(){return 0},o.adnalyzers.Generic.prototype.getAdBitrate=function(){return-1},o.adnalyzers.Generic.prototype.getAdPlayerVersion=function(){return null},o.plugins.Generic=function(){},o.plugins.Generic.prototype={pluginName:"GENERIC",pluginVersion:"5.1.0-GENERIC",playerId:"generic",player:null,tag:null,infoManager:void 0,viewManager:void 0,adnalyzer:null},o.plugins.Generic.prototype.startMonitoring=function(e,t){try{o.notice("Plugin "+this.pluginVersion+" (with YouboraJS "+o.version+") is ready."),"string"==typeof e?(this.playerId=e,this.player=document.getElementById(e)):(this.player=e,e&&e.id&&(this.playerId=e.id)),this.tag=this.player,"undefined"==typeof this.infoManager?this.infoManager=new o.managers.Info(this,t):this.infoManager.setOptions(t),this.viewManager=new o.managers.View(this.infoManager)}catch(e){return o.error(e),null}},o.plugins.Generic.prototype.stopMonitoring=function(){this.player=null,this.tag=null,this.viewManager.stopTimers()},o.plugins.Generic.prototype.enableBufferMonitor=function(){this.infoManager.options.enableNiceBuffer&&(this.viewManager.enableBufferMonitor=!0)},o.plugins.Generic.prototype.enableSeekMonitor=function(){this.infoManager.options.enableNiceSeek&&(this.viewManager.enableSeekMonitor=!0)},o.plugins.Generic.prototype.setOptions=function(e){try{this.infoManager.options.setOptions(e);
}catch(e){o.error(e)}},o.plugins.Generic.prototype.getOptions=function(){try{return this.infoManager.options||{}}catch(e){return o.error(e),{}}},o.plugins.Generic.prototype.playHandler=function(){try{this.viewManager.sendStart()}catch(e){o.error(e)}},o.plugins.Generic.prototype.joinHandler=function(){try{this.viewManager.sendJoin()}catch(e){o.error(e)}},o.plugins.Generic.prototype.playingHandler=function(){try{this.viewManager.isStartSent&&(this.viewManager.isJoinSent?this.viewManager.isSeeking&&this.viewManager.isPaused?(this.viewManager.sendSeekEnd(),this.viewManager.sendResume()):this.viewManager.isSeeking?this.viewManager.sendSeekEnd():this.viewManager.isBuffering?this.viewManager.sendBufferEnd():this.viewManager.isPaused&&this.viewManager.sendResume():this.viewManager.sendJoin())}catch(e){o.error(e)}},o.plugins.Generic.prototype.pauseHandler=function(){try{this.viewManager.sendPause()}catch(e){o.error(e)}},o.plugins.Generic.prototype.pauseToggleHandler=function(){try{this.viewManager.isPaused?this.viewManager.sendResume():this.viewManager.sendPause()}catch(e){o.error(e)}},o.plugins.Generic.prototype.resumeHandler=function(){try{this.viewManager.sendResume()}catch(e){o.error(e)}},o.plugins.Generic.prototype.endedHandler=function(){try{this.viewManager.sendStop()}catch(e){o.error(e)}},o.plugins.Generic.prototype.errorHandler=function(e,t){try{"undefined"==typeof e&&(e=0),t=t||e||"Unknown error",this.viewManager.sendError({errorCode:e,msg:t})}catch(e){o.error(e)}},o.plugins.Generic.prototype.seekingHandler=function(){try{this.viewManager.isBuffering?this.viewManager.convertBufferToSeek():this.viewManager.sendSeekStart()}catch(e){o.error(e)}},o.plugins.Generic.prototype.seekedHandler=function(){try{this.viewManager.sendSeekEnd()}catch(e){o.error(e)}},o.plugins.Generic.prototype.bufferingHandler=function(){try{this.viewManager.isSeeking||this.viewManager.sendBufferStart()}catch(e){o.error(e)}},o.plugins.Generic.prototype.bufferedHandler=function(){try{this.viewManager.isStartSent&&(this.viewManager.isJoinSent?this.viewManager.isSeeking?this.viewManager.sendSeekEnd():this.viewManager.isBuffering&&this.viewManager.sendBufferEnd():this.viewManager.sendJoin())}catch(e){o.error(e)}},o.plugins.Generic.prototype.ignoringAdHandler=function(){try{this.viewManager.sendIgnoreAdStart()}catch(e){o.error(e)}},o.plugins.Generic.prototype.ignoredAdHandler=function(){try{this.viewManager.sendIgnoreAdEnd()}catch(e){o.error(e)}},o.plugins.Generic.prototype.getResource=function(){return"unknown"},o.plugins.Generic.prototype.getPlayhead=function(){return 0},o.plugins.Generic.prototype.getMediaDuration=function(){return 0},o.plugins.Generic.prototype.getIsLive=function(){return!1},o.plugins.Generic.prototype.getRendition=function(){return null},o.plugins.Generic.prototype.getBitrate=function(){return-1},o.plugins.Generic.prototype.getThroughput=function(){if(o.utils.getCdnTraffic()&&0!==o.utils.getCdnTraffic()){this.lastDataValue||(this.lastDataValue=0);var e=this.lastDataValue;return this.lastDataValue=o.utils.getCdnTraffic()+o.utils.getP2PTraffic(),Math.round((this.lastDataValue-e)/this.viewManager.comm.pingTime)}return-1},o.plugins.Generic.prototype.getPlayerVersion=function(){return null},o.plugins.Generic.prototype.getTotalBytes=function(){return null},o.plugins.Generic.prototype.getTitle=function(){return null},o.plugins.Generic.prototype.getCdnTraffic=function(){return o.utils.getCdnTraffic()},o.plugins.Generic.prototype.getP2PTraffic=function(){return o.utils.getP2PTraffic()},o.plugins.Generic.prototype.getUploadTraffic=function(){return o.utils.getUploadTraffic()},o.managers.Info=function(e,t){this.plugin=e,this.options=new o.data.Options(t),this.lastBitrate=0,this.lastAdBitrate=0},o.managers.Info.prototype.getDataParams=function(e){try{return e=e||{},e.system=e.hasOwnProperty("system")?e.system:this.options.accountCode,e.pluginName=e.hasOwnProperty("pluginName")?e.pluginName:this.plugin.pluginName,e.pluginVersion=e.hasOwnProperty("pluginVersion")?e.pluginVersion:this.plugin.pluginVersion,e.live=e.hasOwnProperty("live")?e.live:this.options.media.isLive,e}catch(t){return o.error(t),e}},o.managers.Info.prototype.setOptions=function(e){this.options.setOptions(e)},o.managers.Info.prototype.getOptions=function(e){return this.options},o.managers.Info.prototype.getAdPlayhead=function(){try{return this.plugin.adnalyzer?o.utils.parseNumber(this.plugin.adnalyzer.getAdPlayhead(),0):0}catch(e){return o.warn(e),0}},o.managers.Info.prototype.getAdBitrate=function(){try{if(this.plugin.adnalyzer){var e=Math.round(this.plugin.adnalyzer.getAdBitrate());if(e==-1&&this.plugin.adnalyzer.tag&&"undefined"!=typeof this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount){var t=this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount;if(this.lastAdBitrate){var r=5;this.plugin.viewManager&&this.plugin.viewManager.comm&&this.plugin.viewManager.comm.pingTime&&(r=this.plugin.viewManager.comm.pingTime),t=Math.round((this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount-this.lastAdBitrate)/r*8)}this.lastAdBitrate=this.plugin.adnalyzer.tag.webkitVideoDecodedByteCount,e=t}return o.utils.parseNumber(e,-1)}return-1}catch(e){return o.warn(e),-1}},o.managers.Info.prototype.getAdResource=function(){try{return"undefined"!=typeof this.options.ads.resource?this.options.ads.resource:this.plugin.adnalyzer.getAdResource()}catch(e){return o.warn(e),""}},o.managers.Info.prototype.getAdPosition=function(){try{return"undefined"!=typeof this.options.ads.position?this.options.ads.position:this.plugin.adnalyzer.getAdPosition()}catch(e){return o.warn(e),"mid"}},o.managers.Info.prototype.getAdTitle=function(){try{return"undefined"!=typeof this.options.ads.title?this.options.ads.title:this.plugin.adnalyzer.getAdTitle()}catch(e){return o.warn(e),""}},o.managers.Info.prototype.getAdDuration=function(){try{var e=0;return e="undefined"!=typeof this.options.ads.duration?this.options.ads.duration:Math.round(this.plugin.adnalyzer.getAdDuration()),o.utils.parseNumber(e,0)}catch(e){return o.warn(e),0}},o.managers.Info.prototype.getAdPlayerVersion=function(){try{return this.plugin.adnalyzer.getAdPlayerVersion()}catch(e){return o.warn(e),null}},o.managers.Info.prototype.getAdStartParams=function(e,t){try{return e=e||{},e.position="undefined"!=typeof e.position?e.position:this.getAdPosition(),e.resource="undefined"!=typeof e.resource?e.resource:this.getAdResource(),e.campaign="undefined"!=typeof e.campaign?e.campaign:this.options.ads.campaign,e.title="undefined"!=typeof e.title?e.title:this.getAdTitle(),e.adDuration="undefined"!=typeof e.adDuration?e.adDuration:this.getAdDuration(),e.playhead="undefined"!=typeof e.playhead?e.playhead:Math.round(this.getPlayhead()),e.adnalyzerVersion="undefined"!=typeof e.adnalyzerVersion?e.adnalyzerVersion:this.plugin.adnalyzer.adnalyzerVersion,e.adPlayerVersion="undefined"!=typeof e.adPlayerVersion?e.adPlayerVersion:this.getAdPlayerVersion(),e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getAdJoinParams=function(e,t){try{return e=e||{},e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:this.getAdPlayhead(),e.playhead=this.getPlayhead()?Math.round(this.getPlayhead()):void 0,e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getAdStopParams=function(e,t){try{return e=e||{},e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e.adBitrate="undefined"!=typeof e.adBitrate?e.adBitrate:this.getAdBitrate(),e.playhead=this.getPlayhead()?Math.round(this.getPlayhead()):void 0,e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getAdPauseParams=function(e,t){return e||(e={}),this.getAdPlayhead&&this.getAdPlayhead()&&(e.adPlayhead=Math.round(this.getAdPlayhead())),e.playhead=this.getPlayhead()?Math.round(this.getPlayhead()):void 0,e},o.managers.Info.prototype.getAdResumeParams=function(e,t){return e||(e={}),this.getAdPlayhead&&this.getAdPlayhead()&&(e.adPlayhead=Math.round(this.getAdPlayhead())),e.playhead=this.getPlayhead()?Math.round(this.getPlayhead()):void 0,e},o.managers.Info.prototype.getAdBufferEndParams=function(e,t){try{return e=e||{},e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e.playhead=this.getPlayhead()?Math.round(this.getPlayhead()):void 0,e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getAdPingParams=function(e,t){try{return e=e||{},e.adBitrate="undefined"!=typeof e.adBitrate?e.adBitrate:this.getAdBitrate(),e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e.playhead=this.getPlayhead()?Math.round(this.getPlayhead()):void 0,e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getAdErrorParams=function(e,t){try{return e=e||{},e.errorCode=e.hasOwnProperty("errorCode")?e.errorCode:"9000",e.msg=e.hasOwnProperty("msg")?e.msg:"Unknown Error",e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e.playhead=this.getPlayhead()?Math.round(this.getPlayhead()):void 0,e.player=e.hasOwnProperty("player")?e.player:this.plugin.pluginName,e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getAdClickParams=function(e,t){try{return e=e||{},e.adPlayhead="undefined"!=typeof e.adPlayhead?e.adPlayhead:Math.round(this.getAdPlayhead()),e.playhead=this.getPlayhead()?Math.round(this.getPlayhead()):void 0,e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getResource=function(){try{return this.plugin.viewManager.resourceParser&&this.plugin.viewManager.resourceParser.realResource?this.plugin.viewManager.resourceParser.realResource:"undefined"!=typeof this.options.media.resource?this.options.media.resource:this.plugin.getResource()}catch(e){return o.warn(e),"unknown"}},o.managers.Info.prototype.getCDN=function(){try{return this.plugin.viewManager.resourceParser&&this.plugin.viewManager.resourceParser.cdn&&this.options.useCDNFromParser?this.plugin.viewManager.resourceParser.cdn:"undefined"!=typeof this.options.media.cdn?this.options.media.cdn:null}catch(e){return o.warn(e),null}},o.managers.Info.prototype.getMediaDuration=function(){try{var e=0;return e="undefined"!=typeof this.options.media.duration?this.options.media.duration:this.plugin.getMediaDuration(),Math.round(o.utils.parseNumber(e,0))}catch(e){return o.warn(e),0}},o.managers.Info.prototype.getIsLive=function(){try{return"undefined"!=typeof this.options.media.isLive?this.options.media.isLive:this.plugin.getIsLive()}catch(e){return o.warn(e),!1}},o.managers.Info.prototype.getPlayerVersion=function(){try{return this.plugin.getPlayerVersion()}catch(e){return o.warn(e),""}},o.managers.Info.prototype.getTitle=function(){try{return"undefined"!=typeof this.options.media.title?this.options.media.title:this.plugin.getTitle()}catch(e){return o.warn(e),""}},o.managers.Info.prototype.getRendition=function(){try{return"undefined"!=typeof this.options.media.rendition?this.options.media.rendition:this.plugin.getRendition()}catch(e){return o.warn(e),""}},o.managers.Info.prototype.getBitrate=function(){try{var e=Math.round(this.plugin.getBitrate());if(e==-1&&this.plugin.tag&&"undefined"!=typeof this.plugin.tag.webkitVideoDecodedByteCount){var t=this.plugin.tag.webkitVideoDecodedByteCount;if(this.lastBitrate){var r=5;this.plugin.viewManager&&this.plugin.viewManager.comm&&this.plugin.viewManager.comm.pingTime&&(r=this.plugin.viewManager.comm.pingTime),t=Math.round((this.plugin.tag.webkitVideoDecodedByteCount-this.lastBitrate)/r*8)}this.lastBitrate=this.plugin.tag.webkitVideoDecodedByteCount,e=0!=t?t:-1}return o.utils.parseNumber(e,-1)}catch(e){return o.warn(e),-1}},o.managers.Info.prototype.getThroughput=function(){try{return o.utils.parseNumber(Math.round(this.plugin.getThroughput()),-1)}catch(e){return o.warn(e),-1}},o.managers.Info.prototype.getTotalBytes=function(){try{return o.utils.parseNumber(this.plugin.getTotalBytes(),null)}catch(e){return o.warn(e),null}},o.managers.Info.prototype.getPlayhead=function(){try{var e=this.plugin.getPlayhead();return this.plugin.adnalyzer&&null!==this.plugin.adnalyzer.getMediaPlayhead()&&(e=this.plugin.adnalyzer.getMediaPlayhead()),o.utils.parseNumber(e,0)}catch(e){return o.warn(e),0}},o.managers.Info.prototype.getStartParams=function(e){try{if(e=e||{},e.system=e.hasOwnProperty("system")?e.system:this.options.accountCode,e.player=e.hasOwnProperty("player")?e.player:this.plugin.pluginName,e.user=e.hasOwnProperty("user")?e.user:this.options.username,e.transcode=e.hasOwnProperty("transcode")?e.transcode:this.options.transactionCode,e.hashTitle=e.hasOwnProperty("hashTitle")?e.hashTitle:this.options.hashTitle,!e.hasOwnProperty("referer")){e.referer="";try{e.referer=top.window.location.href}catch(t){e.referer=window.location.href}}return e.deviceId=e.hasOwnProperty("deviceId")?e.deviceid:this.options.device.id,e.pluginVersion=e.hasOwnProperty("pluginVersion")?e.pluginVersion:this.plugin.pluginVersion,e.playerVersion=e.hasOwnProperty("playerVersion")?e.playerVersion:this.getPlayerVersion(),e.resource=e.hasOwnProperty("resource")?e.resource:this.getResource(),e.duration=e.hasOwnProperty("duration")?e.duration:this.getMediaDuration(),e.live=e.hasOwnProperty("live")?e.live:this.getIsLive(),e.rendition=e.hasOwnProperty("rendition")?e.rendition:this.getRendition(),e.title=e.hasOwnProperty("title")?e.title:this.getTitle(),e.properties=e.hasOwnProperty("properties")?e.properties:this.options.properties,e.cdn=e.hasOwnProperty("cdn")?e.cdn:this.getCDN(),e.isp=e.hasOwnProperty("isp")?e.isp:this.options.network.isp,e.ip=e.hasOwnProperty("ip")?e.ip:this.options.network.ip,e.param1=e.hasOwnProperty("param1")?e.param1:this.options.extraParams.param1,e.param2=e.hasOwnProperty("param2")?e.param2:this.options.extraParams.param2,e.param3=e.hasOwnProperty("param3")?e.param3:this.options.extraParams.param3,e.param4=e.hasOwnProperty("param4")?e.param4:this.options.extraParams.param4,e.param5=e.hasOwnProperty("param5")?e.param5:this.options.extraParams.param5,e.param6=e.hasOwnProperty("param6")?e.param6:this.options.extraParams.param6,e.param7=e.hasOwnProperty("param7")?e.param7:this.options.extraParams.param7,e.param8=e.hasOwnProperty("param8")?e.param8:this.options.extraParams.param8,e.param9=e.hasOwnProperty("param9")?e.param9:this.options.extraParams.param9,e.param10=e.hasOwnProperty("param10")?e.param10:this.options.extraParams.param10,e.param11=e.hasOwnProperty("param11")?e.param11:this.options.extraParams.param11,e.param12=e.hasOwnProperty("param12")?e.param12:this.options.extraParams.param12,e.param13=e.hasOwnProperty("param13")?e.param13:this.options.extraParams.param13,e.param14=e.hasOwnProperty("param14")?e.param14:this.options.extraParams.param14,e.param15=e.hasOwnProperty("param15")?e.param15:this.options.extraParams.param15,e.param16=e.hasOwnProperty("param16")?e.param16:this.options.extraParams.param16,e.param17=e.hasOwnProperty("param17")?e.param17:this.options.extraParams.param17,e.param18=e.hasOwnProperty("param18")?e.param18:this.options.extraParams.param18,e.param19=e.hasOwnProperty("param19")?e.param19:this.options.extraParams.param19,e.param20=e.hasOwnProperty("param20")?e.param20:this.options.extraParams.param20,e.totalBytes=e.hasOwnProperty("totalBytes")?e.totalBytes:this.getTotalBytes(),e.adsExpected=e.hasOwnProperty("adsExpected")?e.adsExpected:this.options.ads.expected,1==this.options.isResumed&&(e.isResumed=1),1==this.options.isBalanced&&(e.isBalanced=1),e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getJoinParams=function(e){try{return e=e||{},e.eventTime=e.hasOwnProperty("eventTime")?e.eventTime:this.getPlayhead(),e.mediaDuration=e.hasOwnProperty("mediaDuration")?e.mediaDuration:this.getMediaDuration(),e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getStopParams=function(e){return e||{}},o.managers.Info.prototype.getPauseParams=function(e){return e||(e={}),this.getPlayhead&&this.getPlayhead()&&(e.playhead=Math.round(this.getPlayhead())),e},o.managers.Info.prototype.getResumeParams=function(e){return e||(e={}),this.getPlayhead&&this.getPlayhead()&&(e.playhead=Math.round(this.getPlayhead())),e},o.managers.Info.prototype.getBufferEndParams=function(e){try{return e=e||{},e.time=e.hasOwnProperty("time")?e.time:this.getPlayhead(),e}catch(t){return o.error(t),e}},o.managers.Info.prototype.getErrorParams=function(e){try{return e=e||{},this.plugin.viewManager.isJoinSent||e.errorType&&"fatal"===e.errorType&&(e.errorType=void 0),e.errorCode=e.hasOwnProperty("errorCode")?e.errorCode:"9000",e.msg=e.hasOwnProperty("msg")?e.msg:"Unknown Error",e=this.getStartParams(e)}catch(t){return o.error(t),e}},o.managers.Info.prototype.getSeekEndParams=function(e){return this.getBufferEndParams(e)},o.managers.Info.prototype.getPingParams=function(e,t){try{return e=e||{},e.time="undefined"!=typeof e.time?e.time:this.getPlayhead(),e.bitrate="undefined"!=typeof e.bitrate?e.bitrate:this.getBitrate(),e.throughput="undefined"!=typeof e.throughput?e.throughput:this.getThroughput(),e.totalBytes="undefined"!=typeof e.totalBytes?e.totalBytes:this.getTotalBytes(),"undefined"!=typeof this.plugin.getCdnTraffic&&"undefined"!=typeof this.plugin.getP2PTraffic&&(this.plugin.getCdnTraffic()||this.plugin.getP2PTraffic())&&(e.cdnDownloadedTraffic=this.plugin.getCdnTraffic(),e.p2pDownloadedTraffic=this.plugin.getP2PTraffic(),e.uploadTraffic=this.plugin.getUploadTraffic()),e}catch(t){return o.error(t),e}},o.managers.View=function(e){this.infoManager=e,this.isStartSent=!1,this.isJoinSent=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isErrorSent=!1,this.isShowingAds=!1,this.isAdStartSent=!1,this.isAdJoinSent=!1,this.isAdPaused=!1,this.isAdBuffering=!1,this.chrono={joinTime:new o.utils.Chrono,seek:new o.utils.Chrono,pause:new o.utils.Chrono,buffer:new o.utils.Chrono,adIgnore:new o.utils.Chrono,adTotal:new o.utils.Chrono,adJoinTime:new o.utils.Chrono,adPause:new o.utils.Chrono,adBuffer:new o.utils.Chrono},this.adCounter={pre:0,mid:0,post:0,unknown:0};var t=this;this.timer={pinger:new o.utils.Timer(function(e){t.sendPing({diffTime:e})}),playheadMonitor:new o.utils.Timer(function(e){t.checkPlayhead()},o.managers.View.monitoringInterval),adPlayheadMonitor:new o.utils.Timer(function(e){t.checkAdPlayhead()},o.managers.View.monitoringInterval)},this.enableBufferMonitor=!1,this.enableSeekMonitor=!1,this.enableAdBufferMonitor=!1,this.enableAdSeekMonitor=!1,this.lastDuration=0,this.lastPlayhead=0,this.lastAdPosition="",this.lastRendition="",this.lastResume=0,this.changedEntities=[],this.resourceParser=new o.utils.ResourceParser(this),this.comm=new o.comm.Communication(this.infoManager.options.service,this.infoManager.options.httpSecure),this.comm.requestData(this.infoManager.getDataParams(),function(){t.timer.pinger.interval=Math.max(1e3,1e3*t.comm.pingTime)})},o.managers.View.prototype.sendRequest=function(e,t,r){try{this.isAllowed(e)&&this.comm.sendRequest(e,t,r)}catch(e){o.error(e)}},o.managers.View.prototype.isAllowed=function(e){return this.infoManager.options.enableAnalytics&&!(e in this.infoManager.options.disabledRequests)},o.managers.View.prototype.isHalted=function(){return this.infoManager.options.haltOnError&&this.isErrorSent},o.managers.View.prototype.sendAdInit=function(e,t){try{this.isHalted()||this.isAdStartSent||this.isAdInitSent||(this.isShowingAds=!0,this.isAdInitSent=!0,this.chrono.adTotal.start(),this.chrono.adJoinTime.start(),this.sendSeekEnd(),this.sendBufferEnd(),e=this.infoManager.getAdStartParams(e),e.number="undefined"!=typeof e.number?e.number:this.getAdNumber(e.position,!0),this.lastAdPosition=e.position,this.sendRequest("/adInit",e,t),o.noticeRequest("Request: NQS /adInit "+e.position+e.number))}catch(e){o.error(e)}},o.managers.View.prototype.sendAdStart=function(e,t){try{this.isHalted()||this.isAdStartSent||(this.isShowingAds=!0,this.isAdStartSent=!0,this.isAdInitSent||(this.chrono.adTotal.start(),this.chrono.adJoinTime.start()),this.sendSeekEnd(),this.sendBufferEnd(),e=this.infoManager.getAdStartParams(e),e.number="undefined"!=typeof e.number?e.number:this.getAdNumber(e.position,!this.isAdInitSent),this.lastAdPosition=e.position,this.sendRequest("/adStart",e,t),o.noticeRequest("Request: NQS /adStart "+e.position+e.number),this.isAdInitSent&&(this.sendAdJoin(),this.isAdInitSent=!1))}catch(e){o.error(e)}},o.managers.View.prototype.sendAdJoin=function(e,t){try{this.isHalted()||this.isAdStartSent&&!this.isAdJoinSent&&(this.isAdJoinSent=!0,(this.enableAdBufferMonitor||this.enableAdSeekMonitor)&&(this.timer.adPlayheadMonitor.start(),this.lastPlayhead=0),e=this.infoManager.getAdJoinParams(e),e.duration="undefined"!=typeof e.duration?e.duration:this.chrono.adJoinTime.getDeltaTime(),e.position="undefined"!=typeof e.position?e.position:this.lastAdPosition,e.number="undefined"!=typeof e.number?e.number:this.getAdNumber(e.position),this.sendRequest("/adJoinTime",e,t),o.noticeRequest("Request: NQS /adJoinTime "+e.duration+"ms"))}catch(e){o.error(e)}},o.managers.View.prototype.sendAdStop=function(e,t){try{if(!this.isHalted()&&(this.isAdStartSent||this.isAdInitSent)){var r=void 0;this.isAdPaused&&(this.chrono.adPause.stop(),r=this.chrono.adPause.getDeltaTime()),this.isAdStartSent=!1,this.isAdJoinSent=!1,this.isAdPaused=!1,this.isAdBuffering=!1,this.isShowingAds=!1,this.isAdInitSent=!1,this.timer.adPlayheadMonitor.stop(),e=this.infoManager.getAdStopParams(e),e.totalDuration="undefined"!=typeof e.totalDuration?e.totalDuration:this.chrono.adTotal.getDeltaTime(),e.position="undefined"!=typeof e.position?e.position:this.lastAdPosition,e.number="undefined"!=typeof e.number?e.number:this.getAdNumber(e.position),r&&(e.pauseDuration=r),e.adPlayhead||delete e.adPlayhead,this.isJoinSent||(this.chrono.joinTime.startTime+=this.chrono.adTotal.getDeltaTime(),this.chrono.joinTime.startTime=Math.min(this.chrono.joinTime.startTime,(new Date).getTime())),this.sendRequest("/adStop",e,t),o.noticeRequest("Request: NQS /adStop "+e.totalDuration+"ms")}}catch(e){o.error(e)}},o.managers.View.prototype.sendAdPause=function(e,t){try{this.isHalted()||this.isAdJoinSent&&!this.isAdPaused&&(this.isAdPaused=!0,this.chrono.adPause.start(),e=this.infoManager.getAdPauseParams(e),e.position="undefined"!=typeof e.position?e.position:this.lastAdPosition,e.number="undefined"!=typeof e.number?e.number:this.getAdNumber(e.position),this.sendRequest("/adPause",e,t),o.noticeRequest("Request: NQS /adPause"))}catch(e){o.error(e)}},o.managers.View.prototype.sendAdResume=function(e,t){try{this.isHalted()||this.isAdJoinSent&&this.isAdPaused&&(this.isAdPaused=!1,this.chrono.adPause.stop(),e=this.infoManager.getAdResumeParams(e),e.position="undefined"!=typeof e.position?e.position:this.lastAdPosition,e.number="undefined"!=typeof e.number?e.number:this.getAdNumber(e.position),e.pauseDuration=this.chrono.adPause.getDeltaTime(),this.sendRequest("/adResume",e,t),o.noticeRequest("Request: NQS /adResume"))}catch(e){o.error(e)}},o.managers.View.prototype.sendAdBufferStart=function(){try{this.isHalted()||this.isAdJoinSent&&!this.isAdBuffering&&(this.isAdBuffering=!0,this.chrono.adBuffer.start(),o.noticeRequest("Method: /adBufferStart"))}catch(e){o.error(e)}},o.managers.View.prototype.sendAdBufferEnd=function(e,t){try{this.isHalted()||this.isAdJoinSent&&this.isAdBuffering&&(this.isAdBuffering=!1,e=this.infoManager.getAdBufferEndParams(e),e.duration="undefined"!=typeof e.duration?e.duration:this.chrono.adBuffer.getDeltaTime(),e.position="undefined"!=typeof e.position?e.position:this.lastAdPosition,e.number="undefined"!=typeof e.number?e.number:this.getAdNumber(e.position),this.sendRequest("/adBufferUnderrun",e,t),o.noticeRequest("Request: NQS /adBufferUnderrun "+e.duration+"ms"))}catch(e){o.error(e)}},o.managers.View.prototype.sendAdError=function(e,t){try{this.isHalted()||(e=this.infoManager.getAdErrorParams(e),"undefined"==typeof e.position&&(this.isAdStartSent?e.position=this.lastAdPosition:e.position=this.infoManager.getAdPosition(),e.number=this.getAdNumber(e.position)),this.sendRequest("/adError",e,t),o.noticeRequest("Request: NQS /adError"))}catch(e){o.error(e)}},o.managers.View.prototype.sendAdClick=function(e,t){try{this.isHalted()||(e=this.infoManager.getAdClickParams(e),e.position="undefined"!=typeof e.position?e.position:this.lastAdPosition,e.number="undefined"!=typeof e.number?e.number:this.getAdNumber(e.position),this.sendRequest("/adClick",e,t),o.noticeRequest("Request: NQS /adClick"))}catch(e){o.error(e)}},o.managers.View.prototype.getAdNumber=function(e,t){var r=0;switch(e){case"pre":r=t?++this.adCounter.pre:this.adCounter.pre;break;case"mid":r=t?++this.adCounter.mid:this.adCounter.mid;break;case"post":r=t?++this.adCounter.post:this.adCounter.post;break;default:r=t?++this.adCounter.unknown:this.adCounter.unknown}return r>0?r:1},o.managers.View.prototype.resetAdNumbers=function(){this.adCounter={pre:0,mid:0,post:0,unknown:0}},o.managers.View.prototype.sendIgnoreAdStart=function(){try{this.isHalted()||this.isStartSent&&!this.isShowingAds&&(this.isShowingAds=!0,this.chrono.adIgnore.start(),this.sendBufferEnd(),this.sendSeekEnd(),o.noticeRequest("Method: /genericAdStart"))}catch(e){o.error(e)}},o.managers.View.prototype.sendIgnoreAdEnd=function(){try{this.isHalted()||this.isStartSent&&this.isShowingAds&&(this.isShowingAds=!1,this.chrono.adIgnore.stop(),this.isJoinSent||(this.chrono.joinTime.startTime+=this.chrono.adIgnore.getDeltaTime(),this.chrono.joinTime.startTime=Math.min(this.chrono.joinTime.startTime,(new Date).getTime())),o.noticeRequest("Method: /genericAdEnd "+this.chrono.adIgnore.getDeltaTime()+"ms"))}catch(e){o.error(e)}},o.managers.View.prototype.sendStart=function(e,t){try{this.isHalted()||this.isStartSent||((this.infoManager.options.parseCDNNodeHost||this.infoManager.options.parseHLS)&&this.resourceParser.init(),this.isStartSent=!0,this.chrono.joinTime.start(),o.noticeRequest("Sending pings every "+this.comm.pingTime+"s."),this.timer.pinger.interval=Math.max(1e3,1e3*this.comm.pingTime),this.timer.pinger.start(),e=this.infoManager.getStartParams(e),e.pingTime="undefined"!=typeof e.pingTime?e.pingTime:this.comm.pingTime,this.infoManager.options.parseCDNNodeHost&&(e.nodeHost="undefined"!=typeof e.nodeHost?e.nodeHost:"undefined"!=typeof this.resourceParser.nodeHost?this.resourceParser.nodeHost:"",e.nodeType="undefined"!=typeof e.nodeType?e.nodeType:"undefined"!=typeof this.resourceParser.nodeType?this.resourceParser.nodeType:""),this.comm.nextView(e.live),this.sendRequest("/start",e,t),o.noticeRequest("Request: NQS /start "+e.resource),this.lastDuration=e.duration,this.lastRendition=e.rendition)}catch(e){o.error(e)}},o.managers.View.prototype.sendJoin=function(e,t){try{this.isHalted()||!this.isStartSent||this.isJoinSent||this.isShowingAds||(this.isJoinSent=!0,(this.enableBufferMonitor||this.enableSeekMonitor)&&(this.timer.playheadMonitor.start(),this.lastPlayhead=0),e=this.infoManager.getJoinParams(e),e.time="undefined"!=typeof e.time?e.time:this.chrono.joinTime.getDeltaTime(),e.mediaDuration===this.lastDuration&&delete e.mediaDuration,this.sendRequest("/joinTime",e,t),o.noticeRequest("Request: NQS /joinTime "+e.time+"ms"))}catch(e){o.error(e)}},o.managers.View.prototype.sendStop=function(e,t){try{if(!this.isHalted()&&this.isStartSent){var r=void 0;this.isJoinSent&&this.isPaused&&(this.chrono.pause.stop(),r=this.chrono.pause.getDeltaTime()),this.isStartSent=!1,this.isPaused=!1,this.isJoinSent=!1,this.isSeeking=!1,this.isBuffering=!1,this.isErrorSent=!1,this.resourceParser.clear(),this.resetAdNumbers(),this.stopTimers(),e=this.infoManager.getStopParams(e),e.diffTime="undefined"!=typeof e.diffTime?e.diffTime:this.timer.pinger.chrono.getDeltaTime(),r&&(e.pauseDuration=r),this.sendRequest("/stop",e,t),o.noticeRequest("Request: NQS /stop")}}catch(e){o.error(e)}},o.managers.View.prototype.sendPause=function(e,t){try{this.isHalted()||this.isJoinSent&&!this.isPaused&&(this.isPaused=!0,this.chrono.pause.start(),e=this.infoManager.getPauseParams(e),this.sendRequest("/pause",e,t),o.noticeRequest("Request: NQS /pause"))}catch(e){o.error(e)}},o.managers.View.prototype.sendResume=function(e,t){try{this.isHalted()||this.isJoinSent&&this.isPaused&&(this.isPaused=!1,this.chrono.pause.stop(),this.lastResume=(new Date).getTime(),e=this.infoManager.getResumeParams(e),e.pauseDuration=this.chrono.pause.getDeltaTime(),this.sendRequest("/resume",e,t),o.noticeRequest("Request: NQS /resume"))}catch(e){o.error(e)}},o.managers.View.prototype.sendBufferStart=function(){try{this.isHalted()||this.isJoinSent&&!this.isBuffering&&(this.isBuffering=!0,this.chrono.buffer.start(),o.noticeRequest("Method: /bufferStart"))}catch(e){o.error(e)}},o.managers.View.prototype.sendBufferEnd=function(e,t){try{this.isHalted()||this.isJoinSent&&this.isBuffering&&(this.isBuffering=!1,this.lastResume=(new Date).getTime(),e=this.infoManager.getBufferEndParams(e),e.duration="undefined"!=typeof e.duration?e.duration:this.chrono.buffer.getDeltaTime(),this.sendRequest("/bufferUnderrun",e,t),o.noticeRequest("Request: NQS /bufferUnderrun "+e.duration+"ms"))}catch(e){o.error(e)}},o.managers.View.prototype.sendSeekStart=function(){try{this.isHalted()||this.isJoinSent&&!this.isSeeking&&(this.isSeeking=!0,this.chrono.seek.start(),o.noticeRequest("Method: /seekStart"))}catch(e){o.error(e)}},o.managers.View.prototype.sendSeekEnd=function(e,t){try{this.isHalted()||this.isJoinSent&&this.isSeeking&&(this.isSeeking=!1,this.lastResume=(new Date).getTime(),e=this.infoManager.getSeekEndParams(e),e.duration="undefined"!=typeof e.duration?e.duration:this.chrono.seek.getDeltaTime(),this.sendRequest("/seek",e,t),o.noticeRequest("Request: NQS /seek "+e.duration+"ms"))}catch(e){o.error(e)}},o.managers.View.prototype.sendError=function(e,t){try{this.isErrorSent=!0,!this.infoManager.options.parseCDNNodeHost&&!this.infoManager.options.parseHLS||this.resourceParser.realResource||this.resourceParser.init(),this.infoManager.options.haltOnError&&this.stopTimers(),e=this.infoManager.getErrorParams(e),e.pingTime="undefined"!=typeof e.pingTime?e.pingTime:this.comm.pingTime,this.infoManager.options.parseCDNNodeHost&&(e.nodeHost="undefined"!=typeof e.nodeHost?e.nodeHost:"undefined"!=typeof this.resourceParser.nodeHost?this.resourceParser.nodeHost:"",e.nodeType="undefined"!=typeof e.nodeType?e.nodeType:"undefined"!=typeof this.resourceParser.nodeType?this.resourceParser.nodeType:""),this.sendRequest("/error",e,t),o.noticeRequest("Request: NQS /error "+e.msg)}catch(e){o.error(e)}},o.managers.View.prototype.convertBufferToSeek=function(){try{o.noticeRequest("Converting buffer to seek"),this.chrono.seek.startTime=this.chrono.buffer.startTime,this.chrono.seek.lastTime=0,this.chrono.buffer.stop(),this.isBuffering=!1,this.isSeeking=!0}catch(e){o.error(e)}},o.managers.View.monitoringInterval=800,o.managers.View.prototype.jumpNextTick=!1,o.managers.View.prototype.checkPlayhead=function(){if(this.isJoinSent&&!this.isShowingAds){var e=2*o.managers.View.monitoringInterval,t=o.managers.View.monitoringInterval/2,r=1.1*o.managers.View.monitoringInterval,n=this.infoManager.getPlayhead(),i=1e3*Math.abs(this.lastPlayhead-n);if(i<t){var a=this.lastResume?Math.abs((new Date).getTime()-this.lastResume):0;this.enableBufferMonitor&&(0==a||a>o.managers.View.monitoringInterval)&&this.lastPlayhead>0&&!this.isBuffering&&!this.isPaused&&!this.isSeeking&&this.sendBufferStart()}else i>e?this.enableSeekMonitor&&this.lastPlayhead>0&&!this.isSeeking&&(this.isBuffering?this.convertBufferToSeek():this.sendSeekStart()):this.isSeeking?this.sendSeekEnd():this.isBuffering&&this.enableBufferMonitor&&this.chrono.buffer.getDeltaTime(!1)>r&&this.sendBufferEnd();this.lastPlayhead=n}},o.managers.View.prototype.checkAdPlayhead=function(){if(this.isAdJoinSent){var e=o.managers.View.monitoringInterval/2,t=1.1*o.managers.View.monitoringInterval,r=this.infoManager.getAdPlayhead(),n=1e3*Math.abs(this.lastPlayhead-r);n<e?this.enableAdBufferMonitor&&this.lastPlayhead>0&&!this.isAdBuffering&&!this.isAdPaused&&this.sendAdBufferStart():this.isAdBuffering&&this.chrono.adBuffer.getDeltaTime(!1)>t&&this.sendAdBufferEnd(),this.lastPlayhead=r;
}},o.managers.View.prototype.stopTimers=function(){this.timer.pinger.stop(),this.timer.playheadMonitor.stop(),this.timer.adPlayheadMonitor.stop()},o.managers.View.prototype.sendPing=function(e,t){try{e=this.infoManager.getPingParams(e),this.isShowingAds&&(e=this.infoManager.getAdPingParams(e)),e.pingTime="undefined"!=typeof e.pingTime?e.pingTime:this.comm.pingTime,this.isSeeking&&(e.seekDuration="undefined"!=typeof e.seekDuration?e.seekDuration:this.chrono.seek.getDeltaTime(!1)),this.isBuffering&&(e.bufferDuration="undefined"!=typeof e.bufferDuration?e.bufferDuration:this.chrono.buffer.getDeltaTime(!1)),this.isAdBuffering&&(e.adBufferDuration="undefined"!=typeof e.adBufferDuration?e.adBufferDuration:this.chrono.adBuffer.getDeltaTime(!1));var r=this.infoManager.getRendition();if(r&&this.lastRendition!=r&&(this.sendChangedEntity("rendition",r),this.lastRendition=r),this.isAdPaused?e.pauseDuration=this.chrono.adPause.getDeltaTime(!1):this.isJoinSent&&this.isPaused&&(e.pauseDuration=this.chrono.pause.getDeltaTime(!1)),1==this.changedEntities.length){var n=this.changedEntities.shift();e.entityType=n.key,e.entityValue=n.value}else if(this.changedEntities.length>1){e.entityType=null,e.entityValue=null,e.entities={};for(var i=0;i<this.changedEntities.length;i++)e.entities[this.changedEntities[i].key]=this.changedEntities[i].value;this.changedEntities=[]}this.sendRequest("/ping",e,t)}catch(e){o.error(e)}},o.managers.View.prototype.sendChangedEntity=function(e,t){try{this.changedEntities.push({key:e,value:t})}catch(e){o.error(e)}},o.utils.Chrono=function(){try{this.startTime=0,this.lastTime=0}catch(e){o.error(e)}},o.utils.Chrono.prototype.getDeltaTime=function(e){try{return this.startTime?0===this.lastTime?e!==!1?this.stop():(new Date).getTime()-this.startTime:this.lastTime-this.startTime:-1}catch(e){o.error(e)}},o.utils.Chrono.prototype.start=function(){try{this.startTime=(new Date).getTime(),this.lastTime=0}catch(e){o.error(e)}},o.utils.Chrono.prototype.stop=function(){try{return this.lastTime=(new Date).getTime(),this.getDeltaTime()}catch(e){o.error(e)}},o.utils.parseNumber=function(e,t){return!isNaN(e)&&e>=0&&e!=1/0&&null!==e&&"undefined"!=typeof e?e:t},o.utils.listenAllEvents=function(e,t,r){try{if(o.debugLevel>=4){r=r||function(e){var t="";"undefined"!=typeof e.target&&"undefined"!=typeof e.target.id&&(t=e.target.id),o.debug("Event: "+t+" > "+e.type)};var n=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];t&&(null===t[0]?(t.shift(),n=t):n=n.concat(t));for(var i=0;i<n.length;i++)"function"==typeof e?e.call(window,n[i],r):e.on?e.on(n[i],r):e.addEventListener&&e.addEventListener(n[i],r)}}catch(e){o.error(e)}},o.utils.buildRenditionString=function(e,t,r){1==arguments.length&&(r=e,e=null,t=null);var n="";return e&&t&&(n=e+"x"+t,r>0&&(n+="@")),r<1?n:(r<1e3?n+=Math.round(r)+"bps":r<1e6?(r=Math.round(r/1e3),n+=r+"Kbps"):(r=Math.round(r/1e4)/100,n+=r+"Mbps"),n)},o.utils.getCdnTraffic=function(){if("undefined"!=typeof Streamroot&&Streamroot.p2pAvailable&&Streamroot.peerAgents){var e=0;for(agent in Streamroot.peerAgents)e+=Streamroot.peerAgents[agent].stats.cdn;return e}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalHttpDownloaded:null},o.utils.getP2PTraffic=function(){if("undefined"!=typeof Streamroot&&Streamroot.p2pAvailable&&Streamroot.peerAgents){var e=0;for(agent in Streamroot.peerAgents)Streamroot.peerAgents[agent].isP2PEnabled&&(e+=Streamroot.peerAgents[agent].stats.p2p);return e}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PDownloaded:null},o.utils.getUploadTraffic=function(){if("undefined"!=typeof Streamroot&&Streamroot.p2pAvailable&&Streamroot.peerAgents){var e=0;for(agent in Streamroot.peerAgents)Streamroot.peerAgents[agent].isP2PEnabled&&(e+=Streamroot.peerAgents[agent].stats.upload);return e}return"undefined"!=typeof peer5&&peer5.getStats?peer5.getStats().totalP2PUploaded:null},o.debugLevel=2,o.messageLevels={1:"e",2:"w",3:"n",4:"d",5:"v"},o.plainConsole=!1,o.report=function(e,t,r){if(console&&console.log){t=t||4,r=r||"darkcyan";var n=o.messageLevels[t],i=o.getCurrentTime()+"[Youbora] "+n+":";if("undefined"!=typeof o.remoteLog&&o.remoteLog.enabled===!0&&o.remoteLog(i+e),o.debugLevel>=t)if(o.plainConsole||document.documentMode)o.plainReport(e,i);else{var a=console.log;1==t&&console.error?a=console.error:2==t&&console.warn?a=console.warn:t>=4&&console.debug&&(a=console.debug),i="%c"+i,e instanceof Array?(e.splice(0,0,i,"color: "+r),a.apply(console,e)):a.call(console,i,"color: "+r,e)}}},o.getCurrentTime=function(e){var t=new Date;return"["+("0"+t.getDate()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+"."+("00"+t.getMilliseconds()).slice(-3)+"]"},o.plainReport=function(e,t){if(e instanceof Array)for(var r in e)o.plainReport(e[r],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+" <next line>"),console.log(e))},o.error=function(){o.report([].slice.call(arguments),1,"darkred")},o.warn=function(){o.report([].slice.call(arguments),2,"darkorange")},o.notice=function(){o.report([].slice.call(arguments),3,"darkcyan")},o.noticeRequest=function(){o.report([].slice.call(arguments),3,"darkgreen")},o.debug=function(){o.report([].slice.call(arguments),4,"indigo")},o.verbose=function(){o.report([].slice.call(arguments),5,"navy")},function(){function e(e){switch(e){case"plain":o.plainConsole=!0;break;case"remote":o.remoteLog.forced=!0;break;case"plain+remote":case"remote+plain":o.remoteLog.forced=!0,o.plainConsole=!0}}try{if("undefined"!=typeof window){var t=document.getElementsByTagName("script");for(var r in t)if(t[r].getAttribute){var n=t[r].getAttribute("youbora-debug");n&&(o.debugLevel=n),n=t[r].getAttribute("youbora-console"),n&&e(n)}var i=/\?.*\&*youbora-debug=(.+)/i.exec(window.location.search);null!==i&&(o.debugLevel=i[1]),i=/\?.*\&*youbora-console=(.+)/i.exec(window.location.search),null!==i&&e(i[1])}}catch(e){o.error(e)}}(),o.utils.ResourceParser=function(e){try{this.viewManager=e,this.parseTimeout=null,this.realResource="",this.nodeHost=void 0,this.nodeType=void 0,this.cdn,this.cdnRequests={},this.cdns=o.utils.ResourceParser.cdnsEnabled.slice()}catch(e){o.error(e)}},o.utils.ResourceParser.prototype.init=function(){try{this.realResource&&this.clear(),this.viewManager.comm.addPreloader("ResourceParser");var e=this;this.viewManager.comm.extraOperationsCallback=function(t){"undefined"!=typeof t.resource&&e.realResource&&(t.resource=e.realResource),"undefined"!=typeof t.nodeHost&&e.nodeHost&&(t.nodeHost=e.nodeHost,t.nodeType=e.nodeType),!t.cdn&&e.viewManager.infoManager.options.useCDNFromParser&&(t.cdn=e.cdn)},this.parseTimeout=setTimeout(function(){"ResourceParser"in e.viewManager.comm.preloaders&&(e.realResource=e.viewManager.infoManager.getResource(),e.viewManager.comm.removePreloader("ResourceParser"),o.warn("ResourceParser has exceded the maximum execution time (3s) and will be aborted."))},3e3),this.realResource=this.viewManager.infoManager.getResource(),this.viewManager.infoManager.options.parseHLS?this._parseRealResourceAsync(this.realResource):this._parseCDNAsync()}catch(e){o.error(e)}},o.utils.ResourceParser.prototype.clear=function(){this.realResource="",this.nodeHost=void 0,this.nodeType=void 0,this.cdnRequests={},this.cdns=o.utils.ResourceParser.cdnsEnabled.slice()},o.utils.ResourceParser.prototype._parseRealResourceAsync=function(e,t){try{var r=/(\S*?(\.m3u8|\.m3u|\.ts|\.mp4)(\?\S*|\n|\r|$))/i.exec(e);if(null!==r){var n=r[1].trim();if(0!==n.indexOf("http")&&0!==n.indexOf("//")&&(n=t.slice(0,t.lastIndexOf("/"))+"/"+n),".m3u8"==r[2]||".m3u"==r[2]){var i=this;new o.comm.AjaxRequest(n).load(function(){i._parseRealResourceAsync(this.responseText,n)}).error(function(){i._parseCDNAsync()}).send()}else this.realResource=n,this._parseCDNAsync()}else this._parseCDNAsync()}catch(e){o.error(e),this._parseCDNAsync()}},o.utils.ResourceParser.cdnsEnabled=["Level3","Akamai","Highwinds","Fastly"],o.utils.ResourceParser.cdnsAvailable={Level3:{code:"LEVEL3",parsers:[{type:"host+type",name:"X-WR-DIAG",regex:/Host:(.+)\sType:(.+)/}],headers:{"X-WR-DIAG":"host"}},Akamai:{code:"AKAMAI",parsers:[{type:"host+type",name:"X-Cache",regex:/(.+)\sfrom\s.+\(.+\/(.+)\).+/}]},Highwinds:{code:"HIGHNEGR",parsers:[{type:"host+type",name:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}]},Fastly:{code:"FASTLY",parsers:[{type:"host",name:"X-Served-By",regex:/([^,\s]+)$/},{type:"type",name:"X-Cache",regex:/([^,\s]+)$/}]},Telefonica:{code:"TELEFO",parsers:[{type:"host+type",name:"X-TCDN",regex:/Host:(.+)\sType:(.+)/}]},CustomCDN:{code:null,parsers:[{type:"name",regex:/(.+)/}]}},o.utils.ResourceParser.prototype._parseCDNAsync=function(){try{if(this.viewManager.infoManager.options.parseCDNNodeHost)if(this.cdns.length>0&&!this.nodeHost){var e=this.cdns.shift();if("undefined"!=typeof o.utils.ResourceParser.cdnsAvailable[e]){var t=o.utils.ResourceParser.cdnsAvailable[e],r=JSON.stringify(t.headers);if(this.cdnRequests.hasOwnProperty(r))this._parseNode(t,this.cdnRequests[r]);else{var n=this,i=new o.comm.AjaxRequest(this.realResource,"","",{method:"HEAD",maxRetries:0,requestHeaders:t.headers});i.load(function(){n.cdnRequests[r]=i.getXHR(),n._parseNode(t,i.getXHR())}),i.error(function(){n._parseCDNAsync()}),i.send()}}else this._parseCDNAsync()}else this.viewManager.comm.removePreloader("ResourceParser");else this.viewManager.comm.removePreloader("ResourceParser")}catch(e){o.error(e)}},o.utils.ResourceParser.prototype._parseNode=function(e,t){try{var r=e.parsers;for(var n in r){"name"==r[n].type&&(r[n].name=this.viewManager.infoManager.options.parseCDNNameFrom);var i=t.getResponseHeader(r[n].name);if(null===i)return void this._parseCDNAsync();var a=r[n].regex.exec(i);if(null===a)return void this._parseCDNAsync();switch(r[n].type){case"host":this.nodeHost=a[1];break;case"type":this.nodeType=this._parseNodeType(a[1]);break;case"host+type":this.nodeHost=a[1],this.nodeType=this._parseNodeType(a[2]);break;case"type+host":this.nodeType=this._parseNodeType(a[1]),this.nodeHost=a[2];break;case"name":this.cdn=a[1].toUpperCase()}e.code&&(this.cdn=e.code)}this._parseCDNAsync()}catch(e){o.error(e),this._parseCDNAsync()}},o.utils.ResourceParser.prototype._parseNodeType=function(e){try{switch(e){case"TCP_HIT":case"HIT":case"c":return 1;case"TCP_MISS":case"MISS":case"p":case"i":case"m":return 2;case"TCP_MEM_HIT":return 3;case"TCP_IMS_HIT":return 4;default:return 0}}catch(e){return o.error(e),0}},o.utils.Timer=function(e,t){try{this.callback=e,this.interval=t||5e3,this.isRunning=!1,this.timer=null,this.chrono=new o.utils.Chrono}catch(e){o.error(e)}},o.utils.Timer.prototype.start=function(){try{this.isRunning=!0,this._setPing()}catch(e){o.error(e)}},o.utils.Timer.prototype.stop=function(){try{this.isRunning=!1,clearTimeout(this.timer)}catch(e){o.error(e)}},o.utils.Timer.prototype._setPing=function(){try{if(this.isRunning){this.chrono.start();var e=this;this.timer=setTimeout(function(){e.callback(e.chrono.stop()),e._setPing()},this.interval)}}catch(e){o.error(e)}},"undefined"!=typeof e&&e.exports?e.exports=o:window.$YB=o;"undefined"!=typeof o&&(o.plugins.Videojs5=function(e,t){try{this.pluginName="videojs5-unknown",this.pluginVersion="5.5.3-videojs5",this.startMonitoring(e,t),this.playerId=e.id(),this.enableBufferMonitor(),e.ready(this.registerCommon),this.connectAdnalyzers()}catch(e){o.error(e)}},o.plugins.Videojs5.prototype=new o.plugins.Generic,o.plugins.Videojs5.prototype.detectPlayer=function(){this.pluginName="videojs5",this.getTech().hls&&(this.pluginName+="-hls"),this.getTech().hls_&&(this.pluginName+="-hlsjs"),this.getTech().shakaPlayer&&(this.pluginName+="-shaka"),this.player.mediainfo&&(this.pluginName+="-bcove"),(this.player.ima||this.player.ima3)&&(this.pluginName+="-ima"),this.player.FreeWheelPlugin&&(this.pluginName+="-fw"),this.player.onceux&&(this.pluginName+="-oux"),o.notice("Player detected: "+this.pluginName)},o.plugins.Videojs5.prototype.getTech=function(){return this.player.tech({IWillNotUseThisInPlugins:!0})},o.plugins.Videojs5.prototype.getPlayhead=function(){if(this.player){if(this.player.absoluteTime&&this.player.absoluteTime())return this.player.absoluteTime();if(this.player.currentTime&&this.player.currentTime())return this.player.currentTime()}return 0},o.plugins.Videojs5.prototype.getMediaDuration=function(){return this.player.mediainfo&&"undefined"!=typeof this.player.mediainfo.duration?Math.round(this.player.mediainfo.duration):Math.round(this.player.duration())},o.plugins.Videojs5.prototype.getThroughput=function(){if(o.utils.getCdnTraffic()&&0!==o.utils.getCdnTraffic()){this.lastDataValue||(this.lastDataValue=0);var e=this.lastDataValue;return this.lastDataValue=o.utils.getCdnTraffic()+o.utils.getP2PTraffic(),Math.round((this.lastDataValue-e)/this.viewManager.comm.pingTime)}return this.getTech().hls&&this.getTech().hls.bandwidth?this.getTech().hls.bandwidth:-1},o.plugins.Videojs5.prototype.getBitrate=function(){try{return this.getTech().hls?this.getTech().hls.playlists.media().attributes.BANDWIDTH:this.getTech().hls_?this.getTech().hls_.levels[this.getTech().hls_.currentLevel].bitrate:this.getTech().shakaPlayer?this.getTech().shakaPlayer.getStats().streamBandwidth:-1}catch(e){return-1}},o.plugins.Videojs5.prototype.getRendition=function(){try{if(this.getTech().hls){var e=this.getTech().hls.playlists.media().attributes;return e.NAME?e.NAME:e.RESOLUTION?o.utils.buildRenditionString(e.RESOLUTION.width,e.RESOLUTION.height,e.BANDWIDTH):o.utils.buildRenditionString(e.BANDWIDTH)}if(this.getTech().hls_){var t=this.getTech().hls_.levels[this.getTech().hls_.currentLevel];return t.name?t.name:o.utils.buildRenditionString(t.width,t.height,t.bitrate)}if(this.getTech().shakaPlayer){var r=this.getTech().shakaPlayer.getVariantTracks();for(var n in r){var i=r[n];if(i.active&&"video"==i.type)return o.utils.buildRenditionString(i.width,i.height,i.bandwidth)}return this.getTech().shakaPlayer.getStats().estimatedBandwidth}return null}catch(e){return null}},o.plugins.Videojs5.prototype.getResource=function(){return this.getTech().hls_?this.getTech().hls_.url:this.getTech().shakaPlayer?this.getTech().shakaPlayer.getManifestUri():this.player.currentSrc()},o.plugins.Videojs5.prototype.getPlayerVersion=function(){if(videojs.VERSION)return this.pluginName+" "+videojs.VERSION},o.plugins.Videojs5.prototype.getTitle=function(){return this.player.mediainfo&&this.player.mediainfo.name?this.player.mediainfo.name:void 0},o.plugins.Videojs5.prototype.registerCommon=function(){try{o.utils.listenAllEvents(this,["adstart","adend","adskip","adsready","adserror","dispose"]),this.on("loadstart",function(e){this.youboraplugin.detectPlayer(),this.autoplay()&&this.youboraplugin.playHandler()}),this.on("play",function(e){this.youboraplugin.viewManager.isStartSent&&this.youboraplugin.joinHandler(),this.youboraplugin.resumeHandler(),this.youboraplugin.playHandler(),this.youboraplugin.adnalyzer&&this.youboraplugin.adnalyzer.registerVideojs&&this.youboraplugin.adnalyzer.registerVideojs(),this.youboraplugin.sendIgnoringAd&&(this.youboraplugin.sendIgnoringAd=!1,this.youboraplugin.ignoringAdHandler())}),this.on("playing",function(e){this.youboraplugin.getPlayhead()>.1&&this.youboraplugin.joinHandler(),this.youboraplugin.resumeHandler()}),this.on("pause",function(e){this.youboraplugin.pauseHandler()}),this.on("abort",function(e){this.youboraplugin.endedHandler()}),this.on("ended",function(e){this.youboraplugin.endedHandler()}),this.on("dispose",function(e){this.youboraplugin.endedHandler()}),this.on("seeking",function(e){this.youboraplugin.seekingHandler()}),this.on("seeked",function(e){this.youboraplugin.seekPlayhead=this.youboraplugin.getPlayhead()}),this.on("timeupdate",function(e){try{!this.youboraplugin.viewManager.isShowingAds&&this.youboraplugin.getPlayhead()>.1&&(this.youboraplugin.joinHandler(),this.youboraplugin.seekPlayhead&&this.youboraplugin.seekPlayhead!=this.youboraplugin.getPlayhead()&&(this.youboraplugin.seekedHandler(),this.youboraplugin.seekPlayhead=!1))}catch(e){o.error(e)}}),this.on("error",function(e){try{this.youboraplugin.errorHandler(this.error().code,this.error().message)}catch(e){o.error(e)}}),this.on("adstart",function(e){!this.youboraplugin.adnalyzer&&this.youboraplugin.viewManager.isStartSent?this.youboraplugin.ignoringAdHandler():this.youboraplugin.sendIgnoringAd=!0}),this.on("adend",function(e){this.youboraplugin.adnalyzer||this.youboraplugin.ignoredAdHandler()}),this.on("adskip",function(e){this.youboraplugin.adnalyzer||this.youboraplugin.ignoredAdHandler()})}catch(e){o.error(e)}},o.plugins.Videojs5.prototype.connectAdnalyzers=function(){"undefined"!=typeof google?"undefined"!=typeof o.adnalyzers.Ima&&this.player.ima&&(this.adnalyzer=new o.adnalyzers.Ima(this)):"undefined"!=typeof o.adnalyzers.OnceUX&&this.player.onceux?this.adnalyzer=new o.adnalyzers.OnceUX(this):"undefined"!=typeof o.adnalyzers.BrightcoveAds&&this.player.ads&&(this.adnalyzer=new o.adnalyzers.BrightcoveAds(this))}),"undefined"!=typeof videojs&&("undefined"!=typeof videojs.registerPlugin?videojs.registerPlugin("youbora",function(e){"undefined"==typeof this.youboraplugin?this.youboraplugin=new o.plugins.Videojs5(this,e):this.youboraplugin.setOptions(e)}):videojs.plugin("youbora",function(e){"undefined"==typeof this.youboraplugin?this.youboraplugin=new o.plugins.Videojs5(this,e):this.youboraplugin.setOptions(e)}));"undefined"!=typeof o&&(o.adnalyzers.Ima=function(e){try{this.adnalyzerVersion="5.4.2-ima",this.startMonitoring(e,e.player.ima)}catch(e){o.error(e)}},o.adnalyzers.Ima.prototype=new o.adnalyzers.Generic,o.adnalyzers.Ima.prototype.getAdResource=function(){if(this.ads.getAdsManager&&this.ads.getAdsManager()){var e=this.ads.getAdsManager();for(val in e)if("string"==typeof e[val]&&"http://pubads"===e[val].substring(0,13))return e[val];return null}return null},o.adnalyzers.Ima.prototype.getAdPlayhead=function(){return this.getAdDuration()-this.ads.getAdsManager().getRemainingTime()},o.adnalyzers.Ima.prototype.getAdPosition=function(){var e=this.ads.getAdsManager().getCurrentAd().getAdPodInfo().getPodIndex();return 0===e?"pre":e===-1?"post":e>0?"mid":"unknown"},o.adnalyzers.Ima.prototype.getAdDuration=function(){return null!==this.ads.getAdsManager().getCurrentAd()&&(this.duration=this.ads.getAdsManager().getCurrentAd().getDuration()),this.duration},o.adnalyzers.Ima.prototype.getAdTitle=function(){return this.ads.getAdsManager().getCurrentAd().getTitle()},o.adnalyzers.Ima.prototype.getAdPlayerVersion=function(){return"IMA"+google.ima.VERSION},o.adnalyzers.Ima.prototype.registerVideojs=function(){try{this.registerListeners()}catch(e){o.error(e)}},o.adnalyzers.Ima.prototype.registerListeners=function(){try{if(void 0===this.ads||"undefined"==typeof this.ads.addEventListener)return null;this.enableAdBufferMonitor(),o.utils.listenAllEvents(this.ads.addEventListener,[null,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.LOG],function(e){o.debug("Event: Ima > "+e.type)});var e=this;this.ads.addEventListener(google.ima.AdEvent.Type.LOADED,function(t){try{e.playAdHandler()}catch(e){o.error(e)}}),this.ads.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){try{e.playAdHandler()}catch(e){o.error(e)}}),this.ads.addEventListener(google.ima.AdEvent.Type.STARTED,function(t){try{e.joinAdHandler()}catch(e){o.error(e)}}),this.ads.addEventListener(google.ima.AdEvent.Type.PAUSED,function(t){try{e.pauseAdHandler()}catch(e){o.error(e)}}),this.ads.addEventListener(google.ima.AdEvent.Type.RESUMED,function(t){try{e.resumeAdHandler()}catch(e){o.error(e)}}),this.ads.addEventListener(google.ima.AdEvent.Type.CLICK,function(t){try{e.clickAdHandler(t.getAd().g.clickThroughUrl)}catch(e){o.error(e)}}),this.ads.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(t){try{e.endedAdHandler()}catch(e){o.error(e)}}),this.ads.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(t){try{e.skipAdHandler()}catch(e){o.error(e)}})}catch(e){o.error(e)}}),"undefined"!=typeof o&&(o.adnalyzers.BrightcoveAds=function(e){try{this.adnalyzerVersion="5.5.0-brightcove-ads",e.player.ima3?this.startMonitoring(e,e.player.ima3):e.player.FreeWheelPlugin?this.startMonitoring(e,e.player.FreeWheelPlugin):o.notice("Adnalyzer '"+this.adnalyzerVersion+"' couldn't find any Ads Plugin associated to Brightcove.")}catch(e){o.error(e)}},o.adnalyzers.BrightcoveAds.prototype=new o.adnalyzers.Generic,o.adnalyzers.BrightcoveAds.prototype.getMediaPlayhead=function(){return this.ads.snapshot&&this.ads.snapshot.currentTime?this.ads.snapshot.currentTime:null},o.adnalyzers.BrightcoveAds.prototype.getAdPlayhead=function(){var e=this.plugin.player;return e.ads&&e.ads.ad&&e.ads.ad.currentTime?e.ads.ad.currentTime():(this.ads.adPlayer&&(e=this.ads.adPlayer),e.currentTime())},o.adnalyzers.BrightcoveAds.prototype.getAdDuration=function(){var e=this.plugin.player;return e.ads&&e.ads.ad&&e.ads.ad.duration?e.ads.ad.duration:(this.ads.adPlayer&&(e=this.ads.adPlayer),e.duration())},o.adnalyzers.BrightcoveAds.prototype.getAdPosition=function(){if(this.ads.adsManager&&this.ads.adsManager.getCurrentAd()){var e=this.ads.adsManager.getCurrentAd().getAdPodInfo().getPodIndex();return 0===e?"pre":e===-1?"post":e>0?"mid":"unknown"}return this.plugin.isJoinSent?this.plugin.getPlayhead()>=this.plugin.getMediaDuration()?"post":"mid":"pre"},o.adnalyzers.BrightcoveAds.prototype.getAdTitle=function(){return this.ads.adsManager&&this.ads.adsManager.getCurrentAd()?this.ads.adsManager.getCurrentAd().getTitle():null},o.adnalyzers.BrightcoveAds.prototype.getAdPlayerVersion=function(){return this.ads.version&&google&&google.ima?"bcove-ima "+this.ads.version+" / IMA"+google.ima.VERSION:this.ads.getVersion?"bcove-fw "+this.ads.getVersion():"UNKNOWN"},o.adnalyzers.BrightcoveAds.prototype.registerVideojs=function(){try{this.registerListeners()}catch(e){o.error(e)}},o.adnalyzers.BrightcoveAds.prototype.registerListeners=function(){try{this.enableAdBufferMonitor(),o.utils.listenAllEvents(this.plugin.player,[null,"ima3-ready","ima3error","ima3-ad-error","ima3-started","ima3-complete","ima3-paused","ima3-resumed","ads-request","ads-load","ads-ad-started","ads-ad-ended","ads-pause","ads-play","ads-click","ads-pod-started","ads-pod-ended","ads-allpods-completed"],function(e){o.debug("Event: BcoveAds > "+e.type)}),this.plugin.player.ima3?this.registerIMA():this.plugin.player.FreeWheelPlugin&&this.registerFW()}catch(e){o.error(e)}},o.adnalyzers.BrightcoveAds.prototype.registerIMA=function(){try{var e=this;this.plugin.player.on("ima3-started",function(t){try{e.startJoinAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("ima3-paused",function(t){try{e.pauseAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("ima3-resumed",function(t){try{e.resumeAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("ima3-complete",function(t){try{e.endedAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("ima3-skipped",function(t){try{e.skipAdHandler()}catch(e){o.error(e)}})}catch(e){o.error(e)}},o.adnalyzers.BrightcoveAds.prototype.registerFW=function(){try{var e=this;this.plugin.player.on("ads-ad-started",function(t){try{e.startJoinAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("ads-pause",function(t){try{e.pauseAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("ads-play",function(t){try{e.resumeAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("ads-ad-ended",function(t){try{e.endedAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("ads-click",function(t){try{e.clickAdHandler(t.target.baseURI)}catch(e){o.error(e)}})}catch(e){o.error(e)}}),"undefined"!=typeof o&&(o.adnalyzers.OnceUX=function(e,t){try{this.adnalyzerVersion="5.3.0-onceux",this.startMonitoring(e,e.player.onceux)}catch(e){o.error(e)}},o.adnalyzers.OnceUX.prototype=new o.adnalyzers.Generic,o.adnalyzers.OnceUX.prototype.getAdResource=function(){return this.ads.timeline.contenturi},o.adnalyzers.OnceUX.prototype.getMediaPlayhead=function(){return this.plugin.player.ads.snapshot&&this.plugin.player.ads.snapshot.currentTime?this.plugin.player.ads.snapshot.currentTime:null},o.adnalyzers.OnceUX.prototype.getAdPlayhead=function(){return this.ads.currentTime()},o.adnalyzers.OnceUX.prototype.getAdDuration=function(){return this.ads.duration()},o.adnalyzers.OnceUX.prototype.registerVideojs=function(){try{this.registerListeners()}catch(e){o.error(e)}},o.adnalyzers.OnceUX.prototype.registerListeners=function(){try{o.utils.listenAllEvents(this.plugin.player,[null,"onceux-ads-complete","onceux-adroll-start","onceux-adroll-complete","onceux-linearad-start","onceux-linearad-impression","onceux-linearad-complete","onceux-linearad-skipped","onceux-linearad-pause","onceux-linearad-resume","onceux-companionad-creativeView"],function(e){o.debug("Event: OUX > "+e.type)}),this.enableAdBufferMonitor();var e=this;this.plugin.player.on("onceux-linearad-start",function(t){try{e.plugin.sendIgnoringAd&&(e.plugin.sendIgnoringAd=!1,e.plugin.viewManager.isShowingAd=!1,o.noticeRequest("Converting ignoringAds to propper AdStart")),e.startJoinAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("onceux-linearad-pause",function(t){try{e.pauseAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("onceux-linearad-resume",function(t){try{e.resumeAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("onceux-linearad-complete",function(t){try{e.endedAdHandler()}catch(e){o.error(e)}}),this.plugin.player.on("onceux-linearad-skipped",function(t){try{e.skipAdHandler()}catch(e){o.error(e)}})}catch(e){o.error(e)}}),i("undefined"!=typeof o?o:window.$YB)}).call(e,void 0,void 0,void 0,void 0,function(e){t.exports=e})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[119]);
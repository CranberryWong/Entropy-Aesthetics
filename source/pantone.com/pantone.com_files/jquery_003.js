(function(n){var t=navigator.userAgent.toLowerCase().indexOf("msie 6")!=-1;jQuery.fn.megamenu=function(r){r=jQuery.extend({wrapperDiv:jQuery("#hdr"),activate_action:"touchend mouseenter",deactivate_action:"touchend mouseleave",show_method:"simple",hide_method:"simple",justify:"left",enable_js_shadow:!1,shadow_size:3,mm_timeout:250,rows_Per_Column:0},r);var f=this,u;r.activate_action=="click"&&(r.mm_timeout=0);f.children("li").each(function(){var i,u;jQuery(this).addClass("mm-item");jQuery(".mm-item").css({float:r.justify});jQuery(this).find("div:first").addClass("mm-item-content");jQuery(this).find("a:first").addClass("mm-item-link");i=jQuery(this).find(".mm-item-content");u=jQuery(this).find(".mm-item-link");i.wrapInner('<div class="mm-content-base"><\/div>');r.enable_js_shadow==!0&&i.append('<div class="mm-js-shadow"><\/div>');var e=0,o=function(n,o){var s=o.find("div.mm-item-content");clearTimeout(e);e=setTimeout(function(){var e,h;if(n.parents(".mm-menucol").length&&n.parents(".mm-menucol").addClass("active"),n.addClass("mm-item-link-hover"),s.css({right:"auto",left:"auto"}),r.justify=="left"){var c=r.wrapperDiv.offset().left+r.wrapperDiv.outerWidth(),a=f.offset().left+f.outerWidth(),l=u.offset().left+i.outerWidth()-5;l>=c&&s.css({right:"0px"})}else r.justify=="right"&&(e=f.offset().left,h=u.offset().left-s.outerWidth()+u.outerWidth()+5,h<=e?s.css({left:e+2+"px"}):s.css({left:h+"px"}));r.enable_js_shadow==!0&&(s.find(".mm-js-shadow").height(s.height()),s.find(".mm-js-shadow").width(s.width()),s.find(".mm-js-shadow").css({top:r.shadow_size+(t?2:0)+"px",left:r.shadow_size+(t?2:0)+"px",opacity:.5}));switch(r.show_method){case"simple":s.show();o.addClass("active");break;case"slideDown":s.height("auto");o.addClass("active");break;case"fadeIn":s.fadeTo("fast",1);o.addClass("active");break;default:s.each(r.show_method);o.addClass("active")}},r.mm_timeout)},s=function(n,t){var i=t.find("div.mm-item-content");switch(r.hide_method){case"simple":n.removeClass("mm-item-link-hover");t.removeClass("active");break;case"slideUp":i.length?i.slideUp("fast",function(){n.removeClass("mm-item-link-hover");t.removeClass("active")}):(n.removeClass("mm-item-link-hover"),t.removeClass("active"));break;case"fadeOut":i.fadeOut("fast",function(){n.removeClass("mm-item-link-hover");t.removeClass("active")});break;default:n.removeClass("mm-item-link-hover");t.removeClass("active")}i.length<1&&n.removeClass("mm-item-link-hover");n.parents(".mm-menucol").length&&n.parents(".mm-menucol").removeClass("active")};jQuery(this).on(r.activate_action,function(t){if(t.stopPropagation(),(t.type=="mouseenter"||t.type=="mouseleave")&&document.documentElement.clientWidth<1075)return!1;var i=n(t.target).closest("a.mm-item-link");if(Modernizr.touchevents)Modernizr.touchevents&&!window.dragging&&jQuery(this).addClass("active");else return i.parents(".mm-menucol").length&&i.parents(".mm-menucol").hasClass("active")?(s(i,jQuery(this)),!1):(o(i,jQuery(this)),!1)});if(r.deactivate_action!=r.activate_action)jQuery(this).on(r.deactivate_action,function(t){if(t.stopPropagation(),(t.type=="mouseenter"||t.type=="mouseleave")&&document.documentElement.clientWidth<1075)return!1;clearTimeout(e);var i=n(t.target).closest("a.mm-item-link");if(!Modernizr.touchevents)return i.parents(".mm-menucol").length&&i.parents(".mm-menucol").hasClass("active")==!1?(o(i,jQuery(this)),!1):(s(i,jQuery(this)),!1)})});n.PANTONE.Navigation={initMainMenu:function(){var t=this;u=f.first().parents("#main-menu");t.activatePageCategory();n(document).on("click",function(i){if(u.is(i.target)||u.has(i.target).length!==0){if(n(i.target).is("a")&&n(i.target).attr("href")!="javascript:void(0)")return i.preventDefault(),$parentUL=n(i.target).parents("ul").first(),$oldLoading=u.find("li.loading"),$oldLoading.length&&$oldLoading.removeClass("loading"),n(i.target).parents("li").first().addClass("loading").transitionend(function(){window.location.href=n(i.target).attr("href")}),!1}else t.deactivate()});u.find(".header-item, .mm-item-link").each(function(){$el=n(this);var i=$el.text(),r=n(".mobileNav");if($el.attr("data-text",i),$el.next().is(".menu-wrapper")||$el.next().is(".mm-menu"))$el.on("click touchend",function(){if(!window.dragging)return n(this).parent("li").hasClass("active")?t.deactivate(n(this)):(t.activate(n(this)),!1)})});u.find("a").each(function(){var i=n(this),r=t.appendGoogleTagToLink(i.attr("href"),!1);i.attr("href",r)});t.createColumns();t.bindNoChildrenClass();t.bindMobileSiteSelect();t.apendSearchIcon()},apendSearchIcon:function(){var t=n('<li><a href="javascript:void(0)" class="mobile-nav-search" ><i class="fa fa-search" aria-hidden="true">');u.append(t);u.on("click",function(n){var i=u.find("i.fa.fa-search");i.is(n.target)?(u.removeClass("on"),t.hasClass("active")?t.removeClass("active"):t.addClass("active")):t.removeClass("active")})},bindMobileSiteSelect:function(){var i=this,t=n("ul#siteDropDown"),r=t.find("ul.globalSites");t.find("li a.siteTitle").on("click",function(){if(!window.dragging){i.deactivate();var f=u.parents("header#hdr").first(),e=f.scrollTop()-f.offset().top+n(this).offset().top,o=function(n){TweenLite.to(f,.5,{scrollTo:{y:n}})};t.hasClass("active")?t.removeClass("active"):t.addClass("active");r.transitionend(function(){o(e)})}})},bindNoChildrenClass:function(){u.children("li").each(function(){n(this).children(".menu-wrapper").length||n(this).addClass("child-less")});u.find(".megamenu").each(function(){var i=n(this),t=i.children("li");t.length&&t.each(function(){var t=n(this);t.find("li").length||t.addClass("childless")})})},addShopAll:function(){},activatePageCategory:function(){var i=u.parent(".hdrNav").data("navcategoryid"),t;i!=="undefined"&&(t=u.find(".header-item").filter(function(){return n(this).data("navcategoryid")===i}));t.length&&t.parent().addClass("current")},createColumns:function(){var i=this,t=u.find("li.nav_Shop_all");u.find(".mm-menucol").each(function(){if($Col=n(this),$colWrapper=$Col.parent(),colCount=1,wrapAndAppend=function(t){var i=n("<ul/>",{});t=t.detach().appendTo($colWrapper).wrapAll('<div class="mm-menucol">');t.wrapAll(i)},n(this).children("ul").each(function(){var o,f,u;$ul=n(this);var i=$ul.children("li"),e=i.filter(".colSubHeader"),s=e.length?!0:!1;if(s!=!0||$Col.parents("li").is(t))if(r.rows_Per_Column>0)for(f=r.rows_Per_Column;f<i.length;f+=r.rows_Per_Column)u=i.slice(f,f+r.rows_Per_Column),wrapAndAppend(u),colCount+=1;else $Col.parents("li").is(t)||(u=i.slice(Math.ceil(i.length/2),i.length),wrapAndAppend(u),colCount+=1);else o=i.index(e),u=i.slice(o),wrapAndAppend(u),colCount+=1}),colCount==1){var u=n("<div/>",{"class":"mm-menucol"});u.appendTo($colWrapper)}$Col.parents("li").is(t)||i.ShowPromos($colWrapper)})},appendGoogleTagToLink:function(n){hash=n.substring(n.indexOf("#"))},ShowPromos:function(t){rndQty=n.PANTONE.miniMegaNav.images.length;i=Math.floor(Math.random()*rndQty);imgURL="/images/menu/"+n.PANTONE.miniMegaNav.images[i].imageFile;sAppend=n.PANTONE.miniMegaNav.images[i].hotlink.indexOf("?")>-1?"&":"?";$lnkpromoImg='<div class="navMenuPromo" style="height: 100px !important; width: 450px !important; bottom: 4px !important; left: 0 !important; background: url('+imgURL+') no-repeat top left !important;"><a class="navMenuPromoLink" href="'+n.PANTONE.miniMegaNav.images[i].hotlink+'"><\/a><\/div>';$footerWrapper=n('<div class="mm-menufooter"/>').append($lnkpromoImg);t.find(".nav-promotion").length&&t.find(".nav-promotion").prependTo($footerWrapper);t.append($footerWrapper)},activate:function(t){var h=n(".mobileNav"),c=t.offset().top,i=u.parents("header#hdr").first(),a,o,s,f;u.hasClass("on")||u.addClass("on");var r=u.children(".active").first(),e=t.parent("li"),l=function(){r.removeClass("active")};h.length?t.parents("ul").first().is(h)?(f=r.length&&r.offset().top<t.offset().top?r.find(".menu-wrapper").height():0,a=i.scrollTop()-i.offset().top+t.offset().top-f,c>0&&(l(),TweenLite.to(i,.5,{scrollTo:{y:a}})),e.addClass("active")):(o=function(n){var r=n!=undefined?i.scrollTop()-i.offset().top+t.offset().top-n:i.scrollTop()-i.offset().top+t.offset().top;c>0&&TweenLite.to(i,.5,{scrollTo:{y:r}});e.addClass("active")},t.parents("ul").first().children(".active").length?(s=t.parents("ul").first().children(".active"),f=s.offset().top<t.offset().top?s.next(".menu-wrapper").height():0,t.parents("ul").first().children(".active").first().removeClass("active").transitionend(function(){o(f)})):o()):(l(),e.addClass("active"))},deactivate:function(t){var r=n(".mobileNav"),i=u.parents("header#hdr").first(),e,o,f;if(r.length)return t!==undefined?t.parents("ul").first().is(r)?(f=i.scrollTop()-i.offset().top,t.parent("li").removeClass("active"),r.length&&TweenLite.to(i,.5,{scrollTo:{y:0}})):(e=t.parent("li"),o=e.parents("li.active").first(),e.removeClass("active"),f=i.scrollTop()-i.offset().top+o.offset().top,TweenLite.to(i,.5,{scrollTo:{y:f}})):u.hasClass("on")&&u.removeClass("on"),!1;u.removeClass("on").find("li.active").removeClass("active")},cloneToShopAll:function(){var f=this,r=u.find("li#nav_Shop"),e=r.find("li.nav_Shop_all"),t=e.find(".mm-menucol > ul"),i=[];r.find("li:not(.nav_Shop_all) .mm-menucol li").each(function(t,r){var e=n(r).find("a"),o=e.text().trim(),f,u;f=n(i).filter(function(){return n(this).find("a").text().trim()===o});f.length===0&&(u=n(r).clone(),u.attr("class","").children("ul").remove(),i.push(u))});t.find("li").each(function(){jQuery.isEmptyObject(n(this))&&n(this).remove()});n(i).each(function(){var i=n(this),r=i.find("a"),u;u=f.appendGoogleTagToLink(r.attr("href"),!0);r.attr("href",u);i.appendTo(t)});t.sort(function(t,i){return n("a",t).text()>n("a",i).text()}).appendTo(t)},bindSticky:function(){var n=u.get(0),i=n.getBoundingClientRect(),r=document.createElement("div"),t;r.style.width=i.width+"px";r.style.height=i.height+"px";t=!1;window.addEventListener("scroll",function(){window.pageYOffset>=i.top&&!t?(n.classList.add("sticky"),n.parentNode.insertBefore(r,n),t=!0):window.pageYOffset<i.top&&t&&(n.classList.remove("sticky"),n.parentNode.removeChild(r),t=!1)})}};f.parent().is(".menu-wrapper")&&n.PANTONE.Navigation.initMainMenu();this.find(">li:last").after('<li class="clear-fix"><\/li>');this.show()}})(jQuery);
!function(t){"function"==typeof define&&define.amd?define(t):window.purl=t()}(function(){function t(t,r){for(var e=decodeURI(t),a=g[r?"strict":"loose"].exec(e),n={attr:{},param:{},seg:{}},s=14;s--;)n.attr[d[s]]=a[s]||"";return n.param.query=i(n.attr.query),n.param.fragment=i(n.attr.fragment),n.seg.path=n.attr.path.replace(/^\/+|\/+$/g,"").split("/"),n.seg.fragment=n.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),n.attr.base=n.attr.host?(n.attr.protocol?n.attr.protocol+"://"+n.attr.host:n.attr.host)+(n.attr.port?":"+n.attr.port:""):"",n}function r(t){var r=t.tagName;return"undefined"!=typeof r?p[r.toLowerCase()]:r}function e(t,r){if(0===t[r].length)return t[r]={};var e={};for(var a in t[r])e[a]=t[r][a];return t[r]=e,e}function a(t,r,n,i){var s=t.shift();if(s){var o=r[n]=r[n]||[];"]"==s?u(o)?""!==i&&o.push(i):"object"==typeof o?o[h(o).length]=i:o=r[n]=[r[n],i]:~s.indexOf("]")?(s=s.substr(0,s.length-1),!m.test(s)&&u(o)&&(o=e(r,n)),a(t,o,s,i)):(!m.test(s)&&u(o)&&(o=e(r,n)),a(t,o,s,i))}else u(r[n])?r[n].push(i):"object"==typeof r[n]?r[n]=i:"undefined"==typeof r[n]?r[n]=i:r[n]=[r[n],i]}function n(t,r,e){if(~r.indexOf("]")){var n=r.split("[");a(n,t,"base",e)}else{if(!m.test(r)&&u(t.base)){var i={};for(var o in t.base)i[o]=t.base[o];t.base=i}""!==r&&s(t.base,r,e)}return t}function i(t){return f(String(t).split(/&|;/),function(t,r){try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}var e=r.indexOf("="),a=o(r),i=r.substr(0,a||e),s=r.substr(a||e,r.length);return s=s.substr(s.indexOf("=")+1,s.length),""===i&&(i=r,s=""),n(t,i,s)},{base:{}}).base}function s(t,r,e){var a=t[r];"undefined"==typeof a?t[r]=e:u(a)?a.push(e):t[r]=[a,e]}function o(t){for(var r,e,a=t.length,n=0;n<a;++n)if(e=t[n],"]"==e&&(r=!1),"["==e&&(r=!0),"="==e&&!r)return n}function f(t,r){for(var e=0,a=t.length>>0,n=arguments[2];e<a;)e in t&&(n=r.call(void 0,n,t[e],e,t)),++e;return n}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r}function c(r,e){return 1===arguments.length&&r===!0&&(e=!0,r=void 0),e=e||!1,r=r||window.location.toString(),{data:t(r,e),attr:function(t){return t=l[t]||t,"undefined"!=typeof t?this.data.attr[t]:this.data.attr},param:function(t){return"undefined"!=typeof t?this.data.param.query[t]:this.data.param.query},fparam:function(t){return"undefined"!=typeof t?this.data.param.fragment[t]:this.data.param.fragment},segment:function(t){return"undefined"==typeof t?this.data.seg.path:(t=t<0?this.data.seg.path.length+t:t-1,this.data.seg.path[t])},fsegment:function(t){return"undefined"==typeof t?this.data.seg.fragment:(t=t<0?this.data.seg.fragment.length+t:t-1,this.data.seg.fragment[t])}}}var p={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},d=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],l={anchor:"fragment"},g={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},m=/^[0-9]+$/;return c.jQuery=function(t){null!=t&&(t.fn.url=function(e){var a="";return this.length&&(a=t(this).attr(r(this[0]))||""),c(a,e)},t.url=c)},c.jQuery(window.jQuery),c}),$(function(){if(""!=location.search){var t=$.url(location.href).param(),r=location.search.substring(1).split("&");/id=/.test(r)||($("a").each(function(){if(!/^(#|https?:|\/\/)/.test($(this).attr("href"))&&"selectable"!==$(this).parent().attr("class")&&!$(this).hasClass("pagination_button")&&!$(this).hasClass("js-link")){var r=$(this).url(),e=""==r.attr("query")?{}:r.param(),a=r.attr("path")+"?"+$.param($.extend(e,t));$(this).attr("href",a)}}),$("form").each(function(){if(!/^(#|https?:|\/\/)/.test($(this).attr("href"))){var r=$(this).url(),e=""==r.attr("query")?{}:r.param(),a=r.attr("path")+"?"+$.param($.extend(e,t));$(this).attr("action",a)}}))}});
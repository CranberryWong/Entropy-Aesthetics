/* Source and licensing information for the line(s) below can be found at https://www.macg.co/sites/all/modules/gsphere/plugins/js_communs/plugins.js. */
function $get(selector){return document.querySelector(selector)}
function $all(selector){return Array.prototype.slice.call(document.querySelectorAll(selector))}
function buildTOC_ul(selector){var levels=[document.createElement("div"),null,null];levels[0].setAttribute("id","sommaireTest");levels[0].className="hide";var lvl=0,c=0;$all(selector).forEach(function(el){if(!el.id)el.id='section_'+ ++c;var newLvl=(el.tagName=="H2"?1:el.tagName=="H3"?2:3);for(;lvl<newLvl;lvl++)levels[lvl].appendChild(levels[lvl+1]=document.createElement("ul"));lvl=newLvl;var li=document.createElement('li');li.innerHTML="<a href='#"+el.id+"' class='anchor'></a>";li.firstChild.innerHTML=el.innerHTML;levels[lvl].appendChild(li)});levels[lvl].innerHTML+="<li><a href='#section_note' class='anchor'>Note</a></li>";return levels[0]}
function addTOC(contentElement,before,tocClass){if(before===undefined)before=contentElement.firstChild;var prefix="",c=contentElement.className;if(c)prefix="."+(c.indexOf(" ")==-1?c:c.substr(0,c.indexOf(" ")))+" ";var selector=prefix+".field .field-items .field-item h2, "+prefix+".field .field-items .field-item h3, "+prefix+".field .field-items .field-item h4",hasTitle=contentElement.querySelectorAll("h1, h2, h3, h4, h5, h6");if(hasTitle.length!==0){var toc=document.createElement("div");toc.className=tocClass||"sidebox";toc.setAttribute("id","sommaireButton");var h=document.createElement("a");h.className="sommaireButton";var t=document.createTextNode("Sommaire");h.appendChild(t);toc.appendChild(h);toc.appendChild(buildTOC_ul(selector));contentElement.insertBefore(toc,before)}};var content=$get(".node-type-labo main #node-content");if(content!==null)addTOC(content,content.firstChild.nextSibling.nextSibling);if(document.getElementById('sommaireButton')!==null)document.getElementById('sommaireButton').addEventListener('click',function(){var element=document.getElementById('sommaireTest');if(element.classList.contains('hide')){element.classList.add('show');element.classList.remove('hide')}else{element.classList.add('hide');element.classList.remove('show')}});'use strict'
function Lightbox(){var _const_name='jslghtbx',_const_class_prefix=_const_name,_const_id_prefix=_const_name,_const_dataattr='data-'+_const_name,CTX=this,isIE8=false,isIE9=false,body=document.getElementsByTagName('body')[0],template='<div class="'+_const_name+'-contentwrapper" id="'+_const_name+'-contentwrapper" ></div>',imgRatio=false,currGroup=false,currThumbnail=false,currImage={},currImages=[],isOpen=false,animationEl,animationInt,animationChildren=[],animationTimeout,nextBtn=false,prevBtn=false,maxWidth,maxHeight,newImgWidth,newImgHeight;CTX.opt={};CTX.box=false;CTX.wrapper=false;CTX.thumbnails=[]
function getHeight(){return window.innerHeight||document.documentElement.offsetHeight}
function getWidth(){return window.innerWidth||document.documentElement.offsetWidth}
function addEvent(el,e,callback,capture){if(el.addEventListener){el.addEventListener(e,callback,capture||false)}else if(el.attachEvent)el.attachEvent('on'+e,callback)}
function hasClass(el,className){if(!el||!className)return;return(new RegExp('(^|\\s)'+className+'(\\s|$)').test(el.className))}
function removeClass(el,className){if(!el||!className)return;el.className=el.className.replace(new RegExp('(?:^|\\s)'+className+'(?!\\S)'),'');return el}
function addClass(el,className){if(!el||!className)return;if(!hasClass(el,className))el.className+=' '+className;return el}
function isset(obj){return typeof obj!=='undefined'}
function getAttr(obj,attr){if(!obj||!isset(obj))return false;var ret;if(obj.getAttribute){ret=obj.getAttribute(attr)}else if(obj.getAttributeNode)ret=obj.getAttributeNode(attr).value;if(isset(ret)&&ret!=='')return ret;return false}
function hasAttr(obj,attr){if(!obj||!isset(obj))return false;var ret;if(obj.getAttribute){ret=obj.getAttribute(attr)}else if(obj.getAttributeNode)ret=obj.getAttributeNode(attr).value;return typeof ret==='string'}
function clckHlpr(i){addEvent(i,'click',function(e){stopPropagation(e);preventDefault(e);currGroup=getAttr(i,_const_dataattr+'-group')||false;currThumbnail=i;openBox(i,false,false,false)},false)}
function stopPropagation(e){if(e.stopPropagation){e.stopPropagation()}else e.returnValue=false}
function preventDefault(e){if(e.preventDefault){e.preventDefault()}else e.returnValue=false}
function getByGroup(group){var arr=[];for(var i=0;i<CTX.thumbnails.length;i++)if(getAttr(CTX.thumbnails[i],_const_dataattr+'-group')===group)arr.push(CTX.thumbnails[i]);return arr}
function getPos(thumbnail,group){var arr=getByGroup(group);for(var i=0;i<arr.length;i++)if(getAttr(thumbnail,'src')===getAttr(arr[i],'src')&&getAttr(thumbnail,_const_dataattr+'-index')===getAttr(arr[i],_const_dataattr+'-index')&&getAttr(thumbnail,_const_dataattr)===getAttr(arr[i],_const_dataattr))return i}
function preload(){if(!currGroup)return;var prev=new Image(),next=new Image(),pos=getPos(currThumbnail,currGroup);if(pos===(currImages.length-1)){prev.src=getAttr(currImages[currImages.length-1],_const_dataattr)||currImages[currImages.length-1].src;next.src=getAttr(currImages[0].src,_const_dataattr)||currImages[0].src}else if(pos===0){prev.src=getAttr(currImages[currImages.length-1],_const_dataattr)||currImages[currImages.length-1].src;next.src=getAttr(currImages[1],_const_dataattr)||currImages[1].src}else{prev.src=getAttr(currImages[pos-1],_const_dataattr)||currImages[pos-1].src;next.src=getAttr(currImages[pos+1],_const_dataattr)||currImages[pos+1].src}}
function startAnimation(){if(isIE8)return;stopAnimation();var fnc=function(){addClass(CTX.box,_const_class_prefix+'-loading');if(!isIE9&&typeof CTX.opt.loadingAnimation==='number'){var index=0;animationInt=setInterval(function(){addClass(animationChildren[index],_const_class_prefix+'-active');setTimeout(function(){removeClass(animationChildren[index],_const_class_prefix+'-active')},CTX.opt.loadingAnimation);index=index>=animationChildren.length?0:index+=1},CTX.opt.loadingAnimation)}};animationTimeout=setTimeout(fnc,500)}
function stopAnimation(){if(isIE8)return;removeClass(CTX.box,_const_class_prefix+'-loading');if(!isIE9&&typeof CTX.opt.loadingAnimation!=='string'&&CTX.opt.loadingAnimation){clearInterval(animationInt);for(var i=0;i<animationChildren.length;i++)removeClass(animationChildren[i],_const_class_prefix+'-active')}}
function initControls(){if(!nextBtn){nextBtn=document.createElement('span');addClass(nextBtn,_const_class_prefix+'-next');if(CTX.opt.nextImg){var nextBtnImg=document.createElement('img');nextBtnImg.setAttribute('src',CTX.opt.nextImg);nextBtn.appendChild(nextBtnImg)}else addClass(nextBtn,_const_class_prefix+'-no-img');addEvent(nextBtn,'click',function(e){stopPropagation(e);CTX.next()},false);CTX.box.appendChild(nextBtn)};addClass(nextBtn,_const_class_prefix+'-active');if(!prevBtn){prevBtn=document.createElement('span');addClass(prevBtn,_const_class_prefix+'-prev');if(CTX.opt.prevImg){var prevBtnImg=document.createElement('img');prevBtnImg.setAttribute('src',CTX.opt.prevImg);prevBtn.appendChild(prevBtnImg)}else addClass(prevBtn,_const_class_prefix+'-no-img');addEvent(prevBtn,'click',function(e){stopPropagation(e);CTX.prev()},false);CTX.box.appendChild(prevBtn)};addClass(prevBtn,_const_class_prefix+'-active')}
function repositionControls(){if(CTX.opt.responsive&&nextBtn&&prevBtn){var btnTop=(getHeight()/2)-(nextBtn.offsetHeight/2);nextBtn.style.top=btnTop+'px';prevBtn.style.top=btnTop+'px'}}
function setOpt(opt){if(!opt)opt={}
function setTrueDef(val){return typeof val==='boolean'?val:true};CTX.opt={boxId:opt.boxId||false,controls:setTrueDef(opt.controls),dimensions:setTrueDef(opt.dimensions),captions:setTrueDef(opt.captions),prevImg:typeof opt.prevImg==='string'?opt.prevImg:false,nextImg:typeof opt.nextImg==='string'?opt.nextImg:false,hideCloseBtn:opt.hideCloseBtn||false,closeOnClick:typeof opt.closeOnClick==='boolean'?opt.closeOnClick:true,nextOnClick:setTrueDef(opt.nextOnClick),loadingAnimation:opt.loadingAnimation===undefined?true:opt.loadingAnimation,animElCount:opt.animElCount||4,preload:setTrueDef(opt.preload),carousel:setTrueDef(opt.carousel),animation:typeof opt.animation==='number'||opt.animation===false?opt.animation:400,responsive:setTrueDef(opt.responsive),maxImgSize:opt.maxImgSize||0.8,keyControls:setTrueDef(opt.keyControls),hideOverflow:opt.hideOverflow||true,onopen:opt.onopen||false,onclose:opt.onclose||false,onload:opt.onload||false,onresize:opt.onresize||false,onloaderror:opt.onloaderror||false,onimageclick:typeof opt.onimageclick==='function'?opt.onimageclick:false};if(CTX.opt.boxId){CTX.box=document.getElementById(CTX.opt.boxId);var classes=CTX.box.getAttribute('class');if(classes.search(_const_class_prefix+' ')<0)CTX.box.setAttribute('class',classes+' '+_const_class_prefix)}else if(!CTX.box){var newEl=document.getElementById(_const_id_prefix);if(!newEl)newEl=document.createElement('div');newEl.setAttribute('id',_const_id_prefix);newEl.setAttribute('class',_const_class_prefix);CTX.box=newEl;body.appendChild(CTX.box)};CTX.box.innerHTML=template;if(isIE8)addClass(CTX.box,_const_class_prefix+'-ie8');CTX.wrapper=document.getElementById(_const_id_prefix+'-contentwrapper');if(!CTX.opt.hideCloseBtn){var closeBtn=document.createElement('span');closeBtn.setAttribute('id',_const_id_prefix+'-close');closeBtn.setAttribute('class',_const_class_prefix+'-close');closeBtn.innerHTML='X';CTX.box.appendChild(closeBtn);addEvent(closeBtn,'click',function(e){stopPropagation(e);CTX.close()},false)};if(!isIE8&&CTX.opt.closeOnClick)addEvent(CTX.box,'click',function(e){stopPropagation(e);CTX.close()},false);if(typeof CTX.opt.loadingAnimation==='string'){animationEl=document.createElement('img');animationEl.setAttribute('src',CTX.opt.loadingAnimation);addClass(animationEl,_const_class_prefix+'-loading-animation');CTX.box.appendChild(animationEl)}else if(CTX.opt.loadingAnimation){CTX.opt.loadingAnimation=typeof CTX.opt.loadingAnimation==='number'?CTX.opt.loadingAnimation:200;animationEl=document.createElement('div');addClass(animationEl,_const_class_prefix+'-loading-animation');var i=0;while(i<CTX.opt.animElCount){animationChildren.push(animationEl.appendChild(document.createElement('span')));i++};CTX.box.appendChild(animationEl)};if(CTX.opt.responsive){addEvent(window,'resize',function(){CTX.resize()},false);addClass(CTX.box,_const_class_prefix+'-nooverflow')}else removeClass(CTX.box,_const_class_prefix+'-nooverflow');if(CTX.opt.keyControls)addEvent(document,'keydown',function(e){if(isOpen){stopPropagation(e);if(e.keyCode===39){CTX.next()}else if(e.keyCode===37){CTX.prev()}else if(e.keyCode===27)CTX.close()}},false)}
function openBox(el,group,cb,event,caption){if(!el&&!group)return false;currGroup=group||currGroup||getAttr(el,_const_dataattr+'-group');if(currGroup){currImages=getByGroup(currGroup);if(typeof el==='boolean'&&!el)el=currImages[0]};currImage.img=new Image();currThumbnail=el;var src;if(typeof el==='string'){src=el}else if(getAttr(el,_const_dataattr)){src=getAttr(el,_const_dataattr)}else src=getAttr(el,'src');imgRatio=false;if(!isOpen){if(typeof CTX.opt.animation==='number')addClass(currImage.img,_const_class_prefix+'-animate-transition '+_const_class_prefix+'-animate-init');isOpen=true;if(CTX.opt.onopen)CTX.opt.onopen(currImage)};if(!CTX.opt||!isset(CTX.opt.hideOverflow)||CTX.opt.hideOverflow)body.setAttribute('style','overflow: hidden');CTX.box.setAttribute('style','padding-top: 0');CTX.wrapper.innerHTML='';CTX.wrapper.appendChild(currImage.img);if(CTX.opt.animation)addClass(CTX.wrapper,_const_class_prefix+'-animate');var captionText=getAttr(el,_const_dataattr+'-caption');if(captionText&&CTX.opt.captions){var caption=document.createElement('p');caption.setAttribute('class',_const_class_prefix+'-caption');caption.innerHTML=captionText;CTX.wrapper.appendChild(caption)};addClass(CTX.box,_const_class_prefix+'-active');if(isIE8)addClass(CTX.wrapper,_const_class_prefix+'-active');if(CTX.opt.controls&&currImages.length>1){initControls();repositionControls()};currImage.img.onerror=function(imageErrorEvent){if(CTX.opt.onloaderror){imageErrorEvent._happenedWhile=event?event:false;CTX.opt.onloaderror(imageErrorEvent)}};currImage.img.onload=function(){currImage.originalWidth=this.naturalWidth||this.width;currImage.originalHeight=this.naturalHeight||this.height;if(isIE8||isIE9){var dummyImg=new Image();dummyImg.setAttribute('src',src);currImage.originalWidth=dummyImg.width;currImage.originalHeight=dummyImg.height};var checkClassInt=setInterval(function(){if(hasClass(CTX.box,_const_class_prefix+'-active')){addClass(CTX.wrapper,_const_class_prefix+'-wrapper-active');if(typeof CTX.opt.animation==='number')addClass(currImage.img,_const_class_prefix+'-animate-transition');if(cb)cb();stopAnimation();clearTimeout(animationTimeout);if(CTX.opt.preload)preload();if(CTX.opt.nextOnClick){addClass(currImage.img,_const_class_prefix+'-next-on-click');addEvent(currImage.img,'click',function(e){stopPropagation(e);CTX.next()},false)};if(CTX.opt.onimageclick)addEvent(currImage.img,'click',function(e){stopPropagation(e);CTX.opt.onimageclick(currImage)},false);if(CTX.opt.onload)CTX.opt.onload(event);clearInterval(checkClassInt);CTX.resize()}},10)};currImage.img.setAttribute('src',src);startAnimation()};CTX.load=function(opt){if(navigator.appVersion.indexOf('MSIE 8')>0)isIE8=true;if(navigator.appVersion.indexOf('MSIE 9')>0)isIE9=true;setOpt(opt);var arr=document.querySelectorAll('['+_const_dataattr+']');for(var i=0;i<arr.length;i++)if(hasAttr(arr[i],_const_dataattr)){arr[i].setAttribute(_const_dataattr+'-index',i);CTX.thumbnails.push(arr[i]);clckHlpr(arr[i])}};CTX.open=function(el,group){if(el&&group)group=false;var caption=el.nextSibling;openBox(el,group,false,false,caption)};CTX.resize=function(){if(!currImage.img)return;maxWidth=getWidth();maxHeight=getHeight();var boxWidth=CTX.box.offsetWidth,boxHeight=CTX.box.offsetHeight;if(!imgRatio&&currImage.img&&currImage.img.offsetWidth&&currImage.img.offsetHeight)imgRatio=currImage.img.offsetWidth/currImage.img.offsetHeight;if(Math.floor(boxWidth/imgRatio)>boxHeight){newImgWidth=boxHeight*imgRatio;newImgHeight=boxHeight}else{newImgWidth=boxWidth;newImgHeight=boxWidth/imgRatio};newImgWidth=Math.floor(newImgWidth*CTX.opt.maxImgSize);newImgHeight=Math.floor(newImgHeight*CTX.opt.maxImgSize);if(CTX.opt.dimensions&&newImgHeight>currImage.originalHeight||CTX.opt.dimensions&&newImgWidth>currImage.originalWidth){newImgHeight=currImage.originalHeight;newImgWidth=currImage.originalWidth};currImage.img.setAttribute('width',newImgWidth);currImage.img.setAttribute('height',newImgHeight);currImage.img.setAttribute('style','margin-top:'+((getHeight()-newImgHeight)/2)+'px');setTimeout(repositionControls,200);if(CTX.opt.onresize)CTX.opt.onresize(currImage)};CTX.next=function(){if(!currGroup)return;var pos=getPos(currThumbnail,currGroup)+1;if(currImages[pos]){currThumbnail=currImages[pos]}else if(CTX.opt.carousel){currThumbnail=currImages[0]}else return;if(typeof CTX.opt.animation==='number'){removeClass(currImage.img,_const_class_prefix+'-animating-next');setTimeout(function(){var cb=function(){setTimeout(function(){addClass(currImage.img,_const_class_prefix+'-animating-next')},CTX.opt.animation/2)};openBox(currThumbnail,false,cb,'next')},CTX.opt.animation/2)}else openBox(currThumbnail,false,false,'next')};CTX.prev=function(){if(!currGroup)return;var pos=getPos(currThumbnail,currGroup)-1;if(currImages[pos]){currThumbnail=currImages[pos]}else if(CTX.opt.carousel){currThumbnail=currImages[currImages.length-1]}else return;if(typeof CTX.opt.animation==='number'){removeClass(currImage.img,_const_class_prefix+'-animating-prev');setTimeout(function(){var cb=function(){setTimeout(function(){addClass(currImage.img,_const_class_prefix+'-animating-next')},CTX.opt.animation/2)};openBox(currThumbnail,false,cb,'prev')},CTX.opt.animation/2)}else openBox(currThumbnail,false,false,'prev')};CTX.close=function(){currGroup=false;currThumbnail=false;var _currImage=currImage;currImage={};currImages=[];isOpen=false;removeClass(CTX.box,_const_class_prefix+'-active');removeClass(CTX.wrapper,_const_class_prefix+'-wrapper-active');removeClass(nextBtn,_const_class_prefix+'-active');removeClass(prevBtn,_const_class_prefix+'-active');CTX.box.setAttribute('style','padding-top: 0px');stopAnimation();if(isIE8)CTX.box.setAttribute('style','display: none');if(!CTX.opt||!isset(CTX.opt.hideOverflow)||CTX.opt.hideOverflow)body.setAttribute('style','overflow: auto');if(CTX.opt.onclose)CTX.opt.onclose(_currImage)}};
/* Source and licensing information for the above line(s) can be found at https://www.macg.co/sites/all/modules/gsphere/plugins/js_communs/plugins.js. */
;/*})'"*/
